[ {
  "id" : "ParkerDotComMain-Parts",
  "stages" : [ {
    "type" : "javascript-index",
    "id" : "6m",
    "script" : "/* Part number character replacements for matching alternate characters\nTakes the original \"compressed part number\" (normalized, without special characters/spaces)\nand replaces specific characters to permit matching in cases where someone has transposed characters.\nThis code only handles complete replacements of single characters and does not take into account\nall the possible variations such as when there is a mixture of 1s, 0s etc and the user only makes\nan error on one of them.  These are considered edge cases and least likely to occur.\n\nWritten by Onix Networking\n\nReplaces the characters as follows:\n\nl for 1\nI for 1\ni for 1\n1 for i\n1 for I\n1 for l\no for 0\nO for 0\n0 for o\n0 for O\n\n*/\n\nvar partnum = doc.getFirstFieldValue(\"compressedPartNumber_s\"); // the original compressed part number\nvar newpart = \"\"; // where the additional variations will be stored\n\n\nvar newpartl=partnum.replace(/l/g , \"1\");\nvar newpartI=partnum.replace(/I/g , \"1\");\nvar newparti=partnum.replace(/i/g , \"1\");\nvar newpartonei=partnum.replace(/1/g , \"i\");\nvar newpartoneI=partnum.replace(/1/g , \"I\");\nvar newpartonel=partnum.replace(/1/g , \"l\");\nvar newparto=partnum.replace(/o/g , \"0\");\nvar newpartO=partnum.replace(/O/g , \"0\");\nvar newpartzeroo=partnum.replace(/0/g , \"o\");\nvar newpartzeroO=partnum.replace(/0/g , \"O\");\n\nif (newpartl!=partnum){\nnewpart = newpart + \",\" + newpartl;\n}\n\nif (newpartI!=partnum){\nnewpart = newpart + \",\" + newpartI;\n}\n\nif (newparti!=partnum){\nnewpart = newpart + \",\" + newparti;\n}\n\nif (newpartonei!=partnum){\nnewpart = newpart + \",\" + newpartonei;\n}\n\nif (newpartoneI!=partnum){\nnewpart = newpart + \",\" + newpartoneI;\n}\n\nif (newpartonel!=partnum){\nnewpart = newpart + \",\" + newpartonel;\n}\n\nif (newparto!=partnum){\nnewpart = newpart + \",\" + newparto;\n}\n\nif (newpartO!=partnum){\nnewpart = newpart + \",\" + newpartO;\n}\n\nif (newpartzeroo!=partnum){\nnewpart = newpart + \",\" + newpartzeroo;\n}\n\nif (newpartzeroO!=partnum){\nnewpart = newpart + \",\" + newpartzeroO;\n}\n\ndoc.setField(\"altpartnums_ss\",newpart); // stores the final list of alternate compressed part numbers\n\n\n\n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Javascript - replace characters in compressed part number",
    "condition" : "doc.hasField(\"compressedPartNumber_s\")",
    "secretSourceStageId" : "6m"
  }, {
    "type" : "javascript-index",
    "id" : "4ol",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n//  logger.info(\"**** Setting language on \" + id + \" ****\");\n   \t\n          var langname = \"English\" + \",\" + \"Français\" + \",\" + \"Deutsch\" + \",\" + \"Italiano\" + \",\" + \"Español\" + \",\" + \"Português\" + \",\" + \"中文\" + \",\" + \"繁體中文\" + \",\" + \"한국어\" + \",\" + \"日本語\" + \",\" + \"Russian\" + \",\" + \"Polski\"+ \",\" + \"suomi\" + \",\" + \"Norsk\" + \",\" + \"Svenska\" + \",\" + \"česky\" + \",\" + \"Danish\" + \",\" + \"Nederlands\" + \",\" + \"Türkçe\" + \",\" + \"Hungarian\" + \",\" + \"Thai\" + \",\" + \"Vietnamese\";  \n\n    var langcodes = \"EN\" + \",\" + \"FR\" + \",\" + \"DE\" + \",\" + \"IT\" + \",\" + \"ES\" + \",\" + \"PT\" + \",\" + \"ZH\" + \",\" + \"TW\" + \",\" + \"KO\" + \",\" + \"JP\" + \",\" + \"RU\" + \",\" + \"PL\"+ \",\" + \"FI\" + \",\" + \"NO\" + \",\" + \"SV\" + \",\" + \"CS\" + \",\" + \"DK\" + \",\" + \"NL\" + \",\" + \"TR\" + \",\" + \"HU\" + \",\" + \"TH\" + \",\" + \"VI\";\n    \n\t   doc.setField(\"languageName_ss\",langname);\n       doc.setField(\"languageCode_ss\",langcodes);\n       doc.setField(\"suggest_type_s\",\"standard\");\n\t   \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set Language Name (JS)",
    "secretSourceStageId" : "4ol"
  }, {
    "type" : "regex-extractor",
    "id" : "jm",
    "rules" : [ {
      "source" : [ "siteSection_ss" ],
      "target" : "siteSection_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryName_ss" ],
      "target" : "countryName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadType_ss" ],
      "target" : "cadType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadURL_ss" ],
      "target" : "cadURL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportType_ss" ],
      "target" : "supportType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageName_ss" ],
      "target" : "languageName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryId_ss" ],
      "target" : "countryId_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "language_is" ],
      "target" : "language_is",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivision_ss" ],
      "target" : "parkerDivision_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivisionName_ss" ],
      "target" : "parkerDivisionName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageCode_ss" ],
      "target" : "languageCode_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split Fields",
    "secretSourceStageId" : "jm"
  }, {
    "type" : "javascript-index",
    "id" : "tk",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n//  logger.info(\"**** Reconfiguring fields on \" + id + \" ****\");\n  \n  \tvar originalTitle = doc.getFirstFieldValue(\"title_t\");\n    \n\tvar trimmedSiteSections = \"\";\n\tvar trimmedSupportResourceType = \"\";\n\tvar trimmedSupportType = \"\";\n\tvar trimmedSiteSubSections = \"\";\n\tvar trimmedProductTypes = \"\";\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSection <start>\n\t\t**********************************/\n    var originalSiteSection = doc.getFieldValues(\"siteSection_ss\");\n    var newSiteSection = \"\";\n    \n\t\n    var arrayLength = originalSiteSection.length;\n    \n\t\n\tif (arrayLength >0){\n    for (var i = 0; i < arrayLength; i++)\n  {\n  \n  if (originalSiteSection[i] !=null && originalSiteSection[i] !=\"\"){\n  \n    \n    newSiteSection = newSiteSection + \",\" + originalSiteSection[i];\n    \n  }\n    \n    trimmedSiteSections = newSiteSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSection <end>\n\t\t\n\t\t\n\t\t\n\t\t/*********************************\n\t\tSplit and re-assemble supportResourceType <start>\n\t\t**********************************/\n\n    var originalSupportResourceType = doc.getFieldValues(\"supportResourceType_ss\");\n    var newSupportResourceType = \"\";\n    \n\tif (originalSupportResourceType!=null && originalSupportResourceType!=\"\"){\n\t\tvar arrayLength2 = originalSupportResourceType.length;\n    \n\t\n\t\tif (arrayLength2 > 0){ \n\t\t\tfor (var j = 0; j < arrayLength2; j++)\n\t\t\t{\n  \n\t\t\t\tif (originalSupportResourceType[j] !=null && originalSupportResourceType[j] !=\"\"){\n  \n\t\n\t\t\t\t\tnewSupportResourceType = newSupportResourceType + \",\" + originalSupportResourceType[j];\n    \n\t\t\t}\n    \n\t\t\ttrimmedSupportResourceType = newSupportResourceType.replace(/(^,)|(,$)/g, \"\");\n    \n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n    // Split and re-assemble supportResourceType <end>\n\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble supportType <start>\n\t\t**********************************/\n\n    var originalSupportType = doc.getFieldValues(\"supportType_ss\");\n    var newSupportType = \"\";\n    \n\tif (originalSupportType!=null && originalSupportType!=\"\"){\n\t\tvar arrayLength3 = originalSupportType.length;\n    \n\t\n\t\tif (arrayLength3 > 0){ \n\t\t\tfor (var k = 0; k < arrayLength3; k++)\n\t\t\t{\n  \n\t\t\t\tif (originalSupportType[k] !=null && originalSupportType[k] !=\"\"){\n  \n\t\n\t\t\t\t\tnewSupportType = newSupportType + \",\" + originalSupportType[k];\n    \n\t\t\t}\n    \n\t\t\ttrimmedSupportType = newSupportType.replace(/(^,)|(,$)/g, \"\");\n    \n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n    // Split and re-assemble supportType <end>\n\t\n\t\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSubSection <start>\n\t\t**********************************/\n    var originalSiteSubSection = doc.getFieldValues(\"siteSubSection_ss\");\n    var newSiteSubSection = \"\";\n    \n\t\n    var arrayLength4 = originalSiteSubSection.length;\n    \n\t\n\tif (arrayLength4 >0){\n    for (var l = 0; l < arrayLength4; l++)\n  {\n  \n  if (originalSiteSubSection[l] !=null && originalSiteSubSection[l] !=\"\"){\n  \n    \n    newSiteSubSection = newSiteSubSection + \",\" + originalSiteSubSection[l];\n    \n  }\n    \n    trimmedSiteSubSections = newSiteSubSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSubSection <end>\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble productType <start>\n\t\t**********************************/\n    var originalProductType = doc.getFieldValues(\"productType_ss\");\n    var newProductType = \"\";\n    \n\t\n    var arrayLength5 = originalProductType.length;\n    \n\t\n\tif (arrayLength5 >0){\n    for (var m = 0; m < arrayLength5; m++)\n  {\n  \n  if (originalProductType[m] !=null && originalProductType[m] !=\"\"){\n  \n    \n    newProductType = newProductType + \",\" + originalProductType[m];\n    \n  }\n    \n    trimmedProductTypes = newProductType.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble productType <end>\n\t\n\n\n  \n//  logger.info(\"Setting data ...\");\n  \n\t\n\n\t\t\tdoc.setField(\"titleEN_t\",originalTitle);\n        \tdoc.setField(\"siteSectionEN_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"supportResourceTypeEN_ss\",trimmedSupportResourceType);\n\t\t\tdoc.setField(\"supportTypeEN_ss\",trimmedSupportType);\n\t\t\tdoc.setField(\"siteSubSectionEN_ss\",trimmedSiteSubSections);\n\t\t\tdoc.setField(\"productTypeEN_ss\",trimmedProductTypes);\n\n            doc.setField(\"titleFR_t\",originalTitle);\n\n\n            doc.setField(\"titleDE_t\",originalTitle);\n\n\n            doc.setField(\"titleIT_t\",originalTitle);\n\n\n            doc.setField(\"titleES_t\",originalTitle);\n\n\n            doc.setField(\"titlePT_t\",originalTitle);\n\n\n            doc.setField(\"titleZH_t\",originalTitle);\n\n\n            doc.setField(\"titleTW_t\",originalTitle);\n\n\n            doc.setField(\"titleKO_t\",originalTitle);\n\n\n            doc.setField(\"titleJP_t\",originalTitle);\n\n\n            doc.setField(\"titleRU_t\",originalTitle);\n\n\n            doc.setField(\"titlePL_t\",originalTitle);\n\n\n            doc.setField(\"titleFI_t\",originalTitle);\n\n\n            doc.setField(\"titleNO_t\",originalTitle);\n\n\n            doc.setField(\"titleSV_t\",originalTitle);\n\n\n            doc.setField(\"titleCS_t\",originalTitle);\n\n\n            doc.setField(\"titleDK_t\",originalTitle);\n\n\n            doc.setField(\"titleNL_t\",originalTitle);\n\n\n            doc.setField(\"titleTR_t\",originalTitle);\n\n\n            doc.setField(\"titleHU_t\",originalTitle);\n\n\n            doc.setField(\"titleTH_t\",originalTitle);\n\n\n            doc.setField(\"titleVI_t\",originalTitle);\n\n\t\n\n \n\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Copy data to lang-specific fields (JS)",
    "secretSourceStageId" : "tk"
  }, {
    "type" : "javascript-index",
    "id" : "osg",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\nvar theCustomerIDs = [];\n\n  logger.info(\"zzz *** contract and customer lookup function main ***\")\n  \n  if (doc.getId() != null) { \n\n    \n\tvar partItem = doc.getFirstFieldValue(\"parkerId_l\");\n\t\n\tlogger.info(\"zzz part id is:  \" + partItem);\n\t\n    \n    \tif (partItem!=null){ \n\n\t\t\t// lookup this Part ID in MyParkerContracts data\n\t\t\n\t\t\tvar contractIDvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"siteSection\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/MyParkerContracts-default/collections/MyParkerContracts/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&q=partID_l:\" + partItem + \"&debug=false&rows=1000\"));\n      \n\n      \n      \t\t\tlogger.info(\"zzz Contract URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\tlogger.info(\"zzz *** Contract Query Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\tlogger.info(\"zzz Contracts Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    logger.info(\"zzz Num responses of contracts: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        logger.info(\"zzz contractIDvalue \" + i + \": \" + resp[i].contractID_s);\n\t\t  \t\t\t\tcontractIDvalues.push(resp[i].contractID_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n    \t\t\t}\n          \n\t\t  \n\t\t  logger.info(\"zzz num items in contract ID BEFORE filter is: \" + contractIDvalues.size);\n\ncontractIDvalues = contractIDvalues.filter( function( item, index, inputArray ) {\n           return inputArray.indexOf(item) == index;\n    });\n\n          logger.info(\"zzz num items in contract ID AFTER filter is: \" + contractIDvalues.size);\n        \t\n\n\t\t\tvar contractID = contractIDvalues;  \n                    \n          logger.info(\"zzz contractID: \" + contractID);\n          \n\t\t  \n\t\t  \n\t\t  \n\t\t  \n\n\tfor each (var contractidvalue in contractID) {\n \n  \n\t\t  logger.info(\"zzzzzzzzzzzzzzzz individual id to process is:  \" + contractidvalue);\n\t\t  \n    var customeridvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLCstuomerID = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLCstuomerID = \"\";\n      try {\n     var URLCstuomerID = new URL((\"http://localhost:8764/api/apollo/query-pipelines/MyParkerCustomers-default/collections/MyParkerCustomers/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&q=contractID_s:\" + contractidvalue + \"&debug=false&rows=1\"));      \n      \n      logger.info(\"zzz Customer ID Lookup URL: \" + URLCstuomerID);\n      var customerIDLookup = java.net.HttpURLConnectionTranslate;\n      customerIDLookup = URLCstuomerID.openConnection();\n      customerIDLookup.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      customerIDLookup.connect();\n      var statusTranslate = customerIDLookup.getResponseCode();\n      logger.info(\"zzz *** Customer ID SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(customerIDLookup.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numCustomerIDs = responseTranslate.response.numFound;\n        logger.info(\"zzz Customer ID Num Found: \" + numCustomerIDs);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respCustomerIDs = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respCustomerIDs.length; j++) {\n          logger.info(\"zzz Translated output Item: \" + respCustomerIDs[j].customerID_s);\n\t\t  customeridvalues.push(respCustomerIDs[j].customerID_s);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n    }\n\n\t\n          var customerIDItem = customeridvalues;\n          \n          logger.info(\"zzz customerids FOUND: \" + customerIDItem);\n          \n\t\t  theCustomerIDs.push(customerIDItem);\n\t\t  \n\t\t  \n  }\t\t\t  \n  \n \t \t}\n\t\t\n\t\tdoc.setField(\"customerIds_ss\", theCustomerIDs.toString());\n\t\t\n  }\n  else {\n\t  logger.info(\"zzz: docid was null\");\n  }\n\n\n  \n  return doc;\n}\n",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "Lookup CustomerIds (JS) (Non-Support)",
    "condition" : "!doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "osg"
  }, {
    "type" : "javascript-index",
    "id" : "rhf",
    "script" : "function(doc) {\n\n\tvar countvalue = 0;\n\t//logger.info(\"zzz get the ID\");\n\tvar part = doc.getId();\n\t\n\t//logger.info(\"zzz part id is:  \" + part + \" and count is \" + countvalue);\n\t\n    \n    \tif (part!=null){ \n\n\t\t\t//lookup this Part ID in Click Signals Aggregation data\n\t\t\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/lookup/collections/ParkerDotComMain_signals_aggr/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&q=doc_id_s:\\\"\" + part + \"\\\"&debug=false&rows=1\"));\n        \n      \t\t\t//logger.info(\"zzz Singals URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"zzz *** Signals Query Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"zzz Signal records found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n\t\t\t\t\tif (resp.length>0){\n\t\t\t\t\t\t\tcountvalue = resp[0].aggr_count_i;\n\t\t\t\t\t\t//\tlogger.info(\"zzz count value for : \" + part + \": \" + countvalue);\n\t\t  \t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t//\tlogger.info(\"zzz NO count value found for : \" + part);\n\t\t\t\t\t\t}\n\t\t\t\t\t\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n    \t\t\t}\n\t\t\tdoc.setField(\"click_count_i\", countvalue);\n\t\t}\n\t\telse {\n\t\t\t//logger.info(\"zzz the part series is null\");\n\t\t}\n  \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Lookup Click Counts for Parts",
    "secretSourceStageId" : "rhf"
  }, {
    "type" : "regex-extractor",
    "id" : "9rx",
    "rules" : [ {
      "source" : [ "customerIds_ss" ],
      "target" : "customerIds_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split customerIds_ss (Non-support)",
    "condition" : "!doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "9rx"
  }, {
    "type" : "regex-extractor",
    "id" : "7ka",
    "rules" : [ {
      "source" : [ "siteSectionEN_ss" ],
      "target" : "siteSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFR_ss" ],
      "target" : "siteSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDE_ss" ],
      "target" : "siteSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionIT_ss" ],
      "target" : "siteSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionES_ss" ],
      "target" : "siteSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPT_ss" ],
      "target" : "siteSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionZH_ss" ],
      "target" : "siteSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTW_ss" ],
      "target" : "siteSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionKO_ss" ],
      "target" : "siteSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionJP_ss" ],
      "target" : "siteSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionRU_ss" ],
      "target" : "siteSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPL_ss" ],
      "target" : "siteSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFI_ss" ],
      "target" : "siteSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNO_ss" ],
      "target" : "siteSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionSV_ss" ],
      "target" : "siteSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionCS_ss" ],
      "target" : "siteSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDK_ss" ],
      "target" : "siteSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNL_ss" ],
      "target" : "siteSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTR_ss" ],
      "target" : "siteSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionHU_ss" ],
      "target" : "siteSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTH_ss" ],
      "target" : "siteSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionVI_ss" ],
      "target" : "siteSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSection Lang Fields",
    "secretSourceStageId" : "7ka"
  }, {
    "type" : "regex-extractor",
    "id" : "oioe",
    "rules" : [ {
      "source" : [ "supportResourceTypeEN_ss" ],
      "target" : "supportResourceTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeFR_ss" ],
      "target" : "supportResourceTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeDE_ss" ],
      "target" : "supportResourceTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeIT_ss" ],
      "target" : "supportResourceTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeES_ss" ],
      "target" : "supportResourceTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypePT_ss" ],
      "target" : "supportResourceTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeZH_ss" ],
      "target" : "supportResourceTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTW_ss" ],
      "target" : "supportResourceTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeKO_ss" ],
      "target" : "supportResourceTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeJP_ss" ],
      "target" : "supportResourceTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeRU_ss" ],
      "target" : "supportResourceTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypePL_ss" ],
      "target" : "supportResourceTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeFI_ss" ],
      "target" : "supportResourceTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeNO_ss" ],
      "target" : "supportResourceTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeSV_ss" ],
      "target" : "supportResourceTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeCS_ss" ],
      "target" : "supportResourceTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeDK_ss" ],
      "target" : "supportResourceTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeNL_ss" ],
      "target" : "supportResourceTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTR_ss" ],
      "target" : "supportResourceTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeHU_ss" ],
      "target" : "supportResourceTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTH_ss" ],
      "target" : "supportResourceTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeVI_ss" ],
      "target" : "supportResourceTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split supportResourceType Lang Fields",
    "secretSourceStageId" : "oioe"
  }, {
    "type" : "regex-extractor",
    "id" : "ff",
    "rules" : [ {
      "source" : [ "supportTypeEN_ss" ],
      "target" : "supportTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeFR_ss" ],
      "target" : "supportTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeDE_ss" ],
      "target" : "supportTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeIT_ss" ],
      "target" : "supportTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeES_ss" ],
      "target" : "supportTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypePT_ss" ],
      "target" : "supportTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeZH_ss" ],
      "target" : "supportTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTW_ss" ],
      "target" : "supportTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeKO_ss" ],
      "target" : "supportTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeJP_ss" ],
      "target" : "supportTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeRU_ss" ],
      "target" : "supportTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypePL_ss" ],
      "target" : "supportTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeFI_ss" ],
      "target" : "supportTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeNO_ss" ],
      "target" : "supportTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeSV_ss" ],
      "target" : "supportTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeCS_ss" ],
      "target" : "supportTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeDK_ss" ],
      "target" : "supportTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeNL_ss" ],
      "target" : "supportTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTR_ss" ],
      "target" : "supportTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeHU_ss" ],
      "target" : "supportTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTH_ss" ],
      "target" : "supportTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeVI_ss" ],
      "target" : "supportTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split supportType Lang Fields",
    "secretSourceStageId" : "ff"
  }, {
    "type" : "regex-extractor",
    "id" : "u8",
    "rules" : [ {
      "source" : [ "siteSubSectionEN_ss" ],
      "target" : "siteSubSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFR_ss" ],
      "target" : "siteSubSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDE_ss" ],
      "target" : "siteSubSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionIT_ss" ],
      "target" : "siteSubSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionES_ss" ],
      "target" : "siteSubSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPT_ss" ],
      "target" : "siteSubSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionZH_ss" ],
      "target" : "siteSubSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTW_ss" ],
      "target" : "siteSubSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionKO_ss" ],
      "target" : "siteSubSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionJP_ss" ],
      "target" : "siteSubSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionRU_ss" ],
      "target" : "siteSubSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPL_ss" ],
      "target" : "siteSubSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFI_ss" ],
      "target" : "siteSubSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNO_ss" ],
      "target" : "siteSubSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionSV_ss" ],
      "target" : "siteSubSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionCS_ss" ],
      "target" : "siteSubSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDK_ss" ],
      "target" : "siteSubSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNL_ss" ],
      "target" : "siteSubSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTR_ss" ],
      "target" : "siteSubSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionHU_ss" ],
      "target" : "siteSubSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTH_ss" ],
      "target" : "siteSubSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionVI_ss" ],
      "target" : "siteSubSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSubSection Lang Fields",
    "secretSourceStageId" : "u8"
  }, {
    "type" : "regex-extractor",
    "id" : "u8x",
    "rules" : [ {
      "source" : [ "productTypeEN_ss" ],
      "target" : "productTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeFR_ss" ],
      "target" : "productTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeDE_ss" ],
      "target" : "productTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeIT_ss" ],
      "target" : "productTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeES_ss" ],
      "target" : "productTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypePT_ss" ],
      "target" : "productTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeZH_ss" ],
      "target" : "productTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTW_ss" ],
      "target" : "productTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeKO_ss" ],
      "target" : "productTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeJP_ss" ],
      "target" : "productTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeRU_ss" ],
      "target" : "productTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypePL_ss" ],
      "target" : "productTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeFI_ss" ],
      "target" : "productTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeNO_ss" ],
      "target" : "productTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeSV_ss" ],
      "target" : "productTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeCS_ss" ],
      "target" : "productTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeDK_ss" ],
      "target" : "productTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeNL_ss" ],
      "target" : "productTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTR_ss" ],
      "target" : "productTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeHU_ss" ],
      "target" : "productTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTH_ss" ],
      "target" : "productTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeVI_ss" ],
      "target" : "productTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split productType Lang Fields",
    "secretSourceStageId" : "u8x"
  }, {
    "type" : "javascript-index",
    "id" : "78",
    "script" : "/* Last modified: 2018-01-10\n   Last modified by:  Terry Chambers / Onix\n   Change summary:\n   2018-01-10 - corrects productTaxonomyL1, adds L2, L3\n   2018-01-08 - adds new fields for Sprint 2 (productType, newsEventType, otherType)\n*/\n// HASHING FUNCTION\nfunction hashTheFacet(doc, facetToProcess, id) {\n    var facetValues;\n    var newHashedFacetValue = [];\n    var newHashedFacetFQ = [];\n    // get the values of the facet to be processed\n    facetValues = doc.getFieldValues(facetToProcess);\n    //logger.info(\"hashTheFacet(\" + facetToProcess + \")\");\n    // loop through the facet values and create hashes for them\n    facetValues.forEach(function (f) {\n\t\tif (f  != null){\n\t\t\tif (f.length!==0){\n\t\t\t\tvar newHashedFacet = f.hashCode();\t\t\n\t\t\t\tnewHashedFacetValue.push(\"p\" + newHashedFacet + \"$$$\" + f);\n\t\t\t\tnewHashedFacetFQ.push(\"p\" + newHashedFacet);\n\t\t\t}\n\t\t}\n    });\n    // return the hashed items\n    return [newHashedFacetValue, newHashedFacetFQ];\n}\n\nfunction computeLanguages(doc, id) {\n    // get the list of languages from the document\n    var langsfromdoc = doc.getFieldValues(\"language_is\");\n    var languages = [];\n    //logger.info(\"langsfromdoc \" + langsfromdoc);\n    //logger.info(\"Num of languages: \" + langsfromdoc.length);\n    // iterate through the languages and put them into an array\n    for each(var lang in langsfromdoc) {\n            switch (lang) {\n            case \"-1\":\n                languages.push('EN');\n                break;\n            case \"-2\":\n                languages.push('FR');\n                break;\n            case \"-3\":\n                languages.push('DE');\n                break;\n            case \"-4\":\n                languages.push('IT');\n                break;\n            case \"-5\":\n                languages.push('ES');\n                break;\n            case \"-6\":\n                languages.push('PT');\n                break;\n            case \"-7\":\n                languages.push('ZH');\n                break;\n            case \"-8\":\n                languages.push('TW');\n                break;\n            case \"-9\":\n                languages.push('KO');\n                break;\n            case \"-10\":\n                languages.push('JP');\n                break;\n            case \"-20\":\n                languages.push('RU');\n                break;\n            case \"-22\":\n                languages.push('PL');\n                break;\n            case \"-24\":\n                languages.push('FI');\n                break;\n            case \"-25\":\n                languages.push('NO');\n                break;\n            case \"-26\":\n                languages.push('SV');\n                break;\n            case \"-27\":\n                languages.push('CS');\n                break;\n            case \"-28\":\n                languages.push('DK');\n                break;\n            case \"-29\":\n                languages.push('NL');\n                break;\n            case \"-30\":\n                languages.push('TR');\n                break;\n            case \"-31\":\n                languages.push('HU');\n                break;\n            case \"-32\":\n                languages.push('TH');\n                break;\n            case \"-34\":\n                languages.push('VI');\n                break;\n            }\n        }\n        // if no languages found, try them all, to be safe\n    if (languages.length === 0) {\n        //logger.info(\"************* no languages found *******************\");\n        languages = ['EN', 'FR', 'DE', 'IT', 'ES', 'PT', 'ZH', 'TW', 'KO', 'JP', 'RU', 'PL', 'FI', 'NO', 'SV', 'CS', 'DK', 'NL', 'TR', 'HU', 'TH', 'VI'];\n    }\n    return languages;\n}\n// MAIN FUNCTION\nfunction (doc) {\n    //var facetsToHash; // array that we'll populate with our hashes\n    var id = doc.getId();\n    // list of facet fields that need to be processed\n    var listOfFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"parkerDivisionName_ss\", \"productTaxonomyL1_s\", \"productTaxonomyL2_s\", \"productTaxonomyL3_s\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"brand_ss\", \"cadType_ss\", \"product_ss\", \"languageName_ss\", \"fileType_ss\", \"eventYear_i\", \"newsYear_i\"];\n    // list of facet fields that are localized to other languages and need to be processed\n    var listOfLangFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"product_ss\", \"productTaxonomyL1_s\",\"productTaxonomyL2_s\",\"productTaxonomyL3_s\"];\n    var languages = []; // used to track the applicable languages\n    // if there are any language-based facets, compute the languages for this document\n    //logger.info(\"This is the list of LangFacets \" + listOfLangFacets);\n    if (listOfLangFacets) {\n        languages = computeLanguages(doc, id);\n        //logger.info(\"Finished computeLanguages(doc, id): \" + doc + \" , \" + id);\n        //logger.info(\"Resulting languages are \" + languages);\n    }\n    // process each facet from \"listOfFacets\" and store the values on to the document\n    for each(var facet in listOfFacets) {\n            //logger.info(\"The facet is \" + facet);\n            var location = facet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n            var tmpFacet = facet; // store the full facet name temporarily\n            var thisFacetShort = tmpFacet.substring(0, location); // take the facet name without the _ and data type\n            var facetsToHash = hashTheFacet(doc, facet, id); // calculate the hashes\n            //logger.info(\"facetsToHash \" + facetsToHash);\n            // takes the function output and puts into a string and then array\n            //logger.info(Object.prototype.toString.call(facetsToHash));\n            var facetsWithHashes = facetsToHash[0];\n            //logger.info(facetsWithHashes);\n            if (facetsWithHashes.length!==0) {\n                var facetsWithHashesArray = facetsWithHashes;\n                for each(var fwh in facetsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_facet\", fwh); // set the _facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array  \n            var fqsWithHashes = facetsToHash[1];\n            if (fqsWithHashes.length!==0) {\n                var fqsWithHashesArray = fqsWithHashes;\n                for each(var fqs in fqsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_fq\", fqs); // set the _fq field on the document\n                }\n            }\n        }\n        // process each facet from \"listOfLangFacets\" and store the values on the document\n    for each(var langFacet in listOfLangFacets) {\n        var location = langFacet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n        var thisFacetVarType = langFacet.substring(location + 1, langFacet.length); // take the data type from the facet name\n        for each(var lang in languages) {\n            var langFacetShort = langFacet.substring(0, location); // clear the field from previous runs\n            var thisFacetFull = langFacetShort + lang + \"_\" + thisFacetVarType; // compute the name of the full facet to process hashes for\n            langFacetShort = langFacetShort + lang; // compute the prefix of the facet name that will be written back to the document\n            var facetsToHash = hashTheFacet(doc, thisFacetFull, id); // calculate the hashes\n            // takes the function output and puts into a string and then array      \n            var facetsWithHashesLG = facetsToHash[0];\n            //logger.info(\"facetsWithHashesLG: \" + facetsWithHashesLG);\n            if (facetsWithHashesLG.length!==0) {\n                var facetsWithHashesLGArray = facetsWithHashesLG;\n                for each(var lg in facetsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_facet\", lg); // set the XX_facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array      \n            var fqsWithHashesLG = facetsToHash[1];\n            if (fqsWithHashesLG.length!==0) {\n                var fqsWithHashesLGArray = fqsWithHashesLG;\n                for each(var fqlg in fqsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_fq\", fqlg); // set the XX_fq field on the document\n                }\n            }\n        }\n    }\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Facet Hashing",
    "condition" : "",
    "secretSourceStageId" : "78"
  }, {
    "type" : "field-mapping",
    "id" : "68f77de5-37e7-470b-bec5-d660e316d2de",
    "mappings" : [ {
      "source" : "compressedPartNumber_s",
      "target" : "compressedPartNumber_t",
      "operation" : "copy"
    }, {
      "source" : "parkerPartNumber_s",
      "target" : "parkerPartNumber_t",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "parkerPartNumberEDGN4",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "parkerPartNumberEDGN5",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "parkerPartNumberEDGN6",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "parkerPartNumberEDGN7",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "parkerPartNumberEDGN8",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "parkerPartNumberEDGN3",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "field-mapping",
    "condition" : "!doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "68f77de5-37e7-470b-bec5-d660e316d2de"
  }, {
    "type" : "field-mapping",
    "id" : "2h",
    "mappings" : [ {
      "source" : "title_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "autosuggest_part_text",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Field mapping for non-support",
    "condition" : "!doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "2h"
  }, {
    "type" : "field-mapping",
    "id" : "lb",
    "mappings" : [ {
      "source" : "title_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "autosuggest_support_cad_text",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Field Mapping - Support",
    "condition" : "doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "lb"
  }, {
    "type" : "field-mapping",
    "id" : "959",
    "mappings" : [ {
      "source" : "productCS_ss",
      "target" : "productCS_t",
      "operation" : "copy"
    }, {
      "source" : "productDK_ss",
      "target" : "productDK_t",
      "operation" : "copy"
    }, {
      "source" : "productNL_ss",
      "target" : "productNL_t",
      "operation" : "copy"
    }, {
      "source" : "productEN_ss",
      "target" : "productEN_t",
      "operation" : "copy"
    }, {
      "source" : "productFI_ss",
      "target" : "productFI_t",
      "operation" : "copy"
    }, {
      "source" : "productFR_ss",
      "target" : "productFR_t",
      "operation" : "copy"
    }, {
      "source" : "productDE_ss",
      "target" : "productDE_t",
      "operation" : "copy"
    }, {
      "source" : "productHU_ss",
      "target" : "productHU_t",
      "operation" : "copy"
    }, {
      "source" : "productIT_ss",
      "target" : "productIT_t",
      "operation" : "copy"
    }, {
      "source" : "productJP_ss",
      "target" : "productJP_t",
      "operation" : "copy"
    }, {
      "source" : "productKO_ss",
      "target" : "productKO_t",
      "operation" : "copy"
    }, {
      "source" : "productNO_ss",
      "target" : "productNO_t",
      "operation" : "copy"
    }, {
      "source" : "productPL_ss",
      "target" : "productPL_t",
      "operation" : "copy"
    }, {
      "source" : "productPT_ss",
      "target" : "productPT_t",
      "operation" : "copy"
    }, {
      "source" : "productRU_ss",
      "target" : "productRU_t",
      "operation" : "copy"
    }, {
      "source" : "productZH_ss",
      "target" : "productZH_t",
      "operation" : "copy"
    }, {
      "source" : "productES_ss",
      "target" : "productES_t",
      "operation" : "copy"
    }, {
      "source" : "productSV_ss",
      "target" : "productSV_t",
      "operation" : "copy"
    }, {
      "source" : "productTH_ss",
      "target" : "productTH_t",
      "operation" : "copy"
    }, {
      "source" : "productTW_ss",
      "target" : "productTW_t",
      "operation" : "copy"
    }, {
      "source" : "productTR_ss",
      "target" : "productTR_t",
      "operation" : "copy"
    }, {
      "source" : "productVI_ss",
      "target" : "productVI_t",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Field mapping for product_ss to text",
    "secretSourceStageId" : "959"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "a31e5f1e-7783-4038-8062-706a962593ad",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : true,
    "label" : "solr-dynamic-field-name-mapping",
    "secretSourceStageId" : "a31e5f1e-7783-4038-8062-706a962593ad"
  }, {
    "type" : "solr-index",
    "id" : "08d93fd2-afed-433d-ba00-7d6fc8c613f5",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "label" : "solr-index",
    "secretSourceStageId" : "08d93fd2-afed-433d-ba00-7d6fc8c613f5"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComMain-Parts"
  }
}, {
  "id" : "_system",
  "stages" : [ {
    "type" : "solr-index",
    "id" : "ac3e7031-242f-4dce-9d13-59c256733b6a",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "ac3e7031-242f-4dce-9d13-59c256733b6a"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "_system"
  }
}, {
  "id" : "ParkerDivisions-default",
  "stages" : [ {
    "type" : "field-mapping",
    "id" : "73a357c6-0db8-4f36-a1a2-d20421db31ac",
    "mappings" : [ ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "73a357c6-0db8-4f36-a1a2-d20421db31ac"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "7457c4dd-bfd2-4e31-8b1e-9c63ffc09d1b",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "7457c4dd-bfd2-4e31-8b1e-9c63ffc09d1b"
  }, {
    "type" : "solr-index",
    "id" : "d87d534b-1850-4b23-b139-feaba4f9b3c6",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "d87d534b-1850-4b23-b139-feaba4f9b3c6"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDivisions-default"
  }
}, {
  "id" : "ParkerDotComAttributes-default",
  "stages" : [ {
    "type" : "field-mapping",
    "id" : "30f77cd0-5e5c-4835-a90e-344ecea83680",
    "mappings" : [ ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "30f77cd0-5e5c-4835-a90e-344ecea83680"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "5a166ead-dcdb-4eca-9c93-ac825072b8cb",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "5a166ead-dcdb-4eca-9c93-ac825072b8cb"
  }, {
    "type" : "solr-index",
    "id" : "9e1504ac-2e45-48e7-af6e-66398b72b8c4",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "9e1504ac-2e45-48e7-af6e-66398b72b8c4"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComAttributes-default"
  }
}, {
  "id" : "test-default",
  "stages" : [ {
    "type" : "field-mapping",
    "id" : "38eb5970-767e-4860-ae55-f13d029c6c1e",
    "mappings" : [ ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "38eb5970-767e-4860-ae55-f13d029c6c1e"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "11956724-aac3-4a80-8d53-94dbe2685b09",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "11956724-aac3-4a80-8d53-94dbe2685b09"
  }, {
    "type" : "solr-index",
    "id" : "dfc86fa6-c811-472c-a1b7-304fe058d224",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "dfc86fa6-c811-472c-a1b7-304fe058d224"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "test-default"
  }
}, {
  "id" : "_signals_ingest",
  "stages" : [ {
    "type" : "signal-formatter",
    "id" : "ingest-signals",
    "flatten" : true,
    "allowedTypes" : [ ],
    "undefinedType" : "general",
    "timestampLocale" : "en-US",
    "type" : "signal-formatter",
    "skip" : false,
    "secretSourceStageId" : "ingest-signals"
  }, {
    "type" : "field-mapping",
    "id" : "mapping-signals",
    "mappings" : [ {
      "source" : "type",
      "target" : "type_s",
      "operation" : "move"
    }, {
      "source" : "flag",
      "target" : "flag_s",
      "operation" : "move"
    }, {
      "source" : "params.flag",
      "target" : "flag_s",
      "operation" : "move"
    }, {
      "source" : "timestamp",
      "target" : "timestamp_tdt",
      "operation" : "move"
    }, {
      "source" : "params.count",
      "target" : "count_i",
      "operation" : "move"
    }, {
      "source" : "params.weight",
      "target" : "weight_d",
      "operation" : "move"
    }, {
      "source" : "params.query",
      "target" : "query_s",
      "operation" : "copy"
    }, {
      "source" : "params.query",
      "target" : "query_t",
      "operation" : "move"
    }, {
      "source" : "params.docId",
      "target" : "doc_id_s",
      "operation" : "move"
    }, {
      "source" : "params.userId",
      "target" : "user_id_s",
      "operation" : "move"
    }, {
      "source" : "params.sessionId",
      "target" : "session_id_s",
      "operation" : "move"
    }, {
      "source" : "params.filterQueries",
      "target" : "filters_s",
      "operation" : "move"
    }, {
      "source" : "/params\\.(.*)(?<!_.{1,2})$/",
      "target" : "params.$1_s",
      "operation" : "move"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "mapping-signals"
  }, {
    "type" : "solr-index",
    "id" : "solr-system",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : true,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "solr-system"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "_signals_ingest"
  }
}, {
  "id" : "ParkerDotComMain-ProductSeries",
  "stages" : [ {
    "type" : "field-mapping",
    "id" : "skk",
    "mappings" : [ {
      "source" : "urlKeyword_s",
      "target" : "urlKeyword_exact",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Copy Fields (General)",
    "secretSourceStageId" : "skk"
  }, {
    "type" : "javascript-index",
    "id" : "6m",
    "script" : "/* Part number character replacements for matching alternate characters\nTakes the original \"compressed part number\" (normalized, without special characters/spaces)\nand replaces specific characters to permit matching in cases where someone has transposed characters.\nThis code only handles complete replacements of single characters and does not take into account\nall the possible variations such as when there is a mixture of 1s, 0s etc and the user only makes\nan error on one of them.  These are considered edge cases and least likely to occur.\n\nWritten by Onix Networking\n\nReplaces the characters as follows:\n\nl for 1\nI for 1\ni for 1\n1 for i\n1 for I\n1 for l\no for 0\nO for 0\n0 for o\n0 for O\n\n*/\n\nvar partnum = doc.getFirstFieldValue(\"compressedPartNumber_s\"); // the original compressed part number\nvar newpart = \"\"; // where the additional variations will be stored\n\n\nvar newpartl=partnum.replace(/l/g , \"1\");\nvar newpartI=partnum.replace(/I/g , \"1\");\nvar newparti=partnum.replace(/i/g , \"1\");\nvar newpartonei=partnum.replace(/1/g , \"i\");\nvar newpartoneI=partnum.replace(/1/g , \"I\");\nvar newpartonel=partnum.replace(/1/g , \"l\");\nvar newparto=partnum.replace(/o/g , \"0\");\nvar newpartO=partnum.replace(/O/g , \"0\");\nvar newpartzeroo=partnum.replace(/0/g , \"o\");\nvar newpartzeroO=partnum.replace(/0/g , \"O\");\n\nif (newpartl!=partnum){\nnewpart = newpart + \",\" + newpartl;\n}\n\nif (newpartI!=partnum){\nnewpart = newpart + \",\" + newpartI;\n}\n\nif (newparti!=partnum){\nnewpart = newpart + \",\" + newparti;\n}\n\nif (newpartonei!=partnum){\nnewpart = newpart + \",\" + newpartonei;\n}\n\nif (newpartoneI!=partnum){\nnewpart = newpart + \",\" + newpartoneI;\n}\n\nif (newpartonel!=partnum){\nnewpart = newpart + \",\" + newpartonel;\n}\n\nif (newparto!=partnum){\nnewpart = newpart + \",\" + newparto;\n}\n\nif (newpartO!=partnum){\nnewpart = newpart + \",\" + newpartO;\n}\n\nif (newpartzeroo!=partnum){\nnewpart = newpart + \",\" + newpartzeroo;\n}\n\nif (newpartzeroO!=partnum){\nnewpart = newpart + \",\" + newpartzeroO;\n}\n\ndoc.setField(\"altpartnums_ss\",newpart); // stores the final list of alternate compressed part numbers\n\n\n\n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Javascript - replace characters in compressed part number",
    "condition" : "doc.hasField(\"compressedPartNumber_s\")",
    "secretSourceStageId" : "6m"
  }, {
    "type" : "javascript-index",
    "id" : "y0t",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n//  logger.info(\"**** Setting language on \" + id + \" ****\");\n  \n  var langname = \"\";\n  var doclangstring = doc.getFirstFieldValue(\"language_is\");\n  var langcode = \"\";\n  \n  \n    if (doclangstring!=null){\n  \n    switch (doclangstring) {\n\t\n\t\n        case \"-1\":\n            langname = \"English\";\n            langcode = \"EN\";\n            break;\n        case \"-2\":\n            langname = \"Français\"; // French\n        \tlangcode = \"FR\";\n            break;\n        case \"-3\":\n            langname = \"Deutsch\";  // German\n            langcode = \"DE\";\n            break;\n        case \"-4\":\n            langname = \"Italiano\";  // Italian\n            langcode = \"IT\";\n            break;\n        case \"-5\":\n            langname = \"Español\";  // Spanish\n            langcode = \"ES\";\n            break;\n        case \"-6\":\n            langname = \"Português\";  // Portuguese\n            langcode = \"PT\";\n            break;\n        case \"-7\":\n            langname = \"中文\";  // Simplified Chinese\n            langcode = \"ZH\";\n            break;\n        case \"-8\":\n            langname = \"繁體中文\";  // Traditional Chinese\n            langcode = \"TW\";\n            break;\n        case \"-9\":\n            langname = \"한국어\";  // Korean\n            langcode = \"KO\";\n            break;\n        case \"-10\":\n            langname = \"日本語\";  // Japanese\n            langcode = \"JP\";\n            break;\n        case \"-20\":\n            langname = \"Russian\";  // Russian\n            langcode = \"RU\";\n            break;\n        case \"-22\":\n            langname = \"Polski\";  // Polish\n            langcode = \"PL\";\n            break;\n        case \"-24\":\n            langname = \"suomi\";  // Finnish (Finland)\n            langcode = \"FI\";\n            break;\n        case \"-25\":\n            langname = \"Norsk\";  // Norwegian\n            langcode = \"NO\";\n            break;\n        case \"-26\":\n            langname = \"Svenska\";  // Swedish\n            langcode = \"SV\";\n            break;\n        case \"-27\":\n            langname = \"česky\";  // Czech\n            langcode = \"CS\";\n            break;\n        case \"-28\":\n            langname = \"Danish\";  // Dainish\n            langcode = \"DK\";\n            break;\n        case \"-29\":\n            langname = \"Nederlands\";  // Dutch\n            langcode = \"NL\";\n            break;\t\n        case \"-30\":\n            langname = \"Türkçe\";  // Turkish\n            langcode = \"TR\";\n            break;\n        case \"-31\":\n            langname = \"Hungarian\";  // Hungarian\n            langcode = \"HU\";\n            break;\n        case \"-32\":\n            langname = \"Thai\";  // Thai\n            langcode = \"TH\";\n            break;\n        case \"-34\":\n            langname = \"Vietnamese\";  // Vietnamese\n            langcode = \"VI\";\n            break;\t\t\n      default:\n        langname= \"Unknown\";\n                   }\n    }\n  \n\t   doc.setField(\"languageName_ss\",langname);\n       doc.setField(\"languageCode_ss\",langcode);\n       doc.setField(\"suggest_type_s\",\"standard\");\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set Language Name (JS)",
    "secretSourceStageId" : "y0t"
  }, {
    "type" : "regex-extractor",
    "id" : "jm",
    "rules" : [ {
      "source" : [ "siteSection_ss" ],
      "target" : "siteSection_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryName_ss" ],
      "target" : "countryName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadType_ss" ],
      "target" : "cadType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadURL_ss" ],
      "target" : "cadURL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportType_ss" ],
      "target" : "supportType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageName_ss" ],
      "target" : "languageName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryId_ss" ],
      "target" : "countryId_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "language_is" ],
      "target" : "language_is",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivision_ss" ],
      "target" : "parkerDivision_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivisionName_ss" ],
      "target" : "parkerDivisionName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "altpartnums_ss" ],
      "target" : "altpartnums_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageCode_ss" ],
      "target" : "languageCode_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "onlinePurchaseOption_ss" ],
      "target" : "onlinePurchaseOption_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTaxonomy_ss" ],
      "target" : "productTaxonomy_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split Fields",
    "secretSourceStageId" : "jm"
  }, {
    "type" : "javascript-index",
    "id" : "dnq",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n//  logger.info(\"**** Reconfiguring fields on \" + id + \" ****\");\n  \n    //var docpseries = doc.getFirstFieldValue(\"productSeriesId_l\");\n    //var docecom = doc.getFirstFieldValue(\"ECOM_JSON_URL_s\");\n    \n    //logger.info(\"zzz id \" + id + \": pseries \" + docpseries + \" ecomid: \" + docecom);\n    \n  \tvar doclangstring = doc.getFirstFieldValue(\"language_is\");\n  \tvar originalTitle = doc.getFirstFieldValue(\"title_t\");\n    var originalProductName = doc.getFirstFieldValue(\"product_ss\"); // Single value in this data set\n   \tvar originalTaxonomyL1 = doc.getFirstFieldValue(\"productTaxonomyL1_s\");\n    var originalTaxonomyL2 = doc.getFirstFieldValue(\"productTaxonomyL2_s\");\n    var originalTaxonomyL3 = doc.getFirstFieldValue(\"productTaxonomyL3_s\");\n    var originalTaxonomy = doc.getFirstFieldValue(\"productTaxonomy_t\");\n    var originalDescription = doc.getFirstFieldValue(\"description_t\");\n\t\n\tvar trimmedSiteSections = \"\";\n\tvar trimmedSupportResourceType = \"\";\n\tvar trimmedSupportType = \"\";\n\tvar trimmedSiteSubSections = \"\";\n\tvar trimmedProductTypes = \"\";\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSection <start>\n\t\t**********************************/\n    var originalSiteSection = doc.getFieldValues(\"siteSection_ss\");\n    var newSiteSection = \"\";\n    \n\t\n    var arrayLength = originalSiteSection.length;\n    \n\t\n\tif (arrayLength >0){\n    for (var i = 0; i < arrayLength; i++)\n  {\n  \n  if (originalSiteSection[i] !=null && originalSiteSection[i] !=\"\"){\n  \n    \n    newSiteSection = newSiteSection + \",\" + originalSiteSection[i];\n    \n  }\n    \n    trimmedSiteSections = newSiteSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSection <end>\n\t\t\n\t\t\n\t\t\n\t\t/*********************************\n\t\tSplit and re-assemble supportResourceType <start>\n\t\t**********************************/\n\n    var originalSupportResourceType = doc.getFieldValues(\"supportResourceType_ss\");\n    var newSupportResourceType = \"\";\n    \n\tif (originalSupportResourceType!=null && originalSupportResourceType!=\"\"){\n\t\tvar arrayLength2 = originalSupportResourceType.length;\n    \n\t\n\t\tif (arrayLength2 > 0){ \n\t\t\tfor (var j = 0; j < arrayLength2; j++)\n\t\t\t{\n  \n\t\t\t\tif (originalSupportResourceType[j] !=null && originalSupportResourceType[j] !=\"\"){\n  \n\t\n\t\t\t\t\tnewSupportResourceType = newSupportResourceType + \",\" + originalSupportResourceType[j];\n    \n\t\t\t}\n    \n\t\t\ttrimmedSupportResourceType = newSupportResourceType.replace(/(^,)|(,$)/g, \"\");\n    \n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n    // Split and re-assemble supportResourceType <end>\n\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble supportType <start>\n\t\t**********************************/\n\n    var originalSupportType = doc.getFieldValues(\"supportType_ss\");\n    var newSupportType = \"\";\n    \n\tif (originalSupportType!=null && originalSupportType!=\"\"){\n\t\tvar arrayLength3 = originalSupportType.length;\n    \n\t\n\t\tif (arrayLength3 > 0){ \n\t\t\tfor (var k = 0; k < arrayLength3; k++)\n\t\t\t{\n  \n\t\t\t\tif (originalSupportType[k] !=null && originalSupportType[k] !=\"\"){\n  \n\t\n\t\t\t\t\tnewSupportType = newSupportType + \",\" + originalSupportType[k];\n    \n\t\t\t}\n    \n\t\t\ttrimmedSupportType = newSupportType.replace(/(^,)|(,$)/g, \"\");\n    \n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n    // Split and re-assemble supportType <end>\n\t\n\t\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSubSection <start>\n\t\t**********************************/\n    var originalSiteSubSection = doc.getFieldValues(\"siteSubSection_ss\");\n    var newSiteSubSection = \"\";\n    \n\t\n    var arrayLength4 = originalSiteSubSection.length;\n    \n\t\n\tif (arrayLength4 >0){\n    for (var l = 0; l < arrayLength4; l++)\n  {\n  \n  if (originalSiteSubSection[l] !=null && originalSiteSubSection[l] !=\"\"){\n  \n    \n    newSiteSubSection = newSiteSubSection + \",\" + originalSiteSubSection[l];\n    \n  }\n    \n    trimmedSiteSubSections = newSiteSubSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSubSection <end>\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble productType <start>\n\t\t**********************************/\n    var originalProductType = doc.getFieldValues(\"productType_ss\");\n    var newProductType = \"\";\n    \n\t\n    var arrayLength5 = originalProductType.length;\n    \n\t\n\tif (arrayLength5 >0){\n    for (var m = 0; m < arrayLength4; m++)\n  {\n  \n  if (originalProductType[m] !=null && originalProductType[m] !=\"\"){\n  \n    \n    newProductType = newProductType + \",\" + originalProductType[m];\n    \n  }\n    \n    trimmedProductTypes = newProductType.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble productType <end>\n\n\n  \n//  logger.info(\"Setting data ...\");\n  \n    if (doclangstring!=null){\n  \n    switch (doclangstring) {\n\t\n\t\n        case \"-1\":\n\t\t\tdoc.setField(\"titleEN_t\",originalTitle);\n        \tdoc.setField(\"productEN_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1EN_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2EN_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3EN_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyEN_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionEN_t\",originalDescription);\n        \tdoc.setField(\"siteSectionEN_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"supportResourceTypeEN_ss\",trimmedSupportResourceType);\n\t\t\tdoc.setField(\"supportTypeEN_ss\",trimmedSupportType);\n\t\t\tdoc.setField(\"siteSubSectionEN_ss\",trimmedSiteSubSections);\n\t\t\tdoc.setField(\"productTypeEN_ss\",trimmedProductTypes);\n            break;\n        case \"-2\":\n            doc.setField(\"titleFR_t\",originalTitle);\n        \tdoc.setField(\"productFR_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1FR_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2FR_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3FR_s\",originalTaxonomyL3);\n       \t\tdoc.setField(\"productTaxonomyFR_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionFR_t\",originalDescription);\n\n            break;\n        case \"-3\":\n            doc.setField(\"titleDE_t\",originalTitle);\n        \tdoc.setField(\"productDE_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1DE_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2DE_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3DE_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyDE_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionDE_t\",originalDescription);\n\n            break;\n        case \"-4\":\n            doc.setField(\"titleIT_t\",originalTitle);\n        \tdoc.setField(\"productIT_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1IT_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2IT_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3IT_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyIT_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionIT_t\",originalDescription);\n\n            break;\n        case \"-5\":\n            doc.setField(\"titleES_t\",originalTitle);\n        \tdoc.setField(\"productES_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1ES_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2ES_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3ES_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyES_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionES_t\",originalDescription);\n\n            break;\n        case \"-6\":\n            doc.setField(\"titlePT_t\",originalTitle);\n        \tdoc.setField(\"productPT_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1PT_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2PT_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3PT_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyPT_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionPT_t\",originalDescription);\n\n            break;\n        case \"-7\":\n            doc.setField(\"titleZH_t\",originalTitle);\n        \tdoc.setField(\"productZH_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1ZH_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2ZH_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3ZH_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyZH_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionZH_t\",originalDescription);\n\n            break;\n        case \"-8\":\n            doc.setField(\"titleTW_t\",originalTitle);\n        \tdoc.setField(\"productTW_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1TW_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2TW_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3TW_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyTW_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionTW_t\",originalDescription);\n\n            break;\n        case \"-9\":\n            doc.setField(\"titleKO_t\",originalTitle);\n        \tdoc.setField(\"productKO_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1KO_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2KO_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3KO_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyKO_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionKO_t\",originalDescription);\n\n            break;\n        case \"-10\":\n            doc.setField(\"titleJP_t\",originalTitle);\n        \tdoc.setField(\"productJP_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1JP_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2JP_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3JP_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyJP_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionJP_t\",originalDescription);\n\n            break;\n        case \"-20\":\n            doc.setField(\"titleRU_t\",originalTitle);\n        \tdoc.setField(\"productRU_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1RU_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2RU_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3RU_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyRU_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionRU_t\",originalDescription);\n\n            break;\n        case \"-22\":\n            doc.setField(\"titlePL_t\",originalTitle);\n        \tdoc.setField(\"productPL_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1PL_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2PL_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3PL_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyPL_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionPL_t\",originalDescription);\n\n            break;\n        case \"-24\":\n            doc.setField(\"titleFI_t\",originalTitle);\n        \tdoc.setField(\"productFI_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1FI_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2FI_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3FI_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyFI_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionFI_t\",originalDescription);\n\n            break;\n        case \"-25\":\n            doc.setField(\"titleNO_t\",originalTitle);\n        \tdoc.setField(\"productNO_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1NO_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2NO_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3NO_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyNO_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionNO_t\",originalDescription);\n\n            break;\n        case \"-26\":\n            doc.setField(\"titleSV_t\",originalTitle);\n        \tdoc.setField(\"productSV_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1SV_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2SV_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3SV_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomySV_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionSV_t\",originalDescription);\n\n            break;\n        case \"-27\":\n            doc.setField(\"titleCS_t\",originalTitle);\n        \tdoc.setField(\"productCS_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1CS_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2CS_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3CS_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyCS_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionCS_t\",originalDescription);\n\n            break;\n        case \"-28\":\n            doc.setField(\"titleDK_t\",originalTitle);\n        \tdoc.setField(\"productDK_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1DK_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2DK_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3DK_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyDK_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionDK_t\",originalDescription);\n\n            break;\n        case \"-29\":\n            doc.setField(\"titleNL_t\",originalTitle);\n        \tdoc.setField(\"productNL_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1NL_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2NL_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3NL_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyNL_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionNL_t\",originalDescription);\n\n            break;\t\n        case \"-30\":\n            doc.setField(\"titleTR_t\",originalTitle);\n        \tdoc.setField(\"productTR_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1TR_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2TR_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3TR_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyTR_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionTR_t\",originalDescription);\n\n            break;\n        case \"-31\":\n            doc.setField(\"titleHU_t\",originalTitle);\n        \tdoc.setField(\"productHU_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1HU_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2HU_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3HU_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyHU_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionHU_t\",originalDescription);\n\n            break;\n        case \"-32\":\n            doc.setField(\"titleTH_t\",originalTitle);\n        \tdoc.setField(\"productTH_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1TH_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2TH_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3TH_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyTH_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionTH_t\",originalDescription);\n\n            break;\n        case \"-34\":\n            doc.setField(\"titleVI_t\",originalTitle);\n        \tdoc.setField(\"productVI_ss\",originalProductName);\n        \tdoc.setField(\"productTaxonomyL1VI_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2VI_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3VI_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyVI_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionVI_t\",originalDescription);\n\n            break;\t\t\n\n                   }\n    }\n  \n\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Copy data to lang-specific fields (JS)",
    "secretSourceStageId" : "dnq"
  }, {
    "type" : "javascript-index",
    "id" : "5un",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\nvar theCustomerIDs = [];\n\n  //logger.info(\"zzz *** contract and customer lookup function main ***\")\n  \n  if (doc.getId() != null) { \n\n    \n\tvar productSeries = doc.getFirstFieldValue(\"productSeriesId_l\");\n\t\n\t//logger.info(\"zzz product series id is:  \" + productSeries);\n\t\n    \n    \tif (productSeries!=null){ \n\n\t\t\t// lookup this Product Series ID in MyParkerContracts data\n\t\t\n\t\t\tvar contractIDvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"siteSection\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/MyParkerContracts-default/collections/MyParkerContracts/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&q=productSeriesID_l:\" + productSeries + \"&debug=false&rows=1000\"));\n      \n\n      \n      \t\t\t//logger.info(\"zzz Contract URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"zzz *** Contract Query Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"zzz Contracts Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                   // logger.info(\"zzz Num responses of contracts: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                       // logger.info(\"zzz contractIDvalue \" + i + \": \" + resp[i].contractID_s);\n\t\t  \t\t\t\tcontractIDvalues.push(resp[i].contractID_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n    \t\t\t}\n          \n\t\t  \n\t\t//  logger.info(\"zzz num items in contract ID BEFORE filter is: \" + contractIDvalues.size);\n\ncontractIDvalues = contractIDvalues.filter( function( item, index, inputArray ) {\n           return inputArray.indexOf(item) == index;\n    });\n\n         // logger.info(\"zzz num items in contract ID AFTER filter is: \" + contractIDvalues.size);\n        \t\n\n\t\t\tvar contractID = contractIDvalues;  \n                    \n        //  logger.info(\"zzz contractID: \" + contractID);\n          \n\t\t  \n\t\t  \n\t\t  \n\t\t  \n\n\tfor each (var contractidvalue in contractID) {\n \n  \n\t\t//  logger.info(\"zzzzzzzzzzzzzzzz individual id to process is:  \" + contractidvalue);\n\t\t  \n    var customeridvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLCstuomerID = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLCstuomerID = \"\";\n      try {\n     var URLCstuomerID = new URL((\"http://localhost:8764/api/apollo/query-pipelines/MyParkerCustomers-default/collections/MyParkerCustomers/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&q=contractID_s:\" + contractidvalue + \"&debug=false&rows=1\"));      \n      \n     // logger.info(\"zzz Customer ID Lookup URL: \" + URLCstuomerID);\n      var customerIDLookup = java.net.HttpURLConnectionTranslate;\n      customerIDLookup = URLCstuomerID.openConnection();\n      customerIDLookup.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      customerIDLookup.connect();\n      var statusTranslate = customerIDLookup.getResponseCode();\n     // logger.info(\"zzz *** Customer ID SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(customerIDLookup.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numCustomerIDs = responseTranslate.response.numFound;\n      //  logger.info(\"zzz Customer ID Num Found: \" + numCustomerIDs);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respCustomerIDs = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respCustomerIDs.length; j++) {\n         // logger.info(\"zzz Translated output Item: \" + respCustomerIDs[j].customerID_s);\n\t\t  customeridvalues.push(respCustomerIDs[j].customerID_s);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n    }\n\n\t\n          var customerIDItem = customeridvalues;\n          \n       //   logger.info(\"zzz customerids FOUND: \" + customerIDItem);\n          \n\t\t  theCustomerIDs.push(customerIDItem);\n\t\t  \n\t\t  \n  }\t\t\t  \n  \n \t \t}\n\t\t\n\t\tdoc.setField(\"customerIds_ss\", theCustomerIDs.toString());\n\t\t\n  }\n  else {\n\t  //logger.info(\"zzz: docid was null\");\n  }\n\n\n  \n  return doc;\n}\n",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "Lookup CustomerID (JS) (Non-Support)",
    "condition" : "!doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "5un"
  }, {
    "type" : "regex-extractor",
    "id" : "d2h",
    "rules" : [ {
      "source" : [ "customerIds_ss" ],
      "target" : "customerIds_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "customerPartCount_ss" ],
      "target" : "customerPartCount_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split customerID_ss (Non-support)",
    "condition" : "!doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "d2h"
  }, {
    "type" : "javascript-index",
    "id" : "vmj",
    "script" : "function(doc) {\n\n\tvar countvalue = 0;\n\t//logger.info(\"zzz get the ID\");\n\tvar productSeries = doc.getId();\n\t\n\t//logger.info(\"zzz product series id is:  \" + productSeries + \" and count is \" + countvalue);\n\t\n    \n    \tif (productSeries!=null){ \n\n\t\t\t// lookup this Product Series ID in Click Signals Aggregation data\n\t\t\n\t\t\tvar contractIDvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/lookup/collections/ParkerDotComMain_signals_aggr/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&q=doc_id_s:\\\"\" + productSeries + \"\\\"&debug=false&rows=1\"));\n        \n      \t\t\t//logger.info(\"zzz Singals URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"zzz *** Signals Query Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"zzz Signal records found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n\t\t\t\t\tif (resp.length>0){\n\t\t\t\t\t\t\tcountvalue = resp[0].aggr_count_i;\n\t\t\t\t\t\t\t//logger.info(\"zzz count value for : \" + productSeries + \": \" + countvalue);\n\t\t  \t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//logger.info(\"zzz NO count value found for : \" + productSeries);\n\t\t\t\t\t\t}\n\t\t\t\t\t\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n    \t\t\t}\n\t\t\tdoc.setField(\"click_count_i\", countvalue);\n\t\t}\n\t\telse {\n\t\t\t//logger.info(\"zzz the product series is null\");\n\t\t}\n  \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Lookup Click Count for Product Series",
    "condition" : "!doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "vmj"
  }, {
    "type" : "javascript-index",
    "id" : "b9c",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** siteSection translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"siteSection_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n\t\t\t//logger.info(\"language is not null\");\n\t\t\t//logger.info(\"English Value to find: \" + englishValue);\n\t\t\t//logger.info(\"**** get English Parent ***\");\n  \n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"siteSection\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"siteSectionEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionPT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionPT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionPL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionPL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}\n",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "siteSectionXX facet translation (JS)",
    "condition" : "doc.hasField(\"siteSection_ss\");",
    "secretSourceStageId" : "b9c"
  }, {
    "type" : "javascript-index",
    "id" : "cb",
    "script" : "function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** siteSubSection translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"siteSubSection_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n          //logger.info(\"language is not null\");\n          //logger.info(\"English Value to find: \" + englishValue);\n          //logger.info(\"**** get English Parent ***\");\n  \n  \t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"siteSubSection\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"siteSubSectionEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionPT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionPT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionPL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionPL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "siteSubSectionXX facet translation (JS)",
    "condition" : "doc.hasField(\"siteSubSection_ss\");",
    "secretSourceStageId" : "cb"
  }, {
    "type" : "javascript-index",
    "id" : "7ev",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** supportType translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"supportType_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n\t\t\t//logger.info(\"language is not null\");\n\t\t\t//logger.info(\"English Value to find: \" + englishValue);\n\t\t\t//logger.info(\"**** get English Parent ***\");\n  \n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"Support Category\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"supportTypeEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypePT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypePT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypePL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypePL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportTypeVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportTypeVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}\n",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "supportTypeXX facet translation (JS)",
    "condition" : "doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "7ev"
  }, {
    "type" : "javascript-index",
    "id" : "g3zs",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** supportResourceType translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"supportResourceType_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n\t\t\t//logger.info(\"language is not null\");\n\t\t\t//logger.info(\"English Value to find: \" + englishValue);\n\t\t\t//logger.info(\"**** get English Parent ***\");\n  \n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"Support Sub Category\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"supportResourceTypeEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypePT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypePT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypePL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypePL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"supportResourceTypeVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"supportResourceTypeVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}\n",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "supportResourceTypeXX facet translation (JS)",
    "condition" : "doc.hasField(\"supportResourceType_ss\");",
    "secretSourceStageId" : "g3zs"
  }, {
    "type" : "regex-extractor",
    "id" : "o2s",
    "rules" : [ {
      "source" : [ "siteSectionEN_ss" ],
      "target" : "siteSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFR_ss" ],
      "target" : "siteSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDE_ss" ],
      "target" : "siteSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionIT_ss" ],
      "target" : "siteSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionES_ss" ],
      "target" : "siteSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPT_ss" ],
      "target" : "siteSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionZH_ss" ],
      "target" : "siteSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTW_ss" ],
      "target" : "siteSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionKO_ss" ],
      "target" : "siteSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionJP_ss" ],
      "target" : "siteSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionRU_ss" ],
      "target" : "siteSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPL_ss" ],
      "target" : "siteSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFI_ss" ],
      "target" : "siteSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNO_ss" ],
      "target" : "siteSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionSV_ss" ],
      "target" : "siteSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionCS_ss" ],
      "target" : "siteSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDK_ss" ],
      "target" : "siteSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNL_ss" ],
      "target" : "siteSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTR_ss" ],
      "target" : "siteSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionHU_ss" ],
      "target" : "siteSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTH_ss" ],
      "target" : "siteSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionVI_ss" ],
      "target" : "siteSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSection Lang Fields",
    "secretSourceStageId" : "o2s"
  }, {
    "type" : "regex-extractor",
    "id" : "bv",
    "rules" : [ {
      "source" : [ "supportResourceTypeEN_ss" ],
      "target" : "supportResourceTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeFR_ss" ],
      "target" : "supportResourceTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeDE_ss" ],
      "target" : "supportResourceTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeIT_ss" ],
      "target" : "supportResourceTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeES_ss" ],
      "target" : "supportResourceTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypePT_ss" ],
      "target" : "supportResourceTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeZH_ss" ],
      "target" : "supportResourceTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTW_ss" ],
      "target" : "supportResourceTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeKO_ss" ],
      "target" : "supportResourceTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeJP_ss" ],
      "target" : "supportResourceTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeRU_ss" ],
      "target" : "supportResourceTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypePL_ss" ],
      "target" : "supportResourceTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeFI_ss" ],
      "target" : "supportResourceTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeNO_ss" ],
      "target" : "supportResourceTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeSV_ss" ],
      "target" : "supportResourceTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeCS_ss" ],
      "target" : "supportResourceTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeDK_ss" ],
      "target" : "supportResourceTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeNL_ss" ],
      "target" : "supportResourceTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTR_ss" ],
      "target" : "supportResourceTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeHU_ss" ],
      "target" : "supportResourceTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTH_ss" ],
      "target" : "supportResourceTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeVI_ss" ],
      "target" : "supportResourceTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split supportResourceType Lang Fields",
    "secretSourceStageId" : "bv"
  }, {
    "type" : "regex-extractor",
    "id" : "o8",
    "rules" : [ {
      "source" : [ "supportTypeEN_ss" ],
      "target" : "supportTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeFR_ss" ],
      "target" : "supportTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeDE_ss" ],
      "target" : "supportTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeES_ss" ],
      "target" : "supportTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypePT_ss" ],
      "target" : "supportTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeZH_ss" ],
      "target" : "supportTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTW_ss" ],
      "target" : "supportTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeKO_ss" ],
      "target" : "supportTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeJP_ss" ],
      "target" : "supportTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeRU_ss" ],
      "target" : "supportTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypePL_ss" ],
      "target" : "supportTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeFI_ss" ],
      "target" : "supportTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeNO_ss" ],
      "target" : "supportTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeSV_ss" ],
      "target" : "supportTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeCS_ss" ],
      "target" : "supportTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeDK_ss" ],
      "target" : "supportTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeNL_ss" ],
      "target" : "supportTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTR_ss" ],
      "target" : "supportTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeHU_ss" ],
      "target" : "supportTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTH_ss" ],
      "target" : "supportTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeVI_ss" ],
      "target" : "supportTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeIT_ss" ],
      "target" : "supportTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split supportType Lang Fields",
    "secretSourceStageId" : "o8"
  }, {
    "type" : "regex-extractor",
    "id" : "b4",
    "rules" : [ {
      "source" : [ "siteSubSectionEN_ss" ],
      "target" : "siteSubSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFR_ss" ],
      "target" : "siteSubSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDE_ss" ],
      "target" : "siteSubSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionIT_ss" ],
      "target" : "siteSubSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionES_ss" ],
      "target" : "siteSubSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPT_ss" ],
      "target" : "siteSubSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionZH_ss" ],
      "target" : "siteSubSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTW_ss" ],
      "target" : "siteSubSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionKO_ss" ],
      "target" : "siteSubSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionJP_ss" ],
      "target" : "siteSubSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionRU_ss" ],
      "target" : "siteSubSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPL_ss" ],
      "target" : "siteSubSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFI_ss" ],
      "target" : "siteSubSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNO_ss" ],
      "target" : "siteSubSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionSV_ss" ],
      "target" : "siteSubSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionCS_ss" ],
      "target" : "siteSubSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDK_ss" ],
      "target" : "siteSubSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNL_ss" ],
      "target" : "siteSubSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTR_ss" ],
      "target" : "siteSubSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionHU_ss" ],
      "target" : "siteSubSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTH_ss" ],
      "target" : "siteSubSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionVI_ss" ],
      "target" : "siteSubSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSubSection Lang Fields",
    "secretSourceStageId" : "b4"
  }, {
    "type" : "regex-extractor",
    "id" : "b4x",
    "rules" : [ {
      "source" : [ "productTypeEN_ss" ],
      "target" : "productTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeFR_ss" ],
      "target" : "productTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeDE_ss" ],
      "target" : "productTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeIT_ss" ],
      "target" : "productTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeES_ss" ],
      "target" : "productTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypePT_ss" ],
      "target" : "productTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeZH_ss" ],
      "target" : "productTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTW_ss" ],
      "target" : "productTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeKO_ss" ],
      "target" : "productTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeJP_ss" ],
      "target" : "productTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeRU_ss" ],
      "target" : "productTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypePL_ss" ],
      "target" : "productTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeFI_ss" ],
      "target" : "productTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeNO_ss" ],
      "target" : "productTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeSV_ss" ],
      "target" : "productTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeCS_ss" ],
      "target" : "productTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeDK_ss" ],
      "target" : "productTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeNL_ss" ],
      "target" : "productTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTR_ss" ],
      "target" : "productTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeHU_ss" ],
      "target" : "productTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTH_ss" ],
      "target" : "productTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeVI_ss" ],
      "target" : "productTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split productType Lang Fields",
    "secretSourceStageId" : "b4x"
  }, {
    "type" : "javascript-index",
    "id" : "cnl",
    "script" : "function isBoolean(val) {\n  return val.valueOf() === true || val.valueOf() === false;\n}\n\nfunction determineDataType(val) {\n \n\tvar dataType = \"\";\n  \n\tif(isNaN(val)){\n\t\t//logger.info(\"zzzz: \" + val + \" is not a number\");\n\t\tdataType = \"_ss\";\n    }\n    else if (isBoolean(val))\n\t\t{\n\t\t\t//logger.info(\"zzzz: \" + val + \" is a boolean\");\n\t\t\tdataType=\"_bs\";\n\t\t}\n\telse  {\n\t\t//logger.info(\"zzzz: \" + val + \" is a number\");\n\t\tdataType = \"_ls\";\n    }\n    \n\tif (dataType==\"_ls\"){\n      \n      if (val % 1 == 0) {\n\t\t//logger.info(\"zzzz: \" + val + \" is a whole number\");\n\n        if (val<10000) {\n        \t//logger.info(\"zzzz: \" + val + \"is less than 10K\");\n        \tdataType=\"_is\"\n      \t}\n        else\n        {\n          //logger.info(\"zzzz: \" + value + \" is greater than 10K\");\n\t\t\tdataType=\"_ls\";\n        }\n      \n      }\n      else\n      {\n       //logger.info(\"zzzz: \" + val + \" is not a whole number\"); \n        dataType=\"_fs\";\n      }\n        \n    }\n  \n  return dataType;\n  \n}\n\nfunction replaceChars(value){\n  var inString = value;\n  var output;\n \n  output = inString.replace(/[^a-zA-Z0-9]/g, '_');\n  \n  return output;\n  \n}\n\nfunction processAttribute(attribute, langcode, type){\n  \n  var attributeName;\n  var cleanAttributeName;\n  var finalAttributeName;\n  var value = [];\n  var dataType;\n  var numValues;\n  var i = 0;\n  \n  // language wrapper\n  \n  switch (langcode) {\n\n    case \"EN\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueEN_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueEN_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueEN_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;   \n\n    case \"CS\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueCS_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueCS_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueCS_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    case \"DE\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueDE_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueDE_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueDE_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    case \"DK\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueDK_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueDK_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueDK_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    case \"ES\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueES_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueES_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueES_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n\n    case \"FI\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueFI_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueFI_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueFI_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n\n    case \"FR\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueFR_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueFR_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueFR_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    case \"HU\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueHU_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueHU_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueHU_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    case \"IT\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueIT_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueIT_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueIT_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    case \"JP\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueJP_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueJP_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueJP_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n\n    case \"KO\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueKO_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueKO_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueKO_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    case \"NL\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueNL_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueNL_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueNL_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    case \"NO\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueNO_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueNO_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueNO_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    case \"PL\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valuePL_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valuePL_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valuePL_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    case \"PT\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n      \tif (typeof attribute.valuePT_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valuePT_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valuePT_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;    \n      \n    case \"RU\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueRU_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueRU_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueRU_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    case \"SV\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueSV_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueSV_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueSV_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;\n      \n    case \"TH\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueTH_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueTH_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueTH_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;   \n      \n    case \"TR\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueTR_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueTR_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueTR_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    case \"TW\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueTW_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueTW_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueTW_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;   \n      \n    case \"VI\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueVI_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueVI_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueVI_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;\n      \n    case \"ZH\":\n      \n  \t\t//logger.info(\"zzzz: processing \" + attribute + \" for \" + langcode );\n  \t\t//logger.info(\"zzzz AttributeName: \" + attribute.attributeNameEN_s);\n  \t\tattributeName = attribute.attributeNameEN_s;\n  \t\tcleanAttributeName = replaceChars(attributeName);\n     \tif (typeof attribute.valueZH_ss != 'undefined'){\n  \t\t\tnumValues = attribute.valueZH_ss.length;\n      \t}\n      \telse\n      \t{\n        \tnumValues = 0;\n            value = \"\";\n      \t}\n  \t\tfor (i = 0; i < numValues; i++) {\n  \t\t\tvalue.push(attribute.valueZH_ss[i]);\n    \t\tdataType = determineDataType(value);\n    \t\t//logger.info(\"zzzz Data Type of value: \" + dataType);\n  \t\t}\n  \n  \t\tfinalAttributeName = type + cleanAttributeName + langcode + dataType;\n  \t\t//logger.info(\"zzzz: finalAttributeName = \" + finalAttributeName);\n  \n  \t\tbreak;         \n      \n    default:\n      \n      finalAttributeName = \"invalid\";\n      value = \"\";\n      break;\n      \n                  }\n  // language wrapper ends\n  \n return [finalAttributeName, value]; \n}\n\n\nfunction getAttributes(type, id){\n \n  var attType = type;\n  var pSeriesId = id;\n  var attributes;\n  var HttpURLConnection = java.net.HttpURLConnection;\n  var URL = java.net.URL;\n  var InputStreamReader = java.io.InputStreamReader;\n  var BufferedReader = java.io.BufferedReader;\n  var e = java.lang.Exception;\n  \n  //logger.info(\"zzzz: Inside Get Attributes\");\n  //logger.info(\"zzzz type: \" + attType);\n  //logger.info(\"zzzz pSeriesId: \" + pSeriesId);\n  \n  switch (attType) {\n      \n    case \"facetable\":\n      fqFilter=\"facetable_b\";\n      break;\n    case \"displayable\":\n      fqFilter=\"displayable_b\";\n      break;\n    default:\n      fqFilter=\"xxxx\";\n      break;\n                 }\n  \n  try {\n  \n  var url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComAttributes-default/collections/ParkerDotComAttributes/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=type_s:(%22ps-descriptive-attribute%22)&fq=\" + fqFilter + \":(%22true%22)&q=productId_s:\" + pSeriesId + \"&debug=false&rows=100\"));\n  \n    \n    //logger.info(\"zzzzz url: \" + url);\n  \n  var c = java.net.HttpURLConnection;\n  c = url.openConnection();\n  c.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n  c.connect();\n  var status = c.getResponseCode();\n  \n  //logger.info(\"zzzzz CStatus: \" + status);\n\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\tvar reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n\t\tvar response = JSON.parse(reader.readLine());\n\t\tvar numFound = response.response.numFound;\n    \n\t\t//logger.info(\"zzzzz numFound: \" + numFound);\n    \n\t\tattributes = response.response.docs;\n\t\t//logger.info(\"zzzzz Array Length: \" + attributes.length);\n    }\n\t\n  }\n   catch (e) {\n     logger.error(e);\n     logger.info(\"zzzz Attributes Search Lookup Error: \" + e);\n   }\n  \n  \n  return attributes;\n  \n}\n\nfunction (doc, ctx) {\n if (doc.getId() != null)  {\n\t//logger.info(\"zzzz: Attribute Processing\");\n  \n\tvar productSeriesId = doc.getFieldValues(\"productSeriesId_l\");\n    var languages = doc.getFieldValues(\"languageCode_ss\");\n  \n  \n\t//logger.info(\"zzzz Product Series Id: \" + productSeriesId[0]);\n  \n  \n\tvar facetableAttributes = [];\n  \n  \t//logger.info(\"zzzz: Entering Facetable Attributes Processing\");\n  \tfacetableAttributes = getAttributes(\"facetable\",productSeriesId[0]);\n  \n  //logger.info(\"zzzz how many we have: \" + facetableAttributes.length);\n  \n  var attributeName;\n  var cleanAttributeName;\n  var value;\n  var value2;\n  var facetableAttributeList = [];\n  var dataType;\n   var processedAttribute = [];\n   var pipelineFAL = [];\n  \n   for each (var lang in languages) {\n   \n     //logger.info(\"zzzz: DescFA now processing language: \" + lang);\n     \n  for each (var attribute in facetableAttributes) {\n    \n    processedAttribute = processAttribute(attribute, lang, \"desFCA_\");\n    //logger.info(\"zzzz: outcoming attribute \" + processedAttribute[0]); \n    \n    for each (value in processedAttribute[1]) {\n      //logger.info(\"zzzz: adding .... \" + value); \n      doc.addField( processedAttribute[0], value);\n    }\n    \n    doc.addField(\"descFacetableAttributeList\" + lang +\"_ss\",processedAttribute[0]);\n    pipelineFAL.push(processedAttribute[0]);\n\n    }\n    \n  }\n    \n  \n  \n  var displayableAttributes = [];\n  \n  \t//logger.info(\"zzzz: Entering Displayable Attributes Processing\");\n  \tdisplayableAttributes = getAttributes(\"displayable\",productSeriesId[0]);\n  \n  //logger.info(\"zzzz how many we have: \" + displayableAttributes.length);\n    \n   for each (var lang2 in languages) {\n   \n     //logger.info(\"zzzz DescDspA now processing language: \" + lang);\n   \n  for each (var attribute2 in displayableAttributes) {\n      \n    processedAttribute = processAttribute(attribute2, lang2, \"desDSP_\");\n    //logger.info(\"zzzz: outcoming attribute \" + processedAttribute[0]); \n    \n    for each (value2 in processedAttribute[1]) {\n      //logger.info(\"zzzz: adding .... \" + value2); \n      doc.addField( processedAttribute[0], value2);\n    }\n    \n    doc.addField(\"descDisplayableAttributeList\" + lang2 + \"_ss\",processedAttribute[0]);\n    }    \n    \n  \n }\n \n \n }\n\n         ctx.setProperty(\"descFacetableAttributeList\",pipelineFAL);\n     \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "getAttributes",
    "condition" : "!doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "cnl"
  }, {
    "type" : "javascript-index",
    "id" : "c29",
    "script" : "/* Last modified: 2018-01-10\n   Last modified by:  Terry Chambers / Onix\n   Change summary:\n   2018-01-10 - corrects productTaxonomyL1, adds L2, L3\n   2018-01-08 - adds new fields for Sprint 2 (productType, newsEventType, otherType)\n*/\n// HASHING FUNCTION\nfunction hashTheFacet(doc, facetToProcess, id) {\n    var facetValues;\n    var newHashedFacetValue = [];\n    var newHashedFacetFQ = [];\n    // get the values of the facet to be processed\n    facetValues = doc.getFieldValues(facetToProcess);\n    //logger.info(\"hashTheFacet(\" + facetToProcess + \")\");\n    // loop through the facet values and create hashes for them\n    facetValues.forEach(function (f) {\n\t\tif (f  != null){\n\t\t\tif (f.length!==0){\n\t\t\t\tvar newHashedFacet = f.hashCode();\t\t\n\t\t\t\tnewHashedFacetValue.push(\"p\" + newHashedFacet + \"$$$\" + f);\n\t\t\t\tnewHashedFacetFQ.push(\"p\" + newHashedFacet);\n\t\t\t}\n\t\t}\n    });\n    // return the hashed items\n    return [newHashedFacetValue, newHashedFacetFQ];\n}\n\nfunction computeLanguages(doc, id) {\n    // get the list of languages from the document\n    var langsfromdoc = doc.getFieldValues(\"language_is\");\n    var languages = [];\n    //logger.info(\"langsfromdoc \" + langsfromdoc);\n    //logger.info(\"Num of languages: \" + langsfromdoc.length);\n    // iterate through the languages and put them into an array\n    for each(var lang in langsfromdoc) {\n            switch (lang) {\n            case \"-1\":\n                languages.push('EN');\n                break;\n            case \"-2\":\n                languages.push('FR');\n                break;\n            case \"-3\":\n                languages.push('DE');\n                break;\n            case \"-4\":\n                languages.push('IT');\n                break;\n            case \"-5\":\n                languages.push('ES');\n                break;\n            case \"-6\":\n                languages.push('PT');\n                break;\n            case \"-7\":\n                languages.push('ZH');\n                break;\n            case \"-8\":\n                languages.push('TW');\n                break;\n            case \"-9\":\n                languages.push('KO');\n                break;\n            case \"-10\":\n                languages.push('JP');\n                break;\n            case \"-20\":\n                languages.push('RU');\n                break;\n            case \"-22\":\n                languages.push('PL');\n                break;\n            case \"-24\":\n                languages.push('FI');\n                break;\n            case \"-25\":\n                languages.push('NO');\n                break;\n            case \"-26\":\n                languages.push('SV');\n                break;\n            case \"-27\":\n                languages.push('CS');\n                break;\n            case \"-28\":\n                languages.push('DK');\n                break;\n            case \"-29\":\n                languages.push('NL');\n                break;\n            case \"-30\":\n                languages.push('TR');\n                break;\n            case \"-31\":\n                languages.push('HU');\n                break;\n            case \"-32\":\n                languages.push('TH');\n                break;\n            case \"-34\":\n                languages.push('VI');\n                break;\n            }\n        }\n        // if no languages found, try them all, to be safe\n    if (languages.length === 0) {\n        //logger.info(\"************* no languages found *******************\");\n        languages = ['EN', 'FR', 'DE', 'IT', 'ES', 'PT', 'ZH', 'TW', 'KO', 'JP', 'RU', 'PL', 'FI', 'NO', 'SV', 'CS', 'DK', 'NL', 'TR', 'HU', 'TH', 'VI'];\n    }\n    return languages;\n}\n// MAIN FUNCTION\nfunction (doc) {\n    //var facetsToHash; // array that we'll populate with our hashes\n    var id = doc.getId();\n    // list of facet fields that need to be processed\n    var listOfFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"parkerDivisionName_ss\", \"productTaxonomyL1_s\", \"productTaxonomyL2_s\", \"productTaxonomyL3_s\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"brand_ss\", \"cadType_ss\", \"product_ss\", \"languageName_ss\", \"fileType_ss\", \"eventYear_i\", \"newsYear_i\"];\n    // list of facet fields that are localized to other languages and need to be processed\n    var listOfLangFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"product_ss\", \"productTaxonomyL1_s\",\"productTaxonomyL2_s\",\"productTaxonomyL3_s\"];\n    var languages = []; // used to track the applicable languages\n    // if there are any language-based facets, compute the languages for this document\n    //logger.info(\"This is the list of LangFacets \" + listOfLangFacets);\n    if (listOfLangFacets) {\n        languages = computeLanguages(doc, id);\n        //logger.info(\"Finished computeLanguages(doc, id): \" + doc + \" , \" + id);\n        //logger.info(\"Resulting languages are \" + languages);\n    }\n    // process each facet from \"listOfFacets\" and store the values on to the document\n    for each(var facet in listOfFacets) {\n            //logger.info(\"The facet is \" + facet);\n            var location = facet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n            var tmpFacet = facet; // store the full facet name temporarily\n            var thisFacetShort = tmpFacet.substring(0, location); // take the facet name without the _ and data type\n            var facetsToHash = hashTheFacet(doc, facet, id); // calculate the hashes\n            //logger.info(\"facetsToHash \" + facetsToHash);\n            // takes the function output and puts into a string and then array\n            //logger.info(Object.prototype.toString.call(facetsToHash));\n            var facetsWithHashes = facetsToHash[0];\n            //logger.info(facetsWithHashes);\n            if (facetsWithHashes.length!==0) {\n                var facetsWithHashesArray = facetsWithHashes;\n                for each(var fwh in facetsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_facet\", fwh); // set the _facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array  \n            var fqsWithHashes = facetsToHash[1];\n            if (fqsWithHashes.length!==0) {\n                var fqsWithHashesArray = fqsWithHashes;\n                for each(var fqs in fqsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_fq\", fqs); // set the _fq field on the document\n                }\n            }\n        }\n        // process each facet from \"listOfLangFacets\" and store the values on the document\n    for each(var langFacet in listOfLangFacets) {\n        var location = langFacet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n        var thisFacetVarType = langFacet.substring(location + 1, langFacet.length); // take the data type from the facet name\n        for each(var lang in languages) {\n            var langFacetShort = langFacet.substring(0, location); // clear the field from previous runs\n            var thisFacetFull = langFacetShort + lang + \"_\" + thisFacetVarType; // compute the name of the full facet to process hashes for\n            langFacetShort = langFacetShort + lang; // compute the prefix of the facet name that will be written back to the document\n            var facetsToHash = hashTheFacet(doc, thisFacetFull, id); // calculate the hashes\n            // takes the function output and puts into a string and then array      \n            var facetsWithHashesLG = facetsToHash[0];\n            //logger.info(\"facetsWithHashesLG: \" + facetsWithHashesLG);\n            if (facetsWithHashesLG.length!==0) {\n                var facetsWithHashesLGArray = facetsWithHashesLG;\n                for each(var lg in facetsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_facet\", lg); // set the XX_facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array      \n            var fqsWithHashesLG = facetsToHash[1];\n            if (fqsWithHashesLG.length!==0) {\n                var fqsWithHashesLGArray = fqsWithHashesLG;\n                for each(var fqlg in fqsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_fq\", fqlg); // set the XX_fq field on the document\n                }\n            }\n        }\n    }\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Facet Hashing",
    "condition" : "",
    "secretSourceStageId" : "c29"
  }, {
    "type" : "javascript-index",
    "id" : "jqs",
    "script" : "/* Last modified: 2019-04-24\n   Last modified by:  Terry Chambers / Onix\n   Change summary:\n   2019-04-24 - fix for multiple same-level taxonomies\n   2018-08-22 - fix for L4+ levels\n   2018-06-10 - switch to facet encodings with Base64\n   2018-01-10 - corrects productTaxonomyL1, adds L2, L3\n   2018-01-08 - adds new fields for Sprint 2 (productType, newsEventType, otherType)\n*/\n\nfunction decode(encoded){\n  \n  \n  var Base64 = {\n\tdecode: function (str) {\n\t\treturn new java.lang.String(java.util.Base64.decoder.decode(str));\n\t},\n\tencode: function (str) {\n\t\treturn java.util.Base64.encoder.encodeToString(str.bytes);\n\t}\n};\n  \n  var decodedValue= Base64.decode(encoded);\n  \n  return decodedValue;\n  \n}\n\nfunction encode(decoded){\n  \n  \n  var Base64 = {\n\tdecode: function (str) {\n\t\treturn new java.lang.String(java.util.Base64.decoder.decode(str));\n\t},\n\tencode: function (str) {\n\t\treturn java.util.Base64.encoder.encodeToString(str.bytes);\n\t}\n};\n  \n  var encodedValue= Base64.encode(decoded);\n  \n  return encodedValue;\n  \n}\n\n\n// Encoding Facet FUNCTION\nfunction encodeTheFacet(doc, facetToProcess, id) {\n    var facetedValues;\n    var newEncodedFacetValue = [];\n    var newEncodedFacetFQ = [];\n    // get the values of the facet to be processed\n\n  //logger.info(\"zzz encodings the facets now ...\");\n  \n \n  \n  facetedValues = doc.getFieldValues(facetToProcess);\n \n  var tmp = facetedValues.toString();\n  //logger.info(\"zzz tmp: \" + tmp);\n  \n  var facetedValuesString = facetedValues.toString().replace(\"[\",\"\").replace(\"]\",\"\");\n  //logger.info(\"zzz original: \" + facetedValuesString);\n\n  facetedValuesString = facetedValuesString.replace(/\\/,/g, \"/~~~\");\n  //logger.info(\"zzz replace: \" + facetedValuesString);\n  \n  var facetedValuesSplit = facetedValuesString.split(\"~~~\");\n  \n  \n  \n    //logger.info(\"encodeTheFacet(\" + facetToProcess + \")\");\n    // loop through the facet values and create encodings for them\n    facetedValuesSplit.forEach(function (f) {\n\t\tif (f  != null){\n\t\t\tif (f.length!==0){\n              //logger.info(\"zzz split for each value: \" + f);\n                var newEncodedFacet = encode(f);\n\t\t\t\tnewEncodedFacetValue.push(f + \"$$$\" + newEncodedFacet);\n\t\t\t\tnewEncodedFacetFQ.push(newEncodedFacet);\n\t\t\t}\n\t\t}\n    });\n\n    // return the encoded items\n\n    return [newEncodedFacetValue, newEncodedFacetFQ];\n}\n\nfunction computeLanguages(doc, id) {\n    // get the list of languages from the document\n    var langsfromdoc = doc.getFieldValues(\"language_is\");\n    var languages = [];\n    //logger.info(\"zzz langsfromdoc \" + langsfromdoc);\n    //logger.info(\"zzz Num of languages: \" + langsfromdoc.length);\n    // iterate through the languages and put them into an array\n    for each(var lang in langsfromdoc) {\n            switch (lang) {\n            case \"-1\":\n                languages.push('EN');\n                break;\n            case \"-2\":\n                languages.push('FR');\n                break;\n            case \"-3\":\n                languages.push('DE');\n                break;\n            case \"-4\":\n                languages.push('IT');\n                break;\n            case \"-5\":\n                languages.push('ES');\n                break;\n            case \"-6\":\n                languages.push('PT');\n                break;\n            case \"-7\":\n                languages.push('ZH');\n                break;\n            case \"-8\":\n                languages.push('TW');\n                break;\n            case \"-9\":\n                languages.push('KO');\n                break;\n            case \"-10\":\n                languages.push('JP');\n                break;\n            case \"-20\":\n                languages.push('RU');\n                break;\n            case \"-22\":\n                languages.push('PL');\n                break;\n            case \"-24\":\n                languages.push('FI');\n                break;\n            case \"-25\":\n                languages.push('NO');\n                break;\n            case \"-26\":\n                languages.push('SV');\n                break;\n            case \"-27\":\n                languages.push('CS');\n                break;\n            case \"-28\":\n                languages.push('DK');\n                break;\n            case \"-29\":\n                languages.push('NL');\n                break;\n            case \"-30\":\n                languages.push('TR');\n                break;\n            case \"-31\":\n                languages.push('HU');\n                break;\n            case \"-32\":\n                languages.push('TH');\n                break;\n            case \"-34\":\n                languages.push('VI');\n                break;\n            }\n        }\n        // if no languages found, try them all, to be safe\n    if (languages.length === 0) {\n        //logger.info(\"zzz ************* no languages found *******************\");\n        languages = ['EN', 'FR', 'DE', 'IT', 'ES', 'PT', 'ZH', 'TW', 'KO', 'JP', 'RU', 'PL', 'FI', 'NO', 'SV', 'CS', 'DK', 'NL', 'TR', 'HU', 'TH', 'VI'];\n    }\n    return languages;\n}\n// MAIN FUNCTION\nfunction (doc) {\n    var id = doc.getId();\n  if(id){\n    // list of facet fields that need to be processed\n   // var listOfFacets = [\"productTaxonomy_ss\"];\n  var listOfFacets = [\"productTaxonomy_ss\"];\n    // list of facet fields that are localized to other languages and need to be processed\n    var listOfLangFacets = [\"productTaxonomy_ss\"];\n    var languages = []; // used to track the applicable languages\n    var lang;\n    // if there are any language-based facets, compute the languages for this document\n    //logger.info(\"This is the list of LangFacets \" + listOfLangFacets);\n    if (listOfLangFacets) {\n        languages = computeLanguages(doc, id);\n        //logger.info(\"Finished computeLanguages(doc, id): \" + doc + \" , \" + id);\n        //logger.info(\"zzz Resulting languages are \" + languages);\n    }\n    // process each facet from \"listOfFacets\" and store the values on to the document\n    for each(var facet in listOfFacets) {\n            //logger.info(\"The facet is \" + facet);\n            var location = facet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n            var tmpFacet = facet; // store the full facet name temporarily\n            var thisFacetShort = tmpFacet.substring(0, location); // take the facet name without the _ and data type\n            var facetsToEncode = encodeTheFacet(doc, facet, id); // calculate the encodings\n            //logger.info(\"facetsToEncode \" + facetsToEncode);\n            // takes the function output and puts into a string and then array\n            //logger.info(Object.prototype.toString.call(facetsToEncode));\n            var facetsWithEncodings = facetsToEncode[0];\n            //logger.info(facetsWithEncodings);\n            if (facetsWithEncodings.length!==0) {\n                var facetsWithEncodingsArray = facetsWithEncodings;\n                for each(var fwh in facetsWithEncodingsArray) {\n                  //logger.info(\"zzz adding \" + fwh);\n                    doc.addField(thisFacetShort + \"_facet\", fwh); // set the _facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array  \n            var fqsWithEncodings = facetsToEncode[1];\n            if (fqsWithEncodings.length!==0) {\n                var fqsWithEncodingsArray = fqsWithEncodings;\n                for each(var fqs in fqsWithEncodingsArray) {\n                  //logger.info(\"zzz adding \" + fqs);\n                    doc.addField(thisFacetShort + \"_fq\", fqs); // set the _fq field on the document\n                }\n            }\n        }\n        // process each facet from \"listOfLangFacets\" and store the values on the document\n    for each(var langFacet in listOfLangFacets) {\n        var location = langFacet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n        var thisFacetVarType = langFacet.substring(location + 1, langFacet.length); // take the data type from the facet name\n        for each(lang in languages) {\n          //logger.info(\"zzz processing: \" + lang);\n            var langFacetShort = langFacet.substring(0, location); // clear the field from previous runs\n            var thisFacetFull = langFacetShort + lang + \"_\" + thisFacetVarType; // compute the name of the full facet to process encodings for\n          //logger.info(\"zzz thisFacetFull: \" + thisFacetFull);\n            langFacetShort = langFacetShort + lang; // compute the prefix of the facet name that will be written back to the document\n            var facetsToEncode = encodeTheFacet(doc, thisFacetFull, id); // calculate the encodings\n            // takes the function output and puts into a string and then array      \n            var facetsWithEncodingsLG = facetsToEncode[0];\n            //logger.info(\"zzz facetsWithEncodingsLG for \" + lang + \" : \" + facetsWithEncodingsLG);\n            if (facetsWithEncodingsLG.length!==0) {\n                var facetsWithEncodingsLGArray = facetsWithEncodingsLG;\n                for each(var lg in facetsWithEncodingsLGArray) {\n                    doc.addField(langFacetShort + \"_facet\", lg); // set the XX_facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array      \n            var fqsWithEncodingsLG = facetsToEncode[1];\n            if (fqsWithEncodingsLG.length!==0) {\n                var fqsWithEncodingsLGArray = fqsWithEncodingsLG;\n                for each(var fqlg in fqsWithEncodingsLGArray) {\n                    doc.addField(langFacetShort + \"_fq\", fqlg); // set the XX_fq field on the document\n                }\n            }\n        }\n    }\n  }\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "New Facet Encoding for Taxonomy",
    "secretSourceStageId" : "jqs"
  }, {
    "type" : "javascript-index",
    "id" : "h5p",
    "script" : "/* Last modified: 2019-04-24\n   Last modified by:  Terry Chambers / Onix\n   Change summary:\n   2019-04-24 - fix for multiple same-level taxonomies\n   2018-08-22 - fix for L4+ levels\n   2018-06-10 - switch to facet encodings with Base64\n   2018-01-10 - corrects productTaxonomyL1, adds L2, L3\n   2018-01-08 - adds new fields for Sprint 2 (productType, newsEventType, otherType)\n*/\n\nfunction decode(encoded){\n  \n  \n  var Base64 = {\n\tdecode: function (str) {\n\t\treturn new java.lang.String(java.util.Base64.decoder.decode(str));\n\t},\n\tencode: function (str) {\n\t\treturn java.util.Base64.encoder.encodeToString(str.bytes);\n\t}\n};\n  \n  var decodedValue= Base64.decode(encoded);\n  \n  return decodedValue;\n  \n}\n\nfunction encode(decoded){\n  \n  \n  var Base64 = {\n\tdecode: function (str) {\n\t\treturn new java.lang.String(java.util.Base64.decoder.decode(str));\n\t},\n\tencode: function (str) {\n\t\treturn java.util.Base64.encoder.encodeToString(str.bytes);\n\t}\n};\n  \n  var encodedValue= Base64.encode(decoded);\n  \n  return encodedValue;\n  \n}\n\n\n// Encoding Facet FUNCTION\nfunction encodeTheFacet(doc, facetToProcess, id) {\n    var facetedValues;\n    var newEncodedFacetValue = [];\n    var newEncodedFacetFQ = [];\n    // get the values of the facet to be processed\n\n  //logger.info(\"zzz encodings the facets now ...\");\n  \n \n  \n  facetedValues = doc.getFieldValues(facetToProcess);\n \n  var tmp = facetedValues.toString();\n  //logger.info(\"zzz tmp: \" + tmp);\n  \n  var facetedValuesString = facetedValues.toString().replace(\"[\",\"\").replace(\"]\",\"\");\n  //logger.info(\"zzz original: \" + facetedValuesString);\n\n  facetedValuesString = facetedValuesString.replace(/\\/,/g, \"/~~~\");\n  //logger.info(\"zzz replace: \" + facetedValuesString);\n  \n  var facetedValuesSplit = facetedValuesString.split(\"~~~\");\n  \n  \n  \n    //logger.info(\"encodeTheFacet(\" + facetToProcess + \")\");\n    // loop through the facet values and create encodings for them\n    facetedValuesSplit.forEach(function (f) {\n\t\tif (f  != null){\n\t\t\tif (f.length!==0){\n              //logger.info(\"zzz split for each value: \" + f);\n                var newEncodedFacet = encode(f);\n\t\t\t\tnewEncodedFacetValue.push(f + \"$$$\" + newEncodedFacet);\n\t\t\t\tnewEncodedFacetFQ.push(newEncodedFacet);\n\t\t\t}\n\t\t}\n    });\n\n    // return the encoded items\n\n    return [newEncodedFacetValue, newEncodedFacetFQ];\n}\n\nfunction computeLanguages(doc, id) {\n    // get the list of languages from the document\n    var langsfromdoc = doc.getFieldValues(\"language_is\");\n    var languages = [];\n    //logger.info(\"zzz langsfromdoc \" + langsfromdoc);\n    //logger.info(\"zzz Num of languages: \" + langsfromdoc.length);\n    // iterate through the languages and put them into an array\n    for each(var lang in langsfromdoc) {\n            switch (lang) {\n            case \"-1\":\n                languages.push('EN');\n                break;\n            case \"-2\":\n                languages.push('FR');\n                break;\n            case \"-3\":\n                languages.push('DE');\n                break;\n            case \"-4\":\n                languages.push('IT');\n                break;\n            case \"-5\":\n                languages.push('ES');\n                break;\n            case \"-6\":\n                languages.push('PT');\n                break;\n            case \"-7\":\n                languages.push('ZH');\n                break;\n            case \"-8\":\n                languages.push('TW');\n                break;\n            case \"-9\":\n                languages.push('KO');\n                break;\n            case \"-10\":\n                languages.push('JP');\n                break;\n            case \"-20\":\n                languages.push('RU');\n                break;\n            case \"-22\":\n                languages.push('PL');\n                break;\n            case \"-24\":\n                languages.push('FI');\n                break;\n            case \"-25\":\n                languages.push('NO');\n                break;\n            case \"-26\":\n                languages.push('SV');\n                break;\n            case \"-27\":\n                languages.push('CS');\n                break;\n            case \"-28\":\n                languages.push('DK');\n                break;\n            case \"-29\":\n                languages.push('NL');\n                break;\n            case \"-30\":\n                languages.push('TR');\n                break;\n            case \"-31\":\n                languages.push('HU');\n                break;\n            case \"-32\":\n                languages.push('TH');\n                break;\n            case \"-34\":\n                languages.push('VI');\n                break;\n            }\n        }\n        // if no languages found, try them all, to be safe\n    if (languages.length === 0) {\n        //logger.info(\"zzz ************* no languages found *******************\");\n        languages = ['EN', 'FR', 'DE', 'IT', 'ES', 'PT', 'ZH', 'TW', 'KO', 'JP', 'RU', 'PL', 'FI', 'NO', 'SV', 'CS', 'DK', 'NL', 'TR', 'HU', 'TH', 'VI'];\n    }\n    return languages;\n}\n// MAIN FUNCTION\nfunction (doc) {\n    var id = doc.getId();\n  if(id){\n    // list of facet fields that need to be processed\n   // var listOfFacets = [\"productTaxonomy_ss\"];\n  var listOfFacets = [\"productTaxonomy_ss\"];\n    // list of facet fields that are localized to other languages and need to be processed\n    var listOfLangFacets = [\"productTaxonomy_ss\"];\n    var languages = []; // used to track the applicable languages\n    var lang;\n    // if there are any language-based facets, compute the languages for this document\n    //logger.info(\"This is the list of LangFacets \" + listOfLangFacets);\n    if (listOfLangFacets) {\n        languages = computeLanguages(doc, id);\n        //logger.info(\"Finished computeLanguages(doc, id): \" + doc + \" , \" + id);\n        //logger.info(\"zzz Resulting languages are \" + languages);\n    }\n    // process each facet from \"listOfFacets\" and store the values on to the document\n    for each(var facet in listOfFacets) {\n            //logger.info(\"The facet is \" + facet);\n            var location = facet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n            var tmpFacet = facet; // store the full facet name temporarily\n            var thisFacetShort = tmpFacet.substring(0, location); // take the facet name without the _ and data type\n            var facetsToEncode = encodeTheFacet(doc, facet, id); // calculate the encodings\n            //logger.info(\"facetsToEncode \" + facetsToEncode);\n            // takes the function output and puts into a string and then array\n            //logger.info(Object.prototype.toString.call(facetsToEncode));\n            var facetsWithEncodings = facetsToEncode[0];\n            //logger.info(facetsWithEncodings);\n            if (facetsWithEncodings.length!==0) {\n                var facetsWithEncodingsArray = facetsWithEncodings;\n                for each(var fwh in facetsWithEncodingsArray) {\n                  //logger.info(\"zzz adding \" + fwh);\n                    doc.addField(thisFacetShort + \"_facet\", fwh); // set the _facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array  \n            var fqsWithEncodings = facetsToEncode[1];\n            if (fqsWithEncodings.length!==0) {\n                var fqsWithEncodingsArray = fqsWithEncodings;\n                for each(var fqs in fqsWithEncodingsArray) {\n                  //logger.info(\"zzz adding \" + fqs);\n                    doc.addField(thisFacetShort + \"_fq\", fqs); // set the _fq field on the document\n                }\n            }\n        }\n        // process each facet from \"listOfLangFacets\" and store the values on the document\n    for each(var langFacet in listOfLangFacets) {\n        var location = langFacet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n        var thisFacetVarType = langFacet.substring(location + 1, langFacet.length); // take the data type from the facet name\n        for each(lang in languages) {\n          //logger.info(\"zzz processing: \" + lang);\n            var langFacetShort = langFacet.substring(0, location); // clear the field from previous runs\n            var thisFacetFull = langFacetShort + lang + \"_\" + thisFacetVarType; // compute the name of the full facet to process encodings for\n          //logger.info(\"zzz thisFacetFull: \" + thisFacetFull);\n            langFacetShort = langFacetShort + lang; // compute the prefix of the facet name that will be written back to the document\n            var facetsToEncode = encodeTheFacet(doc, thisFacetFull, id); // calculate the encodings\n            // takes the function output and puts into a string and then array      \n            var facetsWithEncodingsLG = facetsToEncode[0];\n            //logger.info(\"zzz facetsWithEncodingsLG for \" + lang + \" : \" + facetsWithEncodingsLG);\n            if (facetsWithEncodingsLG.length!==0) {\n                var facetsWithEncodingsLGArray = facetsWithEncodingsLG;\n                for each(var lg in facetsWithEncodingsLGArray) {\n                    doc.addField(langFacetShort + \"_facet\", lg); // set the XX_facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array      \n            var fqsWithEncodingsLG = facetsToEncode[1];\n            if (fqsWithEncodingsLG.length!==0) {\n                var fqsWithEncodingsLGArray = fqsWithEncodingsLG;\n                for each(var fqlg in fqsWithEncodingsLGArray) {\n                    doc.addField(langFacetShort + \"_fq\", fqlg); // set the XX_fq field on the document\n                }\n            }\n        }\n    }\n  }\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "Facet Encoding for Taxonomy Field (JS)",
    "secretSourceStageId" : "h5p"
  }, {
    "type" : "javascript-index",
    "id" : "ttrs",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n  \tvar doclangstring = doc.getFirstFieldValue(\"language_is\");\n   \tvar originalTaxonomyfq = doc.getFirstFieldValue(\"productTaxonomy_fq\");\n    var originalTaxonomyfacet = doc.getFirstFieldValue(\"productTaxonomy_facet\");\n\t\n  \n    if (doclangstring!=null){\n  \n    switch (doclangstring) {\n\t\n\t\n        case \"-1\":\n        \tdoc.setField(\"productTaxonomyEN_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyEN_facet\",originalTaxonomyfacet);\n            break;\n        case \"-2\":\n        \tdoc.setField(\"productTaxonomyFR_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyFR_facet\",originalTaxonomyfacet);\n            break;\n        case \"-3\":\n        \tdoc.setField(\"productTaxonomyDE_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyDE_facet\",originalTaxonomyfacet);\n            break;\n        case \"-4\":\n        \tdoc.setField(\"productTaxonomyIT_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyIT_facet\",originalTaxonomyfacet);\n            break;\n        case \"-5\":\n        \tdoc.setField(\"productTaxonomyES_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyES_facet\",originalTaxonomyfacet);\n            break;\n        case \"-6\":\n        \tdoc.setField(\"productTaxonomyPT_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyPT_facet\",originalTaxonomyfacet);\n            break;\n        case \"-7\":\n        \tdoc.setField(\"productTaxonomyZH_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyZH_facet\",originalTaxonomyfacet);\n            break;\n        case \"-8\":\n        \tdoc.setField(\"productTaxonomyTW_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyTW_facet\",originalTaxonomyfacet);\n            break;\n        case \"-9\":\n        \tdoc.setField(\"productTaxonomyKO_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyKO_facet\",originalTaxonomyfacet);\n            break;\n        case \"-10\":\n        \tdoc.setField(\"productTaxonomyJP_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyJP_facet\",originalTaxonomyfacet);\n            break;\n        case \"-20\":\n        \tdoc.setField(\"productTaxonomyRU_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyRU_facet\",originalTaxonomyfacet);\n            break;\n        case \"-22\":\n        \tdoc.setField(\"productTaxonomyPL_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyPL_facet\",originalTaxonomyfacet);\n            break;\n        case \"-24\":\n        \tdoc.setField(\"productTaxonomyFI_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyFI_facet\",originalTaxonomyfacet);\n            break;\n        case \"-25\":\n        \tdoc.setField(\"productTaxonomyNO_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyNO_facet\",originalTaxonomyfacet);\n            break;\n        case \"-26\":\n        \tdoc.setField(\"productTaxonomySV_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomySV_facet\",originalTaxonomyfacet);\n            break;\n        case \"-27\":\n        \tdoc.setField(\"productTaxonomyCS_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyCS_facet\",originalTaxonomyfacet);\n            break;\n        case \"-28\":\n        \tdoc.setField(\"productTaxonomyDK_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyDK_facet\",originalTaxonomyfacet);\n            break;\n        case \"-29\":\n        \tdoc.setField(\"productTaxonomyNL_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyNL_facet\",originalTaxonomyfacet);\n            break;\t\n        case \"-30\":\n        \tdoc.setField(\"productTaxonomyTR_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyTR_facet\",originalTaxonomyfacet);\n            break;\n        case \"-31\":\n        \tdoc.setField(\"productTaxonomyHU_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyHU_facet\",originalTaxonomyfacet);\n            break;\n        case \"-32\":\n        \tdoc.setField(\"productTaxonomyTH_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyTH_facet\",originalTaxonomyfacet);\n            break;\n        case \"-34\":\n        \tdoc.setField(\"productTaxonomyVI_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyVI_facet\",originalTaxonomyfacet);\n            break;\t\t\n\n                   }\n    }\n  \n\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Copy Taxonomy fields to Language Fields",
    "secretSourceStageId" : "ttrs"
  }, {
    "type" : "field-mapping",
    "id" : "9lk",
    "mappings" : [ {
      "source" : "title_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "autosuggest_pseries_text",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Field Mapping - Non support",
    "condition" : "!doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "9lk"
  }, {
    "type" : "field-mapping",
    "id" : "dog",
    "mappings" : [ {
      "source" : "title_t",
      "target" : "autosuggest_support_config_text",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "title_s",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "field-mapping for support",
    "condition" : "doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "dog"
  }, {
    "type" : "field-mapping",
    "id" : "fed0a8a2-c424-41e6-b402-1b6f0ab8ac1a",
    "mappings" : [ {
      "source" : "productCS_ss",
      "target" : "productCS_t",
      "operation" : "copy"
    }, {
      "source" : "productDK_ss",
      "target" : "productDK_t",
      "operation" : "copy"
    }, {
      "source" : "productNL_ss",
      "target" : "productNL_t",
      "operation" : "copy"
    }, {
      "source" : "productEN_ss",
      "target" : "productEN_t",
      "operation" : "copy"
    }, {
      "source" : "productFI_ss",
      "target" : "productFI_t",
      "operation" : "copy"
    }, {
      "source" : "productFR_ss",
      "target" : "productFR_t",
      "operation" : "copy"
    }, {
      "source" : "productDE_ss",
      "target" : "productDE_t",
      "operation" : "copy"
    }, {
      "source" : "productHU_ss",
      "target" : "productHU_t",
      "operation" : "copy"
    }, {
      "source" : "productIT_ss",
      "target" : "productIT_t",
      "operation" : "copy"
    }, {
      "source" : "productJP_ss",
      "target" : "productJP_t",
      "operation" : "copy"
    }, {
      "source" : "productKO_ss",
      "target" : "productKO_t",
      "operation" : "copy"
    }, {
      "source" : "productNO_ss",
      "target" : "productNO_t",
      "operation" : "copy"
    }, {
      "source" : "productPL_ss",
      "target" : "productPL_t",
      "operation" : "copy"
    }, {
      "source" : "productPT_ss",
      "target" : "productPT_t",
      "operation" : "copy"
    }, {
      "source" : "productRU_ss",
      "target" : "productRU_t",
      "operation" : "copy"
    }, {
      "source" : "productZH_ss",
      "target" : "productZH_t",
      "operation" : "copy"
    }, {
      "source" : "productES_ss",
      "target" : "productES_t",
      "operation" : "copy"
    }, {
      "source" : "productSV_ss",
      "target" : "productSV_t",
      "operation" : "copy"
    }, {
      "source" : "productTH_ss",
      "target" : "productTH_t",
      "operation" : "copy"
    }, {
      "source" : "productTW_ss",
      "target" : "productTW_t",
      "operation" : "copy"
    }, {
      "source" : "productTR_ss",
      "target" : "productTR_t",
      "operation" : "copy"
    }, {
      "source" : "productVI_ss",
      "target" : "productVI_t",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Field mapping for product_ss to text",
    "secretSourceStageId" : "fed0a8a2-c424-41e6-b402-1b6f0ab8ac1a"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "a31e5f1e-7783-4038-8062-706a962593ad",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : true,
    "label" : "solr-dynamic-field-name-mapping",
    "secretSourceStageId" : "a31e5f1e-7783-4038-8062-706a962593ad"
  }, {
    "type" : "solr-index",
    "id" : "08d93fd2-afed-433d-ba00-7d6fc8c613f5",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "label" : "solr-index",
    "secretSourceStageId" : "08d93fd2-afed-433d-ba00-7d6fc8c613f5"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComMain-ProductSeries"
  }
}, {
  "id" : "otplOpenTextPipelineTest",
  "stages" : [ {
    "type" : "javascript-index",
    "id" : "otplii",
    "script" : "function (doc) {\n  var id = doc.getId();\n  //logger.info(\"**** Running default pipeline on \" + id + \" ****\");\n  \n  var currentdate = new Date(); \nvar datetime = \"Last Sync: \" + currentdate.getDate() + \"/\"\n                + (currentdate.getMonth()+1)  + \"/\" \n                + currentdate.getFullYear() + \" @ \"  \n                + currentdate.getHours() + \":\"  \n                + currentdate.getMinutes() + \":\" \n                + currentdate.getSeconds();\n  \n  doc.setField(\"feedTime_s\",datetime);\n  doc.setField(\"suggest_type_s\",\"standard\");\n  \n  return doc;\n  \n} \n  \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Time Stamp document (JS)",
    "secretSourceStageid" : "otplii",
    "secretSourceStageId" : "otplii"
  }, {
    "type" : "javascript-index",
    "id" : "otpleb593e8a-73e7-4b5b-b161-bef47010d3cc",
    "script" : "/* Part number character replacements for matching alternate characters\nTakes the original \"compressed part number\" (normalized, without special characters/spaces)\nand replaces specific characters to permit matching in cases where someone has transposed characters.\nThis code only handles complete replacements of single characters and does not take into account\nall the possible variations such as when there is a mixture of 1s, 0s etc and the user only makes\nan error on one of them.  These are considered edge cases and least likely to occur.\n\nWritten by Onix Networking\n\nReplaces the characters as follows:\n\nl for 1\nI for 1\ni for 1\n1 for i\n1 for I\n1 for l\no for 0\nO for 0\n0 for o\n0 for O\n\n*/\n\nvar partnum = doc.getFirstFieldValue(\"compressedPartNumber_s\"); // the original compressed part number\nvar newpart = \"\"; // where the additional variations will be stored\n\n\nvar newpartl=partnum.replace(/l/g , \"1\");\nvar newpartI=partnum.replace(/I/g , \"1\");\nvar newparti=partnum.replace(/i/g , \"1\");\nvar newpartonei=partnum.replace(/1/g , \"i\");\nvar newpartoneI=partnum.replace(/1/g , \"I\");\nvar newpartonel=partnum.replace(/1/g , \"l\");\nvar newparto=partnum.replace(/o/g , \"0\");\nvar newpartO=partnum.replace(/O/g , \"0\");\nvar newpartzeroo=partnum.replace(/0/g , \"o\");\nvar newpartzeroO=partnum.replace(/0/g , \"O\");\n\nif (newpartl!=partnum){\nnewpart = newpart + \",\" + newpartl;\n}\n\nif (newpartI!=partnum){\nnewpart = newpart + \",\" + newpartI;\n}\n\nif (newparti!=partnum){\nnewpart = newpart + \",\" + newparti;\n}\n\nif (newpartonei!=partnum){\nnewpart = newpart + \",\" + newpartonei;\n}\n\nif (newpartoneI!=partnum){\nnewpart = newpart + \",\" + newpartoneI;\n}\n\nif (newpartonel!=partnum){\nnewpart = newpart + \",\" + newpartonel;\n}\n\nif (newparto!=partnum){\nnewpart = newpart + \",\" + newparto;\n}\n\nif (newpartO!=partnum){\nnewpart = newpart + \",\" + newpartO;\n}\n\nif (newpartzeroo!=partnum){\nnewpart = newpart + \",\" + newpartzeroo;\n}\n\nif (newpartzeroO!=partnum){\nnewpart = newpart + \",\" + newpartzeroO;\n}\n\ndoc.setField(\"altpartnums_ss\",newpart); // stores the final list of alternate compressed part numbers\n\n\n\n",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "Javascript - replace characters in compressed part number",
    "condition" : "doc.hasField(\"compressedPartNumber_s\")",
    "secretSourceStageid" : "otpleb593e8a-73e7-4b5b-b161-bef47010d3cc",
    "secretSourceStageId" : "otpleb593e8a-73e7-4b5b-b161-bef47010d3cc"
  }, {
    "type" : "field-mapping",
    "id" : "otpl46df04cf-ab24-4352-9ee1-593976c23757",
    "mappings" : [ {
      "source" : "otProductName_ss",
      "target" : "product_ss",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "autosuggest_general_text",
      "operation" : "copy"
    }, {
      "source" : "titleEN_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleCS_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleDK_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleNL_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleFI_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleFR_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleDE_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleHU_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleIT_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleJP_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleKO_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleNO_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titlePL_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titlePT_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleRU_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleZH_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleES_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleSV_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleTH_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleTW_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleTR_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleVI_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "otLangSet_ss",
      "target" : "languageCode_ss",
      "operation" : "copy"
    }, {
      "source" : "otF3",
      "target" : "languageCode_ss",
      "operation" : "copy"
    }, {
      "source" : "otF3",
      "target" : "otF3_s",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "field-mapping",
    "secretSourceStageid" : "otpl46df04cf-ab24-4352-9ee1-593976c23757",
    "secretSourceStageId" : "otpl46df04cf-ab24-4352-9ee1-593976c23757"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "otplfbb19ff1-6d93-45a0-9883-482f558433f2",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "label" : "solr-dynamic-field-name-mapping",
    "secretSourceStageid" : "otplfbb19ff1-6d93-45a0-9883-482f558433f2",
    "secretSourceStageId" : "otplfbb19ff1-6d93-45a0-9883-482f558433f2"
  }, {
    "type" : "javascript-index",
    "id" : "otpl688c214e-6ec1-4cef-a524-70906a99a0db",
    "script" : "function (doc) {\n  var id = doc.getId();\n  logger.info(\"zzz **** Setting Available Countries on \" + id + \" ****SAC\");\n\n\n  var excludedCountries = doc.getFirstFieldValue(\"otExcludedCountryCodes_ss\");\n  var availableCountries = \"687890,C73641,A54LIB,688ANG,687KEN,687GHA,C66879,688ALG,688MOR,687NIG,688TUN,C18590,A54EGY,687368,687466,688040,A49072,A54675,687465,687904,687912,687779,688034,687656,A13868,687554,688368,687584,687499,687616,687300,C19159,687541,687365,687611,687575,687570,687463,687530,688037,687854,687536,687848,687852,A29633,687PDC\";\n\n  if (excludedCountries != null && excludedCountries != \"\"){\n  \texcludedCountries = excludedCountries.replace(/[,\\s]{2,}/,\",\"); //Removes double or more commas / spaces\n  \texcludedCountries = excludedCountries.replace(/^,*/,\"\"); //Removes all commas from the beginning\n  \texcludedCountries = excludedCountries.replace(/,*$/,\"\"); //Removes all commas from the end\n\n  \tvar array = excludedCountries.split(',');\n\n  \tvar arrayLength = array.length;\n\n  \tfor (var i = 0; i < arrayLength; i++) {\n    \tavailableCountries = availableCountries.replace(array[i] + \",\", \"\");\n      \tavailableCountries = availableCountries.replace(\",\" + array[i], \"\");\n      \tavailableCountries = availableCountries.replace(array[i], \"\");\n  \t}\n  }\n  \n  else\n  {\n    //logger.info(\"**** No excluded countries on \" + id + \" ****\");\n  }\n  \n  //logger.info(\"**** excluded countries for \" + id + \": \" + availableCountries);\n  \n  doc.setField(\"countryId_ss\",availableCountries);\n \n  \n  return doc;\n  \n} \n  \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set Available Countries (JS)",
    "condition" : "doc.hasField(\"otExcludedCountryCodes_ss\");",
    "secretSourceStageid" : "otpl688c214e-6ec1-4cef-a524-70906a99a0db",
    "secretSourceStageId" : "otpl688c214e-6ec1-4cef-a524-70906a99a0db"
  }, {
    "type" : "javascript-index",
    "id" : "otplcos",
    "script" : "function (doc) {\n  var id = doc.getId();\n  logger.info(\"zzz **** Setting All Countries on \" + id + \" ****SDCL\");\n\n\n  var availableCountries = \"687890,C73641,A54LIB,688ANG,687KEN,687GHA,C66879,688ALG,688MOR,687NIG,688TUN,C18590,A54EGY,687368,687466,688040,A49072,A54675,687465,687904,687912,687779,688034,687656,A13868,687554,688368,687584,687499,687616,687300,C19159,687541,687365,687611,687575,687570,687463,687530,688037,687854,687536,687848,687852,A29633,687PDC\";\n  \n  doc.setField(\"countryId_ss\",availableCountries);\n  \n \n  \n  return doc;\n  \n} \n  \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set default country list on OT Support (JS)",
    "condition" : "(!doc.hasField(\"otExcludedCountryCodes_ss\")) && (!doc.hasField(\"otF3_s\"));",
    "secretSourceStageid" : "otplcos",
    "secretSourceStageId" : "otplcos"
  }, {
    "type" : "javascript-index",
    "id" : "otplnvq",
    "script" : "function (doc) {\n  var id = doc.getId();\n  \n  logger.info(\"zzz Checking for Baldwin content\");\n  \n  if (id!=null){\n    \n  \tvar availableCountryIDs = doc.getFirstFieldValue(\"countryId_ss\");  \n    var availableCountryNames = doc.getFirstFieldValue(\"countryName_ss\");  \n  \tvar brands = doc.getFirstFieldValue(\"otBrand_ss\");\n  \tvar brandArray = brands.split(',');\n  \tvar brandArrayLength = brandArray.length;\n    var brandSet = false;\n  \n    \tfor (var b = 0; b < brandArrayLength; b++) {\n          if(brandArray[b]==\"N11284\"){\n            brandSet = true;\n            logger.info(\"zzz Baldwin found!!!\");\n            if(availableCountryIDs!=null){\n               logger.info(\"zzz multi countries, appending\");\n               availableCountryIDs = availableCountryIDs + \",\" + brandArray[b];\n              if(availableCountryNames!=null){\n               \tavailableCountryNames = availableCountryNames + \",\" + \"Baldwin\";\n              }\n            }\n            else\n            {\n              logger.info(\"zzz single countries, appending\");\n              availableCountryIDs = brandArray[b];\n              availableCountryNames = \"Baldwin\";\n            }\n          }\n  \t}\n    if(brandSet){\n    \tlogger.info(\"zzz setting the Baldwin brand on countries ... \" + availableCountryIDs); \n  \t\tdoc.setField(\"countryId_ss\",availableCountryIDs);\n        doc.setField(\"countryName_ss\",availableCountryNames);\n    }\n  }\n  \n  return doc;\n  \n} \n  \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Handle Brands - Baldwin",
    "condition" : "doc.hasField(\"otBrand_ss\");",
    "secretSourceStageid" : "otplnvq",
    "secretSourceStageId" : "otplnvq"
  }, {
    "type" : "javascript-index",
    "id" : "otplj5o",
    "script" : "function (doc) {\n  var id = doc.getId();\n  \n  if (id!=null){\n    \n  \tvar divisions = doc.getFirstFieldValue(\"parkerDivision_ss\");\n  \tvar divisionArray = divisions.split(',');\n  \tvar divisionArrayLength = divisionArray.length;\n    var divisionSet = false;\n    var availableCountryIDs = doc.getFirstFieldValue(\"countryId_ss\");  \n    var availableCountryNames = doc.getFirstFieldValue(\"countryName_ss\"); \n  \n    \tfor (var d = 0; d < divisionArrayLength; d++) {\n          if(divisionArray[d]==\"350455\"){\n            divisionSet = true;\n            //logger.info(\"zzz TFS!!!\");\n            if(availableCountryIDs!=null){\n               //logger.info(\"zzz multi countries, appending\");\n               availableCountryIDs = availableCountryIDs + \",\" + divisionArray[d];\n              if(availableCountryNames!=null){\n               \tavailableCountryNames = availableCountryNames + \",\" + \"TFS\";\n              }\n            }\n            else\n            {\n              //logger.info(\"zzz single countries, appending\");\n              availableCountryIDs = divisionArray[d];\n              availableCountryNames = \"TFS\";\n            }\n          }\n  \t}\n    if(divisionSet){\n    \t//logger.info(\"zzz setting the division on countries ... \" + availableCountryIDs); \n  \t\tdoc.setField(\"countryId_ss\",availableCountryIDs);\n        doc.setField(\"countryName_ss\",availableCountryNames);\n    }\n  }\n  \n  return doc;\n  \n} \n  \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Handle Divisions - TFS",
    "condition" : "doc.hasField(\"parkerDivision_ss\");",
    "secretSourceStageid" : "otplj5o",
    "secretSourceStageId" : "otplj5o"
  }, {
    "type" : "javascript-index",
    "id" : "otpl3c18a7e9-e32f-4a83-aa24-5a5a2a3c1012",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n  logger.info(\"**** Setting language on \" + id + \" ****\");\n  \n  var doclangstring = doc.getFirstFieldValue(\"language_is\");\n  var doclangstringarray = doclangstring.split(\",\");\n  var length = doclangstringarray.length;\n   var langcode = \"\";\n    \n    //logger.info(\"original:  \" + doclangstring);\n    //logger.info(\"array: \" + doclangstringarray);\n    \n    for (i=0; i< length; i++) {\n     \n      //logger.info(\"lang #\" + i + \": \" + doclangstringarray[i]);\n      \n      \n          if (doclangstringarray[i]!=null){\n  \n    \t\tswitch (doclangstringarray[i]) {\n\t\n\t\n        case \"-1\":\n            langcode = langcode + \",\" + \"EN\";\n            break;\n        case \"-2\":\n        \tlangcode = langcode + \",\" + \"FR\";\n            break;\n        case \"-3\":\n            langcode = langcode + \",\" + \"DE\";\n            break;\n        case \"-4\":\n            langcode = langcode + \",\" + \"IT\";\n            break;\n        case \"-5\":\n            langcode = langcode + \",\" + \"ES\";\n            break;\n        case \"-6\":\n            langcode = langcode + \",\" + \"PT\";\n            break;\n        case \"-7\":\n            langcode = langcode + \",\" + \"ZH\";\n            break;\n        case \"-8\":\n            langcode = langcode + \",\" + \"TW\";\n            break;\n        case \"-9\":\n            langcode = langcode + \",\" + \"KO\";\n            break;\n        case \"-10\":\n            langcode = langcode + \",\" + \"JP\";\n            break;\n        case \"-20\":\n            langcode = langcode + \",\" + \"RU\";\n            break;\n        case \"-22\":\n            langcode = langcode + \",\" + \"PL\";\n            break;\n        case \"-24\":\n            langcode = langcode + \",\" + \"FI\";\n            break;\n        case \"-25\":\n            langcode = langcode + \",\" + \"NO\";\n            break;\n        case \"-26\":\n            langcode = langcode + \",\" + \"SV\";\n            break;\n        case \"-27\":\n            langcode = langcode + \",\" + \"CS\";\n            break;\n        case \"-28\":\n            langcode = langcode + \",\" + \"DK\";\n            break;\n        case \"-29\":\n            langcode = langcode + \",\" + \"NL\";\n            break;\t\n        case \"-30\":\n            langcode = langcode + \",\" + \"TR\";\n            break;\n        case \"-31\":\n            langcode = langcode + \",\" + \"HU\";\n            break;\n        case \"-32\":\n            langcode = langcode + \",\" + \"TH\";\n            break;\n        case \"-34\":\n            langcode = langcode + \",\" + \"VI\";\n            break;\t\t\n      default:\n        langcode= langcode + \",\" + \"ZZ\";\n                   }\n    }\n\n      \n    }\n    \n    langcode = langcode.replace(/[,\\s]{2,}/,\",\"); //Removes double or more commas / spaces\n  \tlangcode = langcode.replace(/^,*/,\"\"); //Removes all commas from the beginning\n  \tlangcode = langcode.replace(/,*$/,\"\"); //Removes all commas from the end\n    \n    \n   //logger.info(\"Final languages ====> \" + langcode);\n       doc.setField(\"languageCode_ss\",langcode);\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "Set Language (JS)",
    "condition" : "doc.hasField(\"languageName_ss\");",
    "secretSourceStageid" : "otpl3c18a7e9-e32f-4a83-aa24-5a5a2a3c1012",
    "secretSourceStageId" : "otpl3c18a7e9-e32f-4a83-aa24-5a5a2a3c1012"
  }, {
    "type" : "javascript-index",
    "id" : "otpl79c0be11-2f7d-4b5a-b32a-e7210fc3b6f3",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n  //logger.info(\"**** Setting Missing language on \" + id + \" ****\");\n  \n  var langname = \"\";\n  var langcode = \"\";\n  var doclangstring = doc.getFirstFieldValue(\"language_is\");\n  var doclang = doclangstring.split(',');\n  var arrayLength = doclang.length;\n  \n  \n  for (var i = 0; i < arrayLength; i++)\n  {\n  \n  if (doclang[i] !=null && doclang[i] !=\"\"){\n  \n // logger.info(\"**-----> \" + doclang[i]);\n  \n    switch (doclang[i]) {\n\t\n\t\n        case \"-1\":\n            langname = langname + \",\" + \"English\";\n        \tlangcode = langcode + \",\" + \"EN\";\n            break;\n        case \"-2\":\n            langname = langname + \",\" + \"French\";\n        \tlangcode = langcode + \",\" + \"FR\";\n            break;\n        case \"-3\":\n            langname = langname + \",\" + \"German\";\n        \tlangcode = langcode + \",\" + \"DE\";\n            break;\n        case \"-4\":\n            langname = langname + \",\" + \"Italian\";\n        \tlangcode = langcode + \",\" + \"IT\";\n            break;\n        case \"-5\":\n            langname = langname + \",\" + \"Spanish\";\n        \tlangcode = langcode + \",\" + \"ES\";\n            break;\n        case \"-6\":\n            langname = langname + \",\" + \"Portuguese\";\n        \tlangcode = langcode + \",\" + \"PT\";\n            break;\n        case \"-7\":\n            langname = langname + \",\" + \"Simplified Chinese\";\n        \tlangcode = langcode + \",\" + \"ZH\";\n            break;\n        case \"-8\":\n            langname = langname + \",\" + \"Traditional Chinese\";\n        \tlangcode = langcode + \",\" + \"TW\";\n            break;\n        case \"-9\":\n            langname = langname + \",\" + \"Korean\";\n        \tlangcode = langcode + \",\" + \"KO\";\n            break;\n        case \"-10\":\n            langname = langname + \",\" + \"Japanese\";\n        \tlangcode = langcode + \",\" + \"JP\";\n            break;\n        case \"-20\":\n            langname = langname + \",\" + \"Russian\";\n        \tlangcode = langcode + \",\" + \"RU\";\n            break;\n        case \"-22\":\n            langname = langname + \",\" + \"Polish\";\n        \tlangcode = langcode + \",\" + \"PL\";\n            break;\n        case \"-24\":\n            langname = langname + \",\" + \"Finnish (Finland)\";\n        \tlangcode = langcode + \",\" + \"FI\";\n            break;\n        case \"-25\":\n            langname = langname + \",\" + \"Norwegian\";\n        \tlangcode = langcode + \",\" + \"NO\";\n            break;\n        case \"-26\":\n            langname = langname + \",\" + \"Swedish\";\n        \tlangcode = langcode + \",\" + \"SV\";\n            break;\n        case \"-27\":\n            langname = langname + \",\" + \"Czech\";\n        \tlangcode = langcode + \",\" + \"CS\";\n            break;\n        case \"-28\":\n            langname = langname + \",\" + \"Danish\";\n        \tlangcode = langcode + \",\" + \"DK\";\n            break;\n        case \"-29\":\n            langname = langname + \",\" + \"Dutch\";\n        \tlangcode = langcode + \",\" + \"NL\";\n            break;\t\n        case \"-30\":\n            langname = langname + \",\" + \"Turkish\";\n        \tlangcode = langcode + \",\" + \"TR\";\n            break;\n        case \"-31\":\n            langname = langname + \",\" + \"Hungarian\";\n        \tlangcode = langcode + \",\" + \"HU\";\n            break;\n        case \"-32\":\n            langname = langname + \",\" + \"Thai\";\n        \tlangcode = langcode + \",\" + \"TH\";\n            break;\n        case \"-34\":\n            langname = langname + \",\" + \"Vietnamese\";\n        \tlangcode = langcode + \",\" + \"VI\";\n            break;\t\t\n      default:\n        langname=langname + \",\" + \"Unknown\";\n        langcode = langcode + \",\" + \"Unknown\";\n                   }\n\n       \n   //    logger.info(\"Initial doc lang was ----> \" + doclang);\n\t//   logger.info(\"Initial doc lang string was ----> \" + langname);\n\t   \n\t   var trimmedlanguages = langname.replace(/(^,)|(,$)/g, \"\");\n    \tvar trimmedlanguageCodes = langcode.replace(/(^,)|(,$)/g, \"\");\n  \n\t//   logger.info(\"Trimmed doc lang string was -----> \" + trimmedlanguages);\n   // logger.info(\"Trimmed doc lang code string was -----> \" + trimmedlanguageCodes);\n  \n\t   doc.setField(\"languageName_ss\",trimmedlanguages);\n\t   doc.setField(\"languageCode_ss\",trimmedlanguageCodes);\n  }\n    else\n    {\n      logger.info(\"**** No language found on \" + id + \" ****\");\n    }\n }\n \n\n\n \n \n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set Missing Language (JS)",
    "condition" : "!doc.hasField(\"languageName_ss\");",
    "secretSourceStageid" : "otpl79c0be11-2f7d-4b5a-b32a-e7210fc3b6f3",
    "secretSourceStageId" : "otpl79c0be11-2f7d-4b5a-b32a-e7210fc3b6f3"
  }, {
    "type" : "regex-extractor",
    "id" : "otpl01ea12a9-932e-4f0f-85b3-eb955b8f6414",
    "rules" : [ {
      "source" : [ "audience_ss" ],
      "target" : "audience_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadType_ss" ],
      "target" : "cadType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadURL_ss" ],
      "target" : "cadURL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryId_ss" ],
      "target" : "countryId_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryName_ss" ],
      "target" : "countryName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "fileType_ss" ],
      "target" : "fileType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageName_ss" ],
      "target" : "languageName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "language_is" ],
      "target" : "language_is",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageCode_ss" ],
      "target" : "languageCode_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "market_ss" ],
      "target" : "market_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otCategoryName_ss" ],
      "target" : "otCategoryName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otDivisionName_ss" ],
      "target" : "otDivisionName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otDivision_ss" ],
      "target" : "otDivision_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otEcomId_ls" ],
      "target" : "otEcomId_ls",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otExcludedCountryCodes_ss" ],
      "target" : "otExcludedCountryCodes_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otExcludedCounty_ss" ],
      "target" : "otExcludedCounty_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otLangSet_ss" ],
      "target" : "otLangSet_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otMarket_ss" ],
      "target" : "otMarket_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otMarketsName_ss" ],
      "target" : "otMarketsName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otProductName_ss" ],
      "target" : "otProductName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otTagAllPS_ss" ],
      "target" : "otTagAllPS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otTagAllPT_ss" ],
      "target" : "otTagAllPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otTagType_ss" ],
      "target" : "otTagType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otTechnologyName_ss" ],
      "target" : "otTechnologyName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otTechnology_ss" ],
      "target" : "otTechnology_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivision_ss" ],
      "target" : "parkerDivision_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivisionName_ss" ],
      "target" : "parkerDivisionName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "product_ss" ],
      "target" : "product_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSection_ss" ],
      "target" : "siteSection_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSection_ss" ],
      "target" : "siteSubSection_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportType_ss" ],
      "target" : "supportType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceType_ss" ],
      "target" : "supportResourceType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technology_ss" ],
      "target" : "technology_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "authIds_ss" ],
      "target" : "authIds_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "customerIds_ss" ],
      "target" : "customerIds_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split Fields",
    "secretSourceStageid" : "otpl01ea12a9-932e-4f0f-85b3-eb955b8f6414",
    "secretSourceStageId" : "otpl01ea12a9-932e-4f0f-85b3-eb955b8f6414"
  }, {
    "type" : "javascript-index",
    "id" : "otpla4fef4b4-4e73-4317-bb3a-69ebb285014c",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n//  logger.info(\"**** Reconfiguring fields on \" + id + \" ****\");\n  \n  \tvar doclangstring = doc.getFieldValues(\"language_is\");\n  \tvar originalTitle = doc.getFirstFieldValue(\"title_t\");\n    var originalDescription = doc.getFirstFieldValue(\"description_t\");\n\t\n\tvar trimmedSiteSections = \"\";\n\tvar trimmedSiteSubSections = \"\";\n    var trimmedOtherTypes = \"\";\n    var trimmedNewsEventsTypes = \"\";\n    var trimmedMarkets = \"\";\n    var trimmedTechnologies = \"\";    \n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSection <start>\n\t\t**********************************/\n    var originalSiteSection = doc.getFieldValues(\"siteSection_ss\");\n    var newSiteSection = \"\";\n    \n\t\n    var arrayLength = originalSiteSection.length;\n    \n\t\n\tif (arrayLength >0){\n    for (var i = 0; i < arrayLength; i++)\n  {\n  \n  if (originalSiteSection[i] !=null && originalSiteSection[i] !=\"\"){\n  \n    \n    newSiteSection = newSiteSection + \",\" + originalSiteSection[i];\n    \n  }\n    \n    trimmedSiteSections = newSiteSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSection <end>\n\t\t\n\t\t\n\t\t\n\t\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSubSection <start>\n\t\t**********************************/\n    var originalSiteSubSection = doc.getFieldValues(\"siteSubSection_ss\");\n    var newSiteSubSection = \"\";\n    \n\t\n    var arrayLength4 = originalSiteSubSection.length;\n    \n\t\n\tif (arrayLength4 >0){\n    for (var l = 0; l < arrayLength4; l++)\n  {\n  \n  if (originalSiteSubSection[l] !=null && originalSiteSubSection[l] !=\"\"){\n  \n    \n    newSiteSubSection = newSiteSubSection + \",\" + originalSiteSubSection[l];\n    \n  }\n    \n    trimmedSiteSubSections = newSiteSubSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSubSection <end>\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble otherType <start>\n\t\t**********************************/\n\n    var originalOtherType = doc.getFieldValues(\"otherType_ss\");\n    var newOtherType = \"\";\n    \n\t\n    var arrayLength7 = originalOtherType.length;\n    \n\t\n\tif (arrayLength7 >0){\n    for (var p = 0; p < arrayLength7; p++)\n  {\n  \n  if (originalOtherType[p] !=null && originalOtherType[p] !=\"\"){\n  \n    \n    newOtherType = newOtherType + \",\" + originalOtherType[p];\n    \n  }\n    \n    trimmedOtherTypes = newOtherType.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble otherType <end>    \n\n\t\t/*********************************\n\t\tSplit and re-assemble newsEventsType <start>\n\t\t**********************************/\n\n    var originalNewsEventsType = doc.getFieldValues(\"newsEventsType_ss\");\n    var newNewsEventsType = \"\";\n    \n\t\n    var arrayLength8 = originalNewsEventsType.length;\n    \n\t\n\tif (arrayLength8 >0){\n    for (var r = 0; r < arrayLength8; r++)\n  {\n  \n  if (originalNewsEventsType[r] !=null && originalNewsEventsType[r] !=\"\"){\n  \n    \n    newNewsEventsType = newNewsEventsType + \",\" + originalNewsEventsType[r];\n    \n  }\n    \n    trimmedNewsEventsTypes = newNewsEventsType.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble newsEventsType <end>      \n    \n    \n\t\t/*********************************\n\t\tSplit and re-assemble Market <start>\n\t\t**********************************/\n    var originalMarket = doc.getFieldValues(\"market_ss\");\n    var newMarket = \"\";\n    \n    //logger.info(\"Processing the Markets ...\");\n\t\n    var arrayLength5 = originalMarket.length;\n    \n\t\n\tif (arrayLength5 >0){\n    for (var m = 0; m < arrayLength5; m++)\n  {\n  \n  if (originalMarket[m] !=null && originalMarket[m] !=\"\"){\n  \n    \n    newMarket = newMarket + \",\" + originalMarket[m];\n    \n  }\n    \n    trimmedMarkets = newMarket.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble Market <end>\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble Technology <start>\n\t\t**********************************/\n    var originalTechnology = doc.getFieldValues(\"technology_ss\");\n    var newTechnology = \"\";\n    \n    //logger.info(\"Processing the Technology ...\");\n\t\n    var arrayLength6 = originalTechnology.length;\n    \n\t\n\tif (arrayLength6 >0){\n    for (var n = 0; n < arrayLength6; n++)\n  {\n  \n  if (originalTechnology[n] !=null && originalTechnology[n] !=\"\"){\n  \n    \n    newTechnology = newTechnology + \",\" + originalTechnology[n];\n    \n  }\n    \n    trimmedTechnologies = newTechnology.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble Technology <end>\n\n\n\n  \n  logger.info(\"Setting data ...\");\n  \n    if (doclangstring!=null){\n  \n        for (var s = 0; s < doclangstring.length; s++)\n      {\n      \n    switch (doclangstring[s]) {\n\t\n      \n\t\n        case \"-1\":\n\t\t\tdoc.setField(\"titleEN_t\",originalTitle);\n        \tdoc.setField(\"descriptionEN_t\",originalDescription);\n        \tdoc.setField(\"siteSectionEN_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionEN_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"otherTypeEN_ss\",trimmedOtherTypes);\n        \tdoc.setField(\"newsEventsTypeEN_ss\",trimmedNewsEventsTypes);\n        \tdoc.setField(\"marketEN_ss\",trimmedMarkets);\n       \t\tdoc.setField(\"technologyEN_ss\",trimmedTechnologies);\n            break;\n        case \"-2\":\n            doc.setField(\"titleFR_t\",originalTitle);\n        \tdoc.setField(\"descriptionFR_t\",originalDescription);\n            break;\n        case \"-3\":\n            doc.setField(\"titleDE_t\",originalTitle);\n        \tdoc.setField(\"descriptionDE_t\",originalDescription);\n            break;\n        case \"-4\":\n            doc.setField(\"titleIT_t\",originalTitle);\n        \tdoc.setField(\"descriptionIT_t\",originalDescription);\n            break;\n        case \"-5\":\n            doc.setField(\"titleES_t\",originalTitle);\n        \tdoc.setField(\"descriptionES_t\",originalDescription);\n            break;\n        case \"-6\":\n            doc.setField(\"titlePT_t\",originalTitle);\n        \tdoc.setField(\"descriptionPT_t\",originalDescription);\n            break;\n        case \"-7\":\n            doc.setField(\"titleZH_t\",originalTitle);\n        \tdoc.setField(\"descriptionZH_t\",originalDescription);\n            break;\n        case \"-8\":\n            doc.setField(\"titleTW_t\",originalTitle);\n        \tdoc.setField(\"descriptionTW_t\",originalDescription);\n            break;\n        case \"-9\":\n            doc.setField(\"titleKO_t\",originalTitle);\n        \tdoc.setField(\"descriptionKO_t\",originalDescription);\n            break;\n        case \"-10\":\n            doc.setField(\"titleJP_t\",originalTitle);\n        \tdoc.setField(\"descriptionJP_t\",originalDescription);\n            break;\n        case \"-20\":\n            doc.setField(\"titleRU_t\",originalTitle);\n        \tdoc.setField(\"descriptionRU_t\",originalDescription);\n            break;\n        case \"-22\":\n            doc.setField(\"titlePL_t\",originalTitle);\n        \tdoc.setField(\"descriptionPL_t\",originalDescription);\n            break;\n        case \"-24\":\n            doc.setField(\"titleFI_t\",originalTitle);\n        \tdoc.setField(\"descriptionFI_t\",originalDescription);\n            break;\n        case \"-25\":\n            doc.setField(\"titleNO_t\",originalTitle);\n        \tdoc.setField(\"descriptionNO_t\",originalDescription);\n            break;\n        case \"-26\":\n            doc.setField(\"titleSV_t\",originalTitle);\n        \tdoc.setField(\"descriptionSV_t\",originalDescription);\n            break;\n        case \"-27\":\n            doc.setField(\"titleCS_t\",originalTitle);\n        \tdoc.setField(\"descriptionCS_t\",originalDescription);\n            break;\n        case \"-28\":\n            doc.setField(\"titleDK_t\",originalTitle);\n        \tdoc.setField(\"descriptionDK_t\",originalDescription);\n            break;\n        case \"-29\":\n            doc.setField(\"titleNL_t\",originalTitle);\n        \tdoc.setField(\"descriptionNL_t\",originalDescription);\n            break;\t\n        case \"-30\":\n            doc.setField(\"titleTR_t\",originalTitle);\n        \tdoc.setField(\"descriptionTR_t\",originalDescription);\n            break;\n        case \"-31\":\n            doc.setField(\"titleHU_t\",originalTitle);\n        \tdoc.setField(\"descriptionHU_t\",originalDescription);\n            break;\n        case \"-32\":\n            doc.setField(\"titleTH_t\",originalTitle);\n        \tdoc.setField(\"descriptionTH_t\",originalDescription);\n            break;\n        case \"-34\":\n            doc.setField(\"titleVI_t\",originalTitle);\n        \tdoc.setField(\"descriptionVI_t\",originalDescription);\n            break;\t\t\n\n                   }\n                         }\n    }\n  \n\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set lang-specific fields (Non-support)",
    "condition" : "doc.hasField(\"title_t\");",
    "secretSourceStageid" : "otpla4fef4b4-4e73-4317-bb3a-69ebb285014c",
    "secretSourceStageId" : "otpla4fef4b4-4e73-4317-bb3a-69ebb285014c"
  }, {
    "type" : "javascript-index",
    "id" : "otpl73f46f6f-4f99-4f9f-9137-09ac997a5149",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n  //logger.info(\"**** Reconfiguring Support fields on \" + id + \" ****\");\n  \n  \tvar doclangstring = doc.getFieldValues(\"language_is\");\n    \n    //logger.info(\"languages is ... \" + doclangstring);\n\t\n\tvar trimmedSiteSections = \"\";\n\tvar trimmedSupportResourceType = \"\";\n\tvar trimmedSupportType = \"\";\n\tvar trimmedSiteSubSections = \"\";\n    var trimmedProducts = \"\";\n    var trimmedMarkets = \"\";\n    var trimmedTechnologies = \"\";\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSection <start>\n\t\t**********************************/\n    var originalSiteSection = doc.getFieldValues(\"siteSection_ss\");\n    var newSiteSection = \"\";\n    \n\t\n    var arrayLength = originalSiteSection.length;\n    \n\t\n\tif (arrayLength >0){\n    for (var i = 0; i < arrayLength; i++)\n  {\n  \n  if (originalSiteSection[i] !=null && originalSiteSection[i] !=\"\"){\n  \n    \n    newSiteSection = newSiteSection + \",\" + originalSiteSection[i];\n    \n  }\n    \n    trimmedSiteSections = newSiteSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSection <end>\n\t\t\n\t\t\n\t\t\n\t\t/*********************************\n\t\tSplit and re-assemble supportResourceType <start>\n\t\t**********************************/\n\n    var originalSupportResourceType = doc.getFieldValues(\"supportResourceType_ss\");\n    var newSupportResourceType = \"\";\n    \n\tif (originalSupportResourceType!=null && originalSupportResourceType!=\"\"){\n\t\tvar arrayLength2 = originalSupportResourceType.length;\n    \n\t\n\t\tif (arrayLength2 > 0){ \n\t\t\tfor (var j = 0; j < arrayLength2; j++)\n\t\t\t{\n  \n\t\t\t\tif (originalSupportResourceType[j] !=null && originalSupportResourceType[j] !=\"\"){\n  \n\t\n\t\t\t\t\tnewSupportResourceType = newSupportResourceType + \",\" + originalSupportResourceType[j];\n    \n\t\t\t}\n    \n\t\t\ttrimmedSupportResourceType = newSupportResourceType.replace(/(^,)|(,$)/g, \"\");\n    \n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n    // Split and re-assemble supportResourceType <end>\n\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble supportType <start>\n\t\t**********************************/\n\n    var originalSupportType = doc.getFieldValues(\"supportType_ss\");\n    var newSupportType = \"\";\n    \n\tif (originalSupportType!=null && originalSupportType!=\"\"){\n\t\tvar arrayLength3 = originalSupportType.length;\n    \n\t\n\t\tif (arrayLength3 > 0){ \n\t\t\tfor (var k = 0; k < arrayLength3; k++)\n\t\t\t{\n  \n\t\t\t\tif (originalSupportType[k] !=null && originalSupportType[k] !=\"\"){\n  \n\t\n\t\t\t\t\tnewSupportType = newSupportType + \",\" + originalSupportType[k];\n    \n\t\t\t}\n    \n\t\t\ttrimmedSupportType = newSupportType.replace(/(^,)|(,$)/g, \"\");\n              \n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n    // Split and re-assemble supportType <end>\n\t\n\t\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSubSection <start>\n\t\t**********************************/\n    var originalSiteSubSection = doc.getFieldValues(\"siteSubSection_ss\");\n    var newSiteSubSection = \"\";\n    \n\t\n    var arrayLength4 = originalSiteSubSection.length;\n    \n\t\n\tif (arrayLength4 >0){\n    for (var l = 0; l < arrayLength4; l++)\n  {\n  \n  if (originalSiteSubSection[l] !=null && originalSiteSubSection[l] !=\"\"){\n  \n    \n    newSiteSubSection = newSiteSubSection + \",\" + originalSiteSubSection[l];\n    \n  }\n    \n    trimmedSiteSubSections = newSiteSubSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSubSection <end>\n\t\n\n\n\t\t/*********************************\n\t\tSplit and re-assemble products <start>\n\t\t**********************************/\n    var originalProducts = doc.getFieldValues(\"product_ss\");\n    var newProducts = \"\";\n    \n\t\n    var arrayLength7 = originalProducts.length;\n\t\n\tif (arrayLength7 >0){\n      \n\n    for (var o = 0; o < arrayLength7; o++)\n  {\n  \n  if (originalProducts[o] !=null && originalProducts[o] !=\"\"){\n  \n    newProducts = newProducts + \",\" + originalProducts[o];\n    \n  }\n    \n    trimmedProducts = newProducts.replace(/(^,)|(,$)/g, \"\");\n  }\n   \n\n      \n  }\n  \n\n\t    // Split and re-assemble Products <end>    \n    \n    \n \t\t/*********************************\n\t\tSplit and re-assemble Market <start>\n\t\t**********************************/\n    var originalMarket = doc.getFieldValues(\"market_ss\");\n    var newMarket = \"\";\n    \n    //logger.info(\"Processing the Markets ...\");\n\t\n    var arrayLength5 = originalMarket.length;\n    \n\t\n\tif (arrayLength5 >0){\n    for (var m = 0; m < arrayLength5; m++)\n  {\n  \n  if (originalMarket[m] !=null && originalMarket[m] !=\"\"){\n  \n    \n    newMarket = newMarket + \",\" + originalMarket[m];\n    \n  }\n    \n    trimmedMarkets = newMarket.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble Market <end>\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble Technology <start>\n\t\t**********************************/\n    var originalTechnology = doc.getFieldValues(\"technology_ss\");\n    var newTechnology = \"\";\n    \n    //logger.info(\"Processing the Technology ...\");\n\t\n    var arrayLength6 = originalTechnology.length;\n    \n\t\n\tif (arrayLength6 >0){\n    for (var n = 0; n < arrayLength6; n++)\n  {\n  \n  if (originalTechnology[n] !=null && originalTechnology[n] !=\"\"){\n  \n    \n    newTechnology = newTechnology + \",\" + originalTechnology[n];\n    \n  }\n    \n    trimmedTechnologies = newTechnology.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble Technology <end>   \n    \n    \n    \n\n  \n // logger.info(\"Setting data ...\");\n  \n    if (doclangstring!=null){\n  \n      for (var s = 0; s < doclangstring.length; s++)\n      {\n      \n      \n    switch (doclangstring[s]) {\n\t\n\t\n        case \"-1\":\n        \tdoc.setField(\"siteSectionEN_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"supportResourceTypeEN_ss\",trimmedSupportResourceType);\n\t\t\tdoc.setField(\"supportTypeEN_ss\",trimmedSupportType);\n\t\t\tdoc.setField(\"siteSubSectionEN_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productEN_ss\",trimmedProducts);\n        \tdoc.setField(\"marketEN_ss\",trimmedMarkets);\n       \t\tdoc.setField(\"technologyEN_ss\",trimmedTechnologies);\n            break;\n        case \"-2\":\n        //\tdoc.setField(\"siteSectionFR_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeFR_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeFR_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionFR_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productFR_ss\",trimmedProducts);\n            break;\n        case \"-3\":\n        //\tdoc.setField(\"siteSectionDE_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeDE_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeDE_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionDE_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productDE_ss\",trimmedProducts);\n            break;\n        case \"-4\":\n        //\tdoc.setField(\"siteSectionIT_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeIT_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeIT_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionIT_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productIT_ss\",trimmedProducts);\n            break;\n        case \"-5\":\n        //\tdoc.setField(\"siteSectionES_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeES_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeES_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionES_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productES_ss\",trimmedProducts);\n            break;\n        case \"-6\":\n        //\tdoc.setField(\"siteSectionPT_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypePT_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypePT_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionPT_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productPT_ss\",trimmedProducts);\n            break;\n        case \"-7\":\n        //\tdoc.setField(\"siteSectionZH_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeZH_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeZH_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionZH_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productZH_ss\",trimmedProducts);\n            break;\n        case \"-8\":\n        //\tdoc.setField(\"siteSectionTW_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeTW_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeTW_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionTW_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productTW_ss\",trimmedProducts);\n            break;\n        case \"-9\":\n        //\tdoc.setField(\"siteSectionKO_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeKO_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeKO_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionKO_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productKO_ss\",trimmedProducts);\n            break;\n        case \"-10\":\n        //\tdoc.setField(\"siteSectionJP_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeJP_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeJP_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionJP_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productJP_ss\",trimmedProducts);\n            break;\n        case \"-20\":\n        //\tdoc.setField(\"siteSectionRU_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeRU_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeRU_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionRU_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productRU_ss\",trimmedProducts);\n            break;\n        case \"-22\":\n        //\tdoc.setField(\"siteSectionPL_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypePL_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypePL_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionPL_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productPL_ss\",trimmedProducts);\n            break;\n        case \"-24\":\n        //\tdoc.setField(\"siteSectionFI_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeFI_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeFI_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionFI_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productFI_ss\",trimmedProducts);\n            break;\n        case \"-25\":\n       // \tdoc.setField(\"siteSectionNO_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeNO_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeNO_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionNO_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productNO_ss\",trimmedProducts);\n            break;\n        case \"-26\":\n        //\tdoc.setField(\"siteSectionSV_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeSV_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeSV_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionSV_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productSV_ss\",trimmedProducts);\n            break;\n        case \"-27\":\n       // \tdoc.setField(\"siteSectionCS_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeCS_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeCS_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionCS_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productCS_ss\",trimmedProducts);\n            break;\n        case \"-28\":\n       // \tdoc.setField(\"siteSectionDK_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeDK_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeDK_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionDK_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productDK_ss\",trimmedProducts);\n            break;\n        case \"-29\":\n        //\tdoc.setField(\"siteSectionNL_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeNL_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeNL_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionNL_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productNL_ss\",trimmedProducts);\n            break;\t\n        case \"-30\":\n       // \tdoc.setField(\"siteSectionTR_ss\",originalSiteSection);\n\t\t//\tdoc.setField(\"supportResourceTypeTR_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeTR_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionTR_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productTR_ss\",trimmedProducts);\n            break;\n        case \"-31\":\n       // \tdoc.setField(\"siteSectionHU_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeHU_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeHU_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionHU_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productHU_ss\",trimmedProducts);\n            break;\n        case \"-32\":\n        //\tdoc.setField(\"siteSectionTH_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeTH_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeTH_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionTH_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productTH_ss\",trimmedProducts);\n            break;\n        case \"-34\":\n       // \tdoc.setField(\"siteSectionVI_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeVI_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeVI_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionVI_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productVI_ss\",trimmedProducts);\n            break;\t\t\n\n                   }\n        \n      }\n    }\n  \n\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set lang-specific fields (Support)",
    "condition" : "!doc.hasField(\"title_t\");",
    "secretSourceStageid" : "otpl73f46f6f-4f99-4f9f-9137-09ac997a5149",
    "secretSourceStageId" : "otpl73f46f6f-4f99-4f9f-9137-09ac997a5149"
  }, {
    "type" : "javascript-index",
    "id" : "otpley9c",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** siteSection translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\"); \n    doc.removeFields(\"_translation_SiteSection_ENLUError_s\");\n    doc.removeFields(\"_translation_SiteSection_LUError_s\");\n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"siteSection_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n\t\t\t//logger.info(\"language is not null\");\n\t\t\t//logger.info(\"English Value to find: \" + englishValue);\n\t\t\t//logger.info(\"**** get English Parent ***\");\n  \n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"siteSection\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_SiteSection_ENLUError_s\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      doc.setField(\"_translation_SiteSection_LUError_s\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"siteSectionEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionPT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionPT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionPL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionPL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}\n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "siteSectionXX Facet Translation (Non-support) (JS)",
    "condition" : "doc.hasField(\"title_t\");",
    "secretSourceStageid" : "otpley9c",
    "secretSourceStageId" : "otpley9c"
  }, {
    "type" : "javascript-index",
    "id" : "otpl3vn",
    "script" : "function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** siteSubSection translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\"); \n    doc.removeFields(\"_translation_SiteSubSection_ENLUError_s\");\n    doc.removeFields(\"_translation_SiteSubSection_LUError_s\");\n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"siteSubSection_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n          //logger.info(\"language is not null\");\n          //logger.info(\"English Value to find: \" + englishValue);\n          //logger.info(\"**** get English Parent ***\");\n  \n  \t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"siteSubSection\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_SiteSubSection_ENLUError_s\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      oc.setField(\"_translation_SiteSubSection_LUError_s\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"siteSubSectionEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionPT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionPT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionPL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionPL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "siteSubSectionXX Facet Translation (Non-Support) (JS)",
    "condition" : "doc.hasField(\"title_t\");",
    "secretSourceStageid" : "otpl3vn",
    "secretSourceStageId" : "otpl3vn"
  }, {
    "type" : "javascript-index",
    "id" : "otpll7m",
    "script" : "function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** otherType translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n    doc.removeFields(\"_translation_OtherType_ENLUError_s\");\n    doc.removeFields(\"_translation_OtherType_LUError_s\");\n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"otherType_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n          //logger.info(\"language is not null\");\n          //logger.info(\"English Value to find: \" + englishValue);\n          //logger.info(\"**** get English Parent ***\");\n  \n  \t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"Other Category\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_OtherType_ENLUError_s\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      doc.setField(\"_translation_OtherType_LUError_s\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"otherTypeEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypePT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypePT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypePL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypePL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "otherTypeXX Facet Translation (Non-Support) (JS)",
    "condition" : "doc.hasField(\"title_t\");",
    "secretSourceStageid" : "otpll7m",
    "secretSourceStageId" : "otpll7m"
  }, {
    "type" : "javascript-index",
    "id" : "otplz6d",
    "script" : "function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** newsEventsType translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n    doc.removeFields(\"_translation_NewsEventsType_ENLUError_s\");\n    doc.removeFields(\"_translation_NewsEventsType_LUError_s\");\n    \n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"newsEventsType_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n          //logger.info(\"language is not null\");\n          //logger.info(\"English Value to find: \" + englishValue);\n          //logger.info(\"**** get English Parent ***\");\n  \n  \t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"NewsEvents Category\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_NewsEventsType_ENLUError_s\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      doc.setField(\"_translation_NewsEventsType_LUError_s\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"newsEventsTypeEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypePT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypePT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypePL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypePL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "newsEventsTypeXX Facet Translation (Non-Support) (JS)",
    "condition" : "doc.hasField(\"title_t\");",
    "secretSourceStageid" : "otplz6d",
    "secretSourceStageId" : "otplz6d"
  }, {
    "type" : "javascript-index",
    "id" : "otplk",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  var siteSectionStringCS = \"\";\n  var siteSectionStringDK = \"\";\n  var siteSectionStringNL = \"\";\n  var siteSectionStringFI = \"\";\n  var siteSectionStringFR = \"\";\n  var siteSectionStringDE = \"\";\n  var siteSectionStringHU = \"\";\n  var siteSectionStringIT = \"\";\n  var siteSectionStringJP = \"\";\n  var siteSectionStringKO = \"\";\n  var siteSectionStringNO = \"\";\n  var siteSectionStringPL = \"\";\n  var siteSectionStringPT = \"\";\n  var siteSectionStringRU = \"\";\n  var siteSectionStringZH = \"\";\n  var siteSectionStringES = \"\";\n  var siteSectionStringSV = \"\";\n  var siteSectionStringTH = \"\";\n  var siteSectionStringTW = \"\";\n  var siteSectionStringTR = \"\";\n  var siteSectionStringVI = \"\";\n  \n  //logger.info(\" *** siteSection translation function main ***\");\n  \n  if (doc.getId() != null) { \n\n  \n\tvar languages = doc.getFieldValues(\"languageCode_ss\");\n    doc.removeFields(\"_translation_SiteSection_ENLUError_s\");\n    doc.removeFields(\"_translation_SiteSection_LUError_s\");\n\t// test harness for all languages, enable below line and disable above line\n    //var languages = [\"CS\",\"DK\",\"NL\",\"FI\",\"FR\",\"DE\",\"HU\",\"IT\",\"JP\",\"KO\",\"NO\",\"PL\",\"PT\",\"RU\",\"ZH\",\"ES\",\"SV\",\"TH\",\"TW\",\"TR\",\"VI\"];\n    var englishTypes = doc.getFieldValues(\"siteSection_ss\");\n    //logger.info(\"# of site Section is:  \" + englishTypes.length);\n    //logger.info(\"# of languages is: \" + languages.length);\n    \n\tif (languages!=null){ \n\t\n\t\tvar translationItem = [];\n  \n\t\t// for each site section, look up the English Parent\n\t\tfor (var s = 0; s < englishTypes.length; s++) {\n\t\t\n\n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n            var section = encodeURI(\"siteSection\");\n              \n            //logger.info(\"Attempting translation of: \" + englishTypes[s]);\n      \n      \t\ttry {\n\n\t\t\t\t//logger.info(\"Inside English parent value lookup try block ...\");\n\t\t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishTypes[s]) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n//      \t\tlogger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n  //    \t\t\tlogger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n    //   \t\t\t\t logger.info(\"Status is A-OK\");\n      \t\t         var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\n              for (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"English translation (\" + englishTypes[s] + \") item key is \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t} // i for loop\n  \n\n              \n\t\t\t\t\n      \t\t\t} // status check on URL\n            \n            \n            \n            \n            //logger.info(\"ready to translate here .........\");\n            var parentID = parentvalues;  \n            \n            \n            //var languages = doc.getFieldValues(\"languageCode_ss\");\n            \n            //logger.info(\"Number of available languages is: \" + languages.length);\n            \n\t\t\t// for each language ....\n            for (var l = 0; l < languages.length; l++) {\n            \n              var transvalues = [];\n              var eTranslate = java.lang.Exception;\n              var foundTranslation = \"\";\n              \n\t\t\t  if (languages[l]!=\"EN\"){\n\t\t\t\t  \n\t\t\t\t  //logger.info(\"language is not EN\");\n\t\t\t  \n                try {\n\t\t\t\t\t//logger.info(\"try to translate \" + languages[l]);\n\t\t\t\t\tvar URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + languages[l] + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n\t\t\t\t\t//logger.info(\"Translation URL: \" + URLTranslate);\n\t\t\t\t\tvar cTranslate = java.net.HttpURLConnectionTranslate;\n\t\t\t\t\tcTranslate = URLTranslate.openConnection();\n\t\t\t\t\tcTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n\t\t\t\t\tcTranslate.connect();\n\t\t\t\t\tvar statusTranslate = cTranslate.getResponseCode();\n\t\t\t\t\t//logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n\t\t\t\t\tif (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\t\t\t\t\tvar readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n\t\t\t\t\t\tvar responseTranslate = JSON.parse(readerTranslate.readLine());\n\t\t\t\t\t\tvar numTranslate = responseTranslate.response.numFound;\n\t\t\t\t\t\t//logger.info(\"Translation Num Found: \" + numTranslate);\n        \n\t\t\t\t\t\t// put all document titles from the query into an array and set as a multivalued string\n\n\t\t\t\t\t\tvar respTranslate = responseTranslate.response.docs;\n\t\t\t\t\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          \n\t\t\t\t\t\t\tfoundTranslation = respTranslate[j].translation_t;\n\t\t\t\t\t\t\t//logger.info(\"XXXXXXXXXXXXXFound translation: \" + foundTranslation);\n\t\t\t\t\t\t\tif (typeof foundTranslation !='undefined'){\n\t\t\t\t\t\t\t\t//logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//logger.info(\"could not translate: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransvalues.push(respTranslate[j].translation_t);\n      \n\t\t\t\t\t\ttranslationItem[s] = transvalues;\n\t\t\t\t\t\t//logger.info(\"XXXXXXXEcho back: \" + translationItem[s]);\n      \n             \n          \n\t\t\t\t\t\t}\n\n        \n\t\t\t\t\t}\n\t\t\t\t} catch (eTranslate) {\n\t\t\t\t\tlogger.error(eTranslate);\n                  doc.setField(\"_translation_SiteSection_LUError_s\",eTranslate);\n\t\t\t\t}\n\n\t\t\t\t// translationItem[s] = transvalues;\n\t\t\t\t//logger.info(\"translation from EN to: \" + languages[l]);\n          \t\t//logger.info(\"translation FROM: \" + englishTypes[s]);\n          \t\t//logger.info(\"translation FOUND: \" + translationItem[s]);\n              \n     \n              switch (languages[l]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"CS is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringCS = siteSectionStringCS + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling CS #\" + s + \": \" + siteSectionStringCS);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"CS Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringCS = siteSectionStringCS + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling CS #\" + s + \": \" + siteSectionStringCS);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DK is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringDK = siteSectionStringDK + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DK #\" + s + \": \" + siteSectionStringDK);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DK Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringDK = siteSectionStringDK + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DK #\" + s + \": \" + siteSectionStringDK);\n\t\t\t\t  }\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"NL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringNL = siteSectionStringNL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NL #\" + s + \": \" + siteSectionStringNL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringNL = siteSectionStringNL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NL #\" + s + \": \" + siteSectionStringNL);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringFI = siteSectionStringFI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FI #\" + s + \": \" + siteSectionStringFI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringFI = siteSectionStringFI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FI #\" + s + \": \" + siteSectionStringFI);\n\t\t\t\t  }\t\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringFR = siteSectionStringFR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FR #\" + s + \": \" + siteSectionStringFR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringFR = siteSectionStringFR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FR #\" + s + \": \" + siteSectionStringFR);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DE is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringDE = siteSectionStringDE + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DE #\" + s + \": \" + siteSectionStringDE);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DE Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringDE = siteSectionStringDE + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DE #\" + s + \": \" + siteSectionStringDE);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"HU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringHU = siteSectionStringHU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling HU #\" + s + \": \" + siteSectionStringHU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"HU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringHU = siteSectionStringHU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling HU #\" + s + \": \" + siteSectionStringHU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"IT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringIT = siteSectionStringIT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling IT #\" + s + \": \" + siteSectionStringIT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"IT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringIT = siteSectionStringIT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling IT #\" + s + \": \" + siteSectionStringIT);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"JP is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringJP = siteSectionStringJP + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling JP #\" + s + \": \" + siteSectionStringJP);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"JP Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringJP = siteSectionStringJP + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling JP #\" + s + \": \" + siteSectionStringJP);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"KO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringKO = siteSectionStringKO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling KO #\" + s + \": \" + siteSectionStringKO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"KO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringKO = siteSectionStringKO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling KO #\" + s + \": \" + siteSectionStringKO);\n\t\t\t\t  }\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringNO = siteSectionStringNO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NO #\" + s + \": \" + siteSectionStringNO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringNO = siteSectionStringNO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NO #\" + s + \": \" + siteSectionStringNO);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringPL = siteSectionStringPL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PL #\" + s + \": \" + siteSectionStringPL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringPL = siteSectionStringPL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PL #\" + s + \": \" + siteSectionStringPL);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringPT = siteSectionStringPT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PT #\" + s + \": \" + siteSectionStringPT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringPT = siteSectionStringPT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PT #\" + s + \": \" + siteSectionStringPT);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"RU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringRU = siteSectionStringRU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling RU #\" + s + \": \" + siteSectionStringRU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"RU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringRU = siteSectionStringRU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling RU #\" + s + \": \" + siteSectionStringRU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ZH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringZH = siteSectionStringZH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ZH #\" + s + \": \" + siteSectionStringZH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ZH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringZH = siteSectionStringZH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ZH #\" + s + \": \" + siteSectionStringZH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ES is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringES = siteSectionStringES + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ES #\" + s + \": \" + siteSectionStringES);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ES Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringES = siteSectionStringES + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ES #\" + s + \": \" + siteSectionStringES);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"SV is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringSV = siteSectionStringSV + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling SV #\" + s + \": \" + siteSectionStringSV);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"SV Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringSV = siteSectionStringSV + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling SV #\" + s + \": \" + siteSectionStringSV);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringTH = siteSectionStringTH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TH #\" + s + \": \" + siteSectionStringTH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringTH = siteSectionStringTH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TH #\" + s + \": \" + siteSectionStringTH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TW is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringTW = siteSectionStringTW + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TW #\" + s + \": \" + siteSectionStringTW);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TW Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringTW = siteSectionStringTW + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TW #\" + s + \": \" + siteSectionStringTW);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringTR = siteSectionStringTR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TR #\" + s + \": \" + siteSectionStringTR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringTR = siteSectionStringTR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TR #\" + s + \": \" + siteSectionStringTR);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"VI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringVI = siteSectionStringVI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling VI #\" + s + \": \" + siteSectionStringVI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"VI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringVI = siteSectionStringVI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling VI #\" + s + \": \" + siteSectionStringVI);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                  \n              }\n                \n              \n              \n              \n              //  END OF translation logic here\n              \n              //logger.info(\"End of translation for \" + languages[l]);\n              }\n\t\t\t  \n\t\t\t  else {\n\t\t\t  \n\t\t\t\t//logger.info(\"EN is skipped, no translation\");\n\t\t\t  \n\t\t\t  \n\t\t\t  } // if not EN language\n\t\t\t  \n            } // for l loop - each language\n            \n            \n            \n    \t\t} catch (e) {\n\t\t\t\tlogger.info(\"***** HIT AN ERROR ******\");\n      \t\t\tlogger.error(e);\n                logger.info(e);\n    \t\t\t} // end try catch\n\t\t\n        \t\n//logger.info(\"End of lookup for \" + englishTypes[s]);\n\t\t\n\t\t}\t// s for loop\n  \n\t// for each language ....\n            for (var ll = 0; ll < languages.length; ll++) {\n\t\t\t\tswitch (languages[ll]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for CS - total of \" + siteSectionStringCS.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionCS_ss\",siteSectionStringCS);\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t    //logger.info(\"writing output for DK - total of \" + siteSectionStringDK.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionDK_ss\",siteSectionStringDK);\n\n\t\t\t\t\tbreak;\n\n\n                case \"NL\":\n                  \n\t\t\t\t    //logger.info(\"writing output for NL - total of \" + siteSectionStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionNL_ss\",siteSectionStringNL);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  \t//logger.info(\"writing output for FI - total of \" + siteSectionStringFI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionFI_ss\",siteSectionStringFI);\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for FR - total of \" + siteSectionStringFR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionFR_ss\",siteSectionStringFR);\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for DE - total of \" + siteSectionStringDE.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionDE_ss\",siteSectionStringDE);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for HU - total of \" + siteSectionStringHU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionHU_ss\",siteSectionStringHU);\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for IT - total of \" + siteSectionStringIT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionIT_ss\",siteSectionStringIT);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for JP - total of \" + siteSectionStringJP.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionJP_ss\",siteSectionStringJP);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for KO - total of \" + siteSectionStringKO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionKO_ss\",siteSectionStringKO);\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NO - total of \" + siteSectionStringNO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionNO_ss\",siteSectionStringNO);\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NL - total of \" + siteSectionStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionPL_ss\",siteSectionStringPL);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for PT - total of \" + siteSectionStringPT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionPT_ss\",siteSectionStringPT);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for RU - total of \" + siteSectionStringRU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionRU_ss\",siteSectionStringRU);\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ZH - total of \" + siteSectionStringZH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionZH_ss\",siteSectionStringZH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ES - total of \" + siteSectionStringES.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionES_ss\",siteSectionStringES);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for SV - total of \" + siteSectionStringSV.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionSV_ss\",siteSectionStringSV);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TH - total of \" + siteSectionStringTH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionTH_ss\",siteSectionStringTH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TW - total of \" + siteSectionStringTW.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionTW_ss\",siteSectionStringTW);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TR - total of \" + siteSectionStringTR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionTR_ss\",siteSectionStringTR);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for VI - total of \" + siteSectionStringVI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionVI_ss\",siteSectionStringVI);\n\t\t\t\t   \n                  break;\n                 \n                  \n\t\t\t\t} // switch\n\t\t\t  \n\t\t\t  } // end of second language loop\n\t\t\t\n    \n\t} // languages is not null\n \n  } // doc getid is not null\n  \n  //logger.info(\"Exiting siteSection translation\");\n  \n  return doc;\n}\n  \n  \n  \n  \n  ",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "siteSectionXX Facet Translation (Support) (JS)",
    "condition" : "!doc.hasField(\"title_t\");",
    "secretSourceStageid" : "otplk",
    "secretSourceStageId" : "otplk"
  }, {
    "type" : "javascript-index",
    "id" : "otpl3vc",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  var siteSubSectionStringCS = \"\";\n  var siteSubSectionStringDK = \"\";\n  var siteSubSectionStringNL = \"\";\n  var siteSubSectionStringFI = \"\";\n  var siteSubSectionStringFR = \"\";\n  var siteSubSectionStringDE = \"\";\n  var siteSubSectionStringHU = \"\";\n  var siteSubSectionStringIT = \"\";\n  var siteSubSectionStringJP = \"\";\n  var siteSubSectionStringKO = \"\";\n  var siteSubSectionStringNO = \"\";\n  var siteSubSectionStringPL = \"\";\n  var siteSubSectionStringPT = \"\";\n  var siteSubSectionStringRU = \"\";\n  var siteSubSectionStringZH = \"\";\n  var siteSubSectionStringES = \"\";\n  var siteSubSectionStringSV = \"\";\n  var siteSubSectionStringTH = \"\";\n  var siteSubSectionStringTW = \"\";\n  var siteSubSectionStringTR = \"\";\n  var siteSubSectionStringVI = \"\";\n  \n  logger.info(\" *** siteSubSection translation function main ***\");\n  \n  if (doc.getId() != null) { \n\n  \n\tvar languages = doc.getFieldValues(\"languageCode_ss\");\n\t// test harness for all languages, enable below line and disable above line\n    //var languages = [\"CS\",\"DK\",\"NL\",\"FI\",\"FR\",\"DE\",\"HU\",\"IT\",\"JP\",\"KO\",\"NO\",\"PL\",\"PT\",\"RU\",\"ZH\",\"ES\",\"SV\",\"TH\",\"TW\",\"TR\",\"VI\"];\n    var englishTypes = doc.getFieldValues(\"siteSubSection_ss\");\n    //logger.info(\"# of site SubSection is:  \" + englishTypes.length);\n    //logger.info(\"# of languages is: \" + languages.length);\n    \n\tif (languages!=null){ \n\t\n\t\tvar translationItem = [];\n  \n\t\t// for each site subsection, look up the English Parent\n\t\tfor (var s = 0; s < englishTypes.length; s++) {\n\t\t\n\n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n            var section = encodeURI(\"siteSubSection\");\n              \n            //logger.info(\"Attempting translation of: \" + englishTypes[s]);\n      \n      \t\ttry {\n\n\t\t\t\t//logger.info(\"Inside English parent value lookup try block ...\");\n\t\t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURI(englishTypes[s]) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n//      \t\tlogger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n  //    \t\t\tlogger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n    //   \t\t\t\t logger.info(\"Status is A-OK\");\n      \t\t         var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\n              for (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"English translation (\" + englishTypes[s] + \") item key is \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t} // i for loop\n  \n\n              \n\t\t\t\t\n      \t\t\t} // status check on URL\n            \n            \n            \n            \n            //logger.info(\"ready to translate here .........\");\n            var parentID = parentvalues;  \n            \n            \n            //var languages = doc.getFieldValues(\"languageCode_ss\");\n            \n            //logger.info(\"Number of available languages is: \" + languages.length);\n            \n\t\t\t// for each language ....\n            for (var l = 0; l < languages.length; l++) {\n            \n              var transvalues = [];\n              var eTranslate = java.lang.Exception;\n              var foundTranslation = \"\";\n              \n\t\t\t  if (languages[l]!=\"EN\"){\n\t\t\t\t  \n\t\t\t\t  //logger.info(\"language is not EN\");\n\t\t\t  \n                try {\n\t\t\t\t\t//logger.info(\"try to translate \" + languages[l]);\n\t\t\t\t\tvar URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + languages[l] + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n\t\t\t\t\t//logger.info(\"Translation URL: \" + URLTranslate);\n\t\t\t\t\tvar cTranslate = java.net.HttpURLConnectionTranslate;\n\t\t\t\t\tcTranslate = URLTranslate.openConnection();\n\t\t\t\t\tcTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n\t\t\t\t\tcTranslate.connect();\n\t\t\t\t\tvar statusTranslate = cTranslate.getResponseCode();\n\t\t\t\t\t//logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n\t\t\t\t\tif (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\t\t\t\t\tvar readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n\t\t\t\t\t\tvar responseTranslate = JSON.parse(readerTranslate.readLine());\n\t\t\t\t\t\tvar numTranslate = responseTranslate.response.numFound;\n\t\t\t\t\t\t//logger.info(\"Translation Num Found: \" + numTranslate);\n        \n\t\t\t\t\t\t// put all document titles from the query into an array and set as a multivalued string\n\n\t\t\t\t\t\tvar respTranslate = responseTranslate.response.docs;\n\t\t\t\t\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          \n\t\t\t\t\t\t\tfoundTranslation = respTranslate[j].translation_t;\n\t\t\t\t\t\t\t//logger.info(\"XXXXXXXXXXXXXFound translation: \" + foundTranslation);\n\t\t\t\t\t\t\tif (typeof foundTranslation !='undefined'){\n\t\t\t\t\t\t\t\t//logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//logger.info(\"could not translate: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransvalues.push(respTranslate[j].translation_t);\n      \n\t\t\t\t\t\ttranslationItem[s] = transvalues;\n\t\t\t\t\t\t//logger.info(\"XXXXXXXEcho back: \" + translationItem[s]);\n      \n             \n          \n\t\t\t\t\t\t}\n\n        \n\t\t\t\t\t}\n\t\t\t\t} catch (eTranslate) {\n\t\t\t\t\tlogger.error(eTranslate);\n\t\t\t\t}\n\n\t\t\t\t// translationItem[s] = transvalues;\n\t\t\t\t//logger.info(\"translation from EN to: \" + languages[l]);\n          \t\t//logger.info(\"translation FROM: \" + englishTypes[s]);\n          \t\t//logger.info(\"translation FOUND: \" + translationItem[s]);\n              \n     \n              switch (languages[l]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"CS is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringCS = siteSubSectionStringCS + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling CS #\" + s + \": \" + siteSubSectionStringCS);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"CS Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringCS = siteSubSectionStringCS + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling CS #\" + s + \": \" + siteSubSectionStringCS);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DK is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringDK = siteSubSectionStringDK + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DK #\" + s + \": \" + siteSubSectionStringDK);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DK Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringDK = siteSubSectionStringDK + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DK #\" + s + \": \" + siteSubSectionStringDK);\n\t\t\t\t  }\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"NL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringNL = siteSubSectionStringNL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NL #\" + s + \": \" + siteSubSectionStringNL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringNL = siteSubSectionStringNL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NL #\" + s + \": \" + siteSubSectionStringNL);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringFI = siteSubSectionStringFI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FI #\" + s + \": \" + siteSubSectionStringFI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringFI = siteSubSectionStringFI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FI #\" + s + \": \" + siteSubSectionStringFI);\n\t\t\t\t  }\t\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringFR = siteSubSectionStringFR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FR #\" + s + \": \" + siteSubSectionStringFR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringFR = siteSubSectionStringFR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FR #\" + s + \": \" + siteSubSectionStringFR);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DE is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringDE = siteSubSectionStringDE + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DE #\" + s + \": \" + siteSubSectionStringDE);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DE Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringDE = siteSubSectionStringDE + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DE #\" + s + \": \" + siteSubSectionStringDE);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"HU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringHU = siteSubSectionStringHU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling HU #\" + s + \": \" + siteSubSectionStringHU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"HU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringHU = siteSubSectionStringHU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling HU #\" + s + \": \" + siteSubSectionStringHU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"IT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringIT = siteSubSectionStringIT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling IT #\" + s + \": \" + siteSubSectionStringIT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"IT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringIT = siteSubSectionStringIT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling IT #\" + s + \": \" + siteSubSectionStringIT);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"JP is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringJP = siteSubSectionStringJP + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling JP #\" + s + \": \" + siteSubSectionStringJP);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"JP Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringJP = siteSubSectionStringJP + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling JP #\" + s + \": \" + siteSubSectionStringJP);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"KO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringKO = siteSubSectionStringKO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling KO #\" + s + \": \" + siteSubSectionStringKO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"KO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringKO = siteSubSectionStringKO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling KO #\" + s + \": \" + siteSubSectionStringKO);\n\t\t\t\t  }\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringNO = siteSubSectionStringNO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NO #\" + s + \": \" + siteSubSectionStringNO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringNO = siteSubSectionStringNO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NO #\" + s + \": \" + siteSubSectionStringNO);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringPL = siteSubSectionStringPL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PL #\" + s + \": \" + siteSubSectionStringPL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringPL = siteSubSectionStringPL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PL #\" + s + \": \" + siteSubSectionStringPL);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringPT = siteSubSectionStringPT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PT #\" + s + \": \" + siteSubSectionStringPT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringPT = siteSubSectionStringPT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PT #\" + s + \": \" + siteSubSectionStringPT);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"RU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringRU = siteSubSectionStringRU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling RU #\" + s + \": \" + siteSubSectionStringRU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"RU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringRU = siteSubSectionStringRU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling RU #\" + s + \": \" + siteSubSectionStringRU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ZH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringZH = siteSubSectionStringZH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ZH #\" + s + \": \" + siteSubSectionStringZH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ZH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringZH = siteSubSectionStringZH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ZH #\" + s + \": \" + siteSubSectionStringZH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ES is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringES = siteSubSectionStringES + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ES #\" + s + \": \" + siteSubSectionStringES);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ES Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringES = siteSubSectionStringES + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ES #\" + s + \": \" + siteSubSectionStringES);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"SV is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringSV = siteSubSectionStringSV + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling SV #\" + s + \": \" + siteSubSectionStringSV);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"SV Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringSV = siteSubSectionStringSV + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling SV #\" + s + \": \" + siteSubSectionStringSV);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringTH = siteSubSectionStringTH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TH #\" + s + \": \" + siteSubSectionStringTH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringTH = siteSubSectionStringTH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TH #\" + s + \": \" + siteSubSectionStringTH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TW is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringTW = siteSubSectionStringTW + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TW #\" + s + \": \" + siteSubSectionStringTW);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TW Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringTW = siteSubSectionStringTW + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TW #\" + s + \": \" + siteSubSectionStringTW);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringTR = siteSubSectionStringTR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TR #\" + s + \": \" + siteSubSectionStringTR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringTR = siteSubSectionStringTR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TR #\" + s + \": \" + siteSubSectionStringTR);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"VI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringVI = siteSubSectionStringVI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling VI #\" + s + \": \" + siteSubSectionStringVI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"VI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringVI = siteSubSectionStringVI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling VI #\" + s + \": \" + siteSubSectionStringVI);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                  \n              }\n                \n              \n              \n              \n              //  END OF translation logic here\n              \n              //logger.info(\"End of translation for \" + languages[l]);\n              }\n\t\t\t  \n\t\t\t  else {\n\t\t\t  \n\t\t\t\t//logger.info(\"EN is skipped, no translation\");\n\t\t\t  \n\t\t\t  \n\t\t\t  } // if not EN language\n\t\t\t  \n            } // for l loop - each language\n            \n            \n            \n    \t\t} catch (e) {\n\t\t\t\tlogger.info(\"***** HIT AN ERROR ******\");\n      \t\t\tlogger.error(e);\n                logger.info(e);\n    \t\t\t} // end try catch\n\t\t\n        \t\n//logger.info(\"End of lookup for \" + englishTypes[s]);\n\t\t\n\t\t}\t// s for loop\n  \n\t// for each language ....\n            for (var ll = 0; ll < languages.length; ll++) {\n\t\t\t\tswitch (languages[ll]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for CS - total of \" + siteSubSectionStringCS.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionCS_ss\",siteSubSectionStringCS);\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t    //logger.info(\"writing output for DK - total of \" + siteSubSectionStringDK.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionDK_ss\",siteSubSectionStringDK);\n\n\t\t\t\t\tbreak;\n\n\n                case \"NL\":\n                  \n\t\t\t\t    //logger.info(\"writing output for NL - total of \" + siteSubSectionStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionNL_ss\",siteSubSectionStringNL);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  \t//logger.info(\"writing output for FI - total of \" + siteSubSectionStringFI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionFI_ss\",siteSubSectionStringFI);\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for FR - total of \" + siteSubSectionStringFR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionFR_ss\",siteSubSectionStringFR);\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for DE - total of \" + siteSubSectionStringDE.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionDE_ss\",siteSubSectionStringDE);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for HU - total of \" + siteSubSectionStringHU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionHU_ss\",siteSubSectionStringHU);\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for IT - total of \" + siteSubSectionStringIT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionIT_ss\",siteSubSectionStringIT);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for JP - total of \" + siteSubSectionStringJP.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionJP_ss\",siteSubSectionStringJP);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for KO - total of \" + siteSubSectionStringKO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionKO_ss\",siteSubSectionStringKO);\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NO - total of \" + siteSubSectionStringNO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionNO_ss\",siteSubSectionStringNO);\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NL - total of \" + siteSubSectionStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionPL_ss\",siteSubSectionStringPL);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for PT - total of \" + siteSubSectionStringPT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionPT_ss\",siteSubSectionStringPT);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for RU - total of \" + siteSubSectionStringRU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionRU_ss\",siteSubSectionStringRU);\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ZH - total of \" + siteSubSectionStringZH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionZH_ss\",siteSubSectionStringZH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ES - total of \" + siteSubSectionStringES.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionES_ss\",siteSubSectionStringES);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for SV - total of \" + siteSubSectionStringSV.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionSV_ss\",siteSubSectionStringSV);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TH - total of \" + siteSubSectionStringTH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionTH_ss\",siteSubSectionStringTH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TW - total of \" + siteSubSectionStringTW.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionTW_ss\",siteSubSectionStringTW);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TR - total of \" + siteSubSectionStringTR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionTR_ss\",siteSubSectionStringTR);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for VI - total of \" + siteSubSectionStringVI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionVI_ss\",siteSubSectionStringVI);\n\t\t\t\t   \n                  break;\n                 \n                  \n\t\t\t\t} // switch\n\t\t\t  \n\t\t\t  } // end of second language loop\n\t\t\t\n    \n\t} // languages is not null\n \n  } // doc getid is not null\n  \n  logger.info(\"Exiting siteSubSection translation\");\n  \n  return doc;\n}\n  \n  \n  \n  \n  ",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "siteSubSectionXX Facet Translation (Support) (JS)",
    "condition" : "!doc.hasField(\"title_t\");",
    "secretSourceStageid" : "otpl3vc",
    "secretSourceStageId" : "otpl3vc"
  }, {
    "type" : "javascript-index",
    "id" : "otpl3s5",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  var supportTypeStringCS = \"\";\n  var supportTypeStringDK = \"\";\n  var supportTypeStringNL = \"\";\n  var supportTypeStringFI = \"\";\n  var supportTypeStringFR = \"\";\n  var supportTypeStringDE = \"\";\n  var supportTypeStringHU = \"\";\n  var supportTypeStringIT = \"\";\n  var supportTypeStringJP = \"\";\n  var supportTypeStringKO = \"\";\n  var supportTypeStringNO = \"\";\n  var supportTypeStringPL = \"\";\n  var supportTypeStringPT = \"\";\n  var supportTypeStringRU = \"\";\n  var supportTypeStringZH = \"\";\n  var supportTypeStringES = \"\";\n  var supportTypeStringSV = \"\";\n  var supportTypeStringTH = \"\";\n  var supportTypeStringTW = \"\";\n  var supportTypeStringTR = \"\";\n  var supportTypeStringVI = \"\";\n  \n  //logger.info(\" *** supportType translation function main ***\");\n  \n  if (doc.getId() != null) { \n\n  \n\tvar languages = doc.getFieldValues(\"languageCode_ss\");\n    doc.removeFields(\"_translation_SupportType_ENLUError_s\");\n    doc.removeFields(\"_translation_SupportType_LUError_s\");\n\t// test harness for all languages, enable below line and disable above line\n    //var languages = [\"CS\",\"DK\",\"NL\",\"FI\",\"FR\",\"DE\",\"HU\",\"IT\",\"JP\",\"KO\",\"NO\",\"PL\",\"PT\",\"RU\",\"ZH\",\"ES\",\"SV\",\"TH\",\"TW\",\"TR\",\"VI\"];\n    var englishTypes = doc.getFieldValues(\"supportType_ss\");\n    //logger.info(\"# of support types is:  \" + englishTypes.length);\n    //logger.info(\"# of languages is: \" + languages.length);\n    \n\tif (languages!=null){ \n\t\n\t\tvar translationItem = [];\n  \n\t\t// for each Support Type, look up the English Parent\n\t\tfor (var s = 0; s < englishTypes.length; s++) {\n\t\t\n\n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n            var section = encodeURI(\"Support Category\");\n              \n            //logger.info(\"Attempting translation of: \" + englishTypes[s]);\n      \n      \t\ttry {\n\n\t\t\t\t//logger.info(\"Inside English parent value lookup try block ...\");\n\t\t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishTypes[s]) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n//      \t\tlogger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n  //    \t\t\tlogger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n    //   \t\t\t\t logger.info(\"Status is A-OK\");\n      \t\t         var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\n              for (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"English translation (\" + englishTypes[s] + \") item key is \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t} // i for loop\n  \n\n              \n\t\t\t\t\n      \t\t\t} // status check on URL\n            \n            \n            \n            \n            //logger.info(\"ready to translate here .........\");\n            var parentID = parentvalues;  \n            \n            \n            //var languages = doc.getFieldValues(\"languageCode_ss\");\n            \n            //logger.info(\"Number of available languages is: \" + languages.length);\n            \n\t\t\t// for each language ....\n            for (var l = 0; l < languages.length; l++) {\n            \n              var transvalues = [];\n              var eTranslate = java.lang.Exception;\n              var foundTranslation = \"\";\n              \n\t\t\t  if (languages[l]!=\"EN\"){\n\t\t\t\t  \n\t\t\t\t  //logger.info(\"language is not EN\");\n\t\t\t  \n                try {\n\t\t\t\t\t//logger.info(\"try to translate \" + languages[l]);\n\t\t\t\t\tvar URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + languages[l] + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n\t\t\t\t\t//logger.info(\"Translation URL: \" + URLTranslate);\n\t\t\t\t\tvar cTranslate = java.net.HttpURLConnectionTranslate;\n\t\t\t\t\tcTranslate = URLTranslate.openConnection();\n\t\t\t\t\tcTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n\t\t\t\t\tcTranslate.connect();\n\t\t\t\t\tvar statusTranslate = cTranslate.getResponseCode();\n\t\t\t\t\t//logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n\t\t\t\t\tif (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\t\t\t\t\tvar readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n\t\t\t\t\t\tvar responseTranslate = JSON.parse(readerTranslate.readLine());\n\t\t\t\t\t\tvar numTranslate = responseTranslate.response.numFound;\n\t\t\t\t\t\t//logger.info(\"Translation Num Found: \" + numTranslate);\n        \n                      if (numTranslate==0){\n                          logger.info(\"Failed translation of \" + parentID + \" / \" + englishTypes[s] + \" for \" + languages[l]);\n                        }\n                      \n                      \n\t\t\t\t\t\t// put all document titles from the query into an array and set as a multivalued string\n\n\t\t\t\t\t\tvar respTranslate = responseTranslate.response.docs;\n\t\t\t\t\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          \n\t\t\t\t\t\t\tfoundTranslation = respTranslate[j].translation_t;\n\t\t\t\t\t\t\t//logger.info(\"XXXXXXXXXXXXXFound translation: \" + foundTranslation);\n\t\t\t\t\t\t\tif (typeof foundTranslation !='undefined'){\n\t\t\t\t\t\t\t\t//logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//logger.info(\"could not translate: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransvalues.push(respTranslate[j].translation_t);\n      \n\t\t\t\t\t\ttranslationItem[s] = transvalues;\n\t\t\t\t\t\t//logger.info(\"XXXXXXXEcho back: \" + translationItem[s]);\n      \n             \n          \n\t\t\t\t\t\t}\n\n        \n\t\t\t\t\t}\n\t\t\t\t} catch (eTranslate) {\n\t\t\t\t\tlogger.error(eTranslate);\n                  doc.setField(\"_translation_SupportType_LUError_s\",eTranslate);\n\t\t\t\t}\n\n\t\t\t\t// translationItem[s] = transvalues;\n\t\t\t\t//logger.info(\"translation from EN to: \" + languages[l]);\n          \t\t//logger.info(\"translation FROM: \" + englishTypes[s]);\n          \t\t//logger.info(\"translation FOUND: \" + translationItem[s]);\n              \n     \n              switch (languages[l]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"CS is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringCS = supportTypeStringCS + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling CS #\" + s + \": \" + supportTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"CS Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringCS = supportTypeStringCS + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling CS #\" + s + \": \" + supportTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DK is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringDK = supportTypeStringDK + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DK #\" + s + \": \" + supportTypeStringDK);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DK Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringDK = supportTypeStringDK + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DK #\" + s + \": \" + supportTypeStringDK);\n\t\t\t\t  }\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"NL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringNL = supportTypeStringNL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NL #\" + s + \": \" + supportTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringNL = supportTypeStringNL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NL #\" + s + \": \" + supportTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringFI = supportTypeStringFI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FI #\" + s + \": \" + supportTypeStringFI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringFI = supportTypeStringFI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FI #\" + s + \": \" + supportTypeStringFI);\n\t\t\t\t  }\t\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringFR = supportTypeStringFR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FR #\" + s + \": \" + supportTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringFR = supportTypeStringFR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FR #\" + s + \": \" + supportTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DE is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringDE = supportTypeStringDE + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DE #\" + s + \": \" + supportTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DE Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringDE = supportTypeStringDE + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DE #\" + s + \": \" + supportTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"HU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringHU = supportTypeStringHU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling HU #\" + s + \": \" + supportTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"HU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringHU = supportTypeStringHU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling HU #\" + s + \": \" + supportTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"IT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringIT = supportTypeStringIT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling IT #\" + s + \": \" + supportTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"IT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringIT = supportTypeStringIT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling IT #\" + s + \": \" + supportTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"JP is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringJP = supportTypeStringJP + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling JP #\" + s + \": \" + supportTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"JP Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringJP = supportTypeStringJP + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling JP #\" + s + \": \" + supportTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"KO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringKO = supportTypeStringKO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling KO #\" + s + \": \" + supportTypeStringKO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"KO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringKO = supportTypeStringKO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling KO #\" + s + \": \" + supportTypeStringKO);\n\t\t\t\t  }\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringNO = supportTypeStringNO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NO #\" + s + \": \" + supportTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringNO = supportTypeStringNO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NO #\" + s + \": \" + supportTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringPL = supportTypeStringPL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PL #\" + s + \": \" + supportTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringPL = supportTypeStringPL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PL #\" + s + \": \" + supportTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringPT = supportTypeStringPT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PT #\" + s + \": \" + supportTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringPT = supportTypeStringPT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PT #\" + s + \": \" + supportTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"RU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringRU = supportTypeStringRU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling RU #\" + s + \": \" + supportTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"RU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringRU = supportTypeStringRU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling RU #\" + s + \": \" + supportTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ZH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringZH = supportTypeStringZH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ZH #\" + s + \": \" + supportTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ZH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringZH = supportTypeStringZH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ZH #\" + s + \": \" + supportTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ES is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringES = supportTypeStringES + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ES #\" + s + \": \" + supportTypeStringES);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ES Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringES = supportTypeStringES + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ES #\" + s + \": \" + supportTypeStringES);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"SV is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringSV = supportTypeStringSV + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling SV #\" + s + \": \" + supportTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"SV Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringSV = supportTypeStringSV + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling SV #\" + s + \": \" + supportTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringTH = supportTypeStringTH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TH #\" + s + \": \" + supportTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringTH = supportTypeStringTH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TH #\" + s + \": \" + supportTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TW is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringTW = supportTypeStringTW + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TW #\" + s + \": \" + supportTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TW Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringTW = supportTypeStringTW + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TW #\" + s + \": \" + supportTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringTR = supportTypeStringTR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TR #\" + s + \": \" + supportTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringTR = supportTypeStringTR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TR #\" + s + \": \" + supportTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"VI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringVI = supportTypeStringVI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling VI #\" + s + \": \" + supportTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"VI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringVI = supportTypeStringVI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling VI #\" + s + \": \" + supportTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                  \n              }\n                \n              \n              \n              \n              //  END OF translation logic here\n              \n              //logger.info(\"End of translation for \" + languages[l]);\n              }\n\t\t\t  \n\t\t\t  else {\n\t\t\t  \n\t\t\t\t//logger.info(\"EN is skipped, no translation\");\n\t\t\t  \n\t\t\t  \n\t\t\t  } // if not EN language\n\t\t\t  \n            } // for l loop - each language\n            \n            \n            \n    \t\t} catch (e) {\n\t\t\t\tlogger.info(\"***** HIT AN ERROR ******\");\n      \t\t\tlogger.error(e);\n                logger.info(e);\n    \t\t\t} // end try catch\n\t\t\n        \t\n//logger.info(\"End of lookup for \" + englishTypes[s]);\n\t\t\n\t\t}\t// s for loop\n  \n\t// for each language ....\n            for (var ll = 0; ll < languages.length; ll++) {\n\t\t\t\tswitch (languages[ll]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for CS - total of \" + supportTypeStringCS.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeCS_ss\",supportTypeStringCS);\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t    //logger.info(\"writing output for DK - total of \" + supportTypeStringDK.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeDK_ss\",supportTypeStringDK);\n\n\t\t\t\t\tbreak;\n\n\n                case \"NL\":\n                  \n\t\t\t\t    //logger.info(\"writing output for NL - total of \" + supportTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeNL_ss\",supportTypeStringNL);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  \t//logger.info(\"writing output for FI - total of \" + supportTypeStringFI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeFI_ss\",supportTypeStringFI);\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for FR - total of \" + supportTypeStringFR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeFR_ss\",supportTypeStringFR);\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for DE - total of \" + supportTypeStringDE.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeDE_ss\",supportTypeStringDE);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for HU - total of \" + supportTypeStringHU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeHU_ss\",supportTypeStringHU);\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for IT - total of \" + supportTypeStringIT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeIT_ss\",supportTypeStringIT);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for JP - total of \" + supportTypeStringJP.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeJP_ss\",supportTypeStringJP);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for KO - total of \" + supportTypeStringKO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeKO_ss\",supportTypeStringKO);\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NO - total of \" + supportTypeStringNO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeNO_ss\",supportTypeStringNO);\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NL - total of \" + supportTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypePL_ss\",supportTypeStringPL);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for PT - total of \" + supportTypeStringPT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypePT_ss\",supportTypeStringPT);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for RU - total of \" + supportTypeStringRU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeRU_ss\",supportTypeStringRU);\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ZH - total of \" + supportTypeStringZH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeZH_ss\",supportTypeStringZH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ES - total of \" + supportTypeStringES.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeES_ss\",supportTypeStringES);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for SV - total of \" + supportTypeStringSV.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeSV_ss\",supportTypeStringSV);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TH - total of \" + supportTypeStringTH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeTH_ss\",supportTypeStringTH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TW - total of \" + supportTypeStringTW.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeTW_ss\",supportTypeStringTW);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TR - total of \" + supportTypeStringTR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeTR_ss\",supportTypeStringTR);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for VI - total of \" + supportTypeStringVI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeVI_ss\",supportTypeStringVI);\n\t\t\t\t   \n                  break;\n                 \n                  \n\t\t\t\t} // switch\n\t\t\t  \n\t\t\t  } // end of second language loop\n\t\t\t\n    \n\t} // languages is not null\n \n  } // doc getid is not null\n  \n  //logger.info(\"Exiting supportType translation\");\n  \n  return doc;\n}\n  \n  \n  \n  \n  ",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "supportTypeXX Facet Translation (Support) (JS)",
    "condition" : "!doc.hasField(\"title_t\");",
    "secretSourceStageid" : "otpl3s5",
    "secretSourceStageId" : "otpl3s5"
  }, {
    "type" : "javascript-index",
    "id" : "otpljer",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  var supportResourceTypeStringCS = \"\";\n  var supportResourceTypeStringDK = \"\";\n  var supportResourceTypeStringNL = \"\";\n  var supportResourceTypeStringFI = \"\";\n  var supportResourceTypeStringFR = \"\";\n  var supportResourceTypeStringDE = \"\";\n  var supportResourceTypeStringHU = \"\";\n  var supportResourceTypeStringIT = \"\";\n  var supportResourceTypeStringJP = \"\";\n  var supportResourceTypeStringKO = \"\";\n  var supportResourceTypeStringNO = \"\";\n  var supportResourceTypeStringPL = \"\";\n  var supportResourceTypeStringPT = \"\";\n  var supportResourceTypeStringRU = \"\";\n  var supportResourceTypeStringZH = \"\";\n  var supportResourceTypeStringES = \"\";\n  var supportResourceTypeStringSV = \"\";\n  var supportResourceTypeStringTH = \"\";\n  var supportResourceTypeStringTW = \"\";\n  var supportResourceTypeStringTR = \"\";\n  var supportResourceTypeStringVI = \"\";\n  \n // logger.info(\" *** supportResourceType translation function main ***\");\n  \n  if (doc.getId() != null) { \n\n  \n\tvar languages = doc.getFieldValues(\"languageCode_ss\");\n    doc.removeFields(\"_translation_SupportResourceType_ENLUError_s\");\n    doc.removeFields(\"_translation_SupportResourceType_LUError_s\");\n\t// test harness for all languages, enable below line and disable above line\n    //var languages = [\"CS\",\"DK\",\"NL\",\"FI\",\"FR\",\"DE\",\"HU\",\"IT\",\"JP\",\"KO\",\"NO\",\"PL\",\"PT\",\"RU\",\"ZH\",\"ES\",\"SV\",\"TH\",\"TW\",\"TR\",\"VI\"];\n    var englishTypes = doc.getFieldValues(\"supportResourceType_ss\");\n   // logger.info(\"# of support resource types is:  \" + englishTypes.length);\n   // logger.info(\"# of languages is: \" + languages.length);\n    \n\tif (languages!=null){ \n\t\n\t\tvar translationItem = [];\n  \n\t\t// for each Support Resource Type, look up the English Parent\n\t\tfor (var s = 0; s < englishTypes.length; s++) {\n\t\t\n\n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n            var section = encodeURI(\"Support Sub Category\");\n              \n            //logger.info(\"Attempting translation of: \" + englishTypes[s]);\n      \n      \t\ttry {\n\n\t\t\t\t//logger.info(\"Inside English parent value lookup try block ...\");\n\t\t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishTypes[s]) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n      \t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n  //    \t\t\tlogger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n    //   \t\t\t\t logger.info(\"Status is A-OK\");\n      \t\t         var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t//\tlogger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\n              for (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"English translation (\" + englishTypes[s] + \") item key is \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t} // i for loop\n  \n\n              \n\t\t\t\t\n      \t\t\t} // status check on URL\n            \n            \n            \n            \n            //logger.info(\"ready to translate here .........\");\n            var parentID = parentvalues;  \n            \n            \n            //var languages = doc.getFieldValues(\"languageCode_ss\");\n            \n            //logger.info(\"Number of available languages is: \" + languages.length);\n            \n\t\t\t// for each language ....\n            for (var l = 0; l < languages.length; l++) {\n            \n              var transvalues = [];\n              var eTranslate = java.lang.Exception;\n              var foundTranslation = \"\";\n              \n\t\t\t  if (languages[l]!=\"EN\"){\n\t\t\t\t  \n\t\t\t\t  //logger.info(\"language is not EN\");\n\t\t\t  \n                try {\n\t\t\t\t//\tlogger.info(\"try to translate \" + languages[l] + \" for \" + parentID);\n\t\t\t\t\tvar URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + languages[l] + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n\t\t\t\t\t//logger.info(\"Translation URL: \" + URLTranslate);\n\t\t\t\t\tvar cTranslate = java.net.HttpURLConnectionTranslate;\n\t\t\t\t\tcTranslate = URLTranslate.openConnection();\n\t\t\t\t\tcTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n\t\t\t\t\tcTranslate.connect();\n\t\t\t\t\tvar statusTranslate = cTranslate.getResponseCode();\n\t\t\t\t\t//logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n\t\t\t\t\tif (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\t\t\t\t\tvar readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n\t\t\t\t\t\tvar responseTranslate = JSON.parse(readerTranslate.readLine());\n\t\t\t\t\t\tvar numTranslate = responseTranslate.response.numFound;\n\t\t\t\t\t//\tlogger.info(\"Translation Num Found: \" + numTranslate);\n                      \n                      \tif (numTranslate==0){\n                          logger.info(\"Failed translation of \" + parentID + \" / \" + englishTypes[s] + \" for \" + languages[l]);\n                        }\n        \n\t\t\t\t\t\t// put all document titles from the query into an array and set as a multivalued string\n\n\t\t\t\t\t\tvar respTranslate = responseTranslate.response.docs;\n\t\t\t\t\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          \n\t\t\t\t\t\t\tfoundTranslation = respTranslate[j].translation_t;\n\t\t\t\t\t\t//\tlogger.info(\"Found translation: \" + foundTranslation);\n\t\t\t\t\t\t\tif (typeof foundTranslation !='undefined'){\n\t\t\t\t\t\t\t\t//logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlogger.info(\"could not translate: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransvalues.push(respTranslate[j].translation_t);\n      \n\t\t\t\t\t\ttranslationItem[s] = transvalues;\n\t\t\t\t\t\t//logger.info(\"XXXXXXXEcho back: \" + translationItem[s]);\n      \n             \n          \n\t\t\t\t\t\t}\n\n        \n\t\t\t\t\t}\n\t\t\t\t} catch (eTranslate) {\n\t\t\t\t\tlogger.error(eTranslate);\n                  doc.setField(\"_translation_SupportResourceType_LUError_s\",eTranslate);\n\t\t\t\t}\n\n\t\t\t\t// translationItem[s] = transvalues;\n\t\t\t\t//logger.info(\"translation from EN to: \" + languages[l]);\n          \t\t//logger.info(\"translation FROM: \" + englishTypes[s]);\n          \t\t//logger.info(\"translation FOUND: \" + translationItem[s]);\n              \n     \n              switch (languages[l]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"CS is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringCS = supportResourceTypeStringCS + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling CS #\" + s + \": \" + supportResourceTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"CS Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringCS = supportResourceTypeStringCS + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling CS #\" + s + \": \" + supportResourceTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DK is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringDK = supportResourceTypeStringDK + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DK #\" + s + \": \" + supportResourceTypeStringDK);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DK Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringDK = supportResourceTypeStringDK + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DK #\" + s + \": \" + supportResourceTypeStringDK);\n\t\t\t\t  }\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"NL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringNL = supportResourceTypeStringNL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NL #\" + s + \": \" + supportResourceTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringNL = supportResourceTypeStringNL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NL #\" + s + \": \" + supportResourceTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringFI = supportResourceTypeStringFI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FI #\" + s + \": \" + supportResourceTypeStringFI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringFI = supportResourceTypeStringFI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FI #\" + s + \": \" + supportResourceTypeStringFI);\n\t\t\t\t  }\t\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringFR = supportResourceTypeStringFR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FR #\" + s + \": \" + supportResourceTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringFR = supportResourceTypeStringFR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FR #\" + s + \": \" + supportResourceTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DE is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringDE = supportResourceTypeStringDE + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DE #\" + s + \": \" + supportResourceTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DE Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringDE = supportResourceTypeStringDE + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DE #\" + s + \": \" + supportResourceTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"HU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringHU = supportResourceTypeStringHU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling HU #\" + s + \": \" + supportResourceTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"HU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringHU = supportResourceTypeStringHU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling HU #\" + s + \": \" + supportResourceTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"IT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringIT = supportResourceTypeStringIT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling IT #\" + s + \": \" + supportResourceTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"IT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringIT = supportResourceTypeStringIT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling IT #\" + s + \": \" + supportResourceTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"JP is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringJP = supportResourceTypeStringJP + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling JP #\" + s + \": \" + supportResourceTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"JP Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringJP = supportResourceTypeStringJP + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling JP #\" + s + \": \" + supportResourceTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"KO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringKO = supportResourceTypeStringKO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling KO #\" + s + \": \" + supportResourceTypeStringKO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"KO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringKO = supportResourceTypeStringKO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling KO #\" + s + \": \" + supportResourceTypeStringKO);\n\t\t\t\t  }\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringNO = supportResourceTypeStringNO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NO #\" + s + \": \" + supportResourceTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringNO = supportResourceTypeStringNO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NO #\" + s + \": \" + supportResourceTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringPL = supportResourceTypeStringPL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PL #\" + s + \": \" + supportResourceTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringPL = supportResourceTypeStringPL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PL #\" + s + \": \" + supportResourceTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringPT = supportResourceTypeStringPT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PT #\" + s + \": \" + supportResourceTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringPT = supportResourceTypeStringPT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PT #\" + s + \": \" + supportResourceTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"RU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringRU = supportResourceTypeStringRU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling RU #\" + s + \": \" + supportResourceTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"RU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringRU = supportResourceTypeStringRU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling RU #\" + s + \": \" + supportResourceTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ZH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringZH = supportResourceTypeStringZH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ZH #\" + s + \": \" + supportResourceTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ZH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringZH = supportResourceTypeStringZH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ZH #\" + s + \": \" + supportResourceTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ES is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringES = supportResourceTypeStringES + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ES #\" + s + \": \" + supportResourceTypeStringES);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ES Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringES = supportResourceTypeStringES + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ES #\" + s + \": \" + supportResourceTypeStringES);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"SV is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringSV = supportResourceTypeStringSV + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling SV #\" + s + \": \" + supportResourceTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"SV Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringSV = supportResourceTypeStringSV + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling SV #\" + s + \": \" + supportResourceTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringTH = supportResourceTypeStringTH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TH #\" + s + \": \" + supportResourceTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringTH = supportResourceTypeStringTH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TH #\" + s + \": \" + supportResourceTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TW is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringTW = supportResourceTypeStringTW + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TW #\" + s + \": \" + supportResourceTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TW Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringTW = supportResourceTypeStringTW + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TW #\" + s + \": \" + supportResourceTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringTR = supportResourceTypeStringTR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TR #\" + s + \": \" + supportResourceTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringTR = supportResourceTypeStringTR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TR #\" + s + \": \" + supportResourceTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"VI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringVI = supportResourceTypeStringVI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling VI #\" + s + \": \" + supportResourceTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"VI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringVI = supportResourceTypeStringVI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling VI #\" + s + \": \" + supportResourceTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                  \n              }\n                \n              \n              \n              \n              //  END OF translation logic here\n              \n              //logger.info(\"End of translation for \" + languages[l]);\n              }\n\t\t\t  \n\t\t\t  else {\n\t\t\t  \n\t\t\t\t//logger.info(\"EN is skipped, no translation\");\n\t\t\t  \n\t\t\t  \n\t\t\t  } // if not EN language\n\t\t\t  \n            } // for l loop - each language\n            \n            \n            \n    \t\t} catch (e) {\n\t\t\t\tlogger.info(\"***** HIT AN ERROR ******\");\n      \t\t\tlogger.error(e);\n                logger.info(e);\n    \t\t\t} // end try catch\n\t\t\n        \t\n//logger.info(\"End of lookup for \" + englishTypes[s]);\n\t\t\n\t\t}\t// s for loop\n  \n\t// for each language ....\n            for (var ll = 0; ll < languages.length; ll++) {\n\t\t\t\tswitch (languages[ll]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for CS - total of \" + supportResourceTypeStringCS.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeCS_ss\",supportResourceTypeStringCS);\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t    //logger.info(\"writing output for DK - total of \" + supportResourceTypeStringDK.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeDK_ss\",supportResourceTypeStringDK);\n\n\t\t\t\t\tbreak;\n\n\n                case \"NL\":\n                  \n\t\t\t\t    //logger.info(\"writing output for NL - total of \" + supportResourceTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeNL_ss\",supportResourceTypeStringNL);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  \t//logger.info(\"writing output for FI - total of \" + supportResourceTypeStringFI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeFI_ss\",supportResourceTypeStringFI);\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for FR - total of \" + supportResourceTypeStringFR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeFR_ss\",supportResourceTypeStringFR);\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for DE - total of \" + supportResourceTypeStringDE.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeDE_ss\",supportResourceTypeStringDE);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for HU - total of \" + supportResourceTypeStringHU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeHU_ss\",supportResourceTypeStringHU);\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for IT - total of \" + supportResourceTypeStringIT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeIT_ss\",supportResourceTypeStringIT);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for JP - total of \" + supportResourceTypeStringJP.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeJP_ss\",supportResourceTypeStringJP);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for KO - total of \" + supportResourceTypeStringKO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeKO_ss\",supportResourceTypeStringKO);\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NO - total of \" + supportResourceTypeStringNO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeNO_ss\",supportResourceTypeStringNO);\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NL - total of \" + supportResourceTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypePL_ss\",supportResourceTypeStringPL);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for PT - total of \" + supportResourceTypeStringPT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypePT_ss\",supportResourceTypeStringPT);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for RU - total of \" + supportResourceTypeStringRU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeRU_ss\",supportResourceTypeStringRU);\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ZH - total of \" + supportResourceTypeStringZH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeZH_ss\",supportResourceTypeStringZH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ES - total of \" + supportResourceTypeStringES.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeES_ss\",supportResourceTypeStringES);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for SV - total of \" + supportResourceTypeStringSV.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeSV_ss\",supportResourceTypeStringSV);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TH - total of \" + supportResourceTypeStringTH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeTH_ss\",supportResourceTypeStringTH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TW - total of \" + supportResourceTypeStringTW.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeTW_ss\",supportResourceTypeStringTW);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TR - total of \" + supportResourceTypeStringTR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeTR_ss\",supportResourceTypeStringTR);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for VI - total of \" + supportResourceTypeStringVI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeVI_ss\",supportResourceTypeStringVI);\n\t\t\t\t   \n                  break;\n                 \n                  \n\t\t\t\t} // switch\n\t\t\t  \n\t\t\t  } // end of second language loop\n\t\t\t\n    \n\t} // languages is not null\n \n  } // doc getid is not null\n  \n  //logger.info(\"Exiting supportResourceType translation\");\n  \n  return doc;\n}\n  \n  \n  \n  \n  ",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "supportResourceTypeXX Facet Translation (JS)",
    "condition" : "!doc.hasField(\"title_t\");",
    "secretSourceStageid" : "otpljer",
    "secretSourceStageId" : "otpljer"
  }, {
    "type" : "javascript-index",
    "id" : "otplzye",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  var marketTypeStringCS = \"\";\n  var marketTypeStringDK = \"\";\n  var marketTypeStringNL = \"\";\n  var marketTypeStringFI = \"\";\n  var marketTypeStringFR = \"\";\n  var marketTypeStringDE = \"\";\n  var marketTypeStringHU = \"\";\n  var marketTypeStringIT = \"\";\n  var marketTypeStringJP = \"\";\n  var marketTypeStringKO = \"\";\n  var marketTypeStringNO = \"\";\n  var marketTypeStringPL = \"\";\n  var marketTypeStringPT = \"\";\n  var marketTypeStringRU = \"\";\n  var marketTypeStringZH = \"\";\n  var marketTypeStringES = \"\";\n  var marketTypeStringSV = \"\";\n  var marketTypeStringTH = \"\";\n  var marketTypeStringTW = \"\";\n  var marketTypeStringTR = \"\";\n  var marketTypeStringVI = \"\";\n  \n // logger.info(\" *** marketType translation function main ***\");\n  \n  if (doc.getId() != null) { \n\n  \n\tvar languages = doc.getFieldValues(\"languageCode_ss\");\n    doc.removeFields(\"_translation_MarketType_ENLUError_s\");\n    doc.removeFields(\"_translation_MarketType_LUError_s\");\n\t// test harness for all languages, enable below line and disable above line\n    //var languages = [\"CS\",\"DK\",\"NL\",\"FI\",\"FR\",\"DE\",\"HU\",\"IT\",\"JP\",\"KO\",\"NO\",\"PL\",\"PT\",\"RU\",\"ZH\",\"ES\",\"SV\",\"TH\",\"TW\",\"TR\",\"VI\"];\n    var englishTypes = doc.getFieldValues(\"market_ss\");\n   // logger.info(\"# of markets is:  \" + englishTypes.length);\n   // logger.info(\"# of languages is: \" + languages.length);\n    \n\tif (languages!=null){ \n\t\n\t\tvar translationItem = [];\n  \n\t\t// for each Market, look up the English Parent\n\t\tfor (var s = 0; s < englishTypes.length; s++) {\n\t\t\n\n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n            var section = encodeURI(\"Market\");\n              \n           // logger.info(\"Attempting translation of: \" + englishTypes[s]);\n      \n      \t\ttry {\n\n\t\t\t\t//logger.info(\"Inside English parent value lookup try block ...\");\n\t\t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishTypes[s]) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n      \t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n  //    \t\t\tlogger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n    //   \t\t\t\t logger.info(\"Status is A-OK\");\n      \t\t         var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t//\tlogger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\n              for (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"English translation (\" + englishTypes[s] + \") item key is \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t} // i for loop\n  \n\n              \n\t\t\t\t\n      \t\t\t} // status check on URL\n            \n            \n            \n            \n            //logger.info(\"ready to translate here .........\");\n            var parentID = parentvalues;  \n            \n            \n            //var languages = doc.getFieldValues(\"languageCode_ss\");\n            \n            //logger.info(\"Number of available languages is: \" + languages.length);\n            \n\t\t\t// for each language ....\n            for (var l = 0; l < languages.length; l++) {\n            \n              var transvalues = [];\n              var eTranslate = java.lang.Exception;\n              var foundTranslation = \"\";\n              \n\t\t\t  if (languages[l]!=\"EN\"){\n\t\t\t\t  \n\t\t\t\t  //logger.info(\"language is not EN\");\n\t\t\t  \n                try {\n\t\t\t\t\t//logger.info(\"try to translate \" + languages[l] + \" for \" + parentID);\n\t\t\t\t\tvar URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + languages[l] + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n\t\t\t\t\t//logger.info(\"Translation URL: \" + URLTranslate);\n\t\t\t\t\tvar cTranslate = java.net.HttpURLConnectionTranslate;\n\t\t\t\t\tcTranslate = URLTranslate.openConnection();\n\t\t\t\t\tcTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n\t\t\t\t\tcTranslate.connect();\n\t\t\t\t\tvar statusTranslate = cTranslate.getResponseCode();\n\t\t\t\t\t//logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n\t\t\t\t\tif (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\t\t\t\t\tvar readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n\t\t\t\t\t\tvar responseTranslate = JSON.parse(readerTranslate.readLine());\n\t\t\t\t\t\tvar numTranslate = responseTranslate.response.numFound;\n\t\t\t\t\t\t//logger.info(\"Translation Num Found: \" + numTranslate);\n        \n\t\t\t\t\t\tif (numTranslate==0){\n                          logger.info(\"Failed translation of \" + parentID + \" / \" + englishTypes[s] + \" for \" + languages[l]);\n                        }\n\t\t\n\t\t\n\t\t\t\t\t\t// put all document titles from the query into an array and set as a multivalued string\n\n\t\t\t\t\t\tvar respTranslate = responseTranslate.response.docs;\n\t\t\t\t\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          \n\t\t\t\t\t\t\tfoundTranslation = respTranslate[j].translation_t;\n\t\t\t\t\t\t\t//logger.info(\"Found translation: \" + foundTranslation);\n\t\t\t\t\t\t\tif (typeof foundTranslation !='undefined'){\n\t\t\t\t\t\t\t\t//logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//logger.info(\"could not translate: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransvalues.push(respTranslate[j].translation_t);\n      \n\t\t\t\t\t\ttranslationItem[s] = transvalues;\n\t\t\t\t\t\t//logger.info(\"XXXXXXXEcho back: \" + translationItem[s]);\n      \n             \n          \n\t\t\t\t\t\t}\n\n        \n\t\t\t\t\t}\n\t\t\t\t} catch (eTranslate) {\n\t\t\t\t\tlogger.error(eTranslate);\n                  doc.setField(\"_translation_MarketType_LUError_s\",eTranslate);\n\t\t\t\t}\n\n\t\t\t\t// translationItem[s] = transvalues;\n\t\t\t\t//logger.info(\"translation from EN to: \" + languages[l]);\n          \t\t//logger.info(\"translation FROM: \" + englishTypes[s]);\n          \t\t//logger.info(\"translation FOUND: \" + translationItem[s]);\n              \n     \n              switch (languages[l]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"CS is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringCS = marketTypeStringCS + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling CS #\" + s + \": \" + marketTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"CS Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringCS = marketTypeStringCS + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling CS #\" + s + \": \" + marketTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DK is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringDK = marketTypeStringDK + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DK #\" + s + \": \" + marketTypeStringDK);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DK Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringDK = marketTypeStringDK + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DK #\" + s + \": \" + marketTypeStringDK);\n\t\t\t\t  }\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"NL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringNL = marketTypeStringNL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NL #\" + s + \": \" + marketTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringNL = marketTypeStringNL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NL #\" + s + \": \" + marketTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringFI = marketTypeStringFI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FI #\" + s + \": \" + marketTypeStringFI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringFI = marketTypeStringFI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FI #\" + s + \": \" + marketTypeStringFI);\n\t\t\t\t  }\t\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringFR = marketTypeStringFR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FR #\" + s + \": \" + marketTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringFR = marketTypeStringFR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FR #\" + s + \": \" + marketTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DE is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringDE = marketTypeStringDE + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DE #\" + s + \": \" + marketTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DE Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringDE = marketTypeStringDE + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DE #\" + s + \": \" + marketTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"HU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringHU = marketTypeStringHU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling HU #\" + s + \": \" + marketTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"HU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringHU = marketTypeStringHU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling HU #\" + s + \": \" + marketTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"IT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringIT = marketTypeStringIT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling IT #\" + s + \": \" + marketTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"IT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringIT = marketTypeStringIT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling IT #\" + s + \": \" + marketTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"JP is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringJP = marketTypeStringJP + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling JP #\" + s + \": \" + marketTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"JP Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringJP = marketTypeStringJP + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling JP #\" + s + \": \" + marketTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"KO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringKO = marketTypeStringKO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling KO #\" + s + \": \" + marketTypeStringKO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"KO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringKO = marketTypeStringKO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling KO #\" + s + \": \" + marketTypeStringKO);\n\t\t\t\t  }\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringNO = marketTypeStringNO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NO #\" + s + \": \" + marketTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringNO = marketTypeStringNO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NO #\" + s + \": \" + marketTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringPL = marketTypeStringPL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PL #\" + s + \": \" + marketTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringPL = marketTypeStringPL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PL #\" + s + \": \" + marketTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringPT = marketTypeStringPT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PT #\" + s + \": \" + marketTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringPT = marketTypeStringPT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PT #\" + s + \": \" + marketTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"RU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringRU = marketTypeStringRU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling RU #\" + s + \": \" + marketTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"RU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringRU = marketTypeStringRU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling RU #\" + s + \": \" + marketTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ZH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringZH = marketTypeStringZH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ZH #\" + s + \": \" + marketTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ZH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringZH = marketTypeStringZH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ZH #\" + s + \": \" + marketTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ES is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringES = marketTypeStringES + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ES #\" + s + \": \" + marketTypeStringES);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ES Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringES = marketTypeStringES + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ES #\" + s + \": \" + marketTypeStringES);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"SV is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringSV = marketTypeStringSV + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling SV #\" + s + \": \" + marketTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"SV Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringSV = marketTypeStringSV + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling SV #\" + s + \": \" + marketTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringTH = marketTypeStringTH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TH #\" + s + \": \" + marketTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringTH = marketTypeStringTH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TH #\" + s + \": \" + marketTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TW is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringTW = marketTypeStringTW + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TW #\" + s + \": \" + marketTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TW Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringTW = marketTypeStringTW + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TW #\" + s + \": \" + marketTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringTR = marketTypeStringTR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TR #\" + s + \": \" + marketTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringTR = marketTypeStringTR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TR #\" + s + \": \" + marketTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"VI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringVI = marketTypeStringVI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling VI #\" + s + \": \" + marketTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"VI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringVI = marketTypeStringVI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling VI #\" + s + \": \" + marketTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                  \n              }\n                \n              \n              \n              \n              //  END OF translation logic here\n              \n              //logger.info(\"End of translation for \" + languages[l]);\n              }\n\t\t\t  \n\t\t\t  else {\n\t\t\t  \n\t\t\t\t//logger.info(\"EN is skipped, no translation\");\n\t\t\t  \n\t\t\t  \n\t\t\t  } // if not EN language\n\t\t\t  \n            } // for l loop - each language\n            \n            \n            \n    \t\t} catch (e) {\n\t\t\t\tlogger.info(\"***** HIT AN ERROR ******\");\n      \t\t\tlogger.error(e);\n                logger.info(e);\n    \t\t\t} // end try catch\n\t\t\n        \t\n//logger.info(\"End of lookup for \" + englishTypes[s]);\n\t\t\n\t\t}\t// s for loop\n  \n\t// for each language ....\n            for (var ll = 0; ll < languages.length; ll++) {\n\t\t\t\tswitch (languages[ll]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for CS - total of \" + marketTypeStringCS.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketCS_ss\",marketTypeStringCS);\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t    //logger.info(\"writing output for DK - total of \" + marketTypeStringDK.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketDK_ss\",marketTypeStringDK);\n\n\t\t\t\t\tbreak;\n\n\n                case \"NL\":\n                  \n\t\t\t\t    //logger.info(\"writing output for NL - total of \" + marketTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketNL_ss\",marketTypeStringNL);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  \t//logger.info(\"writing output for FI - total of \" + marketTypeStringFI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketFI_ss\",marketTypeStringFI);\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for FR - total of \" + marketTypeStringFR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketFR_ss\",marketTypeStringFR);\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for DE - total of \" + marketTypeStringDE.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketDE_ss\",marketTypeStringDE);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for HU - total of \" + marketTypeStringHU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketHU_ss\",marketTypeStringHU);\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for IT - total of \" + marketTypeStringIT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketIT_ss\",marketTypeStringIT);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for JP - total of \" + marketTypeStringJP.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketJP_ss\",marketTypeStringJP);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for KO - total of \" + marketTypeStringKO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketKO_ss\",marketTypeStringKO);\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NO - total of \" + marketTypeStringNO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketNO_ss\",marketTypeStringNO);\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NL - total of \" + marketTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketPL_ss\",marketTypeStringPL);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for PT - total of \" + marketTypeStringPT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketPT_ss\",marketTypeStringPT);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for RU - total of \" + marketTypeStringRU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketRU_ss\",marketTypeStringRU);\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ZH - total of \" + marketTypeStringZH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketZH_ss\",marketTypeStringZH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ES - total of \" + marketTypeStringES.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketES_ss\",marketTypeStringES);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for SV - total of \" + marketTypeStringSV.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketSV_ss\",marketTypeStringSV);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TH - total of \" + marketTypeStringTH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketTH_ss\",marketTypeStringTH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TW - total of \" + marketTypeStringTW.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketTW_ss\",marketTypeStringTW);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TR - total of \" + marketTypeStringTR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketTR_ss\",marketTypeStringTR);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for VI - total of \" + marketTypeStringVI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketVI_ss\",marketTypeStringVI);\n\t\t\t\t   \n                  break;\n                 \n                  \n\t\t\t\t} // switch\n\t\t\t  \n\t\t\t  } // end of second language loop\n\t\t\t\n    \n\t} // languages is not null\n \n  } // doc getid is not null\n  \n  //logger.info(\"Exiting marketType translation\");\n  \n  return doc;\n}\n  \n  \n  \n  \n  ",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "marketXX Facet Translation (JS)",
    "secretSourceStageid" : "otplzye",
    "secretSourceStageId" : "otplzye"
  }, {
    "type" : "javascript-index",
    "id" : "otplyif",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  var technologyTypeStringCS = \"\";\n  var technologyTypeStringDK = \"\";\n  var technologyTypeStringNL = \"\";\n  var technologyTypeStringFI = \"\";\n  var technologyTypeStringFR = \"\";\n  var technologyTypeStringDE = \"\";\n  var technologyTypeStringHU = \"\";\n  var technologyTypeStringIT = \"\";\n  var technologyTypeStringJP = \"\";\n  var technologyTypeStringKO = \"\";\n  var technologyTypeStringNO = \"\";\n  var technologyTypeStringPL = \"\";\n  var technologyTypeStringPT = \"\";\n  var technologyTypeStringRU = \"\";\n  var technologyTypeStringZH = \"\";\n  var technologyTypeStringES = \"\";\n  var technologyTypeStringSV = \"\";\n  var technologyTypeStringTH = \"\";\n  var technologyTypeStringTW = \"\";\n  var technologyTypeStringTR = \"\";\n  var technologyTypeStringVI = \"\";\n  \n // logger.info(\" *** technologyType translation function main ***\");\n  \n  if (doc.getId() != null) { \n\n  \n\tvar languages = doc.getFieldValues(\"languageCode_ss\");\n    doc.removeFields(\"_translation_TechnologyType_ENLUError_s\");\n    doc.removeFields(\"_translation_TechnologyType_LUError_s\");\n\t// test harness for all languages, enable below line and disable above line\n    //var languages = [\"CS\",\"DK\",\"NL\",\"FI\",\"FR\",\"DE\",\"HU\",\"IT\",\"JP\",\"KO\",\"NO\",\"PL\",\"PT\",\"RU\",\"ZH\",\"ES\",\"SV\",\"TH\",\"TW\",\"TR\",\"VI\"];\n    var englishTypes = doc.getFieldValues(\"technology_ss\");\n   // logger.info(\"# of technologys is:  \" + englishTypes.length);\n   // logger.info(\"# of languages is: \" + languages.length);\n    \n\tif (languages!=null){ \n\t\n\t\tvar translationItem = [];\n  \n\t\t// for each technology, look up the English Parent\n\t\tfor (var s = 0; s < englishTypes.length; s++) {\n\t\t\n\n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n            var section = encodeURI(\"Technology\");\n              \n            //logger.info(\"Attempting translation of: \" + englishTypes[s]);\n      \n      \t\ttry {\n\n\t\t\t\t//logger.info(\"Inside English parent value lookup try block ...\");\n\t\t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishTypes[s]) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n      \t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n  //    \t\t\tlogger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n    //   \t\t\t\t logger.info(\"Status is A-OK\");\n      \t\t         var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t//\tlogger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\n              for (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"English translation (\" + englishTypes[s] + \") item key is \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t} // i for loop\n  \n\n              \n\t\t\t\t\n      \t\t\t} // status check on URL\n            \n            \n            \n            \n            //logger.info(\"ready to translate here .........\");\n            var parentID = parentvalues;  \n            \n            \n            //var languages = doc.getFieldValues(\"languageCode_ss\");\n            \n            //logger.info(\"Number of available languages is: \" + languages.length);\n            \n\t\t\t// for each language ....\n            for (var l = 0; l < languages.length; l++) {\n            \n              var transvalues = [];\n              var eTranslate = java.lang.Exception;\n              var foundTranslation = \"\";\n              \n\t\t\t  if (languages[l]!=\"EN\"){\n\t\t\t\t  \n\t\t\t\t  //logger.info(\"language is not EN\");\n\t\t\t  \n                try {\n\t\t\t\t\t//logger.info(\"try to translate \" + languages[l] + \" for \" + parentID);\n\t\t\t\t\tvar URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + languages[l] + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n\t\t\t\t\t//logger.info(\"Translation URL: \" + URLTranslate);\n\t\t\t\t\tvar cTranslate = java.net.HttpURLConnectionTranslate;\n\t\t\t\t\tcTranslate = URLTranslate.openConnection();\n\t\t\t\t\tcTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n\t\t\t\t\tcTranslate.connect();\n\t\t\t\t\tvar statusTranslate = cTranslate.getResponseCode();\n\t\t\t\t\t//logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n\t\t\t\t\tif (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\t\t\t\t\tvar readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n\t\t\t\t\t\tvar responseTranslate = JSON.parse(readerTranslate.readLine());\n\t\t\t\t\t\tvar numTranslate = responseTranslate.response.numFound;\n\t\t\t\t\t\t//logger.info(\"Translation Num Found: \" + numTranslate);\n        \n\t\t\t\t\t\tif (numTranslate==0){\n                          logger.info(\"Failed translation of \" + parentID + \" / \" + englishTypes[s] + \" for \" + languages[l]);\n                        }\n\t\t\n\t\t\n\t\t\t\t\t\t// put all document titles from the query into an array and set as a multivalued string\n\n\t\t\t\t\t\tvar respTranslate = responseTranslate.response.docs;\n\t\t\t\t\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          \n\t\t\t\t\t\t\tfoundTranslation = respTranslate[j].translation_t;\n\t\t\t\t\t\t\t//logger.info(\"Found translation: \" + foundTranslation);\n\t\t\t\t\t\t\tif (typeof foundTranslation !='undefined'){\n\t\t\t\t\t\t\t\t//logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//logger.info(\"could not translate: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransvalues.push(respTranslate[j].translation_t);\n      \n\t\t\t\t\t\ttranslationItem[s] = transvalues;\n\t\t\t\t\t\t//logger.info(\"XXXXXXXEcho back: \" + translationItem[s]);\n      \n             \n          \n\t\t\t\t\t\t}\n\n        \n\t\t\t\t\t}\n\t\t\t\t} catch (eTranslate) {\n\t\t\t\t\tlogger.error(eTranslate);\n                  doc.setField(\"_translation_TechnologyType_LUError_s\",eTranslate);\n\t\t\t\t}\n\n\t\t\t\t// translationItem[s] = transvalues;\n\t\t\t\t//logger.info(\"translation from EN to: \" + languages[l]);\n          \t\t//logger.info(\"translation FROM: \" + englishTypes[s]);\n          \t\t//logger.info(\"translation FOUND: \" + translationItem[s]);\n              \n     \n              switch (languages[l]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"CS is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringCS = technologyTypeStringCS + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling CS #\" + s + \": \" + technologyTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"CS Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringCS = technologyTypeStringCS + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling CS #\" + s + \": \" + technologyTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DK is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringDK = technologyTypeStringDK + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DK #\" + s + \": \" + technologyTypeStringDK);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DK Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringDK = technologyTypeStringDK + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DK #\" + s + \": \" + technologyTypeStringDK);\n\t\t\t\t  }\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"NL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringNL = technologyTypeStringNL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NL #\" + s + \": \" + technologyTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringNL = technologyTypeStringNL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NL #\" + s + \": \" + technologyTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringFI = technologyTypeStringFI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FI #\" + s + \": \" + technologyTypeStringFI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringFI = technologyTypeStringFI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FI #\" + s + \": \" + technologyTypeStringFI);\n\t\t\t\t  }\t\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringFR = technologyTypeStringFR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FR #\" + s + \": \" + technologyTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringFR = technologyTypeStringFR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FR #\" + s + \": \" + technologyTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DE is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringDE = technologyTypeStringDE + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DE #\" + s + \": \" + technologyTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DE Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringDE = technologyTypeStringDE + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DE #\" + s + \": \" + technologyTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"HU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringHU = technologyTypeStringHU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling HU #\" + s + \": \" + technologyTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"HU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringHU = technologyTypeStringHU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling HU #\" + s + \": \" + technologyTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"IT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringIT = technologyTypeStringIT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling IT #\" + s + \": \" + technologyTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"IT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringIT = technologyTypeStringIT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling IT #\" + s + \": \" + technologyTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"JP is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringJP = technologyTypeStringJP + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling JP #\" + s + \": \" + technologyTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"JP Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringJP = technologyTypeStringJP + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling JP #\" + s + \": \" + technologyTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"KO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringKO = technologyTypeStringKO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling KO #\" + s + \": \" + technologyTypeStringKO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"KO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringKO = technologyTypeStringKO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling KO #\" + s + \": \" + technologyTypeStringKO);\n\t\t\t\t  }\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringNO = technologyTypeStringNO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NO #\" + s + \": \" + technologyTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringNO = technologyTypeStringNO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NO #\" + s + \": \" + technologyTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringPL = technologyTypeStringPL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PL #\" + s + \": \" + technologyTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringPL = technologyTypeStringPL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PL #\" + s + \": \" + technologyTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringPT = technologyTypeStringPT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PT #\" + s + \": \" + technologyTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringPT = technologyTypeStringPT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PT #\" + s + \": \" + technologyTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"RU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringRU = technologyTypeStringRU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling RU #\" + s + \": \" + technologyTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"RU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringRU = technologyTypeStringRU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling RU #\" + s + \": \" + technologyTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ZH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringZH = technologyTypeStringZH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ZH #\" + s + \": \" + technologyTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ZH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringZH = technologyTypeStringZH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ZH #\" + s + \": \" + technologyTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ES is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringES = technologyTypeStringES + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ES #\" + s + \": \" + technologyTypeStringES);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ES Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringES = technologyTypeStringES + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ES #\" + s + \": \" + technologyTypeStringES);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"SV is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringSV = technologyTypeStringSV + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling SV #\" + s + \": \" + technologyTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"SV Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringSV = technologyTypeStringSV + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling SV #\" + s + \": \" + technologyTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringTH = technologyTypeStringTH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TH #\" + s + \": \" + technologyTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringTH = technologyTypeStringTH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TH #\" + s + \": \" + technologyTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TW is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringTW = technologyTypeStringTW + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TW #\" + s + \": \" + technologyTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TW Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringTW = technologyTypeStringTW + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TW #\" + s + \": \" + technologyTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringTR = technologyTypeStringTR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TR #\" + s + \": \" + technologyTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringTR = technologyTypeStringTR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TR #\" + s + \": \" + technologyTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"VI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringVI = technologyTypeStringVI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling VI #\" + s + \": \" + technologyTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"VI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringVI = technologyTypeStringVI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling VI #\" + s + \": \" + technologyTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                  \n              }\n                \n              \n              \n              \n              //  END OF translation logic here\n              \n              //logger.info(\"End of translation for \" + languages[l]);\n              }\n\t\t\t  \n\t\t\t  else {\n\t\t\t  \n\t\t\t\t//logger.info(\"EN is skipped, no translation\");\n\t\t\t  \n\t\t\t  \n\t\t\t  } // if not EN language\n\t\t\t  \n            } // for l loop - each language\n            \n            \n            \n    \t\t} catch (e) {\n\t\t\t\tlogger.info(\"***** HIT AN ERROR ******\");\n      \t\t\tlogger.error(e);\n                logger.info(e);\n    \t\t\t} // end try catch\n\t\t\n        \t\n//logger.info(\"End of lookup for \" + englishTypes[s]);\n\t\t\n\t\t}\t// s for loop\n  \n\t// for each language ....\n            for (var ll = 0; ll < languages.length; ll++) {\n\t\t\t\tswitch (languages[ll]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for CS - total of \" + technologyTypeStringCS.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyCS_ss\",technologyTypeStringCS);\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t    //logger.info(\"writing output for DK - total of \" + technologyTypeStringDK.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyDK_ss\",technologyTypeStringDK);\n\n\t\t\t\t\tbreak;\n\n\n                case \"NL\":\n                  \n\t\t\t\t    //logger.info(\"writing output for NL - total of \" + technologyTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyNL_ss\",technologyTypeStringNL);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  \t//logger.info(\"writing output for FI - total of \" + technologyTypeStringFI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyFI_ss\",technologyTypeStringFI);\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for FR - total of \" + technologyTypeStringFR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyFR_ss\",technologyTypeStringFR);\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for DE - total of \" + technologyTypeStringDE.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyDE_ss\",technologyTypeStringDE);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for HU - total of \" + technologyTypeStringHU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyHU_ss\",technologyTypeStringHU);\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for IT - total of \" + technologyTypeStringIT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyIT_ss\",technologyTypeStringIT);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for JP - total of \" + technologyTypeStringJP.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyJP_ss\",technologyTypeStringJP);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for KO - total of \" + technologyTypeStringKO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyKO_ss\",technologyTypeStringKO);\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NO - total of \" + technologyTypeStringNO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyNO_ss\",technologyTypeStringNO);\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NL - total of \" + technologyTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyPL_ss\",technologyTypeStringPL);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for PT - total of \" + technologyTypeStringPT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyPT_ss\",technologyTypeStringPT);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for RU - total of \" + technologyTypeStringRU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyRU_ss\",technologyTypeStringRU);\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ZH - total of \" + technologyTypeStringZH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyZH_ss\",technologyTypeStringZH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ES - total of \" + technologyTypeStringES.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyES_ss\",technologyTypeStringES);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for SV - total of \" + technologyTypeStringSV.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologySV_ss\",technologyTypeStringSV);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TH - total of \" + technologyTypeStringTH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyTH_ss\",technologyTypeStringTH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TW - total of \" + technologyTypeStringTW.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyTW_ss\",technologyTypeStringTW);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TR - total of \" + technologyTypeStringTR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyTR_ss\",technologyTypeStringTR);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for VI - total of \" + technologyTypeStringVI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyVI_ss\",technologyTypeStringVI);\n\t\t\t\t   \n                  break;\n                 \n                  \n\t\t\t\t} // switch\n\t\t\t  \n\t\t\t  } // end of second language loop\n\t\t\t\n    \n\t} // languages is not null\n \n  } // doc getid is not null\n  \n  //logger.info(\"Exiting technologyType translation\");\n  \n  return doc;\n}\n  \n  \n  \n  \n  ",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "technologyXX Facet Translation (JS)",
    "secretSourceStageid" : "otplyif",
    "secretSourceStageId" : "otplyif"
  }, {
    "type" : "regex-extractor",
    "id" : "otpl4692d9aa-c46c-4af9-a1da-57fc4b1fabc3",
    "rules" : [ {
      "source" : [ "siteSectionCS_ss" ],
      "target" : "siteSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDK_ss" ],
      "target" : "siteSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNL_ss" ],
      "target" : "siteSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionEN_ss" ],
      "target" : "siteSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFI_ss" ],
      "target" : "siteSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFR_ss" ],
      "target" : "siteSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDE_ss" ],
      "target" : "siteSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionHU_ss" ],
      "target" : "siteSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionIT_ss" ],
      "target" : "siteSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionJP_ss" ],
      "target" : "siteSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionKO_ss" ],
      "target" : "siteSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNO_ss" ],
      "target" : "siteSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPL_ss" ],
      "target" : "siteSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPT_ss" ],
      "target" : "siteSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionRU_ss" ],
      "target" : "siteSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionZH_ss" ],
      "target" : "siteSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionES_ss" ],
      "target" : "siteSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionSV_ss" ],
      "target" : "siteSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTH_ss" ],
      "target" : "siteSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTW_ss" ],
      "target" : "siteSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTR_ss" ],
      "target" : "siteSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionVI_ss" ],
      "target" : "siteSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSection Lang Fields",
    "secretSourceStageid" : "otpl4692d9aa-c46c-4af9-a1da-57fc4b1fabc3",
    "secretSourceStageId" : "otpl4692d9aa-c46c-4af9-a1da-57fc4b1fabc3"
  }, {
    "type" : "regex-extractor",
    "id" : "otple5318d70-d92b-4b1b-bf80-fa24ee033417",
    "rules" : [ {
      "source" : [ "supportResourceTypeCS_ss" ],
      "target" : "supportResourceTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeDK_ss" ],
      "target" : "supportResourceTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeNL_ss" ],
      "target" : "supportResourceTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeEN_ss" ],
      "target" : "supportResourceTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeFI_ss" ],
      "target" : "supportResourceTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeFR_ss" ],
      "target" : "supportResourceTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeDE_ss" ],
      "target" : "supportResourceTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeHU_ss" ],
      "target" : "supportResourceTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeIT_ss" ],
      "target" : "supportResourceTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeJP_ss" ],
      "target" : "supportResourceTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeKO_ss" ],
      "target" : "supportResourceTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeNO_ss" ],
      "target" : "supportResourceTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypePL_ss" ],
      "target" : "supportResourceTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypePT_ss" ],
      "target" : "supportResourceTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeRU_ss" ],
      "target" : "supportResourceTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeZH_ss" ],
      "target" : "supportResourceTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeES_ss" ],
      "target" : "supportResourceTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeSV_ss" ],
      "target" : "supportResourceTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTH_ss" ],
      "target" : "supportResourceTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTW_ss" ],
      "target" : "supportResourceTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTR_ss" ],
      "target" : "supportResourceTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeVI_ss" ],
      "target" : "supportResourceTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split supportResourceType Lang Fields",
    "secretSourceStageid" : "otple5318d70-d92b-4b1b-bf80-fa24ee033417",
    "secretSourceStageId" : "otple5318d70-d92b-4b1b-bf80-fa24ee033417"
  }, {
    "type" : "regex-extractor",
    "id" : "otpl6ca8f368-c2ed-4ece-8a22-1395f7814852",
    "rules" : [ {
      "source" : [ "supportTypeEN_ss" ],
      "target" : "supportTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeFR_ss" ],
      "target" : "supportTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeDE_ss" ],
      "target" : "supportTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeES_ss" ],
      "target" : "supportTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypePT_ss" ],
      "target" : "supportTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeZH_ss" ],
      "target" : "supportTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTW_ss" ],
      "target" : "supportTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeKO_ss" ],
      "target" : "supportTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeJP_ss" ],
      "target" : "supportTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeRU_ss" ],
      "target" : "supportTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypePL_ss" ],
      "target" : "supportTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeFI_ss" ],
      "target" : "supportTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeNO_ss" ],
      "target" : "supportTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeSV_ss" ],
      "target" : "supportTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeCS_ss" ],
      "target" : "supportTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeDK_ss" ],
      "target" : "supportTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeNL_ss" ],
      "target" : "supportTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTR_ss" ],
      "target" : "supportTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeHU_ss" ],
      "target" : "supportTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTH_ss" ],
      "target" : "supportTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeIT_ss" ],
      "target" : "supportTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeVI_ss" ],
      "target" : "supportTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split supportType Lang Fields",
    "secretSourceStageid" : "otpl6ca8f368-c2ed-4ece-8a22-1395f7814852",
    "secretSourceStageId" : "otpl6ca8f368-c2ed-4ece-8a22-1395f7814852"
  }, {
    "type" : "regex-extractor",
    "id" : "otplca8bd8b3-1a6f-4abe-9a3b-557d3c2a1969",
    "rules" : [ {
      "source" : [ "siteSubSectionCS_ss" ],
      "target" : "siteSubSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDK_ss" ],
      "target" : "siteSubSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNL_ss" ],
      "target" : "siteSubSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionEN_ss" ],
      "target" : "siteSubSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFI_ss" ],
      "target" : "siteSubSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFR_ss" ],
      "target" : "siteSubSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDE_ss" ],
      "target" : "siteSubSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionHU_ss" ],
      "target" : "siteSubSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionIT_ss" ],
      "target" : "siteSubSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionJP_ss" ],
      "target" : "siteSubSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionKO_ss" ],
      "target" : "siteSubSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNO_ss" ],
      "target" : "siteSubSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPL_ss" ],
      "target" : "siteSubSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPT_ss" ],
      "target" : "siteSubSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionRU_ss" ],
      "target" : "siteSubSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionZH_ss" ],
      "target" : "siteSubSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionES_ss" ],
      "target" : "siteSubSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionSV_ss" ],
      "target" : "siteSubSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTH_ss" ],
      "target" : "siteSubSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTW_ss" ],
      "target" : "siteSubSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTR_ss" ],
      "target" : "siteSubSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionVI_ss" ],
      "target" : "siteSubSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSubSection Lang Fields",
    "secretSourceStageid" : "otplca8bd8b3-1a6f-4abe-9a3b-557d3c2a1969",
    "secretSourceStageId" : "otplca8bd8b3-1a6f-4abe-9a3b-557d3c2a1969"
  }, {
    "type" : "regex-extractor",
    "id" : "otplmt8bac",
    "rules" : [ {
      "source" : [ "otherTypeCS_ss" ],
      "target" : "otherTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeDK_ss" ],
      "target" : "otherTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeNL_ss" ],
      "target" : "otherTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeEN_ss" ],
      "target" : "otherTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeFI_ss" ],
      "target" : "otherTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeFR_ss" ],
      "target" : "otherTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeDE_ss" ],
      "target" : "otherTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeHU_ss" ],
      "target" : "otherTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeIT_ss" ],
      "target" : "otherTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeJP_ss" ],
      "target" : "otherTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeKO_ss" ],
      "target" : "otherTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeNO_ss" ],
      "target" : "otherTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypePL_ss" ],
      "target" : "otherTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypePT_ss" ],
      "target" : "otherTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeRU_ss" ],
      "target" : "otherTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeZH_ss" ],
      "target" : "otherTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeES_ss" ],
      "target" : "otherTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeSV_ss" ],
      "target" : "otherTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeTH_ss" ],
      "target" : "otherTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeTW_ss" ],
      "target" : "otherTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeTR_ss" ],
      "target" : "otherTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeVI_ss" ],
      "target" : "otherTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split otherType Lang Fields",
    "secretSourceStageid" : "otplmt8bac",
    "secretSourceStageId" : "otplmt8bac"
  }, {
    "type" : "regex-extractor",
    "id" : "otplnt8bac",
    "rules" : [ {
      "source" : [ "newsEventsTypeCS_ss" ],
      "target" : "newsEventsTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeDK_ss" ],
      "target" : "newsEventsTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeNL_ss" ],
      "target" : "newsEventsTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeEN_ss" ],
      "target" : "newsEventsTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeFI_ss" ],
      "target" : "newsEventsTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeFR_ss" ],
      "target" : "newsEventsTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeDE_ss" ],
      "target" : "newsEventsTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeHU_ss" ],
      "target" : "newsEventsTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeIT_ss" ],
      "target" : "newsEventsTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeJP_ss" ],
      "target" : "newsEventsTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeKO_ss" ],
      "target" : "newsEventsTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeNO_ss" ],
      "target" : "newsEventsTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypePL_ss" ],
      "target" : "newsEventsTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypePT_ss" ],
      "target" : "newsEventsTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeRU_ss" ],
      "target" : "newsEventsTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeZH_ss" ],
      "target" : "newsEventsTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeES_ss" ],
      "target" : "newsEventsTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeSV_ss" ],
      "target" : "newsEventsTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeTH_ss" ],
      "target" : "newsEventsTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeTW_ss" ],
      "target" : "newsEventsTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeTR_ss" ],
      "target" : "newsEventsTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeVI_ss" ],
      "target" : "newsEventsTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split newsEventsType Lang Fields",
    "secretSourceStageid" : "otplnt8bac",
    "secretSourceStageId" : "otplnt8bac"
  }, {
    "type" : "regex-extractor",
    "id" : "otpl0jl",
    "rules" : [ {
      "source" : [ "marketEN_ss" ],
      "target" : "marketEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketCS_ss" ],
      "target" : "marketCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketDK_ss" ],
      "target" : "marketDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketNL_ss" ],
      "target" : "marketNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketFI_ss" ],
      "target" : "marketFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketFR_ss" ],
      "target" : "marketFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketDE_ss" ],
      "target" : "marketDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketHU_ss" ],
      "target" : "marketHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketIT_ss" ],
      "target" : "marketIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketJP_ss" ],
      "target" : "marketJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketKO_ss" ],
      "target" : "marketKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketNO_ss" ],
      "target" : "marketNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketPL_ss" ],
      "target" : "marketPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketPT_ss" ],
      "target" : "marketPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketRU_ss" ],
      "target" : "marketRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketZH_ss" ],
      "target" : "marketZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketES_ss" ],
      "target" : "marketES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketSV_ss" ],
      "target" : "marketSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketTH_ss" ],
      "target" : "marketTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketTW_ss" ],
      "target" : "marketTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketTR_ss" ],
      "target" : "marketTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketVI_ss" ],
      "target" : "marketVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split Market Lang Fields",
    "secretSourceStageid" : "otpl0jl",
    "secretSourceStageId" : "otpl0jl"
  }, {
    "type" : "regex-extractor",
    "id" : "otplu0o",
    "rules" : [ {
      "source" : [ "technologyEN_ss" ],
      "target" : "technologyEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyCS_ss" ],
      "target" : "technologyCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyDK_ss" ],
      "target" : "technologyDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyNL_ss" ],
      "target" : "technologyNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyFI_ss" ],
      "target" : "technologyFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyFR_ss" ],
      "target" : "technologyFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyDE_ss" ],
      "target" : "technologyDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyHU_ss" ],
      "target" : "technologyHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyIT_ss" ],
      "target" : "technologyIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyJP_ss" ],
      "target" : "technologyJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyKO_ss" ],
      "target" : "technologyKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyNO_ss" ],
      "target" : "technologyNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyPL_ss" ],
      "target" : "technologyPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyPT_ss" ],
      "target" : "technologyPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyRU_ss" ],
      "target" : "technologyRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyZH_ss" ],
      "target" : "technologyZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyES_ss" ],
      "target" : "technologyES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologySV_ss" ],
      "target" : "technologySV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyTH_ss" ],
      "target" : "technologyTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyTW_ss" ],
      "target" : "technologyTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyTR_ss" ],
      "target" : "technologyTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyVI_ss" ],
      "target" : "technologyVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split Technology Lang Fields",
    "secretSourceStageid" : "otplu0o",
    "secretSourceStageId" : "otplu0o"
  }, {
    "type" : "field-mapping",
    "id" : "otpl071a4a2a-3301-4639-bae5-a38fc8a563b7",
    "mappings" : [ {
      "source" : "productCS_ss",
      "target" : "productCS_t",
      "operation" : "copy"
    }, {
      "source" : "productDK_ss",
      "target" : "productDK_t",
      "operation" : "copy"
    }, {
      "source" : "productNL_ss",
      "target" : "productNL_t",
      "operation" : "copy"
    }, {
      "source" : "productEN_ss",
      "target" : "productEN_t",
      "operation" : "copy"
    }, {
      "source" : "productFI_ss",
      "target" : "productFI_t",
      "operation" : "copy"
    }, {
      "source" : "productFR_ss",
      "target" : "productFR_t",
      "operation" : "copy"
    }, {
      "source" : "productDE_ss",
      "target" : "productDE_t",
      "operation" : "copy"
    }, {
      "source" : "productHU_ss",
      "target" : "productHU_t",
      "operation" : "copy"
    }, {
      "source" : "productIT_ss",
      "target" : "productIT_t",
      "operation" : "copy"
    }, {
      "source" : "productJP_ss",
      "target" : "productJP_t",
      "operation" : "copy"
    }, {
      "source" : "productKO_ss",
      "target" : "productKO_t",
      "operation" : "copy"
    }, {
      "source" : "productNO_ss",
      "target" : "productNO_t",
      "operation" : "copy"
    }, {
      "source" : "productPL_ss",
      "target" : "productPL_t",
      "operation" : "copy"
    }, {
      "source" : "productPT_ss",
      "target" : "productPT_t",
      "operation" : "copy"
    }, {
      "source" : "productRU_ss",
      "target" : "productRU_t",
      "operation" : "copy"
    }, {
      "source" : "productZH_ss",
      "target" : "productZH_t",
      "operation" : "copy"
    }, {
      "source" : "productES_ss",
      "target" : "productES_t",
      "operation" : "copy"
    }, {
      "source" : "productSV_ss",
      "target" : "productSV_t",
      "operation" : "copy"
    }, {
      "source" : "productTH_ss",
      "target" : "productTH_t",
      "operation" : "copy"
    }, {
      "source" : "productTW_ss",
      "target" : "productTW_t",
      "operation" : "copy"
    }, {
      "source" : "productTR_ss",
      "target" : "productTR_t",
      "operation" : "copy"
    }, {
      "source" : "productVI_ss",
      "target" : "productVI_t",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Field mapping for product_ss to text",
    "secretSourceStageid" : "otpl071a4a2a-3301-4639-bae5-a38fc8a563b7",
    "secretSourceStageId" : "otpl071a4a2a-3301-4639-bae5-a38fc8a563b7"
  }, {
    "type" : "javascript-index",
    "id" : "otpl6u",
    "script" : "\nfunction getLangCode(lang){\n \n  var langVal = lang[0];\n  var langCode;\n  \n  //logger.info(\"zzzzz: Lang getLangCode -- \" + langVal + \" --\");\n  \n  switch (langVal) {\n  \n    case -1:\n      langCode=\"EN\";\n      break;\n    case -2:\n      langCode=\"FR\";\n      break;\n    case -3:\n      langCode=\"DE\";\n      break;\n    case -4:\n      langCode=\"IT\";\n      break;\n    case -5:\n      langCode=\"ES\";\n      break;\n    case -6:\n      langCode=\"PT\";\n      break;\n    case -7:\n      langCode=\"ZH\";\n      break;\n    case -8:\n      langCode=\"TW\";\n      break;\n    case -9:\n      langCode=\"KO\";\n      break;\n    case -10:\n      langCode=\"JP\";\n      break;\n    case -20:\n      langCode=\"RU\";\n      break;\n    case -22:\n      langCode=\"PL\";\n      break;\n    case -24:\n      langCode=\"FI\";\n      break;\n    case -25:\n      langCode=\"NO\";\n      break;\n    case -26:\n      langCode=\"SV\";\n      break;\n    case -27:\n      langCode=\"CS\";\n      break;\n    case -28:\n      langCode=\"DK\";\n      break;\n    case -29:\n      langCode=\"NL\";\n      break;\n    case -30:\n      langCode=\"TR\";\n      break;\n    case -31:\n      langCode=\"HU\";\n      break;\n    case -32:\n      langCode=\"TH\";\n      break;\n    case -34:\n      langCode=\"VI\";\n      break;\n    default:\n      langCode=\"XX\";\n              }\n      \n // logger.info(\"zzzz LANGCODE: \" + langCode);\n  \n  \n  return langCode;\n}\n\nfunction getLangCode2(lang){\n \n  var langVal = lang;\n  var langCode;\n  \n  //logger.info(\"zzzzz: Lang getLangCode2 -- \" + langVal + \" --\");\n  \n  switch (langVal) {\n  \n    case \"-1\":\n      langCode=\"EN\";\n      break;\n    case \"-2\":\n      langCode=\"FR\";\n      break;\n    case \"-3\":\n      langCode=\"DE\";\n      break;\n    case \"-4\":\n      langCode=\"IT\";\n      break;\n    case \"-5\":\n      langCode=\"ES\";\n      break;\n    case \"-6\":\n      langCode=\"PT\";\n      break;\n    case \"-7\":\n      langCode=\"ZH\";\n      break;\n    case \"-8\":\n      langCode=\"TW\";\n      break;\n    case \"-9\":\n      langCode=\"KO\";\n      break;\n    case \"-10\":\n      langCode=\"JP\";\n      break;\n    case \"-20\":\n      langCode=\"RU\";\n      break;\n    case \"-22\":\n      langCode=\"PL\";\n      break;\n    case \"-24\":\n      langCode=\"FI\";\n      break;\n    case \"-25\":\n      langCode=\"NO\";\n      break;\n    case \"-26\":\n      langCode=\"SV\";\n      break;\n    case \"-27\":\n      langCode=\"CS\";\n      break;\n    case \"-28\":\n      langCode=\"DK\";\n      break;\n    case \"-29\":\n      langCode=\"NL\";\n      break;\n    case \"-30\":\n      langCode=\"TR\";\n      break;\n    case \"-31\":\n      langCode=\"HU\";\n      break;\n    case \"-32\":\n      langCode=\"TH\";\n      break;\n    case \"-34\":\n      langCode=\"VI\";\n      break;\n    default:\n      langCode=\"XX\";\n              }\n      \n // logger.info(\"zzzz LANGCODE2: \" + langCode);\n  \n  \n  return langCode;\n}\n\nfunction getLangQuery(langs){\n \n  var langs = langs;\n  var langQuery;\n  \n  //logger.info(\"zzzzz gLQ number of languages:\" + langs.length);\n  \n  \n  \n  for (var m = 0; m < langs.length; m++) {\n  \n    //logger.info(\"zzzzZZZ\" + m + \": \" + langs[m]);\n    //langQuery = langs[m];\n    \n    if (m == 0){\n      \n      //langQuery = \"filter(language_is:\\\"\" + langs[m] + \"\\\")\";\n      langQuery=\"\\\"\" + langs[m] + \"\\\"\";\n     // logger.info(\"zzzz test \" + m + \": \" + langQuery);\n    }\n    else\n    {\n      langQuery = langQuery + \"%20OR%20\" + \"\\\"\" + langs[m] + \"\\\"\";\n     // logger.info(\"zzzz test multi \" + m + \": \" + langQuery);\n    }\n\n  }\n  \n // logger.info(\"zzzzz LangQuery Before:\" + langQuery);\n  \n  return langQuery;\n    \n}\n\nfunction getPartNumber(ecomId) {\n\n  var ecomId = ecomId;\n  var partNumber;\n  var partNumbers;\n  var HttpURLConnection = java.net.HttpURLConnection;\n  var URL = java.net.URL;\n  var InputStreamReader = java.io.InputStreamReader;\n  var BufferedReader = java.io.BufferedReader;\n  var e = java.lang.Exception;\n  \n // logger.info(\"zzzzz in the gPN: \" + ecomId);\n\n  \n  try {\n  \n  var url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/lookup/collections/ParkerDotComMainMaster/select?_cookie=false&echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=productType_ss:(%22Part%22)&q=productSeriesId_l:\" + ecomId + \"&rows=250\"));\n  \n    \n    \n    \n   // logger.info(\"zzzzz url: \" + url);\n  \n  var c = java.net.HttpURLConnection;\n  c = url.openConnection();\n  c.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n  c.connect();\n  var status = c.getResponseCode();\n  \n // logger.info(\"zzzzz CStatus: \" + status);\n\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\tvar reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n\t\tvar response = JSON.parse(reader.readLine());\n\t\tvar numFound = response.response.numFound;\n    \n\t//\tlogger.info(\"zzzzz numFound: \" + numFound);\n    \n\t\tpartNumbers = response.response.docs;\n\t}\n    \n  }\n   catch (e) {\n     logger.error(e);\n     logger.info(\"zzzz Part Number Lookup Error: \" + e);\n   }\n  \n  \n  \n  return partNumbers;\n  \n}\n\nfunction getProductSeries(ecomId, langs, type) {\n\n  var ecomId = ecomId;\n  var langs = langs;\n  var productSeries;\n  var HttpURLConnection = java.net.HttpURLConnection;\n  var URL = java.net.URL;\n  var InputStreamReader = java.io.InputStreamReader;\n  var BufferedReader = java.io.BufferedReader;\n  var e = java.lang.Exception;\n  var queryField;\n  \n  if (type == \"C\"){\n    queryField=\"categoryId_l\";\n    //logger.info(\"zzzz: Performing Caegory ID search for \" + ecomId);\n  }\n  else {\n    queryField=\"productSeriesId_l\";\n    //logger.info(\"zzzz: Performing Product Series search for \" + ecomId);\n  }\n  \n  //logger.info(\"zzzzz in the gPS: \" + ecomId);\n\n  \n  try {\n  \n  var url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/lookup/collections/ParkerDotComMainMaster/select?_cookie=false&echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=countryId_ss:*&fq=productType_ss:(%22Product%20Series%22)&fq=language_is:(\" + langs + \")&q=\" + queryField + \":\" + ecomId + \"&rows=250\"));\n//    var url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/lookup/collections/ParkerDotComMainMaster/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=productType_ss:(%22Product%20Series%22)&q=productSeriesId_l:\" + ecomId + \"&rows=100\"));\n  \n    \n    \n    \n   // logger.info(\"zzzzz url: \" + url);\n  \n  var c = java.net.HttpURLConnection;\n  c = url.openConnection();\n  c.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n  c.connect();\n  var status = c.getResponseCode();\n  \n // logger.info(\"zzzzz CStatus: \" + status);\n\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\tvar reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n\t\tvar response = JSON.parse(reader.readLine());\n\t\tvar numFound = response.response.numFound;\n    \n\t//\tlogger.info(\"zzzzz numFound: \" + numFound);\n    \n\t\tproductSeries = response.response.docs;\n\t//\tlogger.info(\"zzzzz PSeries Array Length: \" + productSeries.length);\n    }\n\t\n  }\n   catch (e) {\n     logger.error(e);\n     logger.info(\"zzzz Product Series Search Lookup Error: \" + e);\n   }\n  \n  \n  \n  return productSeries;\n  \n}\n\n\nfunction (doc) {\n \n  var id = doc.getId();\n  var incomingProductNames = doc.getFieldValues(\"otProductName_ss\");\n  var tagType = doc.getFieldValues(\"otTagType_ss\");\n  var tagAllPT = doc.getFieldValues(\"otTagAllPT_ss\");\n  var tagAllPS = doc.getFieldValues(\"otTagAllPS_ss\");\n  var ecomId = doc.getFieldValues(\"otEcomId_ls\");\n  var langs = doc.getFieldValues(\"language_is\");\n  var langs2 = doc.getFieldValues(\"language_is\");\n  var partNums = [];\n  var partNumbers = [];\n  var productSeries = [];\n  var langQuery;\n  //var langArray = ['EN', 'CS', 'DE', 'DK', 'ES', 'FI', 'FR', 'HU', 'IT', 'JP', 'KO', 'NL', 'NO', 'PL', 'PT', 'RU', 'SV', 'TH', 'TR', 'TW', 'VI', 'ZH'];\n  var langArray = [];\n  \n  var partVar = 'XX';\n  var partMap = new java.util.HashMap();\n  var titleMap = new java.util.HashMap(); \n  var descriptionMap = new java.util.HashMap(); \n  var taxonomyL1Map = new java.util.HashMap(); \n  var taxonomyL2Map = new java.util.HashMap(); \n  var taxonomyL3Map = new java.util.HashMap(); \n  var hasTaxonomyFields = 0;\n  \n  \n  if (doc.getId() != null) { \n  \n    try {\n    \n  logger.info(\"zzzzzzzzzzzzzzzzzzzzzzzz: starting Parts and Products Retrieval for \" + id);\n  \n  //logger.info(\"zzzzz NAMES: \" + incomingProductNames);\n  //logger.info(\"zzzzz TAGTYPE: \" + tagType);\n  //logger.info(\"zzzzz TAGALLPT: \" + tagAllPT);\n  //logger.info(\"zzzzz TAGALLPS: \" + tagAllPS);\n  //logger.info(\"zzzzz ECOMID: \" + ecomId);\n  //logger.info(\"zzzzz LANGS: \" + langs);\n  //logger.info(\"zzzzz NUM LANGS:\" + langs.length);\n  \n  //logger.info(\"zzzz LANGS2: \" + langs2);\n // var langSplit = langs2.split(\",\");\n \n  for each (var langidvals in langs){\n    //logger.info(\"zzzz langval: \" + langidvals);\n  langArray.push(getLangCode2(langidvals));\n    \n    }\n  \n  \n  langQuery = getLangQuery(langs);\n  //logger.info(\"zzzzz LangQuery After:\" + langQuery);\n  \n  // if tagType = \"T\" then this is a \"Part\" so retrieve the Part items\n  \n  // first examine the tagAllPT field because if it is \"No\" then no lookup required\n  \n  \n  for (var i = 0; i < tagType.length; i++) {  // process all \"tagType\" values\n  \n    \n    if (tagType[i] ==\"T\"){ // Part Tag Type\n    \n      logger.info(\"zzzzz: Main Type T\");\n      \n   \t\tif (tagAllPT[i]==\"Yes\"){ \n    \n\t\tlogger.info(\"zzzz: Tag all Parts\");\n    \t\t// search for each ecomId\n    \n    \t//\tlogger.info(\"zzzzz \" + i + \" : \" + ecomId[i]);\n    \t\tgetPartNumber(ecomId[i]);\n    \t}\n    \telse\n    \t{\n      \tpartNums[i] = incomingProductNames[i];\n     // \tlogger.info(\"zzzzz Part Num: \" + incomingProductNames[i]);\n    \t}\n    \n     \tfor each(var num in partNums) {\n\t\t\t\n\t\t\t\tif (!partMap.containsKey(partVar)){\n                    var myPartSet = new java.util.HashSet();\n\t\t\t//\t\tlogger.info(\"zzzz: creating part map\");\n                    myPartSet.add(num);\n\t\t\t\t\tpartMap.put(partVar, myPartSet);\n                  }\n                  else\n                  {\n\t\t\t//\t\t  logger.info(\"zzzz: adding to part map\");\n                      partMap.get(partVar).add(num);\n                  }\n\t\t\n   \t\t \t//doc.addField(\"parkerAssociatedPartNumber_ss\", num);\n  \t\t}\n    }\n    \n    else if (tagType[i] == \"P\") { // Product Series Tag Type\n      \n      logger.info(\"zzzzz: Main Type P\");\n      \n      \n      if (tagAllPS[i]==\"Yes\"){\n      \n        logger.info(\"zzzzz: Tag all Product Series\");\n        \n       \n        \n        productSeries = getProductSeries(ecomId[i], langQuery, \"P\");\n        //logger.info(\"zzzzz NumPS Docs: \" + productSeries.length); \n        \n \n           \tfor each(var pseries in productSeries) {\n   \t\t \t//logger.info(\"zzzzzz PSeries test KEYS: \" + Object.keys(pseries));\n           //   logger.info(\"zzzz Inside tagType Product Series\");\n              \n              var lang = pseries.language_is;\n              var langcode = getLangCode(lang);\n\n\t\t\t  \n\t\t\t\t// TITLE\n                if (!titleMap.containsKey(langcode)){\n                    var myTitleSet = new java.util.HashSet();\n                    myTitleSet.add(pseries['title'+langcode+'_t'][0]);\n\t\t\t\t\ttitleMap.put(langcode, myTitleSet);\n                  }\n                  else\n                  {\n                    titleMap.get(langcode).add(pseries['title'+langcode+'_t'][0]);\n                  }\n\t\t\t\t  \n\t\t\t\t// DESCRIPTION\n\t\t\t\tif (!descriptionMap.containsKey(langcode)){\n                    var myDescriptionSet = new java.util.HashSet();\n                    myDescriptionSet.add(pseries['description'+langcode+'_t'][0]);\n\t\t\t\t\tdescriptionMap.put(langcode, myDescriptionSet);\n                  }\n                  else\n                  {\n                    descriptionMap.get(langcode).add(pseries['description'+langcode+'_t'][0]);\n                  }  \n\t\t\t\t  \n\t\t\t\t// TAXONOMYL1\n\t\t\t\tif (!taxonomyL1Map.containsKey(langcode)){\n                    var mytaxonomyL1Set = new java.util.HashSet();\n                  if (pseries['productTaxonomyL1'+langcode+'_s']!=undefined){\n                        hasTaxonomyFields=1;\n                  \t\tmytaxonomyL1Set.add(pseries['productTaxonomyL1'+langcode+'_s']);\n\t\t\t\t\t\ttaxonomyL1Map.put(langcode, mytaxonomyL1Set);\n                   }\n                  else\n                  {\n                    //logger.info(\"zzzz undefined 1\");\n                  }\n                  }\n                  else\n                  {\n                    if (pseries['productTaxonomyL1'+langcode+'_s']!=undefined) {\n                      \n                      try{\n                        hasTaxonomyFields=1;\n\t\t\t\t\t\ttaxonomyL1Map.get(langcode).add(pseries['productTaxonomyL1'+langcode+'_s'].trim());\n                      }\n                      catch (exception)\n                      {\n                        //logger.info(\"zzzz: exception --> \" + exception);\n                      }\n                    }\n                    else\n                    {\n                      //logger.info(\"zzzz undefined 2\");\n                    }\n                  }\n\n\t\t\t\t// TAXONOMYL2\n\t\t\t\tif (!taxonomyL2Map.containsKey(langcode)){\n                    var mytaxonomyL2Set = new java.util.HashSet();\n                  if (pseries['productTaxonomyL2'+langcode+'_s']!=undefined){\n                        hasTaxonomyFields=1;\n                  \t\tmytaxonomyL2Set.add(pseries['productTaxonomyL2'+langcode+'_s']);\n\t\t\t\t\t\ttaxonomyL2Map.put(langcode, mytaxonomyL2Set);\n                   }\n                  else\n                  {\n                    //logger.info(\"zzzz undefined 3\");\n                  }\n                  }\n                  else\n                  {\n                    if (pseries['productTaxonomyL2'+langcode+'_s']!=undefined) {\n                      \n                      try{\n                        hasTaxonomyFields=1;\n\t\t\t\t\t\ttaxonomyL2Map.get(langcode).add(pseries['productTaxonomyL2'+langcode+'_s'].trim());\n                      }\n                      catch (exception)\n                      {\n                        //logger.info(\"zzzz: exception --> \" + exception);\n                      }\n                    }\n                    else\n                    {\n                      //logger.info(\"zzzz undefined 4\");\n                    }\n                  }\t\t\t  \n\n\t\t\t\t// TAXONOMYL3\n\t\t\t\tif (!taxonomyL3Map.containsKey(langcode)){\n                    var mytaxonomyL3Set = new java.util.HashSet();\n                  if (pseries['productTaxonomyL3'+langcode+'_s']!=undefined){\n                        hasTaxonomyFields=1;\n                  \t\tmytaxonomyL3Set.add(pseries['productTaxonomyL3'+langcode+'_s']);\n\t\t\t\t\t\ttaxonomyL3Map.put(langcode, mytaxonomyL3Set);\n                   }\n                  else\n                  {\n                    //logger.info(\"zzzz undefined 5\");\n                  }\n                  }\n                  else\n                  {\n                    if (pseries['productTaxonomyL3'+langcode+'_s']!=undefined) {\n                      \n                      try{\n                        hasTaxonomyFields=1;\n\t\t\t\t\t\ttaxonomyL3Map.get(langcode).add(pseries['productTaxonomyL3'+langcode+'_s'].trim());\n                      }\n                      catch (exception)\n                      {\n                        //logger.info(\"zzzz: exception --> \" + exception);\n                      }\n                    }\n                    else\n                    {\n                      //logger.info(\"zzzz undefined 6\");\n                    }\n                  }\n\n\n  \n  \t\t}\n        \n\t\tif (tagAllPT[i]==\"Yes\"){\n\t\t\tpartNumbers = getPartNumber(ecomId[i]);\n\t\t\tlogger.info(\"zzzzz Number of Parts Found for \" + ecomId[i] + \": \" + partNumbers.length);\n       \n\t        for each(var num in partNumbers) {\n\t\t\t\t\n\t\t\t\tif (!partMap.containsKey(partVar)){\n                    var myPartSet = new java.util.HashSet();\n\t\t\t//\t\tlogger.info(\"zzzz: creating part map\");\n                    myPartSet.add(num.parkerPartNumber_s);\n\t\t\t\t\tpartMap.put(partVar, myPartSet);\n                  }\n                  else\n                  {\n\t\t\t\t//\t  logger.info(\"zzzz: adding to part map\");\n                      partMap.get(partVar).add(num.parkerPartNumber_s);\n                  }\n\t\t\t\t\n\t\t\t\t//doc.addField(\"parkerAssociatedPartNumber_ss\", num.parkerPartNumber_s);\n\t\t\t\t}\n  \t\t}\n\t   \n        //doc.addField(\"productEN_ss\", enPseries);\n        \n      }\n      else if (tagAllPS[i]==\"No\"){\n        \n        logger.info(\"zzzzz: Do NOT Tag all Product Series\");\n\t\t\n\t\tif (tagAllPT[i]==\"Yes\"){\n\t\t\tpartNumbers = getPartNumber(ecomId[i]);\n\t\t//\tlogger.info(\"zzzzz Number of Parts Found for \" + ecomId[i] + \": \" + partNumbers.length);\n       \n\t        for each(var num in partNumbers) {\n\t\t\t\t\n\t\t\t\tif (!partMap.containsKey(partVar)){\n                    var myPartSet = new java.util.HashSet();\n\t\t//\t\t\tlogger.info(\"zzzz: creating part map\");\n                    myPartSet.add(num.parkerPartNumber_s);\n\t\t\t\t\tpartMap.put(partVar, myPartSet);\n                  }\n                  else\n                  {\n\t\t\t//\t\t  logger.info(\"zzzz: adding to part map\");\n                      partMap.get(partVar).add(num.parkerPartNumber_s);\n                  }\n\t\t\t\t\n\t\t\t\t//doc.addField(\"parkerAssociatedPartNumber_ss\", num.parkerPartNumber_s);\n\t\t\t\t}\n  \t\t}\n\t\t\n\t\t\n      }\n      \n    }\n    \n    else if (tagType[i] == \"C\") {  // Category Tag Type\n      \n      logger.info(\"zzzzz: Main Type C\");\n      \n\t  \n      \n      \n      if (tagAllPS[i]==\"Yes\"){\n\n        \n        var ecomlist = [];\n    \n      //logger.info(\"zzzz: Tag all Product Series based on Category ID of \" + ecomId[i]);\n      productSeries = getProductSeries(ecomId[i], langQuery, \"C\");\n      //logger.info(\"zzzzz NumPS Docs Based on category: \" + productSeries.length); \n\n        for each(var pseries in productSeries) {\n\t\t\t//logger.info(\"zzzz inside Category processing Product Series\");\n\t\t\t\tecomlist.push(pseries.productSeriesId_l);\n          //logger.info(\"zzzz: processing id: \" + pseries.id);      \n          //logger.info(\"zzzz: adding to ecomlist ... \" + pseries.productSeriesId_l);\n              \n              var lang = pseries.language_is;\n\n              var langcode = getLangCode(lang);\n\t\t  \n\t\t\t  \n\t\t\t  // process the fields into HashMaps and Sets based on language\n\t\t\t  \n\t\t\t\t// TITLE\n                if (!titleMap.containsKey(langcode)){\n                    var myTitleSet = new java.util.HashSet();\n                    myTitleSet.add(pseries['title'+langcode+'_t'][0]);\n\t\t\t\t\ttitleMap.put(langcode, myTitleSet);\n                  }\n                  else\n                  {\n                    titleMap.get(langcode).add(pseries['title'+langcode+'_t'][0]);\n                  }\n\t\t\t\t  \n\t\t\t\t// DESCRIPTION\n\t\t\t\tif (!descriptionMap.containsKey(langcode)){\n                    var myDescriptionSet = new java.util.HashSet();\n                    myDescriptionSet.add(pseries['description'+langcode+'_t'][0]);\n\t\t\t\t\tdescriptionMap.put(langcode, myDescriptionSet);\n                  }\n                  else\n                  {\n                    descriptionMap.get(langcode).add(pseries['description'+langcode+'_t'][0]);\n                  }  \n\t\t\t\t  \n\t\t\t\t// TAXONOMYL1\n\t\t\t\tif (!taxonomyL1Map.containsKey(langcode)){\n                    var mytaxonomyL1Set = new java.util.HashSet();\n                  if (pseries['productTaxonomyL1'+langcode+'_s']!=undefined){\n                        hasTaxonomyFields=1;\n                  \t\tmytaxonomyL1Set.add(pseries['productTaxonomyL1'+langcode+'_s']);\n\t\t\t\t\t\ttaxonomyL1Map.put(langcode, mytaxonomyL1Set);\n                   }\n                  else\n                  {\n                    //logger.info(\"zzzz undefined 7\");\n                  }\n                  }\n                  else\n                  {\n                    if (pseries['productTaxonomyL1'+langcode+'_s']!=undefined) {\n                      \n\t\t\t\t\t // logger.info(\"zzzzzzzzzzzzzzzzzzzzz: this is what we have so far: \" + pseries['productTaxonomyL1'+langcode+'_s']);\n\t\t\t\t\t  \n                      try{\n                        hasTaxonomyFields=1;\n\t\t\t\t\t\ttaxonomyL1Map.get(langcode).add(pseries['productTaxonomyL1'+langcode+'_s'].trim());\n                      }\n                      catch (exception)\n                      {\n\t\t\t\t\t\tlogger.info(\"zzzz: langcode before exception --> \" + langcode);\n                        logger.info(\"zzzz: exception TaxL1 --> \" + exception);\n                      }\n                    }\n                    else\n                    {\n                      //logger.info(\"zzzz undefined 8\");\n                    }\n                  }\n\n\t\t\t\t// TAXONOMYL2\n\t\t\t\tif (!taxonomyL2Map.containsKey(langcode)){\n                    var mytaxonomyL2Set = new java.util.HashSet();\n                  if (pseries['productTaxonomyL2'+langcode+'_s']!=undefined){\n                        hasTaxonomyFields=1;\n                  \t\tmytaxonomyL2Set.add(pseries['productTaxonomyL2'+langcode+'_s']);\n\t\t\t\t\t\ttaxonomyL2Map.put(langcode, mytaxonomyL2Set);\n                   }\n                  else\n                  {\n                    //logger.info(\"zzzz undefined 9\");\n                  }\n                  }\n                  else\n                  {\n                    if (pseries['productTaxonomyL2'+langcode+'_s']!=undefined) {\n                      \n                      try{\n                        hasTaxonomyFields=1;\n\t\t\t\t\t\ttaxonomyL2Map.get(langcode).add(pseries['productTaxonomyL2'+langcode+'_s'].trim());\n                      }\n                      catch (exception)\n                      {\n                        logger.info(\"zzzz: exception TaxL2 --> \" + exception);\n                      }\n                    }\n                    else\n                    {\n                      //logger.info(\"zzzz undefined 10\");\n                    }\n                  }\t\t\t  \n\n\t\t\t\t// TAXONOMYL3\n\t\t\t\tif (!taxonomyL3Map.containsKey(langcode)){\n                    var mytaxonomyL3Set = new java.util.HashSet();\n                  if (pseries['productTaxonomyL3'+langcode+'_s']!=undefined){\n                        hasTaxonomyFields=1;\n                  \t\tmytaxonomyL3Set.add(pseries['productTaxonomyL3'+langcode+'_s']);\n\t\t\t\t\t\ttaxonomyL3Map.put(langcode, mytaxonomyL3Set);\n                   }\n                  else\n                  {\n                    //logger.info(\"zzzz undefined 11\");\n                  }\n                  }\n                  else\n                  {\n                    if (pseries['productTaxonomyL3'+langcode+'_s']!=undefined) {\n                      \n                      try{\n                        hasTaxonomyFields=1;\n\t\t\t\t\t\ttaxonomyL3Map.get(langcode).add(pseries['productTaxonomyL3'+langcode+'_s'].trim());\n                      }\n                      catch (exception)\n                      {\n                        logger.info(\"zzzz: exception TaxL3 --> \" + exception);\n                      }\n                    }\n                    else\n                    {\n                      //logger.info(\"zzzz undefined 12\");\n                    }\n                  }\n\t\t}\n\n        \n \n        \n        if (tagAllPT[i]==\"Yes\")\n        {\n          logger.info(\"zzzz: Tagging all Parts\");\n       //   logger.info(\"zzzz: # of EcomIds: \" + ecomlist.length);\n        // retrieve list of Parts\n       // add each part number to the output doc\n          \n          for each (var pnum in ecomlist){\n            \n\t\t\tlogger.info(\"zzzz: processing the parts ...\");\n\t\t\t\n            var partNumDocs = getPartNumber(pnum);\n            \n            for each (var partNumDoc in partNumDocs){\n               //logger.info(\"zzzz: processing id \" + partNumDoc.id);\n              if (partNumDoc.id === undefined){\n\t\t\t\t//logger.info(\"zzzz: part doc is null\");\n\t\t\t\tpartNumDoc.parkerPartNumber_s=null;\n\t\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\tif (!partMap.containsKey(partVar)){\n                    var myPartSet = new java.util.HashSet();\n\t\t\t\t\t//logger.info(\"zzzz: creating part map\");\n                    myPartSet.add(partNumDoc.parkerPartNumber_s);\n\t\t\t\t\tpartMap.put(partVar, myPartSet);\n                  }\n                  else\n                  {\n\t\t\t\t\t  //logger.info(\"zzzz: adding to part map\");\n                      partMap.get(partVar).add(partNumDoc.parkerPartNumber_s);\n                  }\n\t\t\t\t  \n\t\t\t\t//doc.addField(\"parkerAssociatedPartNumber_ss\", partNumDoc.parkerPartNumber_s);\n            }\n           \n            \n          }\n          \n        }\n      }\n      \n        \n  }\n  \n  \n  }\n \n doc.addField('product_ss', titleMap.get('EN'));\n \n          for each (var l in langArray){\n          //logger.info(\"zzzz: Title HashSet \" + l + \" -- \" + titleMap.get(l));\n\t\t  doc.addField('product'+l+'_t', titleMap.get(l));\n\t\t  doc.addField('product'+l+'_ss', titleMap.get(l));\n\t\t  //logger.info(\"zzzz: Description HashSet \" + l + \" -- \" + descriptionMap.get(l));\n\t\t  doc.addField('description'+l+'_t', descriptionMap.get(l));\n          \n           if (hasTaxonomyFields){\n\t\t  //logger.info(\"zzzz: TaxonomyL1 HashSet \" + l + \" -- \" + taxonomyL1Map.get(l));\n             try{\n            taxonomyL1Map.get(l).stream().forEach(function(s){\n                                                  doc.addField('ZZZproductTaxonomyL1'+l+'_t', s)\n                                                  //logger.info(\"zzzz STREAM \" + s);\n\t\t\t\t\t\t\t\t\t\t\t\t  });\n             }\n             catch (exceptionT1) {\n             }\n\t\t  //doc.addField('ZZZproductTaxonomyL1'+l+'_t', taxonomyL1Map.get(l));\n\t\t  //logger.info(\"zzzz: TaxonomyL2 HashSet \" + l + \" -- \" + taxonomyL2Map.get(l));\n\t\t  //doc.addField('ZZZproductTaxonomyL2'+l+'_t', taxonomyL2Map.get(l));\n             try{\n              taxonomyL2Map.get(l).stream().forEach(function(s){\n                                                  doc.addField('ZZZproductTaxonomyL2'+l+'_t', s)\n                                                  //logger.info(\"zzzz STREAM \" + s);\n\t\t\t\t\t\t\t\t\t\t\t\t  });\n             }\n             catch (exceptionT2) {\n             }\n\t\t  //logger.info(\"zzzz: TaxonomyL3 HashSet \" + l + \" -- \" + taxonomyL3Map.get(l));\n\t\t  //doc.addField('ZZZproductTaxonomyL3'+l+'_t', taxonomyL3Map.get(l));\n             try{\n              taxonomyL3Map.get(l).stream().forEach(function(s){\n                                                  doc.addField('ZZZproductTaxonomyL3'+l+'_t', s)\n                                                  //logger.info(\"zzzz STREAM \" + s);\n\t\t\t\t\t\t\t\t\t\t\t\t  });\n             }\n             catch (exceptionT3) {\n             }\n           }\n\t\t   logger.info(\"zzz associated parts: \" + partMap.get(partVar));\n\t\t  doc.addField(\"parkerAssociatedPartNumber_ss\", partMap.get(partVar));\n            \n        }\n\t\t\n\t\tlogger.info(\"zzzz: completed Parts and Products Retrieval for \" + id);\n    }\n    catch (exception)\n    {\n     logger.info(\"zzzz main exception: \" + exception); \n    }\n      \n  }\n  \n  return doc;\n  \n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Retrieve Parts and Products Info",
    "secretSourceStageid" : "otpl6u",
    "secretSourceStageId" : "otpl6u"
  }, {
    "type" : "regex-extractor",
    "id" : "otpl842a4f11-c363-442c-8b16-b8d13c396d10",
    "rules" : [ {
      "source" : [ "productEN_ss" ],
      "target" : "productEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productFR_ss" ],
      "target" : "productFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productDE_ss" ],
      "target" : "productDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productIT_ss" ],
      "target" : "productIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productES_ss" ],
      "target" : "productES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productPT_ss" ],
      "target" : "productPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productZH_ss" ],
      "target" : "productZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTW_ss" ],
      "target" : "productTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productKO_ss" ],
      "target" : "productKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productJP_ss" ],
      "target" : "productJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productRU_ss" ],
      "target" : "productRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productPL_ss" ],
      "target" : "productPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productFI_ss" ],
      "target" : "productFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productNO_ss" ],
      "target" : "productNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productSV_ss" ],
      "target" : "productSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "product_ss" ],
      "target" : "product_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productCS_ss" ],
      "target" : "productCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productDK_ss" ],
      "target" : "productDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productNL_ss" ],
      "target" : "productNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTR_ss" ],
      "target" : "productTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productHU_ss" ],
      "target" : "productHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTH_ss" ],
      "target" : "productTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productVI_ss" ],
      "target" : "productVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split product Lang Fields",
    "secretSourceStageid" : "otpl842a4f11-c363-442c-8b16-b8d13c396d10",
    "secretSourceStageId" : "otpl842a4f11-c363-442c-8b16-b8d13c396d10"
  }, {
    "type" : "javascript-index",
    "id" : "otpl62n",
    "script" : "/* Last modified: 2018-01-10\n   Last modified by:  Terry Chambers / Onix\n   Change summary:\n   2018-01-10 - corrects productTaxonomyL1, adds L2, L3\n   2018-01-08 - adds new fields for Sprint 2 (productType, newsEventType, otherType)\n*/\n// HASHING FUNCTION\nfunction hashTheFacet(doc, facetToProcess, id) {\n    var facetValues;\n    var newHashedFacetValue = [];\n    var newHashedFacetFQ = [];\n    // get the values of the facet to be processed\n    facetValues = doc.getFieldValues(facetToProcess);\n    //logger.info(\"hashTheFacet(\" + facetToProcess + \")\");\n    // loop through the facet values and create hashes for them\n    facetValues.forEach(function (f) {\n\t\tif (f  != null){\n\t\t\tif (f.length!==0){\n\t\t\t\tvar newHashedFacet = f.hashCode();\t\t\n\t\t\t\tnewHashedFacetValue.push(\"p\" + newHashedFacet + \"$$$\" + f);\n\t\t\t\tnewHashedFacetFQ.push(\"p\" + newHashedFacet);\n\t\t\t}\n\t\t}\n    });\n    // return the hashed items\n    return [newHashedFacetValue, newHashedFacetFQ];\n}\n\nfunction computeLanguages(doc, id) {\n    // get the list of languages from the document\n    var langsfromdoc = doc.getFieldValues(\"language_is\");\n    var languages = [];\n    //logger.info(\"langsfromdoc \" + langsfromdoc);\n    //logger.info(\"Num of languages: \" + langsfromdoc.length);\n    // iterate through the languages and put them into an array\n    for each(var lang in langsfromdoc) {\n            switch (lang) {\n            case \"-1\":\n                languages.push('EN');\n                break;\n            case \"-2\":\n                languages.push('FR');\n                break;\n            case \"-3\":\n                languages.push('DE');\n                break;\n            case \"-4\":\n                languages.push('IT');\n                break;\n            case \"-5\":\n                languages.push('ES');\n                break;\n            case \"-6\":\n                languages.push('PT');\n                break;\n            case \"-7\":\n                languages.push('ZH');\n                break;\n            case \"-8\":\n                languages.push('TW');\n                break;\n            case \"-9\":\n                languages.push('KO');\n                break;\n            case \"-10\":\n                languages.push('JP');\n                break;\n            case \"-20\":\n                languages.push('RU');\n                break;\n            case \"-22\":\n                languages.push('PL');\n                break;\n            case \"-24\":\n                languages.push('FI');\n                break;\n            case \"-25\":\n                languages.push('NO');\n                break;\n            case \"-26\":\n                languages.push('SV');\n                break;\n            case \"-27\":\n                languages.push('CS');\n                break;\n            case \"-28\":\n                languages.push('DK');\n                break;\n            case \"-29\":\n                languages.push('NL');\n                break;\n            case \"-30\":\n                languages.push('TR');\n                break;\n            case \"-31\":\n                languages.push('HU');\n                break;\n            case \"-32\":\n                languages.push('TH');\n                break;\n            case \"-34\":\n                languages.push('VI');\n                break;\n            }\n        }\n        // if no languages found, try them all, to be safe\n    if (languages.length === 0) {\n        //logger.info(\"************* no languages found *******************\");\n        languages = ['EN', 'FR', 'DE', 'IT', 'ES', 'PT', 'ZH', 'TW', 'KO', 'JP', 'RU', 'PL', 'FI', 'NO', 'SV', 'CS', 'DK', 'NL', 'TR', 'HU', 'TH', 'VI'];\n    }\n    return languages;\n}\n// MAIN FUNCTION\nfunction (doc) {\n    //var facetsToHash; // array that we'll populate with our hashes\n    var id = doc.getId();\n    // list of facet fields that need to be processed\n    var listOfFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"parkerDivisionName_ss\", \"productTaxonomyL1_s\", \"productTaxonomyL2_s\", \"productTaxonomyL3_s\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"brand_ss\", \"cadType_ss\", \"product_ss\", \"languageName_ss\", \"fileType_ss\", \"eventYear_i\", \"newsYear_i\"];\n    // list of facet fields that are localized to other languages and need to be processed\n    var listOfLangFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"product_ss\", \"productTaxonomyL1_s\",\"productTaxonomyL2_s\",\"productTaxonomyL3_s\"];\n    var languages = []; // used to track the applicable languages\n    // if there are any language-based facets, compute the languages for this document\n    //logger.info(\"This is the list of LangFacets \" + listOfLangFacets);\n    if (listOfLangFacets) {\n        languages = computeLanguages(doc, id);\n        //logger.info(\"Finished computeLanguages(doc, id): \" + doc + \" , \" + id);\n        //logger.info(\"Resulting languages are \" + languages);\n    }\n    // process each facet from \"listOfFacets\" and store the values on to the document\n    for each(var facet in listOfFacets) {\n            //logger.info(\"The facet is \" + facet);\n            var location = facet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n            var tmpFacet = facet; // store the full facet name temporarily\n            var thisFacetShort = tmpFacet.substring(0, location); // take the facet name without the _ and data type\n            var facetsToHash = hashTheFacet(doc, facet, id); // calculate the hashes\n            //logger.info(\"facetsToHash \" + facetsToHash);\n            // takes the function output and puts into a string and then array\n            //logger.info(Object.prototype.toString.call(facetsToHash));\n            var facetsWithHashes = facetsToHash[0];\n            //logger.info(facetsWithHashes);\n            if (facetsWithHashes.length!==0) {\n                var facetsWithHashesArray = facetsWithHashes;\n                for each(var fwh in facetsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_facet\", fwh); // set the _facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array  \n            var fqsWithHashes = facetsToHash[1];\n            if (fqsWithHashes.length!==0) {\n                var fqsWithHashesArray = fqsWithHashes;\n                for each(var fqs in fqsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_fq\", fqs); // set the _fq field on the document\n                }\n            }\n        }\n        // process each facet from \"listOfLangFacets\" and store the values on the document\n    for each(var langFacet in listOfLangFacets) {\n        var location = langFacet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n        var thisFacetVarType = langFacet.substring(location + 1, langFacet.length); // take the data type from the facet name\n        for each(var lang in languages) {\n            var langFacetShort = langFacet.substring(0, location); // clear the field from previous runs\n            var thisFacetFull = langFacetShort + lang + \"_\" + thisFacetVarType; // compute the name of the full facet to process hashes for\n            langFacetShort = langFacetShort + lang; // compute the prefix of the facet name that will be written back to the document\n            var facetsToHash = hashTheFacet(doc, thisFacetFull, id); // calculate the hashes\n            // takes the function output and puts into a string and then array      \n            var facetsWithHashesLG = facetsToHash[0];\n            //logger.info(\"facetsWithHashesLG: \" + facetsWithHashesLG);\n            if (facetsWithHashesLG.length!==0) {\n                var facetsWithHashesLGArray = facetsWithHashesLG;\n                for each(var lg in facetsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_facet\", lg); // set the XX_facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array      \n            var fqsWithHashesLG = facetsToHash[1];\n            if (fqsWithHashesLG.length!==0) {\n                var fqsWithHashesLGArray = fqsWithHashesLG;\n                for each(var fqlg in fqsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_fq\", fqlg); // set the XX_fq field on the document\n                }\n            }\n        }\n    }\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Facet Hashing",
    "secretSourceStageid" : "otpl62n",
    "secretSourceStageId" : "otpl62n"
  }, {
    "type" : "field-mapping",
    "id" : "otplo",
    "mappings" : [ {
      "source" : "title_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleCS_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleDA_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleNL_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleEN_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleFI_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleFR_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleDE_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleHU_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleIT_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleJP_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleKO_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleNO_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titlePL_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titlePT_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleRU_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleZH_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleES_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleSV_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleTH_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleTW_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleTR_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleVI_t",
      "target" : "title_s",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "field-mapping",
    "secretSourceStageid" : "otplo",
    "secretSourceStageId" : "otplo"
  }, {
    "type" : "javascript-index",
    "id" : "otpl7wf",
    "script" : "function (doc){\n   \n    var filemountParent = \"/OpenText/StaticContent/ParkerCom\";\n  \n    var PDFParser = org.apache.tika.parser.pdf.PDFParser;\n    var Metadata = org.apache.tika.metadata.Metadata;\n    var FileInputStream = java.io.FileInputStream;\n    var BodyContentHandler = org.apache.tika.sax.BodyContentHandler;\n    var ParseContext = org.apache.tika.parser.ParseContext;\n  \n  \n\tfunction parsePdf() {\n\t\tvar parser,metadata, handler, context, map;\n\t\t\n\n            var filePath = doc.getFirstFieldValue(\"urlKeyword_s\");\n\n            doc.setField('temp_s',filePath);\n            doc.removeFields('_parseError_s');\n            doc.removeFields('_PDFPath_s');\n            doc.removeFields('_parsedPDF_s');\n           \n\t\t\tvar input = null;\n            try{\n            \t\tinput = new FileInputStream(filemountParent + filePath);\n\t\t\t\t\tparser = new PDFParser();\n\t\t\t\t\tmetadata = new Metadata();\n\t\t\t\t\thandler = new BodyContentHandler(-1);\n\t\t\t\t\tcontext = new ParseContext();\n\t\t\t\t\tparser.parse(input, handler, metadata, context);\n\t\t\t\t\tdoc.setField('pdf_file_t', handler.toString());              \n                   \t} catch(err) {\n                        logger.error(err);\n                        doc.setField('_parseError_s',err);\n\t\t\t\t\t\tdoc.setField('_PDFPath_s',filemountParent + filePath);\n                        doc.setField('_parsedPDF_s',\"failed\");\n                  \t} finally {\n                      \tif(null != input) {\n\t\t\t\t\t\t  \tdoc.setField('_parsedPDF_s',\"yes\");\n                          \tinput.close();\n                      \t}\n                 \t}\n\n          \n\t\t\t\t\n      \n      return doc;\n      \n\t}\n  \n  return parsePdf();\n  \n}",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "Supporting PDF File Parser",
    "condition" : "doc.getFirstFieldValue('otAssetType_s') == \"Static File\"",
    "secretSourceStageid" : "otpl7wf",
    "secretSourceStageId" : "otpl7wf"
  }, {
    "type" : "solr-index",
    "id" : "otpl379180d2-ef8e-4643-ae87-4689fab56946",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "label" : "solr-index",
    "secretSourceStageid" : "otpl379180d2-ef8e-4643-ae87-4689fab56946",
    "secretSourceStageId" : "otpl379180d2-ef8e-4643-ae87-4689fab56946"
  } ],
  "properties" : {
    "secretSourcePipelineid" : "otplOpenTextPipelineTest",
    "secretSourcePipelineId" : "otplOpenTextPipelineTest"
  }
}, {
  "id" : "ParkerDotComMain-Talemetry",
  "stages" : [ {
    "type" : "field-mapping",
    "id" : "a91e5b45-0956-44b8-b47b-7b46ab421ee9",
    "mappings" : [ {
      "source" : "id",
      "target" : "talementry_target_id_t",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "a91e5b45-0956-44b8-b47b-7b46ab421ee9"
  }, {
    "type" : "javascript-index",
    "id" : "pbi",
    "script" : "function (doc) {\n  var id = doc.getId();\n//  logger.info(\"**** Setting Basic Fields on \" + id + \" ****\");\n\n  var jobTitle = doc.getFirstFieldValue(\"title_t\");\n  var jobCountry = doc.getFirstFieldValue(\"country_s\");\n  var jobLocality = doc.getFirstFieldValue(\"locality_s\");\n  var jobRegion = doc.getFirstFieldValue(\"region_full_s\");\n  var jobDescription = \"\";\n  \n  if (jobCountry!= null)\n  {\n    jobDescription = jobCountry;\n  }\n  \n  if (jobDescription != null && jobRegion !=null)\n  {\n    jobDescription = jobDescription + \" - \" + jobRegion;\n  }\n  else if (jobDescription == null)\n  {\n    jobDescription = jobRegion;\n  }\n  \n  if (jobDescription != null && jobLocality !=null)\n  {\n    jobDescription = jobDescription + \" - \" + jobLocality;\n  }\n  else if (jobDescription == null)\n  {\n    jobDescription = jobLocality;\n  }\n  \n  \n  \n  doc.setField(\"description_t\", jobDescription);\n  doc.setField(\"title_t\", jobTitle + \" -- \" + jobDescription);\n  doc.setField(\"siteSection_ss\",\"Career\");\n//  doc.setField(\"siteSubSection_ss\", \"Career\");\n  doc.setField(\"contentSource_s\", \"Talemetry\");\n  doc.setField(\"audience_ss\", \"public\");\n  doc.setField(\"thumbnailURL_s\", \"/parker/search2017/search-result/Careers.jpg\");\n  doc.setField(\"suggest_type_s\",\"standard\");\n  \n  return doc;\n  \n} \n  \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set basic field data (JS)",
    "secretSourceStageId" : "pbi"
  }, {
    "type" : "javascript-index",
    "id" : "fh6",
    "script" : "function (doc) {\n  var id = doc.getId();\n//  logger.info(\"**** Setting Country on \" + id + \" ****\");\n\n\n  var jobCountry = doc.getFirstFieldValue(\"country_s\");\n  var jobCountryId = \"\";\n  var joblang = \"\";\n  var joblangcode = \"\";\n  \n  \n  if (jobCountry !=null && jobCountry !=\"\"){\n    switch (jobCountry) {\n        case \"United States\":\n            jobCountryId = \"687PDC\";\n            joblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\n        case \"Algeria\":\n            jobCountryId = \"688ALG\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\n        case \"Angola\":\n            jobCountryId = \"688ANG\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Argentina\":\n            jobCountryId = \"687465\";\n        \tjoblang = \"-1\";\n            break;\t\n        case \"Australia & New Zealand\":\n            jobCountryId = \"687463\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Austria\":\n            jobCountryId = \"688034\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Belgium\":\n            jobCountryId = \"687656\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Brazil\":\n            jobCountryId = \"687852\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t        \n        case \"Canada\":\n            jobCountryId = \"687541\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Chile\":\n            jobCountryId = \"A49072\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"China\":\n            jobCountryId = \"687890\";\n        \tjoblang = \"-1\";\n            break;\t\n        case \"Czech Republic\":\n            jobCountryId = \"687779\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Denmark\":\n            jobCountryId = \"687554\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Egypt\":\n            jobCountryId = \"A54EGY\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Finland\":\n            jobCountryId = \"687499\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"France\":\n            jobCountryId = \"688037\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Germany\":\n            jobCountryId = \"A29633\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Ghana\":\n            jobCountryId = \"687GHA\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Hong Kong\":\n            jobCountryId = \"687368\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"India\":\n            jobCountryId = \"687854\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Ireland\":\n            jobCountryId = \"C18590\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Italy\":\n            jobCountryId = \"687536\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\n        case \"Japan\":\n            jobCountryId = \"687365\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\n        case \"Kenya\":\n            jobCountryId = \"687KEN\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\n        case \"Libya\":\n            jobCountryId = \"A54LIB\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\n        case \"Luxembourg\":\n            jobCountryId = \"C66879\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\n        case \"Mexico\":\n            jobCountryId = \"687848\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\n        case \"Morocco\":\n            jobCountryId = \"688MOR\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\n        case \"Netherlands\":\n            jobCountryId = \"687570\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\n        case \"Nigeria\":\n            jobCountryId = \"687NIG\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\n        case \"Norway\":\n            jobCountryId = \"687616\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\n        case \"Poland\":\n            jobCountryId = \"687300\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\n        case \"Portugal\":\n            jobCountryId = \"688040\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\n        case \"Russia\":\n            jobCountryId = \"A13868\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\n        case \"Singapore\":\n            jobCountryId = \"687584\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\n        case \"South Africa\":\n            jobCountryId = \"687466\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\n        case \"South Korea\":\n            jobCountryId = \"687611\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\n        case \"Spain\":\n            jobCountryId = \"687530\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\t\n        case \"Sweden\":\n            jobCountryId = \"687575\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Switzerland\":\n            jobCountryId = \"C73641\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Taiwan\":\n            jobCountryId = \"687912\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Thailand\":\n            jobCountryId = \"687904\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Tunisia\":\n            jobCountryId = \"688TUN\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\n        case \"Turkey\":\n            jobCountryId = \"688368\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\t\t\n        case \"United Arab Emirates\":\n            jobCountryId = \"A54675\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\t\n        case \"United Kingdom\":\n            jobCountryId = \"C19159\";\n        \tjoblang = \"-1\";\n        \tjoblangcode = \"EN\";\n            break;\t\t\t\t\t\t\n\t\t\tdefault:\n        jobCountryId=\"Unknown\";\n                   }\n  }\n \n  doc.setField(\"countryName_ss\",jobCountry);\n  doc.setField(\"countryId_ss\", jobCountryId);\n  doc.setField(\"languageCode_ss\", joblangcode);\n  doc.setField(\"language_is\", joblang);\n  return doc;\n  \n} \n  \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set Country and Language (JS)",
    "secretSourceStageId" : "fh6"
  }, {
    "type" : "field-mapping",
    "id" : "8j",
    "mappings" : [ {
      "source" : "body",
      "target" : "body_t",
      "operation" : "move"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "8j"
  }, {
    "type" : "javascript-index",
    "id" : "4a9",
    "script" : "var urlReader = function (doc) {\n\tvar jobId = doc.getFirstFieldValue(\"jobId_s\");\n\tvar jobURL = \"http://parkercareers.ttcportals.com/jobs/\" + jobId;\n\tvar e = java.lang.Exception;\n\tvar URL = java.net.URL;\n\tvar BufferedReader = java.io.BufferedReader;\n\tvar InputStreamReader = java.io.InputStreamReader;\n    var String = java.lang.String;\n    try {\n        var oracle = new URL(jobURL);\n        var ins = new BufferedReader(new InputStreamReader(oracle.openStream()));\n\n        var inputLine = \"\";\n        var result = new String();\n        while ((inputLine = ins.readLine()) !== null) {\n            //logger.info(inputLine);\n            result += inputLine;\n        }\n        ins.close();\n        //logger.info(\"zzzz ADD RESULT: \" + result);\n        doc.addField(\"_raw_content_\", result);\n    } catch (e) {\n        logger.error(e);\n    }\n\n    return doc;\n}\n\nvar getFileSize = function (docurl) {\n    var HttpURLConnection = java.net.HttpURLConnection;\n    var URL = java.net.URL;\n    var conn = java.net.HttpURLConnection;\n    var e = java.lang.Exception;\n    var len = 0;\n    try {\n        var url = new URL(docurl);\n        conn = url.openConnection();\n        conn.setRequestMethod(\"HEAD\");\n        conn.getInputStream();\n        len = conn.getContentLength();\n    } catch (e) {\n        len = -1;\n    } finally {\n        if(conn.disconnect){\n        conn.disconnect();\n        }\n    }\n   return len;\n\n};\n\nfunction getFileSize(docurl) {\n    var HttpURLConnection = java.net.HttpURLConnection;\n    var URL = java.net.URL;\n    var conn = java.net.HttpURLConnection;\n    var e = java.lang.Exception;\n    var len = 0;\n    try {\n        var url = new URL(docurl);\n        conn = url.openConnection();\n        conn.setRequestMethod(\"HEAD\");\n        conn.getInputStream();\n        len = conn.getContentLength();\n    } catch (e) {\n        len = -1;\n    } finally {\n         if(conn.disconnect){\n        conn.disconnect();\n        }\n    }\n   return len;\n\n}\n\n\nfunction (doc) {\n    var jobId = doc.getFirstFieldValue(\"jobId_s\");\n    var jobURL = \"http://parkercareers.ttcportals.com/jobs/\" + jobId;\n    //logger.info(\"zzzz job URL is: \" + jobURL);\n    var e = java.lang.Exception;\n    var URL = java.net.URL;\n    var BufferedReader = java.io.BufferedReader;\n    var InputStreamReader = java.io.InputStreamReader;\n    var String = java.lang.String;\n    var fileSize = getFileSize(jobURL);\n   //logger.info(\"zzzz **** FILE SIZE: \"+fileSize+\" *******\");\n    try {\n        var oracle = new URL(jobURL);\n        var ins = new BufferedReader(new InputStreamReader(oracle.openStream()));\n\n        var inputLine = \"\";\n        var result = new String();\n        while ((inputLine = ins.readLine()) !== null) {\n            //logger.info(inputLine);\n            result += inputLine;\n        }\n        ins.close();\n        //logger.info(\"zzzz ADD RESULT: \"+result);\n        doc.setField(\"_raw_content_\", result);\n    } catch (e) {\n        logger.error(e);\n    }\n    \n    return doc;\n\n}\n\n \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Fetch Job Web Page (JS)",
    "condition" : "doc.hasField(\"jobId_s\");",
    "secretSourceStageId" : "4a9"
  }, {
    "type" : "tika-parser",
    "id" : "7wj",
    "includeImages" : false,
    "flattenCompound" : false,
    "addFailedDocs" : false,
    "addOriginalContent" : false,
    "contentField" : "_raw_content_",
    "contentEncoding" : "binary",
    "returnXml" : false,
    "keepOriginalStructure" : false,
    "extractHtmlLinks" : false,
    "extractOtherLinks" : false,
    "includeContentTypes" : [ ],
    "excludeContentTypes" : [ ],
    "zipBombCompressionRatio" : 200,
    "zipBombMaxDepth" : 200,
    "zipBombMaxPackageEntryDepth" : 20,
    "type" : "tika-parser",
    "skip" : false,
    "label" : "Parse HTML body (Tika)",
    "condition" : "doc.hasField(\"jobId_s\");",
    "secretSourceStageId" : "7wj"
  }, {
    "type" : "javascript-index",
    "id" : "i9",
    "script" : "\nfunction (doc) {\n    var body = doc.getFirstFieldValue(\"body\");\n    \n     var newbody = body.replace(/\\./g,\". \");\n     var finalbody = newbody.replace(/\\n|\\t/g,\"\");\n  \n  \n  doc.setField(\"description_t\", finalbody);\n    \n    return doc;\n\n}\n\n \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Fix periods in body field (JS)",
    "secretSourceStageId" : "i9"
  }, {
    "type" : "regex-extractor",
    "id" : "ded21dd6-4243-49c9-bc6b-be280f270544",
    "rules" : [ {
      "source" : [ "siteSection_ss" ],
      "target" : "siteSection_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryName_ss" ],
      "target" : "countryName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadType_ss" ],
      "target" : "cadType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadURL_ss" ],
      "target" : "cadURL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportType_ss" ],
      "target" : "supportType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageName_ss" ],
      "target" : "languageName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryId_ss" ],
      "target" : "countryId_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "language_is" ],
      "target" : "language_is",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivision_ss" ],
      "target" : "parkerDivision_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivisionName_ss" ],
      "target" : "parkerDivisionName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "altpartnums_ss" ],
      "target" : "altpartnums_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageCode_ss" ],
      "target" : "languageCode_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split Fields",
    "secretSourceStageId" : "ded21dd6-4243-49c9-bc6b-be280f270544"
  }, {
    "type" : "javascript-index",
    "id" : "it9",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n // logger.info(\"**** Reconfiguring fields on \" + id + \" ****\");\n  \n  \tvar doclangstring = doc.getFirstFieldValue(\"language_is\");\n  \tvar originalTitle = doc.getFirstFieldValue(\"title_t\");\n    var originalDescription = doc.getFirstFieldValue(\"description_t\");\n\t\n\tvar trimmedSiteSections = \"\";\n\tvar trimmedSiteSubSections = \"\";\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSection <start>\n\t\t**********************************/\n    var originalSiteSection = doc.getFieldValues(\"siteSection_ss\");\n    var newSiteSection = \"\";\n    \n\t\n    var arrayLength = originalSiteSection.length;\n    \n\t\n\tif (arrayLength >0){\n    for (var i = 0; i < arrayLength; i++)\n  {\n  \n  if (originalSiteSection[i] !=null && originalSiteSection[i] !=\"\"){\n  \n    \n    newSiteSection = newSiteSection + \",\" + originalSiteSection[i];\n    \n  }\n    \n    trimmedSiteSections = newSiteSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSection <end>\n\t\t\n\t\t\n\t\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSubSection <start>\n\t\t**********************************/\n    var originalSiteSubSection = doc.getFieldValues(\"siteSubSection_ss\");\n    var newSiteSubSection = \"\";\n    \n\t\n    var arrayLength4 = originalSiteSubSection.length;\n    \n\t\n\tif (arrayLength4 >0){\n    for (var l = 0; l < arrayLength4; l++)\n  {\n  \n  if (originalSiteSubSection[l] !=null && originalSiteSubSection[l] !=\"\"){\n  \n    \n    newSiteSubSection = newSiteSubSection + \",\" + originalSiteSubSection[l];\n    \n  }\n    \n    trimmedSiteSubSections = newSiteSubSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSubSection <end>\n\t\n\n\n\n  \n // logger.info(\"Setting data ...\");\n  \n    if (doclangstring!=null){\n  \n    switch (doclangstring) {\n\t\n\t\n        case \"-1\":\n\t\t\tdoc.setField(\"titleEN_t\",originalTitle);\n        \tdoc.setField(\"descriptionEN_t\",originalDescription);\n        \tdoc.setField(\"siteSectionEN_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionEN_ss\",trimmedSiteSubSections);\n            break;\n        case \"-2\":\n            doc.setField(\"titleFR_t\",originalTitle);\n        \tdoc.setField(\"descriptionFR_t\",originalDescription);\n        \tdoc.setField(\"siteSectionFR_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionFR_ss\",trimmedSiteSubSections);\n            break;\n        case \"-3\":\n            doc.setField(\"titleDE_t\",originalTitle);\n        \tdoc.setField(\"descriptionDE_t\",originalDescription);\n        \tdoc.setField(\"siteSectionDE_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionDE_ss\",trimmedSiteSubSections);\n            break;\n        case \"-4\":\n            doc.setField(\"titleIT_t\",originalTitle);\n        \tdoc.setField(\"descriptionIT_t\",originalDescription);\n        \tdoc.setField(\"siteSectionIT_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionIT_ss\",trimmedSiteSubSections);\n            break;\n        case \"-5\":\n            doc.setField(\"titleES_t\",originalTitle);\n        \tdoc.setField(\"descriptionES_t\",originalDescription);\n        \tdoc.setField(\"siteSectionES_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionES_ss\",trimmedSiteSubSections);\n            break;\n        case \"-6\":\n            doc.setField(\"titlePT_t\",originalTitle);\n        \tdoc.setField(\"descriptionPT_t\",originalDescription);\n        \tdoc.setField(\"siteSectionPT_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionPT_ss\",trimmedSiteSubSections);\n            break;\n        case \"-7\":\n            doc.setField(\"titleZH_t\",originalTitle);\n        \tdoc.setField(\"descriptionZH_t\",originalDescription);\n        \tdoc.setField(\"siteSectionZH_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionZH_ss\",trimmedSiteSubSections);\n            break;\n        case \"-8\":\n            doc.setField(\"titleTW_t\",originalTitle);\n        \tdoc.setField(\"descriptionTW_t\",originalDescription);\n        \tdoc.setField(\"siteSectionTW_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionTW_ss\",trimmedSiteSubSections);\n            break;\n        case \"-9\":\n            doc.setField(\"titleKO_t\",originalTitle);\n        \tdoc.setField(\"descriptionKO_t\",originalDescription);\n        \tdoc.setField(\"siteSectionKO_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionKO_ss\",trimmedSiteSubSections);\n            break;\n        case \"-10\":\n            doc.setField(\"titleJP_t\",originalTitle);\n        \tdoc.setField(\"descriptionJP_t\",originalDescription);\n        \tdoc.setField(\"siteSectionJP_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionJP_ss\",trimmedSiteSubSections);\n            break;\n        case \"-20\":\n            doc.setField(\"titleRU_t\",originalTitle);\n        \tdoc.setField(\"descriptionRU_t\",originalDescription);\n        \tdoc.setField(\"siteSectionRU_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionRU_ss\",trimmedSiteSubSections);\n            break;\n        case \"-22\":\n            doc.setField(\"titlePL_t\",originalTitle);\n        \tdoc.setField(\"descriptionPL_t\",originalDescription);\n        \tdoc.setField(\"siteSectionPL_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionPL_ss\",trimmedSiteSubSections);\n            break;\n        case \"-24\":\n            doc.setField(\"titleFI_t\",originalTitle);\n        \tdoc.setField(\"descriptionFI_t\",originalDescription);\n        \tdoc.setField(\"siteSectionFI_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionFI_ss\",trimmedSiteSubSections);\n            break;\n        case \"-25\":\n            doc.setField(\"titleNO_t\",originalTitle);\n        \tdoc.setField(\"descriptionNO_t\",originalDescription);\n        \tdoc.setField(\"siteSectionNO_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionNO_ss\",trimmedSiteSubSections);\n            break;\n        case \"-26\":\n            doc.setField(\"titleSV_t\",originalTitle);\n        \tdoc.setField(\"descriptionSV_t\",originalDescription);\n        \tdoc.setField(\"siteSectionSV_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionSV_ss\",trimmedSiteSubSections);\n            break;\n        case \"-27\":\n            doc.setField(\"titleCS_t\",originalTitle);\n        \tdoc.setField(\"descriptionCS_t\",originalDescription);\n        \tdoc.setField(\"siteSectionCS_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionCS_ss\",trimmedSiteSubSections);\n            break;\n        case \"-28\":\n            doc.setField(\"titleDK_t\",originalTitle);\n        \tdoc.setField(\"descriptionDK_t\",originalDescription);\n        \tdoc.setField(\"siteSectionDK_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionDK_ss\",trimmedSiteSubSections);\n            break;\n        case \"-29\":\n            doc.setField(\"titleNL_t\",originalTitle);\n        \tdoc.setField(\"descriptionNL_t\",originalDescription);\n        \tdoc.setField(\"siteSectionNL_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionNL_ss\",trimmedSiteSubSections);\n            break;\t\n        case \"-30\":\n            doc.setField(\"titleTR_t\",originalTitle);\n        \tdoc.setField(\"descriptionTR_t\",originalDescription);\n        \tdoc.setField(\"siteSectionTR_ss\",originalSiteSection);\n\t\t\tdoc.setField(\"siteSubSectionTR_ss\",trimmedSiteSubSections);\n            break;\n        case \"-31\":\n            doc.setField(\"titleHU_t\",originalTitle);\n        \tdoc.setField(\"descriptionHU_t\",originalDescription);\n        \tdoc.setField(\"siteSectionHU_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionHU_ss\",trimmedSiteSubSections);\n            break;\n        case \"-32\":\n            doc.setField(\"titleTH_t\",originalTitle);\n        \tdoc.setField(\"descriptionTH_t\",originalDescription);\n        \tdoc.setField(\"siteSectionTH_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionTH_ss\",trimmedSiteSubSections);\n            break;\n        case \"-34\":\n            doc.setField(\"titleVI_t\",originalTitle);\n        \tdoc.setField(\"descriptionVI_t\",originalDescription);\n        \tdoc.setField(\"siteSectionVI_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionVI_ss\",trimmedSiteSubSections);\n            break;\t\t\n\n                   }\n    }\n  \n\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Copy data to lang-specific fields (JS)",
    "secretSourceStageId" : "it9"
  }, {
    "type" : "regex-extractor",
    "id" : "1da39da1-cedc-4f9d-9f9b-71e43277cd7c",
    "rules" : [ {
      "source" : [ "siteSubSectionCS_ss" ],
      "target" : "siteSubSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDK_ss" ],
      "target" : "siteSubSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNL_ss" ],
      "target" : "siteSubSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTR_ss" ],
      "target" : "siteSubSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionHU_ss" ],
      "target" : "siteSubSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionEN_ss" ],
      "target" : "siteSubSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFR_ss" ],
      "target" : "siteSubSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDE_ss" ],
      "target" : "siteSubSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionIT_ss" ],
      "target" : "siteSubSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionES_ss" ],
      "target" : "siteSubSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTH_ss" ],
      "target" : "siteSubSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionVI_ss" ],
      "target" : "siteSubSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPT_ss" ],
      "target" : "siteSubSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionZH_ss" ],
      "target" : "siteSubSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTW_ss" ],
      "target" : "siteSubSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionKO_ss" ],
      "target" : "siteSubSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionJP_ss" ],
      "target" : "siteSubSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionRU_ss" ],
      "target" : "siteSubSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPL_ss" ],
      "target" : "siteSubSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFI_ss" ],
      "target" : "siteSubSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNO_ss" ],
      "target" : "siteSubSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionSV_ss" ],
      "target" : "siteSubSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSubSection Lang Fields",
    "secretSourceStageId" : "1da39da1-cedc-4f9d-9f9b-71e43277cd7c"
  }, {
    "type" : "regex-extractor",
    "id" : "b553cf27-f8b2-46ed-b17d-ec645721585c",
    "rules" : [ {
      "source" : [ "siteSectionEN_ss" ],
      "target" : "siteSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFR_ss" ],
      "target" : "siteSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDE_ss" ],
      "target" : "siteSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionIT_ss" ],
      "target" : "siteSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionES_ss" ],
      "target" : "siteSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPT_ss" ],
      "target" : "siteSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionZH_ss" ],
      "target" : "siteSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTW_ss" ],
      "target" : "siteSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionKO_ss" ],
      "target" : "siteSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionJP_ss" ],
      "target" : "siteSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionRU_ss" ],
      "target" : "siteSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPL_ss" ],
      "target" : "siteSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFI_ss" ],
      "target" : "siteSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNO_ss" ],
      "target" : "siteSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionSV_ss" ],
      "target" : "siteSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionCS_ss" ],
      "target" : "siteSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDK_ss" ],
      "target" : "siteSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNL_ss" ],
      "target" : "siteSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTR_ss" ],
      "target" : "siteSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionHU_ss" ],
      "target" : "siteSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTH_ss" ],
      "target" : "siteSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionVI_ss" ],
      "target" : "siteSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSection Lang Fields",
    "secretSourceStageId" : "b553cf27-f8b2-46ed-b17d-ec645721585c"
  }, {
    "type" : "javascript-index",
    "id" : "dzo",
    "script" : "/* Last modified: 2018-01-10\n   Last modified by:  Terry Chambers / Onix\n   Change summary:\n   2018-01-10 - corrects productTaxonomyL1, adds L2, L3\n   2018-01-08 - adds new fields for Sprint 2 (productType, newsEventType, otherType)\n*/\n// HASHING FUNCTION\nfunction hashTheFacet(doc, facetToProcess, id) {\n    var facetValues;\n    var newHashedFacetValue = [];\n    var newHashedFacetFQ = [];\n    // get the values of the facet to be processed\n    facetValues = doc.getFieldValues(facetToProcess);\n    //logger.info(\"hashTheFacet(\" + facetToProcess + \")\");\n    // loop through the facet values and create hashes for them\n    facetValues.forEach(function (f) {\n\t\tif (f  != null){\n\t\t\tif (f.length!==0){\n\t\t\t\tvar newHashedFacet = f.hashCode();\t\t\n\t\t\t\tnewHashedFacetValue.push(\"p\" + newHashedFacet + \"$$$\" + f);\n\t\t\t\tnewHashedFacetFQ.push(\"p\" + newHashedFacet);\n\t\t\t}\n\t\t}\n    });\n    // return the hashed items\n    return [newHashedFacetValue, newHashedFacetFQ];\n}\n\nfunction computeLanguages(doc, id) {\n    // get the list of languages from the document\n    var langsfromdoc = doc.getFieldValues(\"language_is\");\n    var languages = [];\n    //logger.info(\"langsfromdoc \" + langsfromdoc);\n    //logger.info(\"Num of languages: \" + langsfromdoc.length);\n    // iterate through the languages and put them into an array\n    for each(var lang in langsfromdoc) {\n            switch (lang) {\n            case \"-1\":\n                languages.push('EN');\n                break;\n            case \"-2\":\n                languages.push('FR');\n                break;\n            case \"-3\":\n                languages.push('DE');\n                break;\n            case \"-4\":\n                languages.push('IT');\n                break;\n            case \"-5\":\n                languages.push('ES');\n                break;\n            case \"-6\":\n                languages.push('PT');\n                break;\n            case \"-7\":\n                languages.push('ZH');\n                break;\n            case \"-8\":\n                languages.push('TW');\n                break;\n            case \"-9\":\n                languages.push('KO');\n                break;\n            case \"-10\":\n                languages.push('JP');\n                break;\n            case \"-20\":\n                languages.push('RU');\n                break;\n            case \"-22\":\n                languages.push('PL');\n                break;\n            case \"-24\":\n                languages.push('FI');\n                break;\n            case \"-25\":\n                languages.push('NO');\n                break;\n            case \"-26\":\n                languages.push('SV');\n                break;\n            case \"-27\":\n                languages.push('CS');\n                break;\n            case \"-28\":\n                languages.push('DK');\n                break;\n            case \"-29\":\n                languages.push('NL');\n                break;\n            case \"-30\":\n                languages.push('TR');\n                break;\n            case \"-31\":\n                languages.push('HU');\n                break;\n            case \"-32\":\n                languages.push('TH');\n                break;\n            case \"-34\":\n                languages.push('VI');\n                break;\n            }\n        }\n        // if no languages found, try them all, to be safe\n    if (languages.length === 0) {\n        //logger.info(\"************* no languages found *******************\");\n        languages = ['EN', 'FR', 'DE', 'IT', 'ES', 'PT', 'ZH', 'TW', 'KO', 'JP', 'RU', 'PL', 'FI', 'NO', 'SV', 'CS', 'DK', 'NL', 'TR', 'HU', 'TH', 'VI'];\n    }\n    return languages;\n}\n// MAIN FUNCTION\nfunction (doc) {\n    //var facetsToHash; // array that we'll populate with our hashes\n    var id = doc.getId();\n    // list of facet fields that need to be processed\n    var listOfFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"parkerDivisionName_ss\", \"productTaxonomyL1_s\", \"productTaxonomyL2_s\", \"productTaxonomyL3_s\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"brand_ss\", \"cadType_ss\", \"product_ss\", \"languageName_ss\", \"fileType_ss\", \"eventYear_i\", \"newsYear_i\"];\n    // list of facet fields that are localized to other languages and need to be processed\n    var listOfLangFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"product_ss\", \"productTaxonomyL1_s\",\"productTaxonomyL2_s\",\"productTaxonomyL3_s\"];\n    var languages = []; // used to track the applicable languages\n    // if there are any language-based facets, compute the languages for this document\n    //logger.info(\"This is the list of LangFacets \" + listOfLangFacets);\n    if (listOfLangFacets) {\n        languages = computeLanguages(doc, id);\n        //logger.info(\"Finished computeLanguages(doc, id): \" + doc + \" , \" + id);\n        //logger.info(\"Resulting languages are \" + languages);\n    }\n    // process each facet from \"listOfFacets\" and store the values on to the document\n    for each(var facet in listOfFacets) {\n            //logger.info(\"The facet is \" + facet);\n            var location = facet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n            var tmpFacet = facet; // store the full facet name temporarily\n            var thisFacetShort = tmpFacet.substring(0, location); // take the facet name without the _ and data type\n            var facetsToHash = hashTheFacet(doc, facet, id); // calculate the hashes\n            //logger.info(\"facetsToHash \" + facetsToHash);\n            // takes the function output and puts into a string and then array\n            //logger.info(Object.prototype.toString.call(facetsToHash));\n            var facetsWithHashes = facetsToHash[0];\n            //logger.info(facetsWithHashes);\n            if (facetsWithHashes.length!==0) {\n                var facetsWithHashesArray = facetsWithHashes;\n                for each(var fwh in facetsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_facet\", fwh); // set the _facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array  \n            var fqsWithHashes = facetsToHash[1];\n            if (fqsWithHashes.length!==0) {\n                var fqsWithHashesArray = fqsWithHashes;\n                for each(var fqs in fqsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_fq\", fqs); // set the _fq field on the document\n                }\n            }\n        }\n        // process each facet from \"listOfLangFacets\" and store the values on the document\n    for each(var langFacet in listOfLangFacets) {\n        var location = langFacet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n        var thisFacetVarType = langFacet.substring(location + 1, langFacet.length); // take the data type from the facet name\n        for each(var lang in languages) {\n            var langFacetShort = langFacet.substring(0, location); // clear the field from previous runs\n            var thisFacetFull = langFacetShort + lang + \"_\" + thisFacetVarType; // compute the name of the full facet to process hashes for\n            langFacetShort = langFacetShort + lang; // compute the prefix of the facet name that will be written back to the document\n            var facetsToHash = hashTheFacet(doc, thisFacetFull, id); // calculate the hashes\n            // takes the function output and puts into a string and then array      \n            var facetsWithHashesLG = facetsToHash[0];\n            //logger.info(\"facetsWithHashesLG: \" + facetsWithHashesLG);\n            if (facetsWithHashesLG.length!==0) {\n                var facetsWithHashesLGArray = facetsWithHashesLG;\n                for each(var lg in facetsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_facet\", lg); // set the XX_facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array      \n            var fqsWithHashesLG = facetsToHash[1];\n            if (fqsWithHashesLG.length!==0) {\n                var fqsWithHashesLGArray = fqsWithHashesLG;\n                for each(var fqlg in fqsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_fq\", fqlg); // set the XX_fq field on the document\n                }\n            }\n        }\n    }\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Facet Hashing",
    "secretSourceStageId" : "dzo"
  }, {
    "type" : "field-mapping",
    "id" : "bx",
    "mappings" : [ {
      "source" : "siteSubSection_ss",
      "target" : "siteSubSection_t",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "bx"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "ed87f0e3-191d-474d-b983-94f18e06478a",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "ed87f0e3-191d-474d-b983-94f18e06478a"
  }, {
    "type" : "solr-index",
    "id" : "fdc079d2-465e-44c4-b5ee-3503f709a6d2",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "fdc079d2-465e-44c4-b5ee-3503f709a6d2"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComMain-Talemetry"
  }
}, {
  "id" : "ParkerDotComMainMaster-default",
  "stages" : [ {
    "type" : "field-mapping",
    "id" : "21f5fec8-656f-4ce0-be8a-c877d8c1faac",
    "mappings" : [ ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "21f5fec8-656f-4ce0-be8a-c877d8c1faac"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "c9679f37-7b3c-4e93-ad52-580b5976ffe9",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "c9679f37-7b3c-4e93-ad52-580b5976ffe9"
  }, {
    "type" : "solr-index",
    "id" : "d94cf61c-8774-49bf-9a71-8447f0586383",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "d94cf61c-8774-49bf-9a71-8447f0586383"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComMainMaster-default"
  }
}, {
  "id" : "ParkerDotComMain-Categories",
  "stages" : [ {
    "type" : "javascript-index",
    "id" : "6m",
    "script" : "/* Part number character replacements for matching alternate characters\nTakes the original \"compressed part number\" (normalized, without special characters/spaces)\nand replaces specific characters to permit matching in cases where someone has transposed characters.\nThis code only handles complete replacements of single characters and does not take into account\nall the possible variations such as when there is a mixture of 1s, 0s etc and the user only makes\nan error on one of them.  These are considered edge cases and least likely to occur.\n\nWritten by Onix Networking\n\nReplaces the characters as follows:\n\nl for 1\nI for 1\ni for 1\n1 for i\n1 for I\n1 for l\no for 0\nO for 0\n0 for o\n0 for O\n\n*/\n\nvar partnum = doc.getFirstFieldValue(\"compressedPartNumber_s\"); // the original compressed part number\nvar newpart = \"\"; // where the additional variations will be stored\n\n\nvar newpartl=partnum.replace(/l/g , \"1\");\nvar newpartI=partnum.replace(/I/g , \"1\");\nvar newparti=partnum.replace(/i/g , \"1\");\nvar newpartonei=partnum.replace(/1/g , \"i\");\nvar newpartoneI=partnum.replace(/1/g , \"I\");\nvar newpartonel=partnum.replace(/1/g , \"l\");\nvar newparto=partnum.replace(/o/g , \"0\");\nvar newpartO=partnum.replace(/O/g , \"0\");\nvar newpartzeroo=partnum.replace(/0/g , \"o\");\nvar newpartzeroO=partnum.replace(/0/g , \"O\");\n\nif (newpartl!=partnum){\nnewpart = newpart + \",\" + newpartl;\n}\n\nif (newpartI!=partnum){\nnewpart = newpart + \",\" + newpartI;\n}\n\nif (newparti!=partnum){\nnewpart = newpart + \",\" + newparti;\n}\n\nif (newpartonei!=partnum){\nnewpart = newpart + \",\" + newpartonei;\n}\n\nif (newpartoneI!=partnum){\nnewpart = newpart + \",\" + newpartoneI;\n}\n\nif (newpartonel!=partnum){\nnewpart = newpart + \",\" + newpartonel;\n}\n\nif (newparto!=partnum){\nnewpart = newpart + \",\" + newparto;\n}\n\nif (newpartO!=partnum){\nnewpart = newpart + \",\" + newpartO;\n}\n\nif (newpartzeroo!=partnum){\nnewpart = newpart + \",\" + newpartzeroo;\n}\n\nif (newpartzeroO!=partnum){\nnewpart = newpart + \",\" + newpartzeroO;\n}\n\ndoc.setField(\"altpartnums_ss\",newpart); // stores the final list of alternate compressed part numbers\n\n\n\n",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "Javascript - replace characters in compressed part number",
    "condition" : "doc.hasField(\"compressedPartNumber_s\")",
    "secretSourceStageId" : "6m"
  }, {
    "type" : "javascript-index",
    "id" : "pfq",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n//  logger.info(\"**** Setting language on \" + id + \" ****\");\n  \n  var langname = \"\";\n  var doclangstring = doc.getFirstFieldValue(\"language_is\");\n  var langcode = \"\";\n  \n  \n    if (doclangstring!=null){\n  \n    switch (doclangstring) {\n\t\n\t\n        case \"-1\":\n            langname = \"English\";\n            langcode = \"EN\";\n            break;\n        case \"-2\":\n            langname = \"Français\"; // French\n        \tlangcode = \"FR\";\n            break;\n        case \"-3\":\n            langname = \"Deutsch\";  // German\n            langcode = \"DE\";\n            break;\n        case \"-4\":\n            langname = \"Italiano\";  // Italian\n            langcode = \"IT\";\n            break;\n        case \"-5\":\n            langname = \"Español\";  // Spanish\n            langcode = \"ES\";\n            break;\n        case \"-6\":\n            langname = \"Português\";  // Portuguese\n            langcode = \"PT\";\n            break;\n        case \"-7\":\n            langname = \"中文\";  // Simplified Chinese\n            langcode = \"ZH\";\n            break;\n        case \"-8\":\n            langname = \"繁體中文\";  // Traditional Chinese\n            langcode = \"TW\";\n            break;\n        case \"-9\":\n            langname = \"한국어\";  // Korean\n            langcode = \"KO\";\n            break;\n        case \"-10\":\n            langname = \"日本語\";  // Japanese\n            langcode = \"JP\";\n            break;\n        case \"-20\":\n            langname = \"Russian\";  // Russian\n            langcode = \"RU\";\n            break;\n        case \"-22\":\n            langname = \"Polski\";  // Polish\n            langcode = \"PL\";\n            break;\n        case \"-24\":\n            langname = \"suomi\";  // Finnish (Finland)\n            langcode = \"FI\";\n            break;\n        case \"-25\":\n            langname = \"Norsk\";  // Norwegian\n            langcode = \"NO\";\n            break;\n        case \"-26\":\n            langname = \"Svenska\";  // Swedish\n            langcode = \"SV\";\n            break;\n        case \"-27\":\n            langname = \"česky\";  // Czech\n            langcode = \"CS\";\n            break;\n        case \"-28\":\n            langname = \"Danish\";  // Dainish\n            langcode = \"DK\";\n            break;\n        case \"-29\":\n            langname = \"Nederlands\";  // Dutch\n            langcode = \"NL\";\n            break;\t\n        case \"-30\":\n            langname = \"Türkçe\";  // Turkish\n            langcode = \"TR\";\n            break;\n        case \"-31\":\n            langname = \"Hungarian\";  // Hungarian\n            langcode = \"HU\";\n            break;\n        case \"-32\":\n            langname = \"Thai\";  // Thai\n            langcode = \"TH\";\n            break;\n        case \"-34\":\n            langname = \"Vietnamese\";  // Vietnamese\n            langcode = \"VI\";\n            break;\t\t\n      default:\n        langname= \"Unknown\";\n                   }\n    }\n  \n\t   doc.setField(\"languageName_ss\",langname);\n       doc.setField(\"languageCode_ss\",langcode);\n       doc.setField(\"suggest_type_s\",\"standard\");\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set Language Name (JS)",
    "secretSourceStageId" : "pfq"
  }, {
    "type" : "regex-extractor",
    "id" : "jm",
    "rules" : [ {
      "source" : [ "siteSection_ss" ],
      "target" : "siteSection_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryName_ss" ],
      "target" : "countryName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadType_ss" ],
      "target" : "cadType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadURL_ss" ],
      "target" : "cadURL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportType_ss" ],
      "target" : "supportType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageName_ss" ],
      "target" : "languageName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryId_ss" ],
      "target" : "countryId_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "language_is" ],
      "target" : "language_is",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivision_ss" ],
      "target" : "parkerDivision_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivisionName_ss" ],
      "target" : "parkerDivisionName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "altpartnums_ss" ],
      "target" : "altpartnums_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageCode_ss" ],
      "target" : "languageCode_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "customerIds_ss" ],
      "target" : "customerIds_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split Fields",
    "secretSourceStageId" : "jm"
  }, {
    "type" : "javascript-index",
    "id" : "1q4",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n // logger.info(\"**** Reconfiguring fields on \" + id + \" ****\");\n  \n  \tvar doclangstring = doc.getFirstFieldValue(\"language_is\");\n  \tvar originalTitle = doc.getFirstFieldValue(\"title_t\");\n   \tvar originalTaxonomyL1 = doc.getFirstFieldValue(\"productTaxonomyL1_s\");\n    var originalTaxonomyL2 = doc.getFirstFieldValue(\"productTaxonomyL2_s\");\n    var originalTaxonomyL3 = doc.getFirstFieldValue(\"productTaxonomyL3_s\");\n    var originalTaxonomy = doc.getFirstFieldValue(\"productTaxonomy_t\");\n    var originalDescription = doc.getFirstFieldValue(\"description_t\");\n\t\n\tvar trimmedSiteSections = \"\";\n\tvar trimmedSiteSubSections = \"\";\n    var trimmedProductTypes = \"\";\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSection <start>\n\t\t**********************************/\n    var originalSiteSection = doc.getFieldValues(\"siteSection_ss\");\n    var newSiteSection = \"\";\n    \n\t\n    var arrayLength = originalSiteSection.length;\n    \n\t\n\tif (arrayLength >0){\n    for (var i = 0; i < arrayLength; i++)\n  {\n  \n  if (originalSiteSection[i] !=null && originalSiteSection[i] !=\"\"){\n  \n    \n    newSiteSection = newSiteSection + \",\" + originalSiteSection[i];\n    \n  }\n    \n    trimmedSiteSections = newSiteSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSection <end>\n\t\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSubSection <start>\n\t\t**********************************/\n    var originalSiteSubSection = doc.getFieldValues(\"siteSubSection_ss\");\n    var newSiteSubSection = \"\";\n    \n\t\n    var arrayLength4 = originalSiteSubSection.length;\n    \n\t\n\tif (arrayLength4 >0){\n    for (var l = 0; l < arrayLength4; l++)\n  {\n  \n  if (originalSiteSubSection[l] !=null && originalSiteSubSection[l] !=\"\"){\n  \n    \n    newSiteSubSection = newSiteSubSection + \",\" + originalSiteSubSection[l];\n    \n  }\n    \n    trimmedSiteSubSections = newSiteSubSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSubSection <end>\n\t\n\n\t\t/*********************************\n\t\tSplit and re-assemble productType <start>\n\t\t**********************************/\n    var originalProductType = doc.getFieldValues(\"productType_ss\");\n    var newProductType = \"\";\n    \n\t\n    var arrayLength5 = originalProductType.length;\n    \n\t\n\tif (arrayLength5 >0){\n    for (var m = 0; m < arrayLength5; m++)\n  {\n  \n  if (originalSiteSubSection[m] !=null && originalSiteSubSection[m] !=\"\"){\n  \n    \n    newProductType = newProductType + \",\" + originalProductType[m];\n    \n  }\n    \n    trimmedProductTypes = newProductType.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble producType <end>\n\n  \n // //logger.info(\"Setting data ...\");\n  \n    if (doclangstring!=null){\n  \n    switch (doclangstring) {\n\t\n\t\n        case \"-1\":\n\t\t\tdoc.setField(\"titleEN_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1EN_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2EN_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3EN_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyEN_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionEN_t\",originalDescription);\n        \tdoc.setField(\"siteSectionEN_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionEN_ss\",trimmedSiteSubSections);\n            doc.setField(\"productTypeEN_ss\",trimmedProductTypes);\n            break;\n        case \"-2\":\n            doc.setField(\"titleFR_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1FR_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2FR_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3FR_s\",originalTaxonomyL3);\n       \t\tdoc.setField(\"productTaxonomyFR_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionFR_t\",originalDescription);\n            break;\n        case \"-3\":\n            doc.setField(\"titleDE_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1DE_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2DE_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3DE_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyDE_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionDE_t\",originalDescription);\n            break;\n        case \"-4\":\n            doc.setField(\"titleIT_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1IT_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2IT_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3IT_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyIT_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionIT_t\",originalDescription);\n            break;\n        case \"-5\":\n            doc.setField(\"titleES_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1ES_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2ES_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3ES_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyES_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionES_t\",originalDescription);\n            break;\n        case \"-6\":\n            doc.setField(\"titlePT_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1PT_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2PT_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3PT_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyPT_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionPT_t\",originalDescription);\n            break;\n        case \"-7\":\n            doc.setField(\"titleZH_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1ZH_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2ZH_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3ZH_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyZH_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionZH_t\",originalDescription);\n            break;\n        case \"-8\":\n            doc.setField(\"titleTW_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1TW_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2TW_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3TW_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyTW_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionTW_t\",originalDescription);\n            break;\n        case \"-9\":\n            doc.setField(\"titleKO_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1KO_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2KO_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3KO_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyKO_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionKO_t\",originalDescription);\n            break;\n        case \"-10\":\n            doc.setField(\"titleJP_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1JP_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2JP_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3JP_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyJP_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionJP_t\",originalDescription);\n            break;\n        case \"-20\":\n            doc.setField(\"titleRU_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1RU_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2RU_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3RU_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyRU_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionRU_t\",originalDescription);\n            break;\n        case \"-22\":\n            doc.setField(\"titlePL_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1PL_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2PL_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3PL_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyPL_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionPL_t\",originalDescription);\n            break;\n        case \"-24\":\n            doc.setField(\"titleFI_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1FI_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2FI_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3FI_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyFI_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionFI_t\",originalDescription);\n            break;\n        case \"-25\":\n            doc.setField(\"titleNO_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1NO_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2NO_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3NO_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyNO_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionNO_t\",originalDescription);\n            break;\n        case \"-26\":\n            doc.setField(\"titleSV_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1SV_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2SV_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3SV_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomySV_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionSV_t\",originalDescription);\n            break;\n        case \"-27\":\n            doc.setField(\"titleCS_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1CS_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2CS_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3CS_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyCS_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionCS_t\",originalDescription);\n            break;\n        case \"-28\":\n            doc.setField(\"titleDK_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1DK_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2DK_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3DK_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyDK_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionDK_t\",originalDescription);\n            break;\n        case \"-29\":\n            doc.setField(\"titleNL_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1NL_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2NL_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3NL_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyNL_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionNL_t\",originalDescription);\n            break;\t\n        case \"-30\":\n            doc.setField(\"titleTR_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1TR_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2TR_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3TR_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyTR_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionTR_t\",originalDescription);\n            break;\n        case \"-31\":\n            doc.setField(\"titleHU_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1HU_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2HU_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3HU_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyHU_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionHU_t\",originalDescription);\n            break;\n        case \"-32\":\n            doc.setField(\"titleTH_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1TH_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2TH_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3TH_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyTH_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionTH_t\",originalDescription);\n            break;\n        case \"-34\":\n            doc.setField(\"titleVI_t\",originalTitle);\n        \tdoc.setField(\"productTaxonomyL1VI_s\",originalTaxonomyL1);\n        \tdoc.setField(\"productTaxonomyL2VI_s\",originalTaxonomyL2);\n        \tdoc.setField(\"productTaxonomyL3VI_s\",originalTaxonomyL3);\n        \tdoc.setField(\"productTaxonomyVI_t\",originalTaxonomy);\n        \tdoc.setField(\"descriptionVI_t\",originalDescription);\n            break;\t\t\n\n                   }\n    }\n  \n\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Copy data to lang-specific fields (JS)",
    "secretSourceStageId" : "1q4"
  }, {
    "type" : "javascript-index",
    "id" : "4ae",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** siteSection translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n\tdoc.removeFields(\"_translation_SiteSection_ENLUError_s\");\n    doc.removeFields(\"_translation_SiteSection_LUError_s\");\n    \n    \n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"siteSection_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n\t\t\t//logger.info(\"language is not null and not English\");\n\t\t\t//logger.info(\"English Value to find: \" + englishValue);\n\t\t\t//logger.info(\"**** get English Parent ***\");\n  \n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"siteSection\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n                doc.setField(\"_translation_SiteSection_ENLUError_s\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      doc.setField(\"_translation_SiteSection_LUError_s\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"siteSectionEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionPT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionPT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionPL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionPL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}\n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "siteSectionXX facet translation (JS)",
    "secretSourceStageId" : "4ae"
  }, {
    "type" : "javascript-index",
    "id" : "rsq",
    "script" : "function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** siteSubSection translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    doc.removeFields(\"_translation_SiteSubSection_ENLUError\");\n    doc.removeFields(\"_translation_SiteSubSection_LUError\");\n    \n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"siteSubSection_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n          //logger.info(\"language is not null\");\n          //logger.info(\"English Value to find: \" + englishValue);\n          //logger.info(\"**** get English Parent ***\");\n  \n  \t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"siteSubSection\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_SiteSubSection_ENLUError\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      doc.setField(\"_translation_SiteSubSection_LUError\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"siteSubSectionEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionPT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionPT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionPL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionPL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "siteSubSectionXX facet translation (JS)",
    "secretSourceStageId" : "rsq"
  }, {
    "type" : "javascript-index",
    "id" : "x6p",
    "script" : "function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** productType translation function main ***\")\n  \n  if (doc.getId() != null) { \n    doc.removeFields(\"_translation_ProductType_ENLUError\");\n    doc.removeFields(\"_translation_ProductType_LUError\");\n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"productType_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n          //logger.info(\"language is not null\");\n          //logger.info(\"English Value to find: \" + englishValue);\n          //logger.info(\"**** get English Parent ***\");\n  \n  \t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"Product Category\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_ProductType_ENLUError\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      doc.setField(\"_translation_ProductType_LUError\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"productTypeEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypePT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypePT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypePL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypePL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"productTypeVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"productTypeVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "productTypeXX facet translation (JS)",
    "secretSourceStageId" : "x6p"
  }, {
    "type" : "regex-extractor",
    "id" : "m25",
    "rules" : [ {
      "source" : [ "siteSectionEN_ss" ],
      "target" : "siteSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFR_ss" ],
      "target" : "siteSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDE_ss" ],
      "target" : "siteSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionIT_ss" ],
      "target" : "siteSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionES_ss" ],
      "target" : "siteSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPT_ss" ],
      "target" : "siteSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionZH_ss" ],
      "target" : "siteSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTW_ss" ],
      "target" : "siteSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionKO_ss" ],
      "target" : "siteSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionJP_ss" ],
      "target" : "siteSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionRU_ss" ],
      "target" : "siteSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPL_ss" ],
      "target" : "siteSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFI_ss" ],
      "target" : "siteSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNO_ss" ],
      "target" : "siteSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionSV_ss" ],
      "target" : "siteSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionCS_ss" ],
      "target" : "siteSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDK_ss" ],
      "target" : "siteSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNL_ss" ],
      "target" : "siteSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTR_ss" ],
      "target" : "siteSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionHU_ss" ],
      "target" : "siteSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTH_ss" ],
      "target" : "siteSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionVI_ss" ],
      "target" : "siteSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSection Lang Fields",
    "secretSourceStageId" : "m25"
  }, {
    "type" : "regex-extractor",
    "id" : "gag",
    "rules" : [ {
      "source" : [ "siteSubSectionEN_ss" ],
      "target" : "siteSubSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFR_ss" ],
      "target" : "siteSubSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDE_ss" ],
      "target" : "siteSubSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionIT_ss" ],
      "target" : "siteSubSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionES_ss" ],
      "target" : "siteSubSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPT_ss" ],
      "target" : "siteSubSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionZH_ss" ],
      "target" : "siteSubSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTW_ss" ],
      "target" : "siteSubSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionKO_ss" ],
      "target" : "siteSubSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionJP_ss" ],
      "target" : "siteSubSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionRU_ss" ],
      "target" : "siteSubSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPL_ss" ],
      "target" : "siteSubSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFI_ss" ],
      "target" : "siteSubSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNO_ss" ],
      "target" : "siteSubSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionSV_ss" ],
      "target" : "siteSubSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionCS_ss" ],
      "target" : "siteSubSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDK_ss" ],
      "target" : "siteSubSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNL_ss" ],
      "target" : "siteSubSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTR_ss" ],
      "target" : "siteSubSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionHU_ss" ],
      "target" : "siteSubSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTH_ss" ],
      "target" : "siteSubSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionVI_ss" ],
      "target" : "siteSubSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSubSection Lang Fields",
    "secretSourceStageId" : "gag"
  }, {
    "type" : "regex-extractor",
    "id" : "gagpt",
    "rules" : [ {
      "source" : [ "productTypeEN_ss" ],
      "target" : "productTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeFR_ss" ],
      "target" : "productTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeDE_ss" ],
      "target" : "productTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeIT_ss" ],
      "target" : "productTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeES_ss" ],
      "target" : "productTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypePT_ss" ],
      "target" : "productTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeZH_ss" ],
      "target" : "productTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTW_ss" ],
      "target" : "productTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeKO_ss" ],
      "target" : "productTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeJP_ss" ],
      "target" : "productTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeRU_ss" ],
      "target" : "productTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypePL_ss" ],
      "target" : "productTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeFI_ss" ],
      "target" : "productTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeNO_ss" ],
      "target" : "productTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeSV_ss" ],
      "target" : "productTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeCS_ss" ],
      "target" : "productTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeDK_ss" ],
      "target" : "productTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeNL_ss" ],
      "target" : "productTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTR_ss" ],
      "target" : "productTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeHU_ss" ],
      "target" : "productTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTH_ss" ],
      "target" : "productTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeVI_ss" ],
      "target" : "productTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split productType Lang Fields",
    "secretSourceStageId" : "gagpt"
  }, {
    "type" : "javascript-index",
    "id" : "h9t",
    "script" : "/* Last modified: 2018-01-10\n   Last modified by:  Terry Chambers / Onix\n   Change summary:\n   2018-01-10 - corrects productTaxonomyL1, adds L2, L3\n   2018-01-08 - adds new fields for Sprint 2 (productType, newsEventType, otherType)\n*/\n// HASHING FUNCTION\nfunction hashTheFacet(doc, facetToProcess, id) {\n    var facetValues;\n    var newHashedFacetValue = [];\n    var newHashedFacetFQ = [];\n    // get the values of the facet to be processed\n    facetValues = doc.getFieldValues(facetToProcess);\n    //logger.info(\"hashTheFacet(\" + facetToProcess + \")\");\n    // loop through the facet values and create hashes for them\n    facetValues.forEach(function (f) {\n\t\tif (f  != null){\n\t\t\tif (f.length!==0){\n\t\t\t\tvar newHashedFacet = f.hashCode();\t\t\n\t\t\t\tnewHashedFacetValue.push(\"p\" + newHashedFacet + \"$$$\" + f);\n\t\t\t\tnewHashedFacetFQ.push(\"p\" + newHashedFacet);\n\t\t\t}\n\t\t}\n    });\n    // return the hashed items\n    return [newHashedFacetValue, newHashedFacetFQ];\n}\n\nfunction computeLanguages(doc, id) {\n    // get the list of languages from the document\n    var langsfromdoc = doc.getFieldValues(\"language_is\");\n    var languages = [];\n    //logger.info(\"langsfromdoc \" + langsfromdoc);\n    //logger.info(\"Num of languages: \" + langsfromdoc.length);\n    // iterate through the languages and put them into an array\n    for each(var lang in langsfromdoc) {\n            switch (lang) {\n            case \"-1\":\n                languages.push('EN');\n                break;\n            case \"-2\":\n                languages.push('FR');\n                break;\n            case \"-3\":\n                languages.push('DE');\n                break;\n            case \"-4\":\n                languages.push('IT');\n                break;\n            case \"-5\":\n                languages.push('ES');\n                break;\n            case \"-6\":\n                languages.push('PT');\n                break;\n            case \"-7\":\n                languages.push('ZH');\n                break;\n            case \"-8\":\n                languages.push('TW');\n                break;\n            case \"-9\":\n                languages.push('KO');\n                break;\n            case \"-10\":\n                languages.push('JP');\n                break;\n            case \"-20\":\n                languages.push('RU');\n                break;\n            case \"-22\":\n                languages.push('PL');\n                break;\n            case \"-24\":\n                languages.push('FI');\n                break;\n            case \"-25\":\n                languages.push('NO');\n                break;\n            case \"-26\":\n                languages.push('SV');\n                break;\n            case \"-27\":\n                languages.push('CS');\n                break;\n            case \"-28\":\n                languages.push('DK');\n                break;\n            case \"-29\":\n                languages.push('NL');\n                break;\n            case \"-30\":\n                languages.push('TR');\n                break;\n            case \"-31\":\n                languages.push('HU');\n                break;\n            case \"-32\":\n                languages.push('TH');\n                break;\n            case \"-34\":\n                languages.push('VI');\n                break;\n            }\n        }\n        // if no languages found, try them all, to be safe\n    if (languages.length === 0) {\n        //logger.info(\"************* no languages found *******************\");\n        languages = ['EN', 'FR', 'DE', 'IT', 'ES', 'PT', 'ZH', 'TW', 'KO', 'JP', 'RU', 'PL', 'FI', 'NO', 'SV', 'CS', 'DK', 'NL', 'TR', 'HU', 'TH', 'VI'];\n    }\n    return languages;\n}\n// MAIN FUNCTION\nfunction (doc) {\n    //var facetsToHash; // array that we'll populate with our hashes\n    var id = doc.getId();\n    // list of facet fields that need to be processed\n    var listOfFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"parkerDivisionName_ss\", \"productTaxonomyL1_s\", \"productTaxonomyL2_s\", \"productTaxonomyL3_s\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"brand_ss\", \"cadType_ss\", \"product_ss\", \"languageName_ss\", \"fileType_ss\", \"eventYear_i\", \"newsYear_i\"];\n    // list of facet fields that are localized to other languages and need to be processed\n    var listOfLangFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"product_ss\", \"productTaxonomyL1_s\",\"productTaxonomyL2_s\",\"productTaxonomyL3_s\"];\n    var languages = []; // used to track the applicable languages\n    // if there are any language-based facets, compute the languages for this document\n    //logger.info(\"This is the list of LangFacets \" + listOfLangFacets);\n    if (listOfLangFacets) {\n        languages = computeLanguages(doc, id);\n        //logger.info(\"Finished computeLanguages(doc, id): \" + doc + \" , \" + id);\n        //logger.info(\"Resulting languages are \" + languages);\n    }\n    // process each facet from \"listOfFacets\" and store the values on to the document\n    for each(var facet in listOfFacets) {\n            //logger.info(\"The facet is \" + facet);\n            var location = facet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n            var tmpFacet = facet; // store the full facet name temporarily\n            var thisFacetShort = tmpFacet.substring(0, location); // take the facet name without the _ and data type\n            var facetsToHash = hashTheFacet(doc, facet, id); // calculate the hashes\n            //logger.info(\"facetsToHash \" + facetsToHash);\n            // takes the function output and puts into a string and then array\n            //logger.info(Object.prototype.toString.call(facetsToHash));\n            var facetsWithHashes = facetsToHash[0];\n            //logger.info(facetsWithHashes);\n            if (facetsWithHashes.length!==0) {\n                var facetsWithHashesArray = facetsWithHashes;\n                for each(var fwh in facetsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_facet\", fwh); // set the _facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array  \n            var fqsWithHashes = facetsToHash[1];\n            if (fqsWithHashes.length!==0) {\n                var fqsWithHashesArray = fqsWithHashes;\n                for each(var fqs in fqsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_fq\", fqs); // set the _fq field on the document\n                }\n            }\n        }\n        // process each facet from \"listOfLangFacets\" and store the values on the document\n    for each(var langFacet in listOfLangFacets) {\n        var location = langFacet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n        var thisFacetVarType = langFacet.substring(location + 1, langFacet.length); // take the data type from the facet name\n        for each(var lang in languages) {\n            var langFacetShort = langFacet.substring(0, location); // clear the field from previous runs\n            var thisFacetFull = langFacetShort + lang + \"_\" + thisFacetVarType; // compute the name of the full facet to process hashes for\n            langFacetShort = langFacetShort + lang; // compute the prefix of the facet name that will be written back to the document\n            var facetsToHash = hashTheFacet(doc, thisFacetFull, id); // calculate the hashes\n            // takes the function output and puts into a string and then array      \n            var facetsWithHashesLG = facetsToHash[0];\n            //logger.info(\"facetsWithHashesLG: \" + facetsWithHashesLG);\n            if (facetsWithHashesLG.length!==0) {\n                var facetsWithHashesLGArray = facetsWithHashesLG;\n                for each(var lg in facetsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_facet\", lg); // set the XX_facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array      \n            var fqsWithHashesLG = facetsToHash[1];\n            if (fqsWithHashesLG.length!==0) {\n                var fqsWithHashesLGArray = fqsWithHashesLG;\n                for each(var fqlg in fqsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_fq\", fqlg); // set the XX_fq field on the document\n                }\n            }\n        }\n    }\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Facet Hashing",
    "secretSourceStageId" : "h9t"
  }, {
    "type" : "javascript-index",
    "id" : "xjp",
    "script" : "/* Last modified: 2018-06-10\n   Last modified by:  Terry Chambers / Onix\n   Change summary:\n   2018-06-10 - switch to facet encodings with Base64\n   2018-01-10 - corrects productTaxonomyL1, adds L2, L3\n   2018-01-08 - adds new fields for Sprint 2 (productType, newsEventType, otherType)\n*/\n\nfunction decode(encoded){\n  \n  \n  var Base64 = {\n\tdecode: function (str) {\n\t\treturn new java.lang.String(java.util.Base64.decoder.decode(str));\n\t},\n\tencode: function (str) {\n\t\treturn java.util.Base64.encoder.encodeToString(str.bytes);\n\t}\n};\n  \n  var decodedValue= Base64.decode(encoded);\n  \n  return decodedValue;\n  \n}\n\nfunction encode(decoded){\n  \n  \n  var Base64 = {\n\tdecode: function (str) {\n\t\treturn new java.lang.String(java.util.Base64.decoder.decode(str));\n\t},\n\tencode: function (str) {\n\t\treturn java.util.Base64.encoder.encodeToString(str.bytes);\n\t}\n};\n  \n  var encodedValue= Base64.encode(decoded);\n  \n  return encodedValue;\n  \n}\n\n\n// Encoding Facet FUNCTION\nfunction encodeTheFacet(doc, facetToProcess, id) {\n    var facetedValues;\n    var newEncodedFacetValue = [];\n    var newEncodedFacetFQ = [];\n    // get the values of the facet to be processed\n\n  //logger.info(\"zzz encodings the facets now ...\");\n  \n \n  \n  facetedValues = doc.getFieldValues(facetToProcess);\n \n  var tmp = facetedValues.toString();\n  //logger.info(\"zzz tmp: \" + tmp);\n  \n  var facetedValuesString = facetedValues.toString().replace(\"[\",\"\").replace(\"]\",\"\");\n  //logger.info(\"zzz original: \" + facetedValuesString);\n  facetedValuesString = facetedValuesString.replace(\", 1/\", \"~~~ 1/\");\n  //logger.info(\"zzz first replace: \" + facetedValuesString);\n  facetedValuesString = facetedValuesString.replace(\", 2/\", \"~~~ 2/\");\n  //logger.info(\"zzz second replace: \" + facetedValuesString);\n  var facetedValuesSplit = facetedValuesString.split(\"~~~ \");\n  \n  \n  \n    //logger.info(\"encodeTheFacet(\" + facetToProcess + \")\");\n    // loop through the facet values and create encodings for them\n    facetedValuesSplit.forEach(function (f) {\n\t\tif (f  != null){\n\t\t\tif (f.length!==0){\n              //logger.info(\"zzz split for each value: \" + f);\n                var newEncodedFacet = encode(f);\n\t\t\t\tnewEncodedFacetValue.push(f + \"$$$\" + newEncodedFacet);\n\t\t\t\tnewEncodedFacetFQ.push(newEncodedFacet);\n\t\t\t}\n\t\t}\n    });\n\n    // return the encoded items\n\n    return [newEncodedFacetValue, newEncodedFacetFQ];\n}\n\nfunction computeLanguages(doc, id) {\n    // get the list of languages from the document\n    var langsfromdoc = doc.getFieldValues(\"language_is\");\n    var languages = [];\n    //logger.info(\"zzz langsfromdoc \" + langsfromdoc);\n    //logger.info(\"zzz Num of languages: \" + langsfromdoc.length);\n    // iterate through the languages and put them into an array\n    for each(var lang in langsfromdoc) {\n            switch (lang) {\n            case \"-1\":\n                languages.push('EN');\n                break;\n            case \"-2\":\n                languages.push('FR');\n                break;\n            case \"-3\":\n                languages.push('DE');\n                break;\n            case \"-4\":\n                languages.push('IT');\n                break;\n            case \"-5\":\n                languages.push('ES');\n                break;\n            case \"-6\":\n                languages.push('PT');\n                break;\n            case \"-7\":\n                languages.push('ZH');\n                break;\n            case \"-8\":\n                languages.push('TW');\n                break;\n            case \"-9\":\n                languages.push('KO');\n                break;\n            case \"-10\":\n                languages.push('JP');\n                break;\n            case \"-20\":\n                languages.push('RU');\n                break;\n            case \"-22\":\n                languages.push('PL');\n                break;\n            case \"-24\":\n                languages.push('FI');\n                break;\n            case \"-25\":\n                languages.push('NO');\n                break;\n            case \"-26\":\n                languages.push('SV');\n                break;\n            case \"-27\":\n                languages.push('CS');\n                break;\n            case \"-28\":\n                languages.push('DK');\n                break;\n            case \"-29\":\n                languages.push('NL');\n                break;\n            case \"-30\":\n                languages.push('TR');\n                break;\n            case \"-31\":\n                languages.push('HU');\n                break;\n            case \"-32\":\n                languages.push('TH');\n                break;\n            case \"-34\":\n                languages.push('VI');\n                break;\n            }\n        }\n        // if no languages found, try them all, to be safe\n    if (languages.length === 0) {\n        //logger.info(\"zzz ************* no languages found *******************\");\n        languages = ['EN', 'FR', 'DE', 'IT', 'ES', 'PT', 'ZH', 'TW', 'KO', 'JP', 'RU', 'PL', 'FI', 'NO', 'SV', 'CS', 'DK', 'NL', 'TR', 'HU', 'TH', 'VI'];\n    }\n    return languages;\n}\n// MAIN FUNCTION\nfunction (doc) {\n    var id = doc.getId();\n  if(id){\n    // list of facet fields that need to be processed\n   // var listOfFacets = [\"productTaxonomy_ss\"];\n  var listOfFacets = [\"productTaxonomy_ss\"];\n    // list of facet fields that are localized to other languages and need to be processed\n    var listOfLangFacets = [\"productTaxonomy_ss\"];\n    var languages = []; // used to track the applicable languages\n    var lang;\n    // if there are any language-based facets, compute the languages for this document\n    //logger.info(\"This is the list of LangFacets \" + listOfLangFacets);\n    if (listOfLangFacets) {\n        languages = computeLanguages(doc, id);\n        //logger.info(\"Finished computeLanguages(doc, id): \" + doc + \" , \" + id);\n        //logger.info(\"zzz Resulting languages are \" + languages);\n    }\n    // process each facet from \"listOfFacets\" and store the values on to the document\n    for each(var facet in listOfFacets) {\n            //logger.info(\"The facet is \" + facet);\n            var location = facet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n            var tmpFacet = facet; // store the full facet name temporarily\n            var thisFacetShort = tmpFacet.substring(0, location); // take the facet name without the _ and data type\n            var facetsToEncode = encodeTheFacet(doc, facet, id); // calculate the encodings\n            //logger.info(\"facetsToEncode \" + facetsToEncode);\n            // takes the function output and puts into a string and then array\n            //logger.info(Object.prototype.toString.call(facetsToEncode));\n            var facetsWithEncodings = facetsToEncode[0];\n            //logger.info(facetsWithEncodings);\n            if (facetsWithEncodings.length!==0) {\n                var facetsWithEncodingsArray = facetsWithEncodings;\n                for each(var fwh in facetsWithEncodingsArray) {\n                  //logger.info(\"zzz adding \" + fwh);\n                    doc.addField(thisFacetShort + \"_facet\", fwh); // set the _facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array  \n            var fqsWithEncodings = facetsToEncode[1];\n            if (fqsWithEncodings.length!==0) {\n                var fqsWithEncodingsArray = fqsWithEncodings;\n                for each(var fqs in fqsWithEncodingsArray) {\n                  //logger.info(\"zzz adding \" + fqs);\n                    doc.addField(thisFacetShort + \"_fq\", fqs); // set the _fq field on the document\n                }\n            }\n        }\n        // process each facet from \"listOfLangFacets\" and store the values on the document\n    for each(var langFacet in listOfLangFacets) {\n        var location = langFacet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n        var thisFacetVarType = langFacet.substring(location + 1, langFacet.length); // take the data type from the facet name\n        for each(lang in languages) {\n          //logger.info(\"zzz processing: \" + lang);\n            var langFacetShort = langFacet.substring(0, location); // clear the field from previous runs\n            var thisFacetFull = langFacetShort + lang + \"_\" + thisFacetVarType; // compute the name of the full facet to process encodings for\n          //logger.info(\"zzz thisFacetFull: \" + thisFacetFull);\n            langFacetShort = langFacetShort + lang; // compute the prefix of the facet name that will be written back to the document\n            var facetsToEncode = encodeTheFacet(doc, thisFacetFull, id); // calculate the encodings\n            // takes the function output and puts into a string and then array      \n            var facetsWithEncodingsLG = facetsToEncode[0];\n            //logger.info(\"zzz facetsWithEncodingsLG for \" + lang + \" : \" + facetsWithEncodingsLG);\n            if (facetsWithEncodingsLG.length!==0) {\n                var facetsWithEncodingsLGArray = facetsWithEncodingsLG;\n                for each(var lg in facetsWithEncodingsLGArray) {\n                    doc.addField(langFacetShort + \"_facet\", lg); // set the XX_facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array      \n            var fqsWithEncodingsLG = facetsToEncode[1];\n            if (fqsWithEncodingsLG.length!==0) {\n                var fqsWithEncodingsLGArray = fqsWithEncodingsLG;\n                for each(var fqlg in fqsWithEncodingsLGArray) {\n                    doc.addField(langFacetShort + \"_fq\", fqlg); // set the XX_fq field on the document\n                }\n            }\n        }\n    }\n  }\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Facet Encoding for Taxonomy Field (JS)",
    "secretSourceStageId" : "xjp"
  }, {
    "type" : "javascript-index",
    "id" : "t2w",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n  \tvar doclangstring = doc.getFirstFieldValue(\"language_is\");\n   \tvar originalTaxonomyfq = doc.getFirstFieldValue(\"productTaxonomy_fq\");\n    var originalTaxonomyfacet = doc.getFirstFieldValue(\"productTaxonomy_facet\");\n\t\n  \n    if (doclangstring!=null){\n  \n    switch (doclangstring) {\n\t\n\t\n        case \"-1\":\n        \tdoc.setField(\"productTaxonomyEN_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyEN_facet\",originalTaxonomyfacet);\n            break;\n        case \"-2\":\n        \tdoc.setField(\"productTaxonomyFR_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyFR_facet\",originalTaxonomyfacet);\n            break;\n        case \"-3\":\n        \tdoc.setField(\"productTaxonomyDE_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyDE_facet\",originalTaxonomyfacet);\n            break;\n        case \"-4\":\n        \tdoc.setField(\"productTaxonomyIT_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyIT_facet\",originalTaxonomyfacet);\n            break;\n        case \"-5\":\n        \tdoc.setField(\"productTaxonomyES_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyES_facet\",originalTaxonomyfacet);\n            break;\n        case \"-6\":\n        \tdoc.setField(\"productTaxonomyPT_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyPT_facet\",originalTaxonomyfacet);\n            break;\n        case \"-7\":\n        \tdoc.setField(\"productTaxonomyZH_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyZH_facet\",originalTaxonomyfacet);\n            break;\n        case \"-8\":\n        \tdoc.setField(\"productTaxonomyTW_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyTW_facet\",originalTaxonomyfacet);\n            break;\n        case \"-9\":\n        \tdoc.setField(\"productTaxonomyKO_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyKO_facet\",originalTaxonomyfacet);\n            break;\n        case \"-10\":\n        \tdoc.setField(\"productTaxonomyJP_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyJP_facet\",originalTaxonomyfacet);\n            break;\n        case \"-20\":\n        \tdoc.setField(\"productTaxonomyRU_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyRU_facet\",originalTaxonomyfacet);\n            break;\n        case \"-22\":\n        \tdoc.setField(\"productTaxonomyPL_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyPL_facet\",originalTaxonomyfacet);\n            break;\n        case \"-24\":\n        \tdoc.setField(\"productTaxonomyFI_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyFI_facet\",originalTaxonomyfacet);\n            break;\n        case \"-25\":\n        \tdoc.setField(\"productTaxonomyNO_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyNO_facet\",originalTaxonomyfacet);\n            break;\n        case \"-26\":\n        \tdoc.setField(\"productTaxonomySV_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomySV_facet\",originalTaxonomyfacet);\n            break;\n        case \"-27\":\n        \tdoc.setField(\"productTaxonomyCS_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyCS_facet\",originalTaxonomyfacet);\n            break;\n        case \"-28\":\n        \tdoc.setField(\"productTaxonomyDK_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyDK_facet\",originalTaxonomyfacet);\n            break;\n        case \"-29\":\n        \tdoc.setField(\"productTaxonomyNL_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyNL_facet\",originalTaxonomyfacet);\n            break;\t\n        case \"-30\":\n        \tdoc.setField(\"productTaxonomyTR_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyTR_facet\",originalTaxonomyfacet);\n            break;\n        case \"-31\":\n        \tdoc.setField(\"productTaxonomyHU_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyHU_facet\",originalTaxonomyfacet);\n            break;\n        case \"-32\":\n        \tdoc.setField(\"productTaxonomyTH_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyTH_facet\",originalTaxonomyfacet);\n            break;\n        case \"-34\":\n        \tdoc.setField(\"productTaxonomyVI_fq\",originalTaxonomyfq);\n\t\t\tdoc.setField(\"productTaxonomyVI_facet\",originalTaxonomyfacet);\n            break;\t\t\n\n                   }\n    }\n  \n\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Copy Taxonomy fields to Language Fields",
    "secretSourceStageId" : "t2w"
  }, {
    "type" : "field-mapping",
    "id" : "68f77de5-37e7-470b-bec5-d660e316d2de",
    "mappings" : [ {
      "source" : "title_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "autosuggest_product_text",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "autosuggest_category_text",
      "operation" : "copy"
    }, {
      "source" : "urlKeyword_s",
      "target" : "urlKeyword_exact",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "field-mapping",
    "secretSourceStageId" : "68f77de5-37e7-470b-bec5-d660e316d2de"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "a31e5f1e-7783-4038-8062-706a962593ad",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : true,
    "label" : "solr-dynamic-field-name-mapping",
    "secretSourceStageId" : "a31e5f1e-7783-4038-8062-706a962593ad"
  }, {
    "type" : "solr-index",
    "id" : "08d93fd2-afed-433d-ba00-7d6fc8c613f5",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "label" : "solr-index",
    "secretSourceStageId" : "08d93fd2-afed-433d-ba00-7d6fc8c613f5"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComMain-Categories"
  }
}, {
  "id" : "default",
  "stages" : [ {
    "type" : "field-mapping",
    "id" : "1201f6b3-875e-44cf-8baa-3cfc0e62dc38",
    "mappings" : [ ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "1201f6b3-875e-44cf-8baa-3cfc0e62dc38"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "ea38d25b-dd04-4d5f-a83e-ef70bc18fb03",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "ea38d25b-dd04-4d5f-a83e-ef70bc18fb03"
  }, {
    "type" : "solr-index",
    "id" : "ce69baba-7cc9-4f3b-99ca-f380b3f49649",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "ce69baba-7cc9-4f3b-99ca-f380b3f49649"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "default"
  }
}, {
  "id" : "ParkerDotComMain-EconfigParts",
  "stages" : [ {
    "type" : "javascript-index",
    "id" : "ykd",
    "script" : "//var PARKER_FILTER_URL = \"http://localhost:8764/api/apollo/query-pipelines/parkerProducts2-default/collections/parkerProducts2/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&q=TOKENS&debug=false&rows=2\";\nvar PARKER_FILTER_URL = \"http://localhost:8764/api/apollo/query-pipelines/lookup/collections/ParkerDotComMainMaster/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&q=TOKENS&debug=false&rows=2\";\n\nvar AND = \"%20AND%20\";\n//var SECURITY_TOKEN = \"Basic YWRtaW46UGFzc3dvcmQxMjM=\";\nvar SECURITY_TOKEN = \"Basic YWRtaW46UGFya2VyMTIz\";\n\n\n// Create Parker Editors array\nvar filterEditor = {\n    getUrl: function (doc) {\n        // Build up the url rest parameters\n        var parameters = \"productType_ss:%22Part%22\";\n        parameters += AND;\n        parameters += \"parkerPartNumber_s:\";\n        parameters += \"%22\";\n        parameters += encodeURIComponent(doc.getFirstFieldValue(\"id\"));\n        parameters += \"%22\";\n\n        // Replace the unique \"TOKENS\" field with the parameter tokens\n        return PARKER_FILTER_URL.replace(\"TOKENS\", parameters);\n    },\n    editData: function (doc, jsonDoc) {\n        // Take the \"parkerPartNumber_s\" value and perform a search to see if \n        // we get \"0\" results or not.  If we get 1 or more results then we set \n        // a field called \"ecomm_duplicate_s\" with a value of \"yes\".\n        \n            doc.addField(\"ecomm_duplicate_s\", \"yes\");\n        \n    }\n};\n\n/*\n * Function to make and return a URL connection\n * @param {type} urlString\n * @returns {java.net.HttpURLConnection|connect.connection}\n */\nfunction connectToPipe(urlString, securityToken) {\n    var URL = Java.type('java.net.URL');\n    var url = new URL(urlString);\n    var HttpURLConnection = Java.type('java.net.HttpURLConnection');\n    var connection = Java.type('java.net.HttpURLConnection');\n\n    try {\n\n        connection = url.openConnection();\n        connection.setRequestProperty(\"Authorization\", securityToken);\n        connection.connect();\n\n        var status = connection.getResponseCode();\n\n        if (status !== HttpURLConnection.HTTP_OK && status !== HttpURLConnection.HTTP_MOVED_PERM) {\n            connection = null;\n            //logger.info(\"Parker status: \" + status);\n        }\n\n    } catch (e) {\n        logger.error(\"Parker  connectToPipe(): \" + e);\n      logger.info(\"Parker  connectToPipe(): \" + e);\n    }\n\n    return connection;\n}\n\n\n/*\n * Intercept Pipeline\n * Doc is the heuristics   \n */\nfunction injectData(doc, editor) {\n    var InputStreamReader = Java.type('java.io.InputStreamReader');\n    var BufferedReader = Java.type('java.io.BufferedReader');\n\n    try {\n        var urlStr = editor.getUrl(doc);\n\n        //logger.info(\"Parker url = \" + urlStr);\n\n        // Connect to the parkerProducts collection\n        var connection = connectToPipe(urlStr, SECURITY_TOKEN);\n\n        if (connection !== null) {\n           //logger.info(\"Parker  Connection is good\");\n\n            var reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n            var readerResponse = JSON.parse(reader.readLine());\n            var numDocs = readerResponse.response.numFound;\n\n            // Lets loop through each doc in the docs[] array\n            for (i = 0; i < numDocs; i++) {\n                var jsonDoc = readerResponse.response.docs[i];\n                editor.editData(doc, jsonDoc);\n            }\n\n            reader.close();\n            connection.disconnect();\n        } else {\n            logger.info(\"Parker Connection is null\");\n        }\n    } catch (e) {\n        logger.error(\"Parker  injectData(): \" + e);\n        \n    }\n\n    return doc;\n}\n\n\nfunction (doc) {\n\n    if (doc.getId() !== null) {\n        //logger.info(\"Check for duplicates code ...\");\n        injectData(doc, filterEditor);\n        //logger.info(\"Finished checking for duplicates code\");\n    }\n\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Check for duplicate Parts (JS)",
    "secretSourceStageId" : "ykd"
  }, {
    "type" : "exclude-doc",
    "id" : "6ho",
    "matchRules" : [ {
      "field" : "ecomm_duplicate_s",
      "pattern" : "yes"
    } ],
    "type" : "exclude-doc",
    "skip" : false,
    "label" : "Drop duplicate parts (Exclude Documents)",
    "secretSourceStageId" : "6ho"
  }, {
    "type" : "regex-extractor",
    "id" : "8cv",
    "rules" : [ {
      "source" : [ "pageURL_s" ],
      "target" : "urlKeyword_s",
      "writeMode" : "overwrite",
      "pattern" : "ParkerExternalConfigCmds\\?Key=.*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Extract urlKeyword Parameter",
    "secretSourceStageId" : "8cv"
  }, {
    "type" : "javascript-index",
    "id" : "un",
    "script" : "// Author: Michael Weigel 3/06/18\n\n// Define some constants\nvar PARKER_URL = \"http://localhost:8764/api/apollo/query-pipelines/lookup/collections/ParkerDotComMainMaster/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&q=TOKENS&debug=false&rows=100\";\nvar PARKER_DIV_URL = \"http://localhost:8764/api/apollo/query-pipelines/ParkerDivisions-default/collections/ParkerDivisions/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&q=TOKENS&debug=false&rows=100\";\n\nvar AND = \"%20AND%20\";\n//var SECURITY_TOKEN = \"Basic YWRtaW46UGFzc3dvcmQxMjM=\";\nvar SECURITY_TOKEN = \"Basic YWRtaW46UGFya2VyMTIz\";\n\nvar languageMap = {\n    \"-1\": {name: \"English\", code: \"EN\", num: -1},\n    \"-2\": {name: \"French\", code: \"FR\", num: -2},\n    \"-3\": {name: \"German\", code: \"DE\", num: -3},\n    \"-4\": {name: \"Italian\", code: \"IT\", num: -4},\n    \"-5\": {name: \"Spanish\", code: \"ES\", num: -5},\n    \"-6\": {name: \"Portuguese\", code: \"PT\", num: -6},\n    \"-7\": {name: \"Simplified Chinese\", code: \"ZH\", num: -7},\n    \"-8\": {name: \"Traditional Chinese\", code: \"TW\", num: -8},\n    \"-9\": {name: \"Korean\", code: \"KO\", num: -9},\n    \"-10\": {name: \"Japanese\", code: \"JP\", num: -10},\n    \"-20\": {name: \"Russian\", code: \"RU\", num: -20},\n    \"-22\": {name: \"Polish\", code: \"PL\", num: -22},\n    \"-24\": {name: \"Finnish\", code: \"FI\", num: -24},\n    \"-25\": {name: \"Norwegian\", code: \"NO\", num: -25},\n    \"-26\": {name: \"Swedish\", code: \"SV\", num: -26},\n    \"-27\": {name: \"Czech\", code: \"CS\", num: -27},\n    \"-28\": {name: \"Danish\", code: \"DK\", num: -28},\n    \"-29\": {name: \"Dutch\", code: \"NL\", num: -29},\n    \"-30\": {name: \"Turkish\", code: \"TR\", num: -30},\n    \"-31\": {name: \"Hungarian\", code: \"HU\", num: -31},\n    \"-32\": {name: \"Thai\", code: \"TH\", num: -32},\n    \"-34\": {name: \"Vietnamese\", code: \"VI\", num: -34}\n};\n\nvar countryMap = {\n\"688ANG\": \"ao\",\n\"687465\": \"ar\",\n\"687463\": \"au\",\n\"688034\": \"at\",\n\"687656\": \"be\",\n\"687852\": \"br\",\n\"687541\": \"ca\",\n\"A49072\": \"cl\",\n\"687890\": \"cn\",\n\"687779\": \"cz\",\n\"687554\": \"dk\",\n\"A54EGY\": \"eg\",\n\"687499\": \"fi\",\n\"688037\": \"fr\",\n\"A29633\": \"de\",\n\"687GHA\": \"gh\",\n\"687368\": \"hk\",\n\"687854\": \"in\",\n\"C18590\": \"ie\",\n\"687536\": \"it\",\n\"687365\": \"jp\",\n\"687KEN\": \"ke\",\n\"A54LIB\": \"ly\",\n\"C66879\": \"lu\",\n\"687848\": \"mx\",\n\"688MOR\": \"ma\",\n\"687570\": \"nl\",\n\"687NIG\": \"ng\",\n\"687616\": \"no\",\n\"687300\": \"pl\",\n\"688040\": \"pt\",\n\"A13868\": \"ru\",\n\"687584\": \"sg\",\n\"687466\": \"za\",\n\"687611\": \"kr\",\n\"687530\": \"es\",\n\"687575\": \"se\",\n\"C73641\": \"ch\",\n\"687912\": \"tw\",\n\"687904\": \"th\",\n\"688TUN\": \"tn\",\n\"688368\": \"tr\",\n\"A54675\": \"ae\",\n\"C19159\": \"gb\",\n\"687PDC\": \"us\"\n};\n\n// Create Parker Editors array\nvar parkerEditor1 = {\n    getUrl: function (doc) {\n        // Build up the url rest parameters\n        var parameters = \"productSeriesId_l:\";\n        parameters += doc.getFirstFieldValue(\"productSeriesId_l\");\n        parameters += AND;\n        parameters += \"parkerDivision_ss:*\";\n        parameters += AND;\n        parameters += \"productType_ss:%22Product%20Series%22\";\n\n        // Replace the unique \"TOKENS\" field with the parameter tokens\n        return PARKER_URL.replace(\"TOKENS\", parameters);\n    },\n    editData: function (doc, jsonDoc, hashMap) {\n        var value = doc.getFirstFieldValue(\"parkerDivision_s\");\n        if (value === null || value === undefined) {\n            doc.addField(\"parkerDivision_ss\", jsonDoc.parkerDivision_ss[0]);\n            doc.addField(\"parkerDivisionName_ss\", jsonDoc.parkerDivisionName_ss[0]);\n        }\n    }\n};\n\nvar parkerEditor2 = {\n\n    // Function will edit URL then return the results\n    getUrl: function (doc) {\n        //var parameters = \"parkerDivision_s:667800\";\n        var parameters = \"parkerDivision_s:\" + doc.getFirstFieldValue(\"parkerDivision_s\");\n\n        // Replace the unique \"TOKENS\" field with the parameter tokens\n        return PARKER_DIV_URL.replace(\"TOKENS\", parameters);\n    },\n\n    // Function to edit pipe from jsonDoc to doc\n    editData: function (doc, jsonDoc, hashMap) {\n        var value = doc.getFirstFieldValue(\"storeId_s\");\n        if (value === null || value === undefined) {\n            doc.setField(\"storeId_s\", jsonDoc.storeId_s);\n        }\n    }\n};\n\n\nvar parkerEditor3 = {\n\n    // Function will edit URL then return the results\n    getUrl: function (doc) {\n        // Build up the url rest parameters\n        var parameters = \"productSeriesId_l:\";\n        parameters += doc.getFirstFieldValue(\"productSeriesId_l\");\n        parameters += AND;\n        parameters += \"productType_ss:%22Product%20Series%22\";\n        parameters += AND;\n        parameters += \"-parkerDivision_ss:*\";\n\n      //logger.info(\"URL: \" + PARKER_URL.replace(\"TOKENS\", parameters));\n      \n        // Replace the unique \"TOKENS\" field with the parameter tokens\n        return PARKER_URL.replace(\"TOKENS\", parameters);\n    },\n\n    // Function to edit pipe from jsonDoc to doc\n    editData: function (doc, jsonDoc, hashMap) {\n        try {\n\n            var langCode = languageMap[jsonDoc.language_is[0]].code;\n            var langName = languageMap[jsonDoc.language_is[0]].name;\n            var langNum = languageMap[jsonDoc.language_is[0]].num;\n\n            var product_ss = \"product\";\n            product_ss += langCode;\n            product_ss += \"_ss\";\n\n            var title_t = \"title\";\n            title_t += langCode;\n            title_t += \"_t\";\n\n            var description_t = \"description\";\n            description_t += langCode;\n            description_t += \"_t\";\n\n            var description_ss = \"description\";\n            description_ss += langCode;\n            description_ss += \"_ss\";\n\n            var siteSection_ss = \"siteSection\";\n            siteSection_ss += langCode;\n            siteSection_ss += \"_ss\";\n\n            doc.setField(\"keywordGrouping_s\", \"part-\" + doc.getFirstFieldValue(\"id\"));\n\n            //=========================================================\n            // Get data from the pipe (jsonDoc) and add it to this doc\n            //=========================================================\n            doc.setField(product_ss, jsonDoc[title_t][0]);\n            //doc.setField(\"title_t\", jsonDoc[title_t][0]);\n            doc.setField(description_t, jsonDoc[description_t][0]);\n            doc.setField(description_ss, jsonDoc[description_t][0]);\n            doc.setField(\"psURLKeyword_s\", jsonDoc.urlKeyword_s);\n              \n            var value = doc.getFirstFieldValue(\"thumbnailURL_s\");\n            if (value === null || value === undefined) {\n                doc.setField(\"thumbnailURL_s\", jsonDoc.thumbnailURL_s);\n            }\n\n            // Prevent duplicates\n            if (!hashMap.containsKey(jsonDoc.language_is[0])) {\n              //logger.info(\"terry: language and id\" + jsonDoc.id + \" -- \" + jsonDoc.language_is[0]);\n                \n             // doc.addField(\"language_is\", jsonDoc.language_is[0]);\n              doc.addField(\"language_is\", langNum);\n              doc.addField(\"_langtest_is\",langNum);\n             \n             // doc.addField(\"language_is\", jsonDoc.language_is);\n                doc.addField(\"languageCode_ss\", langCode);\n                doc.addField(\"languageName_ss\", langName);\n                //hashMap.put(jsonDoc.language_is[0], jsonDoc.language_is[0]);\n            }\n\n            // Prevent duplicates\n            if (!hashMap.containsKey(jsonDoc.countryName_ss[0])) {\n                doc.addField(\"countryName_ss\", jsonDoc.countryName_ss[0]);\n              //logger.info(\"terry: country \"  + jsonDoc.countryName_ss[0] + \" -- \" + jsonDoc.id);\n                hashMap.put(jsonDoc.countryName_ss[0], jsonDoc.countryName_ss[0]);\n            }\n\n\n            if (!hashMap.containsKey(jsonDoc.countryId_ss[0])) {\n\n                doc.addField(\"countryId_ss\", jsonDoc.countryId_ss[0]);\n             // logger.info(\"terry: country ID \" + jsonDoc.countryId_ss[0] + \" -- \" + jsonDoc.id);\n                hashMap.put(jsonDoc.countryId_ss[0], jsonDoc.countryId_ss[0]);\n\n                var jsonUrl = \"\";\n                if (hashMap.containsKey(\"ECOM_JSON_URL_s\")) {\n                    jsonUrl = hashMap.get(\"ECOM_JSON_URL_s\");\n                } else {\n                    jsonUrl = \"\\\"[{\";\n                }\n\n                //for (var id in jsonDoc.countryId_ss) {\n                for (var i = 0; i < jsonDoc.countryId_ss.length; i++) {\n                    var id = jsonDoc.countryId_ss[i];\n\n                    if (countryMap[id] !== undefined) {\n                        var line = \"\\\\\\\"\";\n                        line += jsonDoc.countryId_ss[i];\n                        line += \"\\\\\\\":\\\\\\\"\";\n                        line += countryMap[id];\n                        line += \"/en/\";\n                        line += doc.getFirstFieldValue(\"urlKeyword_s\");\n                        line += \"\\\\\\\",\";\n\n                        if (!hashMap.containsKey(line)) {\n                            hashMap.put(line, line);\n                            jsonUrl += line;\n                        }\n                    }\n                }\n\n                hashMap.put(\"ECOM_JSON_URL_s\", jsonUrl);\n            }\n\n            // NOTE: Only need to add to doc once\n            value = doc.getFirstFieldValue(\"audience_ss\");\n            if (value === null || value === undefined) {\n                //=============================\n                // Add static data to this doc\n                //=============================\n                doc.setField(\"audience_ss\", \"public\");\n                doc.setField(\"contentSource_s\", \"Analytics\");\n                doc.setField(\"siteSection_ss\", \"Products\");\n                doc.setField(\"siteSubSection_ss\", \"Part\");\n                doc.setField(\"productType_ss\", \"Part\");\n                doc.setField(\"isBuyable_s\", \"N\");\n                doc.setField(\"onlinePurchaseOption_ss\", \"Show All\");\n            }\n        } catch (e) {\n            logger.error(\"Parker  editData(): \" + e);\n        }\n    }\n};\n\nfunction postProcessing(doc, hashMap) {\n    if (hashMap.containsKey(\"ECOM_JSON_URL_s\")) {\n        var jsonUrl = hashMap.get(\"ECOM_JSON_URL_s\");\n        jsonUrl += \"\\\\\\\"\" + doc.getFirstFieldValue(\"parkerDivision_s\") +\n                \"\\\\\\\":\\\\\\\"us/\" + doc.getFirstFieldValue(\"storeId_s\") + \"/en/\" +\n                doc.getFirstFieldValue(\"urlKeyword_s\") + \"\\\\\\\"\";\n        jsonUrl += \"}]\\\"\";\n        doc.setField(\"ECOM_JSON_URL_s\", jsonUrl);\n    }\n}\n\n\n\n/*\n * Function to make and return a URL connection\n * @param {type} urlString\n * @returns {java.net.HttpURLConnection|connect.connection}\n */\nfunction connectToCollection(urlString, securityToken) {\n    var URL = Java.type('java.net.URL');\n    var url = new URL(urlString);\n    var HttpURLConnection = Java.type('java.net.HttpURLConnection');\n    var connection = Java.type('java.net.HttpURLConnection');\n\n    try {\n        connection = url.openConnection();\n        connection.setRequestProperty(\"Authorization\", securityToken);\n        connection.connect();\n        var status = connection.getResponseCode();\n\n        if (status !== HttpURLConnection.HTTP_OK && status !== HttpURLConnection.HTTP_MOVED_PERM) {\n            connection = null;\n        }\n    } catch (e) {\n        logger.error(\"Parker  connectToCollection(): \" + e);\n    }\n\n    return connection;\n}\n\n/**\n * This function injects the new data into the pipe\n * @param {type} doc\n * @returns {undefined}\n */\nfunction injectDataIntoPipe(doc, editor, hashMap) {\n    var InputStreamReader = Java.type('java.io.InputStreamReader');\n    var BufferedReader = Java.type('java.io.BufferedReader');\n\n    try {\n        var urlStr = editor.getUrl(doc);\n\n        // Connect to the parkerProducts collection\n        var connection = connectToCollection(urlStr, SECURITY_TOKEN);\n\n        if (connection !== null) {\n\n            var reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n            var readerResponse = JSON.parse(reader.readLine());\n            var numDocs = readerResponse.response.numFound;\n\n            // Lets loop through each doc in the docs[] array\n            for (i = 0; i < numDocs; i++) {\n                var jsonDoc = readerResponse.response.docs[i];\n                editor.editData(doc, jsonDoc, hashMap);\n            }\n\n            reader.close();\n            connection.disconnect();\n        }\n    } catch (e) {\n        logger.error(\"Parker  injectDataIntoPipe(): \" + e);\n        \n    }\n}\n\n\n/*\n * Intercept Pipeline\n * Doc is the heuristics   \n */\nfunction (doc) {\n    var HashMap = Java.type('java.util.HashMap');\n    var langHashMap = new HashMap();\n\n    if (doc.getId() !== null) {\n\n        //logger.info(\"Parker  Begin Pipeline Intercept\");\n\n        injectDataIntoPipe(doc, parkerEditor1, langHashMap);\n        injectDataIntoPipe(doc, parkerEditor2, langHashMap);\n        injectDataIntoPipe(doc, parkerEditor3, langHashMap);\n        postProcessing(doc, langHashMap);\n\n        //logger.info(\"Parker  Finished Pipeline Intercept\");\n    }\n\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Attach ProductSeries Data (JS)",
    "secretSourceStageId" : "un"
  }, {
    "type" : "javascript-index",
    "id" : "6m",
    "script" : "/* Part number character replacements for matching alternate characters\nTakes the original \"compressed part number\" (normalized, without special characters/spaces)\nand replaces specific characters to permit matching in cases where someone has transposed characters.\nThis code only handles complete replacements of single characters and does not take into account\nall the possible variations such as when there is a mixture of 1s, 0s etc and the user only makes\nan error on one of them.  These are considered edge cases and least likely to occur.\n\nWritten by Onix Networking\n\nReplaces the characters as follows:\n\nl for 1\nI for 1\ni for 1\n1 for i\n1 for I\n1 for l\no for 0\nO for 0\n0 for o\n0 for O\n\n*/\n\nvar partnum = doc.getFirstFieldValue(\"compressedPartNumber_s\"); // the original compressed part number\nvar newpart = \"\"; // where the additional variations will be stored\n\n\nvar newpartl=partnum.replace(/l/g , \"1\");\nvar newpartI=partnum.replace(/I/g , \"1\");\nvar newparti=partnum.replace(/i/g , \"1\");\nvar newpartonei=partnum.replace(/1/g , \"i\");\nvar newpartoneI=partnum.replace(/1/g , \"I\");\nvar newpartonel=partnum.replace(/1/g , \"l\");\nvar newparto=partnum.replace(/o/g , \"0\");\nvar newpartO=partnum.replace(/O/g , \"0\");\nvar newpartzeroo=partnum.replace(/0/g , \"o\");\nvar newpartzeroO=partnum.replace(/0/g , \"O\");\n\nif (newpartl!=partnum){\nnewpart = newpart + \",\" + newpartl;\n}\n\nif (newpartI!=partnum){\nnewpart = newpart + \",\" + newpartI;\n}\n\nif (newparti!=partnum){\nnewpart = newpart + \",\" + newparti;\n}\n\nif (newpartonei!=partnum){\nnewpart = newpart + \",\" + newpartonei;\n}\n\nif (newpartoneI!=partnum){\nnewpart = newpart + \",\" + newpartoneI;\n}\n\nif (newpartonel!=partnum){\nnewpart = newpart + \",\" + newpartonel;\n}\n\nif (newparto!=partnum){\nnewpart = newpart + \",\" + newparto;\n}\n\nif (newpartO!=partnum){\nnewpart = newpart + \",\" + newpartO;\n}\n\nif (newpartzeroo!=partnum){\nnewpart = newpart + \",\" + newpartzeroo;\n}\n\nif (newpartzeroO!=partnum){\nnewpart = newpart + \",\" + newpartzeroO;\n}\n\ndoc.setField(\"altpartnums_ss\",newpart); // stores the final list of alternate compressed part numbers\n\n\n\n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Javascript - replace characters in compressed part number",
    "condition" : "doc.hasField(\"compressedPartNumber_s\")",
    "secretSourceStageId" : "6m"
  }, {
    "type" : "javascript-index",
    "id" : "4ol",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n//  logger.info(\"**** Setting language on \" + id + \" ****\");\n   \t\n          var langname = \"English\" + \",\" + \"Français\" + \",\" + \"Deutsch\" + \",\" + \"Italiano\" + \",\" + \"Español\" + \",\" + \"Português\" + \",\" + \"中文\" + \",\" + \"繁體中文\" + \",\" + \"한국어\" + \",\" + \"日本語\" + \",\" + \"Russian\" + \",\" + \"Polski\"+ \",\" + \"suomi\" + \",\" + \"Norsk\" + \",\" + \"Svenska\" + \",\" + \"česky\" + \",\" + \"Danish\" + \",\" + \"Nederlands\" + \",\" + \"Türkçe\" + \",\" + \"Hungarian\" + \",\" + \"Thai\" + \",\" + \"Vietnamese\";  \n\n    var langcodes = \"EN\" + \",\" + \"FR\" + \",\" + \"DE\" + \",\" + \"IT\" + \",\" + \"ES\" + \",\" + \"PT\" + \",\" + \"ZH\" + \",\" + \"TW\" + \",\" + \"KO\" + \",\" + \"JP\" + \",\" + \"RU\" + \",\" + \"PL\"+ \",\" + \"FI\" + \",\" + \"NO\" + \",\" + \"SV\" + \",\" + \"CS\" + \",\" + \"DK\" + \",\" + \"NL\" + \",\" + \"TR\" + \",\" + \"HU\" + \",\" + \"TH\" + \",\" + \"VI\";\n    \n    var langnum = \"-1,-2,-3,-4,-5,-6,-7,-8,-9,-10,-20,-22,-24,-25,-26,-27,-28,-29,-30,-31-32,-34\";\n    \n    \n\t   doc.setField(\"languageName_ss\",langname);\n       doc.setField(\"languageCode_ss\",langcodes);\n\t    doc.setField(\"language_is\",langnum);\n       doc.setField(\"suggest_type_s\",\"standard\");\n\t   \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set Language Name (JS)",
    "secretSourceStageId" : "4ol"
  }, {
    "type" : "regex-extractor",
    "id" : "jm",
    "rules" : [ {
      "source" : [ "siteSection_ss" ],
      "target" : "siteSection_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadType_ss" ],
      "target" : "cadType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadURL_ss" ],
      "target" : "cadURL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportType_ss" ],
      "target" : "supportType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageName_ss" ],
      "target" : "languageName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "language_is" ],
      "target" : "language_is",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivision_ss" ],
      "target" : "parkerDivision_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivisionName_ss" ],
      "target" : "parkerDivisionName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageCode_ss" ],
      "target" : "languageCode_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split Fields",
    "secretSourceStageId" : "jm"
  }, {
    "type" : "javascript-index",
    "id" : "tk",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n//  logger.info(\"**** Reconfiguring fields on \" + id + \" ****\");\n  \n  \tvar originalTitle = doc.getFirstFieldValue(\"title_t\");\n    \n\tvar trimmedSiteSections = \"\";\n\tvar trimmedSupportResourceType = \"\";\n\tvar trimmedSupportType = \"\";\n\tvar trimmedSiteSubSections = \"\";\n\tvar trimmedProductTypes = \"\";\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSection <start>\n\t\t**********************************/\n    var originalSiteSection = doc.getFieldValues(\"siteSection_ss\");\n    var newSiteSection = \"\";\n    \n\t\n    var arrayLength = originalSiteSection.length;\n    \n\t\n\tif (arrayLength >0){\n    for (var i = 0; i < arrayLength; i++)\n  {\n  \n  if (originalSiteSection[i] !=null && originalSiteSection[i] !=\"\"){\n  \n    \n    newSiteSection = newSiteSection + \",\" + originalSiteSection[i];\n    \n  }\n    \n    trimmedSiteSections = newSiteSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSection <end>\n\t\t\n\t\t\n\t\t\n\t\t/*********************************\n\t\tSplit and re-assemble supportResourceType <start>\n\t\t**********************************/\n\n    var originalSupportResourceType = doc.getFieldValues(\"supportResourceType_ss\");\n    var newSupportResourceType = \"\";\n    \n\tif (originalSupportResourceType!=null && originalSupportResourceType!=\"\"){\n\t\tvar arrayLength2 = originalSupportResourceType.length;\n    \n\t\n\t\tif (arrayLength2 > 0){ \n\t\t\tfor (var j = 0; j < arrayLength2; j++)\n\t\t\t{\n  \n\t\t\t\tif (originalSupportResourceType[j] !=null && originalSupportResourceType[j] !=\"\"){\n  \n\t\n\t\t\t\t\tnewSupportResourceType = newSupportResourceType + \",\" + originalSupportResourceType[j];\n    \n\t\t\t}\n    \n\t\t\ttrimmedSupportResourceType = newSupportResourceType.replace(/(^,)|(,$)/g, \"\");\n    \n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n    // Split and re-assemble supportResourceType <end>\n\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble supportType <start>\n\t\t**********************************/\n\n    var originalSupportType = doc.getFieldValues(\"supportType_ss\");\n    var newSupportType = \"\";\n    \n\tif (originalSupportType!=null && originalSupportType!=\"\"){\n\t\tvar arrayLength3 = originalSupportType.length;\n    \n\t\n\t\tif (arrayLength3 > 0){ \n\t\t\tfor (var k = 0; k < arrayLength3; k++)\n\t\t\t{\n  \n\t\t\t\tif (originalSupportType[k] !=null && originalSupportType[k] !=\"\"){\n  \n\t\n\t\t\t\t\tnewSupportType = newSupportType + \",\" + originalSupportType[k];\n    \n\t\t\t}\n    \n\t\t\ttrimmedSupportType = newSupportType.replace(/(^,)|(,$)/g, \"\");\n    \n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n    // Split and re-assemble supportType <end>\n\t\n\t\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSubSection <start>\n\t\t**********************************/\n    var originalSiteSubSection = doc.getFieldValues(\"siteSubSection_ss\");\n    var newSiteSubSection = \"\";\n    \n\t\n    var arrayLength4 = originalSiteSubSection.length;\n    \n\t\n\tif (arrayLength4 >0){\n    for (var l = 0; l < arrayLength4; l++)\n  {\n  \n  if (originalSiteSubSection[l] !=null && originalSiteSubSection[l] !=\"\"){\n  \n    \n    newSiteSubSection = newSiteSubSection + \",\" + originalSiteSubSection[l];\n    \n  }\n    \n    trimmedSiteSubSections = newSiteSubSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSubSection <end>\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble productType <start>\n\t\t**********************************/\n    var originalProductType = doc.getFieldValues(\"productType_ss\");\n    var newProductType = \"\";\n    \n\t\n    var arrayLength5 = originalProductType.length;\n    \n\t\n\tif (arrayLength5 >0){\n    for (var m = 0; m < arrayLength5; m++)\n  {\n  \n  if (originalProductType[m] !=null && originalProductType[m] !=\"\"){\n  \n    \n    newProductType = newProductType + \",\" + originalProductType[m];\n    \n  }\n    \n    trimmedProductTypes = newProductType.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble productType <end>\n\t\n\n\n  \n//  logger.info(\"Setting data ...\");\n  \n\t\n\n\t\t\tdoc.setField(\"titleEN_t\",originalTitle);\n        \tdoc.setField(\"siteSectionEN_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"supportResourceTypeEN_ss\",trimmedSupportResourceType);\n\t\t\tdoc.setField(\"supportTypeEN_ss\",trimmedSupportType);\n\t\t\tdoc.setField(\"siteSubSectionEN_ss\",trimmedSiteSubSections);\n\t\t\tdoc.setField(\"productTypeEN_ss\",trimmedProductTypes);\n\n            doc.setField(\"titleFR_t\",originalTitle);\n\n\n            doc.setField(\"titleDE_t\",originalTitle);\n\n\n            doc.setField(\"titleIT_t\",originalTitle);\n\n\n            doc.setField(\"titleES_t\",originalTitle);\n\n\n            doc.setField(\"titlePT_t\",originalTitle);\n\n\n            doc.setField(\"titleZH_t\",originalTitle);\n\n\n            doc.setField(\"titleTW_t\",originalTitle);\n\n\n            doc.setField(\"titleKO_t\",originalTitle);\n\n\n            doc.setField(\"titleJP_t\",originalTitle);\n\n\n            doc.setField(\"titleRU_t\",originalTitle);\n\n\n            doc.setField(\"titlePL_t\",originalTitle);\n\n\n            doc.setField(\"titleFI_t\",originalTitle);\n\n\n            doc.setField(\"titleNO_t\",originalTitle);\n\n\n            doc.setField(\"titleSV_t\",originalTitle);\n\n\n            doc.setField(\"titleCS_t\",originalTitle);\n\n\n            doc.setField(\"titleDK_t\",originalTitle);\n\n\n            doc.setField(\"titleNL_t\",originalTitle);\n\n\n            doc.setField(\"titleTR_t\",originalTitle);\n\n\n            doc.setField(\"titleHU_t\",originalTitle);\n\n\n            doc.setField(\"titleTH_t\",originalTitle);\n\n\n            doc.setField(\"titleVI_t\",originalTitle);\n\n\t\n\n \n\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Copy data to lang-specific fields (JS)",
    "secretSourceStageId" : "tk"
  }, {
    "type" : "regex-extractor",
    "id" : "7ka",
    "rules" : [ {
      "source" : [ "siteSectionEN_ss" ],
      "target" : "siteSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFR_ss" ],
      "target" : "siteSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDE_ss" ],
      "target" : "siteSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionIT_ss" ],
      "target" : "siteSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionES_ss" ],
      "target" : "siteSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPT_ss" ],
      "target" : "siteSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionZH_ss" ],
      "target" : "siteSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTW_ss" ],
      "target" : "siteSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionKO_ss" ],
      "target" : "siteSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionJP_ss" ],
      "target" : "siteSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionRU_ss" ],
      "target" : "siteSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPL_ss" ],
      "target" : "siteSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFI_ss" ],
      "target" : "siteSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNO_ss" ],
      "target" : "siteSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionSV_ss" ],
      "target" : "siteSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionCS_ss" ],
      "target" : "siteSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDK_ss" ],
      "target" : "siteSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNL_ss" ],
      "target" : "siteSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTR_ss" ],
      "target" : "siteSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionHU_ss" ],
      "target" : "siteSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTH_ss" ],
      "target" : "siteSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionVI_ss" ],
      "target" : "siteSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSection Lang Fields",
    "secretSourceStageId" : "7ka"
  }, {
    "type" : "regex-extractor",
    "id" : "oioe",
    "rules" : [ {
      "source" : [ "supportResourceTypeEN_ss" ],
      "target" : "supportResourceTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeFR_ss" ],
      "target" : "supportResourceTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeDE_ss" ],
      "target" : "supportResourceTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeIT_ss" ],
      "target" : "supportResourceTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeES_ss" ],
      "target" : "supportResourceTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypePT_ss" ],
      "target" : "supportResourceTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeZH_ss" ],
      "target" : "supportResourceTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTW_ss" ],
      "target" : "supportResourceTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeKO_ss" ],
      "target" : "supportResourceTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeJP_ss" ],
      "target" : "supportResourceTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeRU_ss" ],
      "target" : "supportResourceTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypePL_ss" ],
      "target" : "supportResourceTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeFI_ss" ],
      "target" : "supportResourceTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeNO_ss" ],
      "target" : "supportResourceTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeSV_ss" ],
      "target" : "supportResourceTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeCS_ss" ],
      "target" : "supportResourceTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeDK_ss" ],
      "target" : "supportResourceTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeNL_ss" ],
      "target" : "supportResourceTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTR_ss" ],
      "target" : "supportResourceTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeHU_ss" ],
      "target" : "supportResourceTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTH_ss" ],
      "target" : "supportResourceTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeVI_ss" ],
      "target" : "supportResourceTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split supportResourceType Lang Fields",
    "secretSourceStageId" : "oioe"
  }, {
    "type" : "regex-extractor",
    "id" : "ff",
    "rules" : [ {
      "source" : [ "supportTypeEN_ss" ],
      "target" : "supportTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeFR_ss" ],
      "target" : "supportTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeDE_ss" ],
      "target" : "supportTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeIT_ss" ],
      "target" : "supportTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeES_ss" ],
      "target" : "supportTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypePT_ss" ],
      "target" : "supportTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeZH_ss" ],
      "target" : "supportTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTW_ss" ],
      "target" : "supportTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeKO_ss" ],
      "target" : "supportTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeJP_ss" ],
      "target" : "supportTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeRU_ss" ],
      "target" : "supportTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypePL_ss" ],
      "target" : "supportTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeFI_ss" ],
      "target" : "supportTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeNO_ss" ],
      "target" : "supportTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeSV_ss" ],
      "target" : "supportTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeCS_ss" ],
      "target" : "supportTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeDK_ss" ],
      "target" : "supportTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeNL_ss" ],
      "target" : "supportTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTR_ss" ],
      "target" : "supportTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeHU_ss" ],
      "target" : "supportTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTH_ss" ],
      "target" : "supportTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeVI_ss" ],
      "target" : "supportTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split supportType Lang Fields",
    "secretSourceStageId" : "ff"
  }, {
    "type" : "regex-extractor",
    "id" : "u8",
    "rules" : [ {
      "source" : [ "siteSubSectionEN_ss" ],
      "target" : "siteSubSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFR_ss" ],
      "target" : "siteSubSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDE_ss" ],
      "target" : "siteSubSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionIT_ss" ],
      "target" : "siteSubSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionES_ss" ],
      "target" : "siteSubSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPT_ss" ],
      "target" : "siteSubSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionZH_ss" ],
      "target" : "siteSubSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTW_ss" ],
      "target" : "siteSubSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionKO_ss" ],
      "target" : "siteSubSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionJP_ss" ],
      "target" : "siteSubSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionRU_ss" ],
      "target" : "siteSubSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPL_ss" ],
      "target" : "siteSubSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFI_ss" ],
      "target" : "siteSubSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNO_ss" ],
      "target" : "siteSubSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionSV_ss" ],
      "target" : "siteSubSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionCS_ss" ],
      "target" : "siteSubSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDK_ss" ],
      "target" : "siteSubSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNL_ss" ],
      "target" : "siteSubSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTR_ss" ],
      "target" : "siteSubSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionHU_ss" ],
      "target" : "siteSubSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTH_ss" ],
      "target" : "siteSubSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionVI_ss" ],
      "target" : "siteSubSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSubSection Lang Fields",
    "secretSourceStageId" : "u8"
  }, {
    "type" : "regex-extractor",
    "id" : "u8x",
    "rules" : [ {
      "source" : [ "productTypeEN_ss" ],
      "target" : "productTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeFR_ss" ],
      "target" : "productTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeDE_ss" ],
      "target" : "productTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeIT_ss" ],
      "target" : "productTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeES_ss" ],
      "target" : "productTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypePT_ss" ],
      "target" : "productTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeZH_ss" ],
      "target" : "productTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTW_ss" ],
      "target" : "productTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeKO_ss" ],
      "target" : "productTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeJP_ss" ],
      "target" : "productTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeRU_ss" ],
      "target" : "productTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypePL_ss" ],
      "target" : "productTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeFI_ss" ],
      "target" : "productTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeNO_ss" ],
      "target" : "productTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeSV_ss" ],
      "target" : "productTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeCS_ss" ],
      "target" : "productTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeDK_ss" ],
      "target" : "productTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeNL_ss" ],
      "target" : "productTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTR_ss" ],
      "target" : "productTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeHU_ss" ],
      "target" : "productTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTH_ss" ],
      "target" : "productTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeVI_ss" ],
      "target" : "productTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split productType Lang Fields",
    "secretSourceStageId" : "u8x"
  }, {
    "type" : "javascript-index",
    "id" : "78",
    "script" : "/* Last modified: 2018-01-10\n   Last modified by:  Terry Chambers / Onix\n   Change summary:\n   2018-01-10 - corrects productTaxonomyL1, adds L2, L3\n   2018-01-08 - adds new fields for Sprint 2 (productType, newsEventType, otherType)\n*/\n// HASHING FUNCTION\nfunction hashTheFacet(doc, facetToProcess, id) {\n    var facetValues;\n    var newHashedFacetValue = [];\n    var newHashedFacetFQ = [];\n    // get the values of the facet to be processed\n    facetValues = doc.getFieldValues(facetToProcess);\n    //logger.info(\"hashTheFacet(\" + facetToProcess + \")\");\n    // loop through the facet values and create hashes for them\n    facetValues.forEach(function (f) {\n\t\tif (f  != null){\n\t\t\tif (f.length!==0){\n\t\t\t\tvar newHashedFacet = f.hashCode();\t\t\n\t\t\t\tnewHashedFacetValue.push(\"p\" + newHashedFacet + \"$$$\" + f);\n\t\t\t\tnewHashedFacetFQ.push(\"p\" + newHashedFacet);\n\t\t\t}\n\t\t}\n    });\n    // return the hashed items\n    return [newHashedFacetValue, newHashedFacetFQ];\n}\n\nfunction computeLanguages(doc, id) {\n    // get the list of languages from the document\n    var langsfromdoc = doc.getFieldValues(\"language_is\");\n    var languages = [];\n    //logger.info(\"langsfromdoc \" + langsfromdoc);\n    //logger.info(\"Num of languages: \" + langsfromdoc.length);\n    // iterate through the languages and put them into an array\n    for each(var lang in langsfromdoc) {\n            switch (lang) {\n            case \"-1\":\n                languages.push('EN');\n                break;\n            case \"-2\":\n                languages.push('FR');\n                break;\n            case \"-3\":\n                languages.push('DE');\n                break;\n            case \"-4\":\n                languages.push('IT');\n                break;\n            case \"-5\":\n                languages.push('ES');\n                break;\n            case \"-6\":\n                languages.push('PT');\n                break;\n            case \"-7\":\n                languages.push('ZH');\n                break;\n            case \"-8\":\n                languages.push('TW');\n                break;\n            case \"-9\":\n                languages.push('KO');\n                break;\n            case \"-10\":\n                languages.push('JP');\n                break;\n            case \"-20\":\n                languages.push('RU');\n                break;\n            case \"-22\":\n                languages.push('PL');\n                break;\n            case \"-24\":\n                languages.push('FI');\n                break;\n            case \"-25\":\n                languages.push('NO');\n                break;\n            case \"-26\":\n                languages.push('SV');\n                break;\n            case \"-27\":\n                languages.push('CS');\n                break;\n            case \"-28\":\n                languages.push('DK');\n                break;\n            case \"-29\":\n                languages.push('NL');\n                break;\n            case \"-30\":\n                languages.push('TR');\n                break;\n            case \"-31\":\n                languages.push('HU');\n                break;\n            case \"-32\":\n                languages.push('TH');\n                break;\n            case \"-34\":\n                languages.push('VI');\n                break;\n            }\n        }\n        // if no languages found, try them all, to be safe\n    if (languages.length === 0) {\n        //logger.info(\"************* no languages found *******************\");\n        languages = ['EN', 'FR', 'DE', 'IT', 'ES', 'PT', 'ZH', 'TW', 'KO', 'JP', 'RU', 'PL', 'FI', 'NO', 'SV', 'CS', 'DK', 'NL', 'TR', 'HU', 'TH', 'VI'];\n    }\n    return languages;\n}\n// MAIN FUNCTION\nfunction (doc) {\n    //var facetsToHash; // array that we'll populate with our hashes\n    var id = doc.getId();\n    // list of facet fields that need to be processed\n    var listOfFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"parkerDivisionName_ss\", \"productTaxonomyL1_s\", \"productTaxonomyL2_s\", \"productTaxonomyL3_s\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"brand_ss\", \"cadType_ss\", \"product_ss\", \"languageName_ss\", \"fileType_ss\", \"eventYear_i\", \"newsYear_i\"];\n    // list of facet fields that are localized to other languages and need to be processed\n    var listOfLangFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"product_ss\", \"productTaxonomyL1_s\",\"productTaxonomyL2_s\",\"productTaxonomyL3_s\"];\n    var languages = []; // used to track the applicable languages\n    // if there are any language-based facets, compute the languages for this document\n    //logger.info(\"This is the list of LangFacets \" + listOfLangFacets);\n    if (listOfLangFacets) {\n        languages = computeLanguages(doc, id);\n        //logger.info(\"Finished computeLanguages(doc, id): \" + doc + \" , \" + id);\n        //logger.info(\"Resulting languages are \" + languages);\n    }\n    // process each facet from \"listOfFacets\" and store the values on to the document\n    for each(var facet in listOfFacets) {\n            //logger.info(\"The facet is \" + facet);\n            var location = facet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n            var tmpFacet = facet; // store the full facet name temporarily\n            var thisFacetShort = tmpFacet.substring(0, location); // take the facet name without the _ and data type\n            var facetsToHash = hashTheFacet(doc, facet, id); // calculate the hashes\n            //logger.info(\"facetsToHash \" + facetsToHash);\n            // takes the function output and puts into a string and then array\n            //logger.info(Object.prototype.toString.call(facetsToHash));\n            var facetsWithHashes = facetsToHash[0];\n            //logger.info(facetsWithHashes);\n            if (facetsWithHashes.length!==0) {\n                var facetsWithHashesArray = facetsWithHashes;\n                for each(var fwh in facetsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_facet\", fwh); // set the _facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array  \n            var fqsWithHashes = facetsToHash[1];\n            if (fqsWithHashes.length!==0) {\n                var fqsWithHashesArray = fqsWithHashes;\n                for each(var fqs in fqsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_fq\", fqs); // set the _fq field on the document\n                }\n            }\n        }\n        // process each facet from \"listOfLangFacets\" and store the values on the document\n    for each(var langFacet in listOfLangFacets) {\n        var location = langFacet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n        var thisFacetVarType = langFacet.substring(location + 1, langFacet.length); // take the data type from the facet name\n        for each(var lang in languages) {\n            var langFacetShort = langFacet.substring(0, location); // clear the field from previous runs\n            var thisFacetFull = langFacetShort + lang + \"_\" + thisFacetVarType; // compute the name of the full facet to process hashes for\n            langFacetShort = langFacetShort + lang; // compute the prefix of the facet name that will be written back to the document\n            var facetsToHash = hashTheFacet(doc, thisFacetFull, id); // calculate the hashes\n            // takes the function output and puts into a string and then array      \n            var facetsWithHashesLG = facetsToHash[0];\n            //logger.info(\"facetsWithHashesLG: \" + facetsWithHashesLG);\n            if (facetsWithHashesLG.length!==0) {\n                var facetsWithHashesLGArray = facetsWithHashesLG;\n                for each(var lg in facetsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_facet\", lg); // set the XX_facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array      \n            var fqsWithHashesLG = facetsToHash[1];\n            if (fqsWithHashesLG.length!==0) {\n                var fqsWithHashesLGArray = fqsWithHashesLG;\n                for each(var fqlg in fqsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_fq\", fqlg); // set the XX_fq field on the document\n                }\n            }\n        }\n    }\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Facet Hashing",
    "condition" : "",
    "secretSourceStageId" : "78"
  }, {
    "type" : "field-mapping",
    "id" : "68f77de5-37e7-470b-bec5-d660e316d2de",
    "mappings" : [ {
      "source" : "compressedPartNumber_s",
      "target" : "compressedPartNumber_t",
      "operation" : "copy"
    }, {
      "source" : "parkerPartNumber_s",
      "target" : "parkerPartNumber_t",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "parkerPartNumberEDGN4",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "parkerPartNumberEDGN5",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "parkerPartNumberEDGN6",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "parkerPartNumberEDGN7",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "parkerPartNumberEDGN8",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "parkerPartNumberEDGN3",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "field-mapping",
    "condition" : "!doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "68f77de5-37e7-470b-bec5-d660e316d2de"
  }, {
    "type" : "field-mapping",
    "id" : "2h",
    "mappings" : [ {
      "source" : "title_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "autosuggest_part_text",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Field mapping for non-support",
    "condition" : "!doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "2h"
  }, {
    "type" : "field-mapping",
    "id" : "lb",
    "mappings" : [ {
      "source" : "title_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "autosuggest_support_cad_text",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Field Mapping - Support",
    "condition" : "doc.hasField(\"supportType_ss\");",
    "secretSourceStageId" : "lb"
  }, {
    "type" : "field-mapping",
    "id" : "959",
    "mappings" : [ {
      "source" : "productCS_ss",
      "target" : "productCS_t",
      "operation" : "copy"
    }, {
      "source" : "productDK_ss",
      "target" : "productDK_t",
      "operation" : "copy"
    }, {
      "source" : "productNL_ss",
      "target" : "productNL_t",
      "operation" : "copy"
    }, {
      "source" : "productEN_ss",
      "target" : "productEN_t",
      "operation" : "copy"
    }, {
      "source" : "productFI_ss",
      "target" : "productFI_t",
      "operation" : "copy"
    }, {
      "source" : "productFR_ss",
      "target" : "productFR_t",
      "operation" : "copy"
    }, {
      "source" : "productDE_ss",
      "target" : "productDE_t",
      "operation" : "copy"
    }, {
      "source" : "productHU_ss",
      "target" : "productHU_t",
      "operation" : "copy"
    }, {
      "source" : "productIT_ss",
      "target" : "productIT_t",
      "operation" : "copy"
    }, {
      "source" : "productJP_ss",
      "target" : "productJP_t",
      "operation" : "copy"
    }, {
      "source" : "productKO_ss",
      "target" : "productKO_t",
      "operation" : "copy"
    }, {
      "source" : "productNO_ss",
      "target" : "productNO_t",
      "operation" : "copy"
    }, {
      "source" : "productPL_ss",
      "target" : "productPL_t",
      "operation" : "copy"
    }, {
      "source" : "productPT_ss",
      "target" : "productPT_t",
      "operation" : "copy"
    }, {
      "source" : "productRU_ss",
      "target" : "productRU_t",
      "operation" : "copy"
    }, {
      "source" : "productZH_ss",
      "target" : "productZH_t",
      "operation" : "copy"
    }, {
      "source" : "productES_ss",
      "target" : "productES_t",
      "operation" : "copy"
    }, {
      "source" : "productSV_ss",
      "target" : "productSV_t",
      "operation" : "copy"
    }, {
      "source" : "productTH_ss",
      "target" : "productTH_t",
      "operation" : "copy"
    }, {
      "source" : "productTW_ss",
      "target" : "productTW_t",
      "operation" : "copy"
    }, {
      "source" : "productTR_ss",
      "target" : "productTR_t",
      "operation" : "copy"
    }, {
      "source" : "productVI_ss",
      "target" : "productVI_t",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Field mapping for product_ss to text",
    "secretSourceStageId" : "959"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "a31e5f1e-7783-4038-8062-706a962593ad",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : true,
    "label" : "solr-dynamic-field-name-mapping",
    "secretSourceStageId" : "a31e5f1e-7783-4038-8062-706a962593ad"
  }, {
    "type" : "solr-index",
    "id" : "08d93fd2-afed-433d-ba00-7d6fc8c613f5",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "label" : "solr-index",
    "secretSourceStageId" : "08d93fd2-afed-433d-ba00-7d6fc8c613f5"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComMain-EconfigParts"
  }
}, {
  "id" : "metadata_normalization",
  "stages" : [ {
    "type" : "tika-parser",
    "id" : "conn_tika",
    "includeImages" : true,
    "flattenCompound" : false,
    "addFailedDocs" : true,
    "addOriginalContent" : false,
    "contentField" : "_raw_content_",
    "contentEncoding" : "binary",
    "returnXml" : false,
    "keepOriginalStructure" : false,
    "extractHtmlLinks" : true,
    "extractOtherLinks" : false,
    "includeContentTypes" : [ ],
    "excludeContentTypes" : [ ],
    "zipBombCompressionRatio" : 200,
    "zipBombMaxDepth" : 200,
    "zipBombMaxPackageEntryDepth" : 20,
    "type" : "tika-parser",
    "skip" : false,
    "secretSourceStageId" : "conn_tika"
  }, {
    "type" : "field-mapping",
    "id" : "conn_mapping",
    "mappings" : [ {
      "source" : "Content-Encoding",
      "target" : "contentEncoding_s",
      "operation" : "move"
    }, {
      "source" : "Character-Set",
      "target" : "characterSet_s",
      "operation" : "move"
    }, {
      "source" : "Content-Length",
      "target" : "contentLength_l",
      "operation" : "move"
    }, {
      "source" : "FileSize",
      "target" : "fileSize_l",
      "operation" : "move"
    }, {
      "source" : "FileName",
      "target" : "fileName_s",
      "operation" : "move"
    }, {
      "source" : "Content-Type",
      "target" : "mimeType_s",
      "operation" : "move"
    }, {
      "source" : "MimeType",
      "target" : "mimeType_s",
      "operation" : "move"
    }, {
      "source" : "Title",
      "target" : "title",
      "operation" : "move"
    }, {
      "source" : "Description",
      "target" : "description",
      "operation" : "move"
    }, {
      "source" : "Subject",
      "target" : "subject",
      "operation" : "move"
    }, {
      "source" : "created",
      "target" : "dateCreated_dt",
      "operation" : "move"
    }, {
      "source" : "ContentCreated",
      "target" : "dateCreated_dt",
      "operation" : "move"
    }, {
      "source" : "meta:creation_date",
      "target" : "dateCreated_dt",
      "operation" : "move"
    }, {
      "source" : "Creation-Date",
      "target" : "dateCreated_dt",
      "operation" : "move"
    }, {
      "source" : "date",
      "target" : "dateCreated_dt",
      "operation" : "move"
    }, {
      "source" : "Author",
      "target" : "author",
      "operation" : "move"
    }, {
      "source" : "meta:author",
      "target" : "author",
      "operation" : "move"
    }, {
      "source" : "Contributor",
      "target" : "author",
      "operation" : "move"
    }, {
      "source" : "LastModifiedBy",
      "target" : "author",
      "operation" : "move"
    }, {
      "source" : "Last-Author",
      "target" : "author",
      "operation" : "move"
    }, {
      "source" : "fullname",
      "target" : "author",
      "operation" : "move"
    }, {
      "source" : "meta:last-author",
      "target" : "author",
      "operation" : "move"
    }, {
      "source" : "Last-Modified",
      "target" : "last_modified",
      "operation" : "move"
    }, {
      "source" : "fileLastModified",
      "target" : "last_modified",
      "operation" : "move"
    }, {
      "source" : "ContentLastModified",
      "target" : "last_modified",
      "operation" : "move"
    }, {
      "source" : "Last-Save-Date",
      "target" : "last_modified",
      "operation" : "move"
    }, {
      "source" : "fullText",
      "target" : "content_txt",
      "operation" : "move"
    }, {
      "source" : "plainTextContent",
      "target" : "content_txt",
      "operation" : "move"
    }, {
      "source" : "plainTextMessageContent",
      "target" : "content_txt",
      "operation" : "move"
    }, {
      "source" : "body",
      "target" : "content_txt",
      "operation" : "move"
    }, {
      "source" : "content",
      "target" : "content_txt",
      "operation" : "move"
    }, {
      "source" : "keyword",
      "target" : "keywords",
      "operation" : "move"
    }, {
      "source" : "Keywords",
      "target" : "keywords",
      "operation" : "move"
    }, {
      "source" : "messageSubject",
      "target" : "title",
      "operation" : "move"
    }, {
      "source" : "name",
      "target" : "title",
      "operation" : "move"
    }, {
      "source" : "Page-Count",
      "target" : "pageCount_i",
      "operation" : "move"
    }, {
      "source" : "PageCount",
      "target" : "pageCount_i",
      "operation" : "move"
    }, {
      "source" : "Slide-Count",
      "target" : "pageCount_i",
      "operation" : "move"
    }, {
      "source" : "Slides",
      "target" : "pageCount_i",
      "operation" : "move"
    }, {
      "source" : "xmpTPg:NPages",
      "target" : "pageCount_i",
      "operation" : "move"
    }, {
      "source" : "parsing_time",
      "target" : "parsing_time_l",
      "operation" : "move"
    }, {
      "source" : "parsing",
      "target" : "parsing_s",
      "operation" : "move"
    }, {
      "source" : "Comments",
      "target" : "comments",
      "operation" : "move"
    }, {
      "source" : "resourceName",
      "target" : "resourcename_s",
      "operation" : "move"
    }, {
      "source" : "resource_name",
      "target" : "resourcename_s",
      "operation" : "move"
    }, {
      "source" : "Content-Location",
      "target" : "url",
      "operation" : "move"
    }, {
      "source" : "meta:character-count",
      "target" : "character-count_i",
      "operation" : "move"
    }, {
      "source" : "Word-Count",
      "target" : "wordCount_i",
      "operation" : "move"
    }, {
      "source" : "type",
      "target" : "type_s",
      "operation" : "move"
    }, {
      "source" : "X-Parsed-By",
      "target" : "xParsedBy_ss",
      "operation" : "move"
    }, {
      "source" : "body.links.anchor",
      "target" : "body_links_anchor_ss",
      "operation" : "move"
    }, {
      "source" : "body.links.params.alt",
      "target" : "body_links_params_alt_ss",
      "operation" : "move"
    }, {
      "source" : "body.links.params.type",
      "target" : "body_links_params_type_ss",
      "operation" : "move"
    }, {
      "source" : "body.links.title",
      "target" : "body_links_title_ss",
      "operation" : "move"
    }, {
      "source" : "body.links.targetUri",
      "target" : "body_links_targetUri_ss",
      "operation" : "move"
    }, {
      "source" : "Brightness Value",
      "target" : "Brightness_Value_ss",
      "operation" : "move"
    }, {
      "source" : "svn:eol-style",
      "target" : "svn_eol_style_s",
      "operation" : "move"
    }, {
      "source" : "svn:keywords",
      "target" : "svn_keywords",
      "operation" : "move"
    }, {
      "source" : "svn:last-author",
      "target" : "author",
      "operation" : "move"
    }, {
      "source" : "svn:last-change-date",
      "target" : "last_modified",
      "operation" : "move"
    }, {
      "source" : "svn:last-change-revision",
      "target" : "svn_last_change_revision_s",
      "operation" : "move"
    }, {
      "source" : "svn:mergeinfo",
      "target" : "svn_mergeinfo_txt",
      "operation" : "move"
    }, {
      "source" : "svn:mime-type",
      "target" : "svn_mime_type_ss",
      "operation" : "move"
    }, {
      "source" : "/(.*)_[isltbfd]s?/",
      "operation" : "keep"
    }, {
      "source" : "/(.*)_txt/",
      "operation" : "keep"
    }, {
      "source" : "/(.*)_en/",
      "operation" : "keep"
    }, {
      "source" : "/(.*)_dts?/",
      "operation" : "keep"
    }, {
      "source" : "/(.*)_t[ilfd]/",
      "operation" : "keep"
    }, {
      "source" : "/(.*)_p/",
      "operation" : "keep"
    }, {
      "source" : "/(.*)_c/",
      "operation" : "keep"
    }, {
      "source" : "/(.*)_coordinate/",
      "operation" : "keep"
    }, {
      "source" : "/attr_(.*)/",
      "operation" : "keep"
    }, {
      "source" : "/random_(.*)/",
      "operation" : "keep"
    }, {
      "source" : "/ignored_(.*)/",
      "operation" : "keep"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "conn_mapping"
  }, {
    "type" : "lang-detect",
    "id" : "conn_language_detection",
    "source" : [ "content", "title" ],
    "outputType" : "document",
    "outputKey" : "languages",
    "documentPostfix" : "_lang",
    "type" : "lang-detect",
    "skip" : false,
    "secretSourceStageId" : "conn_language_detection"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "dyn-mapping-default",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "dyn-mapping-default"
  }, {
    "type" : "solr-index",
    "id" : "solr-default",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "unmapped" : {
      "source" : "/(^.*)$/",
      "target" : "$1_txt",
      "operation" : "move"
    },
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "solr-default"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "metadata_normalization"
  }
}, {
  "id" : "ParkerPTS-default",
  "stages" : [ {
    "type" : "field-mapping",
    "id" : "4b8de56c-59fe-4e20-9e3a-de57ec654e2d",
    "mappings" : [ ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "4b8de56c-59fe-4e20-9e3a-de57ec654e2d"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "f91d5acb-8e07-4a6f-bdeb-6de5600430c2",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "f91d5acb-8e07-4a6f-bdeb-6de5600430c2"
  }, {
    "type" : "solr-index",
    "id" : "96b2f575-5a98-49cc-9e86-c73077df3629",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "96b2f575-5a98-49cc-9e86-c73077df3629"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerPTS-default"
  }
}, {
  "id" : "ParkerDotComTranslations-default",
  "stages" : [ {
    "type" : "field-mapping",
    "id" : "b8571c10-6168-4244-bf17-f20ec178a897",
    "mappings" : [ ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "b8571c10-6168-4244-bf17-f20ec178a897"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "10b51470-8786-484d-98db-007d20db593e",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "10b51470-8786-484d-98db-007d20db593e"
  }, {
    "type" : "solr-index",
    "id" : "fe2f6ad3-a626-4747-ba94-e5fcbeaf6a1e",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "fe2f6ad3-a626-4747-ba94-e5fcbeaf6a1e"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComTranslations-default"
  }
}, {
  "id" : "ParkerDotComMain-Blogs",
  "stages" : [ {
    "type" : "exclude-doc",
    "id" : "igm",
    "matchRules" : [ {
      "field" : "id",
      "pattern" : "(.*\\/page\\/[0-9]{1,2})"
    } ],
    "type" : "exclude-doc",
    "skip" : false,
    "label" : "Exclude Blog Paginations",
    "condition" : "doc.getId() != null",
    "secretSourceStageId" : "igm"
  }, {
    "type" : "exclude-doc",
    "id" : "ejq",
    "matchRules" : [ {
      "field" : "id",
      "pattern" : "(.*\\/categories|.*\\/sitemap.html|.*\\/rss)"
    } ],
    "type" : "exclude-doc",
    "skip" : false,
    "label" : "Remove sitemaps",
    "condition" : "doc.getId() != null",
    "secretSourceStageId" : "ejq"
  }, {
    "type" : "field-mapping",
    "id" : "xw",
    "mappings" : [ {
      "source" : "dc:title",
      "target" : "blog_title",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Map Blog Title",
    "secretSourceStageId" : "xw"
  }, {
    "type" : "regex-extractor",
    "id" : "ao",
    "rules" : [ {
      "source" : [ "blog_title" ],
      "target" : "blog_title",
      "writeMode" : "overwrite",
      "pattern" : "(.*) \\|.*",
      "returnIfNoMatch" : "input_string",
      "group" : 1
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Strip Title of Pipe and Additional Characters",
    "secretSourceStageId" : "ao"
  }, {
    "type" : "lang-detect",
    "id" : "urk",
    "source" : [ "body_t" ],
    "outputType" : "document",
    "outputKey" : "languages",
    "documentPostfix" : "_lang",
    "type" : "lang-detect",
    "skip" : false,
    "label" : "Detect Language",
    "condition" : "",
    "secretSourceStageId" : "urk"
  }, {
    "type" : "field-mapping",
    "id" : "qsi",
    "mappings" : [ {
      "source" : "blog_title",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "blog_title",
      "target" : "title_t",
      "operation" : "copy"
    }, {
      "source" : "blog_title",
      "target" : "autosuggest_general_text",
      "operation" : "copy"
    }, {
      "source" : "og:image",
      "target" : "thumbnailURL_s",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Field Mapping",
    "condition" : "",
    "secretSourceStageId" : "qsi"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "e5cbdd22-a4c8-4b11-8fc0-5517c26a4c7e",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "e5cbdd22-a4c8-4b11-8fc0-5517c26a4c7e"
  }, {
    "type" : "javascript-index",
    "id" : "j1",
    "script" : "function (doc) {\n  var language = \"\";\n  var doclang = doc.getFirstFieldValue(\"body_t_lang\");\n  var langnum = \"\";\n  var langname = \"\";\n  var langcode = \"\";\n  var countrycode = \"\";\n  var countryname = \"\";\n  var titletag = doc.getFirstFieldValue(\"blog_title\");\n\n  if (doclang !=null && doclang != \"\") {\n    switch (doclang) {\n        case \"cs\":\n            langnum = \"-27\";\n        \tlangcode = \"CS\";\n            langname = \"Czech\";\n            countrycode = \"687779\";\n            countryname = \"Czech Republic\";\n            break;\n        case \"da\":\n            langnum = \"-28\";\n        \tlangcode = \"DE\";\n            langname = \"Danish\";\n            countrycode = \"687554\";\n            countryname = \"Denmark\";\n            break;\n        case \"nl\":\n            langnum = \"-29\";\n        \tlangcode = \"NL\";\n            langname = \"Dutch\";\n            countrycode = \"687656,687570\";\n            countryname = \"Belgium,Netherlands\";\n            break;\n        case \"en\":\n            langnum = \"-1\";\n            langname = \"English\";\n        \tlangcode = \"EN\";\n            countrycode = \"688ALG,688ANG,687465,687463,688034,687656,687852,687541,A49072,687890,687779,687554,A54EGY,687499,688037,A29633,687GHA,687368,687854,C18590,687536,687365,687KEN,A54LIB,C66879,687848,688MOR,687570,687NIG,687616,687300,688040,A13868,687584,687466,687611,687530,687575,C73641,687912,687904,688TUN,688368,A54675,C19159,687PDC\";\n            countryname = \"Algeria,Angola,Argentina,Australia & New Zealand,Austria,Belgium,Brazil,Canada,Chile,China,Czech Republic,Denmark,Egypt,Finland,France,Germany,Ghana,Hong Kong,India,Ireland,Italy,Japan,Kenya,Libya,Luxembourg,Mexico,Morocco,Netherlands,Nigeria,Norway,Poland,Portugal,Russia,Singapore,South Africa,South Korea,Spain,Sweden,Switzerland,Taiwan,Thailand,Tunisia,Turkey,United Arab Emirates,United Kingdom,United States\";\n            break;\n        case \"fi\":\n            langnum = \"-24\";\n        \tlangcode = \"FI\";\n            langname = \"Finnish (Finland)\";\n            countrycode = \"687499\";\n            countryname = \"Finland\";\n            break;    \n        case \"fr\":\n            langnum = \"-2\";\n        \tlangcode = \"FR\";\n            langname = \"French\";\n            countrycode = \"688ALG,687656,687541,688037,C66879,688MOR,C73641,688TUN\";\n            countryname = \"Algeria,Belgium,Canada,France,Luxembourg,Morocco,Switzerland,Tunisia\";\n            break;\n        case \"de\":\n            langnum = \"-3\";\n        \tlangcode = \"DE\";\n            langname = \"German\";\n            countrycode = \"688034,A29633,C66879,C73641\";\n            countryname = \"Austria,Germany,Luxembourg,Switzerland\";\n            break;    \n        case \"hu\":\n            langnum = \"-31\";\n        \tlangcode = \"HU\";\n            langname = \"Hungarian\";\n            countrycode = \"111ZZZ\";\n            countryname = \"Hungary\";\n            break;\n        case \"it\":\n            langnum = \"-4\";\n        \tlangcode = \"IT\";\n            langname = \"Italian\";\n            countrycode = \"687536\";\n            countryname = \"Italy\";\n            break;\n        case \"ja\":\n            langnum = \"-10\";\n        \tlangcode = \"JP\";\n            langname = \"Japanese\";\n            countrycode = \"687365\";\n            countryname = \"Japan\";\n            break;\n        case \"ko\":\n            langnum = \"-9\";\n        \tlangcode = \"KO\";\n            langname = \"Korean\";\n            countrycode = \"687611\";\n            countryname = \"Korea\";\n            break;\n        case \"nb\":\n            langnum = \"-25\";\n        \tlangcode = \"NO\";\n            langname = \"Norwegian\";\n            countrycode = \"687616\";\n            countryname = \"Norway\";\n            break;\n        case \"pl\":\n            langnum = \"-22\";\n        \tlangcode = \"PL\";\n            langname = \"Polish\";\n            countrycode = \"687300\";\n            countryname = \"Poland\";\n            break;\n        case \"ru\":\n            langnum = \"-20\";\n        \tlangcode = \"RU\";\n            langname = \"Russian\";\n            countrycode = \"A13868\";\n            countryname = \"Russia\";\n            break;\n        case \"pt\":\n            langnum = \"-6\";\n        \tlangcode = \"PT\";\n            langname = \"Portuguese\";\n            countrycode = \"688040,687852\";\n            countryname = \"Brazil,Portgal\";\n            break;\n        case \"zh\":\n            langnum = \"-7\";\n        \tlangcode = \"ZH\";\n            langname = \"Simplified Chinese\";\n            countrycode = \"687890\";\n            countryname = \"China\";\n            break;\n        case \"es\":\n            langnum = \"-5\";\n        \tlangcode = \"ES\";\n            langname = \"Spanish\";\n            countrycode = \"A49072,687848,687530,687PDC\";\n            countryname = \"Argentina,Chile,Mexico,Spain\";\n            break;\n        case \"sv\":\n            langnum = \"-26\";\n        \tlangcode = \"SV\";\n            langname = \"Swedish\";\n            countrycode = \"687575\";\n            countryname = \"Sweden\";\n            break;\n        case \"th\":\n            langnum = \"-32\";\n        \tlangcode = \"TH\";\n            langname = \"Thai\";\n            countrycode = \"687904\";\n            countryname = \"Thailand\";\n            break;\n        case \"tw\":\n            langnum = \"-8\";\n        \tlangcode = \"TW\";\n            langname = \"Traditional Chinese\";\n            countrycode = \"687912\";\n            countryname = \"Taiwan\";\n            break;\n        case \"tr\":\n            langnum = \"-30\";\n        \tlangcode = \"TR\";\n            langname = \"Turkish\";\n            countrycode = \"688368\";\n            countryname = \"Turkey\";\n            break;\n        case \"vi\":\n            langnum = \"-34\";\n        \tlangcode = \"VI\";\n            langname = \"Vietnamese\";\n            countrycode = \"222ZZZ\";\n            countryname = \"Vietnam\";\n            break;\n      default:\n        langnum=\"0\";\n        langcode = \"ZZ\";\n        countrycode = \"000ZZZ\";\n        countryname = \"Unknown\";\n                   }\n  }\n\n  var docurl = doc.getFirstFieldValue(\"tikaHandlerLocation\");\n  //var docurl =\"test\";\n  doc.setField(\"siteSection_ss\",\"General Content\");\n  doc.setField(\"siteSubSection_ss\",\"Blogs\");\n   doc.setField(\"otherType_ss\",\"Blogs\");\n  doc.setField(\"contentSource_s\",\"WebCrawl\");\n  doc.setField(\"language_is\",langnum);\n  doc.setField(\"languageName_ss\",langname);\n  doc.setField(\"languageCode_ss\",langcode);\n  doc.setField(\"countryId_ss\",countrycode);\n  doc.setField(\"countryName_ss\",countryname);\n  doc.setField(\"urlKeyword_s\",docurl);\n  doc.setField(\"title_t\", titletag);\n  doc.setField(\"audience_ss\",\"public\");\n  doc.setField(\"suggest_type_s\",\"standard\");\n  //doc.setField(\"thumbnailURL_s\", \"/parkerimages/Parker.com/Controlled%20Documents/Support/Support%20Category%20images/blog.gif\");\n\n  return doc;\n  \n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set basic field values (JS)",
    "secretSourceStageId" : "j1"
  }, {
    "type" : "regex-extractor",
    "id" : "uqy",
    "rules" : [ {
      "source" : [ "countryId_ss" ],
      "target" : "countryId_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryName_ss" ],
      "target" : "countryName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageName_ss" ],
      "target" : "languageName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageCode_ss" ],
      "target" : "languageCode_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split Country Language Fields",
    "secretSourceStageId" : "uqy"
  }, {
    "type" : "javascript-index",
    "id" : "qlm",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n//  logger.info(\"**** Reconfiguring fields on \" + id + \" ****\");\n  \n  \tvar doclangstring = doc.getFirstFieldValue(\"language_is\");\n  \tvar originalTitle = doc.getFirstFieldValue(\"title_t\");\n    var originalDescription = doc.getFirstFieldValue(\"description_t\");\n\t\n\tvar trimmedSiteSections = \"\";\n\tvar trimmedSiteSubSections = \"\";\n    var trimmedOtherTypes = \"\";\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSection <start>\n\t\t**********************************/\n    var originalSiteSection = doc.getFieldValues(\"siteSection_ss\");\n    var newSiteSection = \"\";\n    \n\t\n    var arrayLength = originalSiteSection.length;\n    \n\t\n\tif (arrayLength >0){\n    for (var i = 0; i < arrayLength; i++)\n  {\n  \n  if (originalSiteSection[i] !=null && originalSiteSection[i] !=\"\"){\n  \n    \n    newSiteSection = newSiteSection + \",\" + originalSiteSection[i];\n    \n  }\n    \n    trimmedSiteSections = newSiteSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSection <end>\n\t\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSubSection <start>\n\t\t**********************************/\n    var originalSiteSubSection = doc.getFieldValues(\"siteSubSection_ss\");\n    var newSiteSubSection = \"\";\n    \n\t\n    var arrayLength4 = originalSiteSubSection.length;\n    \n\t\n\tif (arrayLength4 >0){\n    for (var l = 0; l < arrayLength4; l++)\n  {\n  \n  if (originalSiteSubSection[l] !=null && originalSiteSubSection[l] !=\"\"){\n  \n    \n    newSiteSubSection = newSiteSubSection + \",\" + originalSiteSubSection[l];\n    \n  }\n    \n    trimmedSiteSubSections = newSiteSubSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSubSection <end>\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble otherType <start>\n\t\t**********************************/\n    var originalOtherType = doc.getFieldValues(\"otherType_ss\");\n    var newOtherType = \"\";\n    \n\t\n    var arrayLength5 = originalOtherType.length;\n    \n\t\n\tif (arrayLength5 >0){\n    for (var m = 0; m < arrayLength5; m++)\n  {\n  \n  if (originalOtherType[m] !=null && originalOtherType[m] !=\"\"){\n  \n    \n    newOtherType = newOtherType + \",\" + originalOtherType[m];\n    \n  }\n    \n    trimmedOtherTypes = newOtherType.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble otherType <end>\n\n\n  \n//  logger.info(\"Setting data ...\");\n  \n    if (doclangstring!=null){\n  \n    switch (doclangstring) {\n\t\n\t\n        case \"-1\":\n\t\t\tdoc.setField(\"titleEN_t\",originalTitle);\n        \tdoc.setField(\"descriptionEN_t\",originalDescription);\n        \tdoc.setField(\"siteSectionEN_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionEN_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"otherTypeEN_ss\",trimmedOtherTypes);\n            break;\n        case \"-2\":\n            doc.setField(\"titleFR_t\",originalTitle);\n        \tdoc.setField(\"descriptionFR_t\",originalDescription);\n\n            break;\n        case \"-3\":\n            doc.setField(\"titleDE_t\",originalTitle);\n        \tdoc.setField(\"descriptionDE_t\",originalDescription);\n\n            break;\n        case \"-4\":\n            doc.setField(\"titleIT_t\",originalTitle);\n        \tdoc.setField(\"descriptionIT_t\",originalDescription);\n\n            break;\n        case \"-5\":\n            doc.setField(\"titleES_t\",originalTitle);\n        \tdoc.setField(\"descriptionES_t\",originalDescription);\n\n            break;\n        case \"-6\":\n            doc.setField(\"titlePT_t\",originalTitle);\n        \tdoc.setField(\"descriptionPT_t\",originalDescription);\n\n            break;\n        case \"-7\":\n            doc.setField(\"titleZH_t\",originalTitle);\n        \tdoc.setField(\"descriptionZH_t\",originalDescription);\n\n            break;\n        case \"-8\":\n            doc.setField(\"titleTW_t\",originalTitle);\n        \tdoc.setField(\"descriptionTW_t\",originalDescription);\n\n            break;\n        case \"-9\":\n            doc.setField(\"titleKO_t\",originalTitle);\n        \tdoc.setField(\"descriptionKO_t\",originalDescription);\n\n            break;\n        case \"-10\":\n            doc.setField(\"titleJP_t\",originalTitle);\n        \tdoc.setField(\"descriptionJP_t\",originalDescription);\n\n            break;\n        case \"-20\":\n            doc.setField(\"titleRU_t\",originalTitle);\n        \tdoc.setField(\"descriptionRU_t\",originalDescription);\n\n            break;\n        case \"-22\":\n            doc.setField(\"titlePL_t\",originalTitle);\n        \tdoc.setField(\"descriptionPL_t\",originalDescription);\n\n            break;\n        case \"-24\":\n            doc.setField(\"titleFI_t\",originalTitle);\n        \tdoc.setField(\"descriptionFI_t\",originalDescription);\n\n            break;\n        case \"-25\":\n            doc.setField(\"titleNO_t\",originalTitle);\n        \tdoc.setField(\"descriptionNO_t\",originalDescription);\n\n            break;\n        case \"-26\":\n            doc.setField(\"titleSV_t\",originalTitle);\n        \tdoc.setField(\"descriptionSV_t\",originalDescription);\n\n            break;\n        case \"-27\":\n            doc.setField(\"titleCS_t\",originalTitle);\n        \tdoc.setField(\"descriptionCS_t\",originalDescription);\n\n            break;\n        case \"-28\":\n            doc.setField(\"titleDK_t\",originalTitle);\n        \tdoc.setField(\"descriptionDK_t\",originalDescription);\n\n            break;\n        case \"-29\":\n            doc.setField(\"titleNL_t\",originalTitle);\n        \tdoc.setField(\"descriptionNL_t\",originalDescription);\n\n            break;\t\n        case \"-30\":\n            doc.setField(\"titleTR_t\",originalTitle);\n        \tdoc.setField(\"descriptionTR_t\",originalDescription);\n\n            break;\n        case \"-31\":\n            doc.setField(\"titleHU_t\",originalTitle);\n        \tdoc.setField(\"descriptionHU_t\",originalDescription);\n\n            break;\n        case \"-32\":\n            doc.setField(\"titleTH_t\",originalTitle);\n        \tdoc.setField(\"descriptionTH_t\",originalDescription);\n\n            break;\n        case \"-34\":\n            doc.setField(\"titleVI_t\",originalTitle);\n        \tdoc.setField(\"descriptionVI_t\",originalDescription);\n\n            break;\t\t\n\n                   }\n    }\n  \n\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Copy data to lang-specific fields (JS)",
    "secretSourceStageId" : "qlm"
  }, {
    "type" : "javascript-index",
    "id" : "5um",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** siteSection translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n    doc.removeFields(\"_translation_SiteSection_ENLUError_s\");\n    doc.removeFields(\"_translation_SiteSection_LUError_s\");\n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"siteSection_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n\t\t\t//logger.info(\"language is not null\");\n\t\t\t//logger.info(\"English Value to find: \" + englishValue);\n\t\t\t//logger.info(\"**** get English Parent ***\");\n  \n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"siteSection\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_SiteSection_ENLUError_s\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      doc.setField(\"_translation_SiteSection_LUError_s\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"siteSectionEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionPT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionPT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionPL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionPL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}\n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "siteSectionXX Facet translation (JS)",
    "secretSourceStageId" : "5um"
  }, {
    "type" : "javascript-index",
    "id" : "8zm",
    "script" : "function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** siteSubSection translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n    doc.removeFields(\"_translation_SiteSubSection_ENLUError_s\");\n    doc.removeFields(\"_translation_SiteSubSection_LUError_s\");\n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"siteSubSection_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n          //logger.info(\"language is not null\");\n          //logger.info(\"English Value to find: \" + englishValue);\n          //logger.info(\"**** get English Parent ***\");\n  \n  \t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"siteSubSection\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_SiteSubSection_ENLUError_s\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      doc.setField(\"_translation_SiteSubSection_LUError_s\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"siteSubSectionEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionPT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionPT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionPL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionPL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "siteSubSection Facet translation (JS)",
    "secretSourceStageId" : "8zm"
  }, {
    "type" : "javascript-index",
    "id" : "6hg",
    "script" : "function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** otherType translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n    doc.removeFields(\"_translation_OtherType_ENLUError_s\");\n    doc.removeFields(\"_translation_OtherType_LUError_s\");\n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"otherType_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n          //logger.info(\"language is not null\");\n          //logger.info(\"English Value to find: \" + englishValue);\n          //logger.info(\"**** get English Parent ***\");\n  \n  \t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"Other Category\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_SiteSection_ENLUError_s\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      doc.setField(\"_translation_SiteSection_LUError_s\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"otherTypeEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypePT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypePT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypePL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypePL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "otherType Facet Translation (JS)",
    "secretSourceStageId" : "6hg"
  }, {
    "type" : "regex-extractor",
    "id" : "zy",
    "rules" : [ {
      "source" : [ "siteSectionEN_ss" ],
      "target" : "siteSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFR_ss" ],
      "target" : "siteSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDE_ss" ],
      "target" : "siteSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionIT_ss" ],
      "target" : "siteSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionES_ss" ],
      "target" : "siteSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPT_ss" ],
      "target" : "siteSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionZH_ss" ],
      "target" : "siteSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTW_ss" ],
      "target" : "siteSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionKO_ss" ],
      "target" : "siteSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionJP_ss" ],
      "target" : "siteSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionRU_ss" ],
      "target" : "siteSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPL_ss" ],
      "target" : "siteSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFI_ss" ],
      "target" : "siteSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNO_ss" ],
      "target" : "siteSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionSV_ss" ],
      "target" : "siteSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionCS_ss" ],
      "target" : "siteSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDK_ss" ],
      "target" : "siteSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNL_ss" ],
      "target" : "siteSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTR_ss" ],
      "target" : "siteSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionHU_ss" ],
      "target" : "siteSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTH_ss" ],
      "target" : "siteSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionVI_ss" ],
      "target" : "siteSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSection Lang Fields",
    "secretSourceStageId" : "zy"
  }, {
    "type" : "regex-extractor",
    "id" : "bzy",
    "rules" : [ {
      "source" : [ "siteSubSectionEN_ss" ],
      "target" : "siteSubSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFR_ss" ],
      "target" : "siteSubSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDE_ss" ],
      "target" : "siteSubSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionIT_ss" ],
      "target" : "siteSubSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionES_ss" ],
      "target" : "siteSubSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPT_ss" ],
      "target" : "siteSubSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionZH_ss" ],
      "target" : "siteSubSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTW_ss" ],
      "target" : "siteSubSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionKO_ss" ],
      "target" : "siteSubSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionJP_ss" ],
      "target" : "siteSubSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionRU_ss" ],
      "target" : "siteSubSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPL_ss" ],
      "target" : "siteSubSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFI_ss" ],
      "target" : "siteSubSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNO_ss" ],
      "target" : "siteSubSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionSV_ss" ],
      "target" : "siteSubSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionCS_ss" ],
      "target" : "siteSubSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDK_ss" ],
      "target" : "siteSubSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNL_ss" ],
      "target" : "siteSubSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTR_ss" ],
      "target" : "siteSubSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionHU_ss" ],
      "target" : "siteSubSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTH_ss" ],
      "target" : "siteSubSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionVI_ss" ],
      "target" : "siteSubSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split site SubSection Lang Fields",
    "secretSourceStageId" : "bzy"
  }, {
    "type" : "regex-extractor",
    "id" : "bzyrr",
    "rules" : [ {
      "source" : [ "productTypeEN_ss" ],
      "target" : "productTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeFR_ss" ],
      "target" : "productTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeDE_ss" ],
      "target" : "productTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeIT_ss" ],
      "target" : "productTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeES_ss" ],
      "target" : "productTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypePT_ss" ],
      "target" : "productTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeZH_ss" ],
      "target" : "productTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTW_ss" ],
      "target" : "productTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeKO_ss" ],
      "target" : "productTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeJP_ss" ],
      "target" : "productTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeRU_ss" ],
      "target" : "productTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypePL_ss" ],
      "target" : "productTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeFI_ss" ],
      "target" : "productTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeNO_ss" ],
      "target" : "productTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeSV_ss" ],
      "target" : "productTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeCS_ss" ],
      "target" : "productTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeDK_ss" ],
      "target" : "productTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeNL_ss" ],
      "target" : "productTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTR_ss" ],
      "target" : "productTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeHU_ss" ],
      "target" : "productTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeTH_ss" ],
      "target" : "productTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTypeVI_ss" ],
      "target" : "productTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split productType Lang Fields",
    "secretSourceStageId" : "bzyrr"
  }, {
    "type" : "javascript-index",
    "id" : "1j",
    "script" : "/* Last modified: 2018-01-10\n   Last modified by:  Terry Chambers / Onix\n   Change summary:\n   2018-01-10 - corrects productTaxonomyL1, adds L2, L3\n   2018-01-08 - adds new fields for Sprint 2 (productType, newsEventType, otherType)\n*/\n// HASHING FUNCTION\nfunction hashTheFacet(doc, facetToProcess, id) {\n    var facetValues;\n    var newHashedFacetValue = [];\n    var newHashedFacetFQ = [];\n    // get the values of the facet to be processed\n    facetValues = doc.getFieldValues(facetToProcess);\n    //logger.info(\"hashTheFacet(\" + facetToProcess + \")\");\n    // loop through the facet values and create hashes for them\n    facetValues.forEach(function (f) {\n\t\tif (f  != null){\n\t\t\tif (f.length!==0){\n\t\t\t\tvar newHashedFacet = f.hashCode();\t\t\n\t\t\t\tnewHashedFacetValue.push(\"p\" + newHashedFacet + \"$$$\" + f);\n\t\t\t\tnewHashedFacetFQ.push(\"p\" + newHashedFacet);\n\t\t\t}\n\t\t}\n    });\n    // return the hashed items\n    return [newHashedFacetValue, newHashedFacetFQ];\n}\n\nfunction computeLanguages(doc, id) {\n    // get the list of languages from the document\n    var langsfromdoc = doc.getFieldValues(\"language_is\");\n    var languages = [];\n    //logger.info(\"langsfromdoc \" + langsfromdoc);\n    //logger.info(\"Num of languages: \" + langsfromdoc.length);\n    // iterate through the languages and put them into an array\n    for each(var lang in langsfromdoc) {\n            switch (lang) {\n            case \"-1\":\n                languages.push('EN');\n                break;\n            case \"-2\":\n                languages.push('FR');\n                break;\n            case \"-3\":\n                languages.push('DE');\n                break;\n            case \"-4\":\n                languages.push('IT');\n                break;\n            case \"-5\":\n                languages.push('ES');\n                break;\n            case \"-6\":\n                languages.push('PT');\n                break;\n            case \"-7\":\n                languages.push('ZH');\n                break;\n            case \"-8\":\n                languages.push('TW');\n                break;\n            case \"-9\":\n                languages.push('KO');\n                break;\n            case \"-10\":\n                languages.push('JP');\n                break;\n            case \"-20\":\n                languages.push('RU');\n                break;\n            case \"-22\":\n                languages.push('PL');\n                break;\n            case \"-24\":\n                languages.push('FI');\n                break;\n            case \"-25\":\n                languages.push('NO');\n                break;\n            case \"-26\":\n                languages.push('SV');\n                break;\n            case \"-27\":\n                languages.push('CS');\n                break;\n            case \"-28\":\n                languages.push('DK');\n                break;\n            case \"-29\":\n                languages.push('NL');\n                break;\n            case \"-30\":\n                languages.push('TR');\n                break;\n            case \"-31\":\n                languages.push('HU');\n                break;\n            case \"-32\":\n                languages.push('TH');\n                break;\n            case \"-34\":\n                languages.push('VI');\n                break;\n            }\n        }\n        // if no languages found, try them all, to be safe\n    if (languages.length === 0) {\n        //logger.info(\"************* no languages found *******************\");\n        languages = ['EN', 'FR', 'DE', 'IT', 'ES', 'PT', 'ZH', 'TW', 'KO', 'JP', 'RU', 'PL', 'FI', 'NO', 'SV', 'CS', 'DK', 'NL', 'TR', 'HU', 'TH', 'VI'];\n    }\n    return languages;\n}\n// MAIN FUNCTION\nfunction (doc) {\n    //var facetsToHash; // array that we'll populate with our hashes\n    var id = doc.getId();\n    // list of facet fields that need to be processed\n    var listOfFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"parkerDivisionName_ss\", \"productTaxonomyL1_s\", \"productTaxonomyL2_s\", \"productTaxonomyL3_s\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"brand_ss\", \"cadType_ss\", \"product_ss\", \"languageName_ss\", \"fileType_ss\", \"eventYear_i\", \"newsYear_i\"];\n    // list of facet fields that are localized to other languages and need to be processed\n    var listOfLangFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"product_ss\", \"productTaxonomyL1_s\",\"productTaxonomyL2_s\",\"productTaxonomyL3_s\"];\n    var languages = []; // used to track the applicable languages\n    // if there are any language-based facets, compute the languages for this document\n    //logger.info(\"This is the list of LangFacets \" + listOfLangFacets);\n    if (listOfLangFacets) {\n        languages = computeLanguages(doc, id);\n        //logger.info(\"Finished computeLanguages(doc, id): \" + doc + \" , \" + id);\n        //logger.info(\"Resulting languages are \" + languages);\n    }\n    // process each facet from \"listOfFacets\" and store the values on to the document\n    for each(var facet in listOfFacets) {\n            //logger.info(\"The facet is \" + facet);\n            var location = facet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n            var tmpFacet = facet; // store the full facet name temporarily\n            var thisFacetShort = tmpFacet.substring(0, location); // take the facet name without the _ and data type\n            var facetsToHash = hashTheFacet(doc, facet, id); // calculate the hashes\n            //logger.info(\"facetsToHash \" + facetsToHash);\n            // takes the function output and puts into a string and then array\n            //logger.info(Object.prototype.toString.call(facetsToHash));\n            var facetsWithHashes = facetsToHash[0];\n            //logger.info(facetsWithHashes);\n            if (facetsWithHashes.length!==0) {\n                var facetsWithHashesArray = facetsWithHashes;\n                for each(var fwh in facetsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_facet\", fwh); // set the _facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array  \n            var fqsWithHashes = facetsToHash[1];\n            if (fqsWithHashes.length!==0) {\n                var fqsWithHashesArray = fqsWithHashes;\n                for each(var fqs in fqsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_fq\", fqs); // set the _fq field on the document\n                }\n            }\n        }\n        // process each facet from \"listOfLangFacets\" and store the values on the document\n    for each(var langFacet in listOfLangFacets) {\n        var location = langFacet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n        var thisFacetVarType = langFacet.substring(location + 1, langFacet.length); // take the data type from the facet name\n        for each(var lang in languages) {\n            var langFacetShort = langFacet.substring(0, location); // clear the field from previous runs\n            var thisFacetFull = langFacetShort + lang + \"_\" + thisFacetVarType; // compute the name of the full facet to process hashes for\n            langFacetShort = langFacetShort + lang; // compute the prefix of the facet name that will be written back to the document\n            var facetsToHash = hashTheFacet(doc, thisFacetFull, id); // calculate the hashes\n            // takes the function output and puts into a string and then array      \n            var facetsWithHashesLG = facetsToHash[0];\n            //logger.info(\"facetsWithHashesLG: \" + facetsWithHashesLG);\n            if (facetsWithHashesLG.length!==0) {\n                var facetsWithHashesLGArray = facetsWithHashesLG;\n                for each(var lg in facetsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_facet\", lg); // set the XX_facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array      \n            var fqsWithHashesLG = facetsToHash[1];\n            if (fqsWithHashesLG.length!==0) {\n                var fqsWithHashesLGArray = fqsWithHashesLG;\n                for each(var fqlg in fqsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_fq\", fqlg); // set the XX_fq field on the document\n                }\n            }\n        }\n    }\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Facet Hashing",
    "secretSourceStageId" : "1j"
  }, {
    "type" : "solr-index",
    "id" : "77a83747-b706-4d7f-b2df-de1b20fe3755",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "77a83747-b706-4d7f-b2df-de1b20fe3755"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComMain-Blogs"
  }
}, {
  "id" : "ParkerDotComMain_rules-default",
  "stages" : [ {
    "type" : "field-mapping",
    "id" : "0a072757-bbf7-4609-a7d5-6902cb05df25",
    "mappings" : [ ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "0a072757-bbf7-4609-a7d5-6902cb05df25"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "f5644ddc-8c56-4732-8aaf-34e6fc806654",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "f5644ddc-8c56-4732-8aaf-34e6fc806654"
  }, {
    "type" : "solr-index",
    "id" : "2a4a52db-ee5c-4aa5-abf5-0d1d3db6d0bf",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "2a4a52db-ee5c-4aa5-abf5-0d1d3db6d0bf"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComMain_rules-default"
  }
}, {
  "id" : "ParkerDotComMain-CategoriesQS",
  "stages" : [ {
    "type" : "javascript-index",
    "id" : "zul",
    "script" : "function (doc) {\nvar id = doc.getId();\n  var newid = \"cat-\" + id;\n\n  doc.setField(\"suggest_type_s\",\"category\");\n  doc.setField(\"contentSource_s\",\"WebSphereSolrCopy\");\n//  doc.removeField(\"_lw_batch_id_s\");\n // doc.removeField(\"_lw_data_source_pipeline_s\");\n // doc.removeField(\"_lw_data_source_collection_s\");\n // doc.removeField(\"_lw_data_source_s\");\n // doc.removeField(\"_lw_data_source_type_s\");\n  doc.setId(newid);\n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set Initial Field Values",
    "secretSourceStageId" : "zul"
  }, {
    "type" : "field-mapping",
    "id" : "fb1d8eb5-bbb3-4270-89dc-132de8c3cf93",
    "mappings" : [ {
      "source" : "title_t",
      "target" : "autosuggest_category_text",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "fb1d8eb5-bbb3-4270-89dc-132de8c3cf93"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "920311a4-4fc7-4a13-922b-0d6444b55828",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "920311a4-4fc7-4a13-922b-0d6444b55828"
  }, {
    "type" : "solr-index",
    "id" : "35cf7edb-16e3-4b63-beb7-3fbf728dffca",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "35cf7edb-16e3-4b63-beb7-3fbf728dffca"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComMain-CategoriesQS"
  }
}, {
  "id" : "ParkerDotComMainMaster_rules-default",
  "stages" : [ {
    "type" : "field-mapping",
    "id" : "23e92384-56f4-4bb4-98ea-2e95865f375b",
    "mappings" : [ ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "secretSourceStageId" : "23e92384-56f4-4bb4-98ea-2e95865f375b"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "f93b5b38-b361-4be1-9916-0d0281a4421a",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "secretSourceStageId" : "f93b5b38-b361-4be1-9916-0d0281a4421a"
  }, {
    "type" : "solr-index",
    "id" : "de44a11f-7aac-442b-895c-f34772ff4141",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "secretSourceStageId" : "de44a11f-7aac-442b-895c-f34772ff4141"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComMainMaster_rules-default"
  }
}, {
  "id" : "ParkerDotComMain-default",
  "stages" : [ {
    "type" : "javascript-index",
    "id" : "ii",
    "script" : "function (doc) {\n  var id = doc.getId();\n  //logger.info(\"**** Running default pipeline on \" + id + \" ****\");\n  \n  var currentdate = new Date(); \nvar datetime = \"Last Sync: \" + currentdate.getDate() + \"/\"\n                + (currentdate.getMonth()+1)  + \"/\" \n                + currentdate.getFullYear() + \" @ \"  \n                + currentdate.getHours() + \":\"  \n                + currentdate.getMinutes() + \":\" \n                + currentdate.getSeconds();\n  \n  doc.setField(\"feedTime_s\",datetime);\n  doc.setField(\"suggest_type_s\",\"standard\");\n  \n  logger.info(\"zzz setting timestamp on \" + id);\n  \n  return doc;\n  \n} \n  \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Time Stamp document (JS)",
    "secretSourceStageId" : "ii"
  }, {
    "type" : "javascript-index",
    "id" : "eb593e8a-73e7-4b5b-b161-bef47010d3cc",
    "script" : "/* Part number character replacements for matching alternate characters\nTakes the original \"compressed part number\" (normalized, without special characters/spaces)\nand replaces specific characters to permit matching in cases where someone has transposed characters.\nThis code only handles complete replacements of single characters and does not take into account\nall the possible variations such as when there is a mixture of 1s, 0s etc and the user only makes\nan error on one of them.  These are considered edge cases and least likely to occur.\n\nWritten by Onix Networking\n\nReplaces the characters as follows:\n\nl for 1\nI for 1\ni for 1\n1 for i\n1 for I\n1 for l\no for 0\nO for 0\n0 for o\n0 for O\n\n*/\n\nvar partnum = doc.getFirstFieldValue(\"compressedPartNumber_s\"); // the original compressed part number\nvar newpart = \"\"; // where the additional variations will be stored\n\n\nvar newpartl=partnum.replace(/l/g , \"1\");\nvar newpartI=partnum.replace(/I/g , \"1\");\nvar newparti=partnum.replace(/i/g , \"1\");\nvar newpartonei=partnum.replace(/1/g , \"i\");\nvar newpartoneI=partnum.replace(/1/g , \"I\");\nvar newpartonel=partnum.replace(/1/g , \"l\");\nvar newparto=partnum.replace(/o/g , \"0\");\nvar newpartO=partnum.replace(/O/g , \"0\");\nvar newpartzeroo=partnum.replace(/0/g , \"o\");\nvar newpartzeroO=partnum.replace(/0/g , \"O\");\n\nif (newpartl!=partnum){\nnewpart = newpart + \",\" + newpartl;\n}\n\nif (newpartI!=partnum){\nnewpart = newpart + \",\" + newpartI;\n}\n\nif (newparti!=partnum){\nnewpart = newpart + \",\" + newparti;\n}\n\nif (newpartonei!=partnum){\nnewpart = newpart + \",\" + newpartonei;\n}\n\nif (newpartoneI!=partnum){\nnewpart = newpart + \",\" + newpartoneI;\n}\n\nif (newpartonel!=partnum){\nnewpart = newpart + \",\" + newpartonel;\n}\n\nif (newparto!=partnum){\nnewpart = newpart + \",\" + newparto;\n}\n\nif (newpartO!=partnum){\nnewpart = newpart + \",\" + newpartO;\n}\n\nif (newpartzeroo!=partnum){\nnewpart = newpart + \",\" + newpartzeroo;\n}\n\nif (newpartzeroO!=partnum){\nnewpart = newpart + \",\" + newpartzeroO;\n}\n\ndoc.setField(\"altpartnums_ss\",newpart); // stores the final list of alternate compressed part numbers\n\n\n\n",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "Javascript - replace characters in compressed part number",
    "condition" : "doc.hasField(\"compressedPartNumber_s\")",
    "secretSourceStageId" : "eb593e8a-73e7-4b5b-b161-bef47010d3cc"
  }, {
    "type" : "field-mapping",
    "id" : "46df04cf-ab24-4352-9ee1-593976c23757",
    "mappings" : [ {
      "source" : "otProductName_ss",
      "target" : "product_ss",
      "operation" : "copy"
    }, {
      "source" : "title_t",
      "target" : "autosuggest_general_text",
      "operation" : "copy"
    }, {
      "source" : "titleEN_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleCS_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleDK_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleNL_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleFI_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleFR_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleDE_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleHU_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleIT_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleJP_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleKO_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleNO_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titlePL_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titlePT_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleRU_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleZH_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleES_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleSV_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleTH_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleTW_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleTR_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "titleVI_t",
      "target" : "autosuggest_support_text",
      "operation" : "copy"
    }, {
      "source" : "otLangSet_ss",
      "target" : "languageCode_ss",
      "operation" : "copy"
    }, {
      "source" : "otF3",
      "target" : "languageCode_ss",
      "operation" : "copy"
    }, {
      "source" : "otF3",
      "target" : "otF3_s",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "field-mapping",
    "secretSourceStageId" : "46df04cf-ab24-4352-9ee1-593976c23757"
  }, {
    "type" : "solr-dynamic-field-name-mapping",
    "id" : "fbb19ff1-6d93-45a0-9883-482f558433f2",
    "duplicateSingleValuedFields" : false,
    "fieldsToExclude" : [ ],
    "advancedTextFieldsIndexing" : true,
    "maxTextLengthForAdvancedIndexing" : 100,
    "type" : "solr-dynamic-field-name-mapping",
    "skip" : false,
    "label" : "solr-dynamic-field-name-mapping",
    "secretSourceStageId" : "fbb19ff1-6d93-45a0-9883-482f558433f2"
  }, {
    "type" : "javascript-index",
    "id" : "688c214e-6ec1-4cef-a524-70906a99a0db",
    "script" : "function (doc) {\n  var id = doc.getId();\n  logger.info(\"zzz **** Setting Available Countries on \" + id + \" ****SAC\");\n\n\n  var excludedCountries = doc.getFirstFieldValue(\"otExcludedCountryCodes_ss\");\n  var availableCountries = \"687890,C73641,A54LIB,688ANG,687KEN,687GHA,C66879,688ALG,688MOR,687NIG,688TUN,C18590,A54EGY,687368,687466,688040,A49072,A54675,687465,687904,687912,687779,688034,687656,A13868,687554,688368,687584,687499,687616,687300,C19159,687541,687365,687611,687575,687570,687463,687530,688037,687854,687536,687848,687852,A29633,687PDC\";\n\n  if (excludedCountries != null && excludedCountries != \"\"){\n  \texcludedCountries = excludedCountries.replace(/[,\\s]{2,}/,\",\"); //Removes double or more commas / spaces\n  \texcludedCountries = excludedCountries.replace(/^,*/,\"\"); //Removes all commas from the beginning\n  \texcludedCountries = excludedCountries.replace(/,*$/,\"\"); //Removes all commas from the end\n\n  \tvar array = excludedCountries.split(',');\n\n  \tvar arrayLength = array.length;\n\n  \tfor (var i = 0; i < arrayLength; i++) {\n    \tavailableCountries = availableCountries.replace(array[i] + \",\", \"\");\n      \tavailableCountries = availableCountries.replace(\",\" + array[i], \"\");\n      \tavailableCountries = availableCountries.replace(array[i], \"\");\n  \t}\n  }\n  \n  else\n  {\n    //logger.info(\"**** No excluded countries on \" + id + \" ****\");\n  }\n  \n  //logger.info(\"**** excluded countries for \" + id + \": \" + availableCountries);\n  \n  doc.setField(\"countryId_ss\",availableCountries);\n \n  \n  return doc;\n  \n} \n  \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set Available Countries (JS)",
    "condition" : "doc.hasField(\"otExcludedCountryCodes_ss\");",
    "secretSourceStageId" : "688c214e-6ec1-4cef-a524-70906a99a0db"
  }, {
    "type" : "javascript-index",
    "id" : "cos",
    "script" : "function (doc) {\n  var id = doc.getId();\n  logger.info(\"zzz **** Setting All Countries on \" + id + \" ****SDCL\");\n\n\n  var availableCountries = \"687890,C73641,A54LIB,688ANG,687KEN,687GHA,C66879,688ALG,688MOR,687NIG,688TUN,C18590,A54EGY,687368,687466,688040,A49072,A54675,687465,687904,687912,687779,688034,687656,A13868,687554,688368,687584,687499,687616,687300,C19159,687541,687365,687611,687575,687570,687463,687530,688037,687854,687536,687848,687852,A29633,687PDC\";\n  \n  doc.setField(\"countryId_ss\",availableCountries);\n  \n \n  \n  return doc;\n  \n} \n  \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set default country list on OT Support (JS)",
    "condition" : "(!doc.hasField(\"otExcludedCountryCodes_ss\")) && (!doc.hasField(\"otF3_s\"));",
    "secretSourceStageId" : "cos"
  }, {
    "type" : "javascript-index",
    "id" : "nvq",
    "script" : "function (doc) {\n  var id = doc.getId();\n  \n  if (id!=null){\n    \n  \tvar availableCountryIDs = doc.getFirstFieldValue(\"countryId_ss\");  \n    var availableCountryNames = doc.getFirstFieldValue(\"countryName_ss\");  \n  \tvar brands = doc.getFirstFieldValue(\"otBrand_ss\");\n  \tvar brandArray = brands.split(',');\n  \tvar brandArrayLength = brandArray.length;\n    var brandSet = false;\n  \n    \tfor (var b = 0; b < brandArrayLength; b++) {\n          if(brandArray[b]==\"N11284\"){\n            brandSet = true;\n            //logger.info(\"zzz Baldwin!!!\");\n            if(availableCountryIDs!=null){\n               //logger.info(\"zzz multi countries, appending\");\n               availableCountryIDs = availableCountryIDs + \",\" + brandArray[b];\n              if(availableCountryNames!=null){\n               \tavailableCountryNames = availableCountryNames + \",\" + \"Baldwin\";\n              }\n            }\n            else\n            {\n             // logger.info(\"zzz single countries, appending\");\n              availableCountryIDs = brandArray[b];\n              availableCountryNames = \"Baldwin\";\n            }\n          }\n  \t}\n    if(brandSet){\n    \t//logger.info(\"zzz setting the brand on countries ... \" + availableCountryIDs); \n  \t\tdoc.setField(\"countryId_ss\",availableCountryIDs);\n        doc.setField(\"countryName_ss\",availableCountryNames);\n    }\n  }\n  \n  return doc;\n  \n} \n  \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Handle Brands - Baldwin",
    "condition" : "doc.hasField(\"otBrand_ss\");",
    "secretSourceStageId" : "nvq"
  }, {
    "type" : "javascript-index",
    "id" : "j5o",
    "script" : "function (doc) {\n  var id = doc.getId();\n  \n  if (id!=null){\n    \n  \tvar divisions = doc.getFirstFieldValue(\"parkerDivision_ss\");\n  \tvar divisionArray = divisions.split(',');\n  \tvar divisionArrayLength = divisionArray.length;\n    var divisionSet = false;\n    var availableCountryIDs = doc.getFirstFieldValue(\"countryId_ss\");  \n    var availableCountryNames = doc.getFirstFieldValue(\"countryName_ss\"); \n  \n    \tfor (var d = 0; d < divisionArrayLength; d++) {\n          if(divisionArray[d]==\"350455\"){\n            divisionSet = true;\n            //logger.info(\"zzz TFS!!!\");\n            if(availableCountryIDs!=null){\n               //logger.info(\"zzz multi countries, appending\");\n               availableCountryIDs = availableCountryIDs + \",\" + divisionArray[d];\n              if(availableCountryNames!=null){\n               \tavailableCountryNames = availableCountryNames + \",\" + \"TFS\";\n              }\n            }\n            else\n            {\n              //logger.info(\"zzz single countries, appending\");\n              availableCountryIDs = divisionArray[d];\n              availableCountryNames = \"TFS\";\n            }\n          }\n  \t}\n    if(divisionSet){\n    \t//logger.info(\"zzz setting the division on countries ... \" + availableCountryIDs); \n  \t\tdoc.setField(\"countryId_ss\",availableCountryIDs);\n        doc.setField(\"countryName_ss\",availableCountryNames);\n    }\n  }\n  \n  return doc;\n  \n} \n  \n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Handle Divisions - TFS",
    "condition" : "doc.hasField(\"parkerDivision_ss\");",
    "secretSourceStageId" : "j5o"
  }, {
    "type" : "javascript-index",
    "id" : "3c18a7e9-e32f-4a83-aa24-5a5a2a3c1012",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n  logger.info(\"**** Setting language on \" + id + \" ****\");\n  \n  var doclangstring = doc.getFirstFieldValue(\"language_is\");\n  var doclangstringarray = doclangstring.split(\",\");\n  var length = doclangstringarray.length;\n   var langcode = \"\";\n    \n    //logger.info(\"original:  \" + doclangstring);\n    //logger.info(\"array: \" + doclangstringarray);\n    \n    for (i=0; i< length; i++) {\n     \n      //logger.info(\"lang #\" + i + \": \" + doclangstringarray[i]);\n      \n      \n          if (doclangstringarray[i]!=null){\n  \n    \t\tswitch (doclangstringarray[i]) {\n\t\n\t\n        case \"-1\":\n            langcode = langcode + \",\" + \"EN\";\n            break;\n        case \"-2\":\n        \tlangcode = langcode + \",\" + \"FR\";\n            break;\n        case \"-3\":\n            langcode = langcode + \",\" + \"DE\";\n            break;\n        case \"-4\":\n            langcode = langcode + \",\" + \"IT\";\n            break;\n        case \"-5\":\n            langcode = langcode + \",\" + \"ES\";\n            break;\n        case \"-6\":\n            langcode = langcode + \",\" + \"PT\";\n            break;\n        case \"-7\":\n            langcode = langcode + \",\" + \"ZH\";\n            break;\n        case \"-8\":\n            langcode = langcode + \",\" + \"TW\";\n            break;\n        case \"-9\":\n            langcode = langcode + \",\" + \"KO\";\n            break;\n        case \"-10\":\n            langcode = langcode + \",\" + \"JP\";\n            break;\n        case \"-20\":\n            langcode = langcode + \",\" + \"RU\";\n            break;\n        case \"-22\":\n            langcode = langcode + \",\" + \"PL\";\n            break;\n        case \"-24\":\n            langcode = langcode + \",\" + \"FI\";\n            break;\n        case \"-25\":\n            langcode = langcode + \",\" + \"NO\";\n            break;\n        case \"-26\":\n            langcode = langcode + \",\" + \"SV\";\n            break;\n        case \"-27\":\n            langcode = langcode + \",\" + \"CS\";\n            break;\n        case \"-28\":\n            langcode = langcode + \",\" + \"DK\";\n            break;\n        case \"-29\":\n            langcode = langcode + \",\" + \"NL\";\n            break;\t\n        case \"-30\":\n            langcode = langcode + \",\" + \"TR\";\n            break;\n        case \"-31\":\n            langcode = langcode + \",\" + \"HU\";\n            break;\n        case \"-32\":\n            langcode = langcode + \",\" + \"TH\";\n            break;\n        case \"-34\":\n            langcode = langcode + \",\" + \"VI\";\n            break;\t\t\n      default:\n        langcode= langcode + \",\" + \"ZZ\";\n                   }\n    }\n\n      \n    }\n    \n    langcode = langcode.replace(/[,\\s]{2,}/,\",\"); //Removes double or more commas / spaces\n  \tlangcode = langcode.replace(/^,*/,\"\"); //Removes all commas from the beginning\n  \tlangcode = langcode.replace(/,*$/,\"\"); //Removes all commas from the end\n    \n    \n   //logger.info(\"Final languages ====> \" + langcode);\n       doc.setField(\"languageCode_ss\",langcode);\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "Set Language (JS)",
    "condition" : "doc.hasField(\"languageName_ss\");",
    "secretSourceStageId" : "3c18a7e9-e32f-4a83-aa24-5a5a2a3c1012"
  }, {
    "type" : "javascript-index",
    "id" : "79c0be11-2f7d-4b5a-b32a-e7210fc3b6f3",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n  //logger.info(\"**** Setting Missing language on \" + id + \" ****\");\n  \n  var langname = \"\";\n  var langcode = \"\";\n  var doclangstring = doc.getFirstFieldValue(\"language_is\");\n  var doclang = doclangstring.split(',');\n  var arrayLength = doclang.length;\n  \n  \n  for (var i = 0; i < arrayLength; i++)\n  {\n  \n  if (doclang[i] !=null && doclang[i] !=\"\"){\n  \n // logger.info(\"**-----> \" + doclang[i]);\n  \n    switch (doclang[i]) {\n\t\n\t\n        case \"-1\":\n            langname = langname + \",\" + \"English\";\n        \tlangcode = langcode + \",\" + \"EN\";\n            break;\n        case \"-2\":\n            langname = langname + \",\" + \"French\";\n        \tlangcode = langcode + \",\" + \"FR\";\n            break;\n        case \"-3\":\n            langname = langname + \",\" + \"German\";\n        \tlangcode = langcode + \",\" + \"DE\";\n            break;\n        case \"-4\":\n            langname = langname + \",\" + \"Italian\";\n        \tlangcode = langcode + \",\" + \"IT\";\n            break;\n        case \"-5\":\n            langname = langname + \",\" + \"Spanish\";\n        \tlangcode = langcode + \",\" + \"ES\";\n            break;\n        case \"-6\":\n            langname = langname + \",\" + \"Portuguese\";\n        \tlangcode = langcode + \",\" + \"PT\";\n            break;\n        case \"-7\":\n            langname = langname + \",\" + \"Simplified Chinese\";\n        \tlangcode = langcode + \",\" + \"ZH\";\n            break;\n        case \"-8\":\n            langname = langname + \",\" + \"Traditional Chinese\";\n        \tlangcode = langcode + \",\" + \"TW\";\n            break;\n        case \"-9\":\n            langname = langname + \",\" + \"Korean\";\n        \tlangcode = langcode + \",\" + \"KO\";\n            break;\n        case \"-10\":\n            langname = langname + \",\" + \"Japanese\";\n        \tlangcode = langcode + \",\" + \"JP\";\n            break;\n        case \"-20\":\n            langname = langname + \",\" + \"Russian\";\n        \tlangcode = langcode + \",\" + \"RU\";\n            break;\n        case \"-22\":\n            langname = langname + \",\" + \"Polish\";\n        \tlangcode = langcode + \",\" + \"PL\";\n            break;\n        case \"-24\":\n            langname = langname + \",\" + \"Finnish (Finland)\";\n        \tlangcode = langcode + \",\" + \"FI\";\n            break;\n        case \"-25\":\n            langname = langname + \",\" + \"Norwegian\";\n        \tlangcode = langcode + \",\" + \"NO\";\n            break;\n        case \"-26\":\n            langname = langname + \",\" + \"Swedish\";\n        \tlangcode = langcode + \",\" + \"SV\";\n            break;\n        case \"-27\":\n            langname = langname + \",\" + \"Czech\";\n        \tlangcode = langcode + \",\" + \"CS\";\n            break;\n        case \"-28\":\n            langname = langname + \",\" + \"Danish\";\n        \tlangcode = langcode + \",\" + \"DK\";\n            break;\n        case \"-29\":\n            langname = langname + \",\" + \"Dutch\";\n        \tlangcode = langcode + \",\" + \"NL\";\n            break;\t\n        case \"-30\":\n            langname = langname + \",\" + \"Turkish\";\n        \tlangcode = langcode + \",\" + \"TR\";\n            break;\n        case \"-31\":\n            langname = langname + \",\" + \"Hungarian\";\n        \tlangcode = langcode + \",\" + \"HU\";\n            break;\n        case \"-32\":\n            langname = langname + \",\" + \"Thai\";\n        \tlangcode = langcode + \",\" + \"TH\";\n            break;\n        case \"-34\":\n            langname = langname + \",\" + \"Vietnamese\";\n        \tlangcode = langcode + \",\" + \"VI\";\n            break;\t\t\n      default:\n        langname=langname + \",\" + \"Unknown\";\n        langcode = langcode + \",\" + \"Unknown\";\n                   }\n\n       \n   //    logger.info(\"Initial doc lang was ----> \" + doclang);\n\t//   logger.info(\"Initial doc lang string was ----> \" + langname);\n\t   \n\t   var trimmedlanguages = langname.replace(/(^,)|(,$)/g, \"\");\n    \tvar trimmedlanguageCodes = langcode.replace(/(^,)|(,$)/g, \"\");\n  \n\t//   logger.info(\"Trimmed doc lang string was -----> \" + trimmedlanguages);\n   // logger.info(\"Trimmed doc lang code string was -----> \" + trimmedlanguageCodes);\n  \n\t   doc.setField(\"languageName_ss\",trimmedlanguages);\n\t   doc.setField(\"languageCode_ss\",trimmedlanguageCodes);\n  }\n    else\n    {\n      logger.info(\"**** No language found on \" + id + \" ****\");\n    }\n }\n \n\n\n \n \n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set Missing Language (JS)",
    "condition" : "!doc.hasField(\"languageName_ss\");",
    "secretSourceStageId" : "79c0be11-2f7d-4b5a-b32a-e7210fc3b6f3"
  }, {
    "type" : "regex-extractor",
    "id" : "01ea12a9-932e-4f0f-85b3-eb955b8f6414",
    "rules" : [ {
      "source" : [ "audience_ss" ],
      "target" : "audience_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadType_ss" ],
      "target" : "cadType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "cadURL_ss" ],
      "target" : "cadURL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryId_ss" ],
      "target" : "countryId_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "countryName_ss" ],
      "target" : "countryName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "fileType_ss" ],
      "target" : "fileType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageName_ss" ],
      "target" : "languageName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "language_is" ],
      "target" : "language_is",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "languageCode_ss" ],
      "target" : "languageCode_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "market_ss" ],
      "target" : "market_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otCategoryName_ss" ],
      "target" : "otCategoryName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otDivisionName_ss" ],
      "target" : "otDivisionName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otDivision_ss" ],
      "target" : "otDivision_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otEcomId_ls" ],
      "target" : "otEcomId_ls",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otExcludedCountryCodes_ss" ],
      "target" : "otExcludedCountryCodes_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otExcludedCounty_ss" ],
      "target" : "otExcludedCounty_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otLangSet_ss" ],
      "target" : "otLangSet_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otMarket_ss" ],
      "target" : "otMarket_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otMarketsName_ss" ],
      "target" : "otMarketsName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otProductName_ss" ],
      "target" : "otProductName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otTagAllPS_ss" ],
      "target" : "otTagAllPS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otTagAllPT_ss" ],
      "target" : "otTagAllPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otTagType_ss" ],
      "target" : "otTagType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otTechnologyName_ss" ],
      "target" : "otTechnologyName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otTechnology_ss" ],
      "target" : "otTechnology_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivision_ss" ],
      "target" : "parkerDivision_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "parkerDivisionName_ss" ],
      "target" : "parkerDivisionName_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "product_ss" ],
      "target" : "product_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSection_ss" ],
      "target" : "siteSection_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSection_ss" ],
      "target" : "siteSubSection_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportType_ss" ],
      "target" : "supportType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceType_ss" ],
      "target" : "supportResourceType_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technology_ss" ],
      "target" : "technology_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "authIds_ss" ],
      "target" : "authIds_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "customerIds_ss" ],
      "target" : "customerIds_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split Fields",
    "secretSourceStageId" : "01ea12a9-932e-4f0f-85b3-eb955b8f6414"
  }, {
    "type" : "javascript-index",
    "id" : "a4fef4b4-4e73-4317-bb3a-69ebb285014c",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n//  logger.info(\"**** Reconfiguring fields on \" + id + \" ****\");\n  \n  \tvar doclangstring = doc.getFieldValues(\"language_is\");\n  \tvar originalTitle = doc.getFirstFieldValue(\"title_t\");\n    var originalDescription = doc.getFirstFieldValue(\"description_t\");\n\t\n\tvar trimmedSiteSections = \"\";\n\tvar trimmedSiteSubSections = \"\";\n    var trimmedOtherTypes = \"\";\n    var trimmedNewsEventsTypes = \"\";\n    var trimmedMarkets = \"\";\n    var trimmedTechnologies = \"\";    \n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSection <start>\n\t\t**********************************/\n    var originalSiteSection = doc.getFieldValues(\"siteSection_ss\");\n    var newSiteSection = \"\";\n    \n\t\n    var arrayLength = originalSiteSection.length;\n    \n\t\n\tif (arrayLength >0){\n    for (var i = 0; i < arrayLength; i++)\n  {\n  \n  if (originalSiteSection[i] !=null && originalSiteSection[i] !=\"\"){\n  \n    \n    newSiteSection = newSiteSection + \",\" + originalSiteSection[i];\n    \n  }\n    \n    trimmedSiteSections = newSiteSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSection <end>\n\t\t\n\t\t\n\t\t\n\t\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSubSection <start>\n\t\t**********************************/\n    var originalSiteSubSection = doc.getFieldValues(\"siteSubSection_ss\");\n    var newSiteSubSection = \"\";\n    \n\t\n    var arrayLength4 = originalSiteSubSection.length;\n    \n\t\n\tif (arrayLength4 >0){\n    for (var l = 0; l < arrayLength4; l++)\n  {\n  \n  if (originalSiteSubSection[l] !=null && originalSiteSubSection[l] !=\"\"){\n  \n    \n    newSiteSubSection = newSiteSubSection + \",\" + originalSiteSubSection[l];\n    \n  }\n    \n    trimmedSiteSubSections = newSiteSubSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSubSection <end>\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble otherType <start>\n\t\t**********************************/\n\n    var originalOtherType = doc.getFieldValues(\"otherType_ss\");\n    var newOtherType = \"\";\n    \n\t\n    var arrayLength7 = originalOtherType.length;\n    \n\t\n\tif (arrayLength7 >0){\n    for (var p = 0; p < arrayLength7; p++)\n  {\n  \n  if (originalOtherType[p] !=null && originalOtherType[p] !=\"\"){\n  \n    \n    newOtherType = newOtherType + \",\" + originalOtherType[p];\n    \n  }\n    \n    trimmedOtherTypes = newOtherType.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble otherType <end>    \n\n\t\t/*********************************\n\t\tSplit and re-assemble newsEventsType <start>\n\t\t**********************************/\n\n    var originalNewsEventsType = doc.getFieldValues(\"newsEventsType_ss\");\n    var newNewsEventsType = \"\";\n    \n\t\n    var arrayLength8 = originalNewsEventsType.length;\n    \n\t\n\tif (arrayLength8 >0){\n    for (var r = 0; r < arrayLength8; r++)\n  {\n  \n  if (originalNewsEventsType[r] !=null && originalNewsEventsType[r] !=\"\"){\n  \n    \n    newNewsEventsType = newNewsEventsType + \",\" + originalNewsEventsType[r];\n    \n  }\n    \n    trimmedNewsEventsTypes = newNewsEventsType.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble newsEventsType <end>      \n    \n    \n\t\t/*********************************\n\t\tSplit and re-assemble Market <start>\n\t\t**********************************/\n    var originalMarket = doc.getFieldValues(\"market_ss\");\n    var newMarket = \"\";\n    \n    //logger.info(\"Processing the Markets ...\");\n\t\n    var arrayLength5 = originalMarket.length;\n    \n\t\n\tif (arrayLength5 >0){\n    for (var m = 0; m < arrayLength5; m++)\n  {\n  \n  if (originalMarket[m] !=null && originalMarket[m] !=\"\"){\n  \n    \n    newMarket = newMarket + \",\" + originalMarket[m];\n    \n  }\n    \n    trimmedMarkets = newMarket.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble Market <end>\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble Technology <start>\n\t\t**********************************/\n    var originalTechnology = doc.getFieldValues(\"technology_ss\");\n    var newTechnology = \"\";\n    \n    //logger.info(\"Processing the Technology ...\");\n\t\n    var arrayLength6 = originalTechnology.length;\n    \n\t\n\tif (arrayLength6 >0){\n    for (var n = 0; n < arrayLength6; n++)\n  {\n  \n  if (originalTechnology[n] !=null && originalTechnology[n] !=\"\"){\n  \n    \n    newTechnology = newTechnology + \",\" + originalTechnology[n];\n    \n  }\n    \n    trimmedTechnologies = newTechnology.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble Technology <end>\n\n\n\n  \n  logger.info(\"Setting data ...\");\n  \n    if (doclangstring!=null){\n  \n        for (var s = 0; s < doclangstring.length; s++)\n      {\n      \n    switch (doclangstring[s]) {\n\t\n      \n\t\n        case \"-1\":\n\t\t\tdoc.setField(\"titleEN_t\",originalTitle);\n        \tdoc.setField(\"descriptionEN_t\",originalDescription);\n        \tdoc.setField(\"siteSectionEN_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"siteSubSectionEN_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"otherTypeEN_ss\",trimmedOtherTypes);\n        \tdoc.setField(\"newsEventsTypeEN_ss\",trimmedNewsEventsTypes);\n        \tdoc.setField(\"marketEN_ss\",trimmedMarkets);\n       \t\tdoc.setField(\"technologyEN_ss\",trimmedTechnologies);\n            break;\n        case \"-2\":\n            doc.setField(\"titleFR_t\",originalTitle);\n        \tdoc.setField(\"descriptionFR_t\",originalDescription);\n            break;\n        case \"-3\":\n            doc.setField(\"titleDE_t\",originalTitle);\n        \tdoc.setField(\"descriptionDE_t\",originalDescription);\n            break;\n        case \"-4\":\n            doc.setField(\"titleIT_t\",originalTitle);\n        \tdoc.setField(\"descriptionIT_t\",originalDescription);\n            break;\n        case \"-5\":\n            doc.setField(\"titleES_t\",originalTitle);\n        \tdoc.setField(\"descriptionES_t\",originalDescription);\n            break;\n        case \"-6\":\n            doc.setField(\"titlePT_t\",originalTitle);\n        \tdoc.setField(\"descriptionPT_t\",originalDescription);\n            break;\n        case \"-7\":\n            doc.setField(\"titleZH_t\",originalTitle);\n        \tdoc.setField(\"descriptionZH_t\",originalDescription);\n            break;\n        case \"-8\":\n            doc.setField(\"titleTW_t\",originalTitle);\n        \tdoc.setField(\"descriptionTW_t\",originalDescription);\n            break;\n        case \"-9\":\n            doc.setField(\"titleKO_t\",originalTitle);\n        \tdoc.setField(\"descriptionKO_t\",originalDescription);\n            break;\n        case \"-10\":\n            doc.setField(\"titleJP_t\",originalTitle);\n        \tdoc.setField(\"descriptionJP_t\",originalDescription);\n            break;\n        case \"-20\":\n            doc.setField(\"titleRU_t\",originalTitle);\n        \tdoc.setField(\"descriptionRU_t\",originalDescription);\n            break;\n        case \"-22\":\n            doc.setField(\"titlePL_t\",originalTitle);\n        \tdoc.setField(\"descriptionPL_t\",originalDescription);\n            break;\n        case \"-24\":\n            doc.setField(\"titleFI_t\",originalTitle);\n        \tdoc.setField(\"descriptionFI_t\",originalDescription);\n            break;\n        case \"-25\":\n            doc.setField(\"titleNO_t\",originalTitle);\n        \tdoc.setField(\"descriptionNO_t\",originalDescription);\n            break;\n        case \"-26\":\n            doc.setField(\"titleSV_t\",originalTitle);\n        \tdoc.setField(\"descriptionSV_t\",originalDescription);\n            break;\n        case \"-27\":\n            doc.setField(\"titleCS_t\",originalTitle);\n        \tdoc.setField(\"descriptionCS_t\",originalDescription);\n            break;\n        case \"-28\":\n            doc.setField(\"titleDK_t\",originalTitle);\n        \tdoc.setField(\"descriptionDK_t\",originalDescription);\n            break;\n        case \"-29\":\n            doc.setField(\"titleNL_t\",originalTitle);\n        \tdoc.setField(\"descriptionNL_t\",originalDescription);\n            break;\t\n        case \"-30\":\n            doc.setField(\"titleTR_t\",originalTitle);\n        \tdoc.setField(\"descriptionTR_t\",originalDescription);\n            break;\n        case \"-31\":\n            doc.setField(\"titleHU_t\",originalTitle);\n        \tdoc.setField(\"descriptionHU_t\",originalDescription);\n            break;\n        case \"-32\":\n            doc.setField(\"titleTH_t\",originalTitle);\n        \tdoc.setField(\"descriptionTH_t\",originalDescription);\n            break;\n        case \"-34\":\n            doc.setField(\"titleVI_t\",originalTitle);\n        \tdoc.setField(\"descriptionVI_t\",originalDescription);\n            break;\t\t\n\n                   }\n                         }\n    }\n  \n\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set lang-specific fields (Non-support)",
    "condition" : "doc.hasField(\"title_t\");",
    "secretSourceStageId" : "a4fef4b4-4e73-4317-bb3a-69ebb285014c"
  }, {
    "type" : "javascript-index",
    "id" : "73f46f6f-4f99-4f9f-9137-09ac997a5149",
    "script" : "  function (doc) {\n  \n  var id = doc.getId();\n  \n  //logger.info(\"**** Reconfiguring Support fields on \" + id + \" ****\");\n  \n  \tvar doclangstring = doc.getFieldValues(\"language_is\");\n    \n    //logger.info(\"languages is ... \" + doclangstring);\n\t\n\tvar trimmedSiteSections = \"\";\n\tvar trimmedSupportResourceType = \"\";\n\tvar trimmedSupportType = \"\";\n\tvar trimmedSiteSubSections = \"\";\n    var trimmedProducts = \"\";\n    var trimmedMarkets = \"\";\n    var trimmedTechnologies = \"\";\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSection <start>\n\t\t**********************************/\n    var originalSiteSection = doc.getFieldValues(\"siteSection_ss\");\n    var newSiteSection = \"\";\n    \n\t\n    var arrayLength = originalSiteSection.length;\n    \n\t\n\tif (arrayLength >0){\n    for (var i = 0; i < arrayLength; i++)\n  {\n  \n  if (originalSiteSection[i] !=null && originalSiteSection[i] !=\"\"){\n  \n    \n    newSiteSection = newSiteSection + \",\" + originalSiteSection[i];\n    \n  }\n    \n    trimmedSiteSections = newSiteSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSection <end>\n\t\t\n\t\t\n\t\t\n\t\t/*********************************\n\t\tSplit and re-assemble supportResourceType <start>\n\t\t**********************************/\n\n    var originalSupportResourceType = doc.getFieldValues(\"supportResourceType_ss\");\n    var newSupportResourceType = \"\";\n    \n\tif (originalSupportResourceType!=null && originalSupportResourceType!=\"\"){\n\t\tvar arrayLength2 = originalSupportResourceType.length;\n    \n\t\n\t\tif (arrayLength2 > 0){ \n\t\t\tfor (var j = 0; j < arrayLength2; j++)\n\t\t\t{\n  \n\t\t\t\tif (originalSupportResourceType[j] !=null && originalSupportResourceType[j] !=\"\"){\n  \n\t\n\t\t\t\t\tnewSupportResourceType = newSupportResourceType + \",\" + originalSupportResourceType[j];\n    \n\t\t\t}\n    \n\t\t\ttrimmedSupportResourceType = newSupportResourceType.replace(/(^,)|(,$)/g, \"\");\n    \n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n    // Split and re-assemble supportResourceType <end>\n\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble supportType <start>\n\t\t**********************************/\n\n    var originalSupportType = doc.getFieldValues(\"supportType_ss\");\n    var newSupportType = \"\";\n    \n\tif (originalSupportType!=null && originalSupportType!=\"\"){\n\t\tvar arrayLength3 = originalSupportType.length;\n    \n\t\n\t\tif (arrayLength3 > 0){ \n\t\t\tfor (var k = 0; k < arrayLength3; k++)\n\t\t\t{\n  \n\t\t\t\tif (originalSupportType[k] !=null && originalSupportType[k] !=\"\"){\n  \n\t\n\t\t\t\t\tnewSupportType = newSupportType + \",\" + originalSupportType[k];\n    \n\t\t\t}\n    \n\t\t\ttrimmedSupportType = newSupportType.replace(/(^,)|(,$)/g, \"\");\n              \n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n    // Split and re-assemble supportType <end>\n\t\n\t\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble siteSubSection <start>\n\t\t**********************************/\n    var originalSiteSubSection = doc.getFieldValues(\"siteSubSection_ss\");\n    var newSiteSubSection = \"\";\n    \n\t\n    var arrayLength4 = originalSiteSubSection.length;\n    \n\t\n\tif (arrayLength4 >0){\n    for (var l = 0; l < arrayLength4; l++)\n  {\n  \n  if (originalSiteSubSection[l] !=null && originalSiteSubSection[l] !=\"\"){\n  \n    \n    newSiteSubSection = newSiteSubSection + \",\" + originalSiteSubSection[l];\n    \n  }\n    \n    trimmedSiteSubSections = newSiteSubSection.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble siteSubSection <end>\n\t\n\n\n\t\t/*********************************\n\t\tSplit and re-assemble products <start>\n\t\t**********************************/\n    var originalProducts = doc.getFieldValues(\"product_ss\");\n    var newProducts = \"\";\n    \n\t\n    var arrayLength7 = originalProducts.length;\n\t\n\tif (arrayLength7 >0){\n      \n\n    for (var o = 0; o < arrayLength7; o++)\n  {\n  \n  if (originalProducts[o] !=null && originalProducts[o] !=\"\"){\n  \n    newProducts = newProducts + \",\" + originalProducts[o];\n    \n  }\n    \n    trimmedProducts = newProducts.replace(/(^,)|(,$)/g, \"\");\n  }\n   \n\n      \n  }\n  \n\n\t    // Split and re-assemble Products <end>    \n    \n    \n \t\t/*********************************\n\t\tSplit and re-assemble Market <start>\n\t\t**********************************/\n    var originalMarket = doc.getFieldValues(\"market_ss\");\n    var newMarket = \"\";\n    \n    //logger.info(\"Processing the Markets ...\");\n\t\n    var arrayLength5 = originalMarket.length;\n    \n\t\n\tif (arrayLength5 >0){\n    for (var m = 0; m < arrayLength5; m++)\n  {\n  \n  if (originalMarket[m] !=null && originalMarket[m] !=\"\"){\n  \n    \n    newMarket = newMarket + \",\" + originalMarket[m];\n    \n  }\n    \n    trimmedMarkets = newMarket.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble Market <end>\n\t\n\t\n\t\t/*********************************\n\t\tSplit and re-assemble Technology <start>\n\t\t**********************************/\n    var originalTechnology = doc.getFieldValues(\"technology_ss\");\n    var newTechnology = \"\";\n    \n    //logger.info(\"Processing the Technology ...\");\n\t\n    var arrayLength6 = originalTechnology.length;\n    \n\t\n\tif (arrayLength6 >0){\n    for (var n = 0; n < arrayLength6; n++)\n  {\n  \n  if (originalTechnology[n] !=null && originalTechnology[n] !=\"\"){\n  \n    \n    newTechnology = newTechnology + \",\" + originalTechnology[n];\n    \n  }\n    \n    trimmedTechnologies = newTechnology.replace(/(^,)|(,$)/g, \"\");\n    \n  }\n    \n  }\n\n\t    // Split and re-assemble Technology <end>   \n    \n    \n    \n\n  \n // logger.info(\"Setting data ...\");\n  \n    if (doclangstring!=null){\n  \n      for (var s = 0; s < doclangstring.length; s++)\n      {\n      \n      \n    switch (doclangstring[s]) {\n\t\n\t\n        case \"-1\":\n        \tdoc.setField(\"siteSectionEN_ss\",trimmedSiteSections);\n\t\t\tdoc.setField(\"supportResourceTypeEN_ss\",trimmedSupportResourceType);\n\t\t\tdoc.setField(\"supportTypeEN_ss\",trimmedSupportType);\n\t\t\tdoc.setField(\"siteSubSectionEN_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productEN_ss\",trimmedProducts);\n        \tdoc.setField(\"marketEN_ss\",trimmedMarkets);\n       \t\tdoc.setField(\"technologyEN_ss\",trimmedTechnologies);\n            break;\n        case \"-2\":\n        //\tdoc.setField(\"siteSectionFR_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeFR_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeFR_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionFR_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productFR_ss\",trimmedProducts);\n            break;\n        case \"-3\":\n        //\tdoc.setField(\"siteSectionDE_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeDE_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeDE_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionDE_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productDE_ss\",trimmedProducts);\n            break;\n        case \"-4\":\n        //\tdoc.setField(\"siteSectionIT_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeIT_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeIT_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionIT_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productIT_ss\",trimmedProducts);\n            break;\n        case \"-5\":\n        //\tdoc.setField(\"siteSectionES_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeES_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeES_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionES_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productES_ss\",trimmedProducts);\n            break;\n        case \"-6\":\n        //\tdoc.setField(\"siteSectionPT_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypePT_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypePT_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionPT_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productPT_ss\",trimmedProducts);\n            break;\n        case \"-7\":\n        //\tdoc.setField(\"siteSectionZH_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeZH_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeZH_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionZH_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productZH_ss\",trimmedProducts);\n            break;\n        case \"-8\":\n        //\tdoc.setField(\"siteSectionTW_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeTW_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeTW_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionTW_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productTW_ss\",trimmedProducts);\n            break;\n        case \"-9\":\n        //\tdoc.setField(\"siteSectionKO_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeKO_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeKO_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionKO_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productKO_ss\",trimmedProducts);\n            break;\n        case \"-10\":\n        //\tdoc.setField(\"siteSectionJP_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeJP_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeJP_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionJP_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productJP_ss\",trimmedProducts);\n            break;\n        case \"-20\":\n        //\tdoc.setField(\"siteSectionRU_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeRU_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeRU_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionRU_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productRU_ss\",trimmedProducts);\n            break;\n        case \"-22\":\n        //\tdoc.setField(\"siteSectionPL_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypePL_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypePL_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionPL_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productPL_ss\",trimmedProducts);\n            break;\n        case \"-24\":\n        //\tdoc.setField(\"siteSectionFI_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeFI_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeFI_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionFI_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productFI_ss\",trimmedProducts);\n            break;\n        case \"-25\":\n       // \tdoc.setField(\"siteSectionNO_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeNO_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeNO_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionNO_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productNO_ss\",trimmedProducts);\n            break;\n        case \"-26\":\n        //\tdoc.setField(\"siteSectionSV_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeSV_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeSV_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionSV_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productSV_ss\",trimmedProducts);\n            break;\n        case \"-27\":\n       // \tdoc.setField(\"siteSectionCS_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeCS_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeCS_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionCS_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productCS_ss\",trimmedProducts);\n            break;\n        case \"-28\":\n       // \tdoc.setField(\"siteSectionDK_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeDK_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeDK_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionDK_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productDK_ss\",trimmedProducts);\n            break;\n        case \"-29\":\n        //\tdoc.setField(\"siteSectionNL_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeNL_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeNL_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionNL_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productNL_ss\",trimmedProducts);\n            break;\t\n        case \"-30\":\n       // \tdoc.setField(\"siteSectionTR_ss\",originalSiteSection);\n\t\t//\tdoc.setField(\"supportResourceTypeTR_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeTR_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionTR_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productTR_ss\",trimmedProducts);\n            break;\n        case \"-31\":\n       // \tdoc.setField(\"siteSectionHU_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeHU_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeHU_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionHU_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productHU_ss\",trimmedProducts);\n            break;\n        case \"-32\":\n        //\tdoc.setField(\"siteSectionTH_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeTH_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeTH_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionTH_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productTH_ss\",trimmedProducts);\n            break;\n        case \"-34\":\n       // \tdoc.setField(\"siteSectionVI_ss\",trimmedSiteSections);\n\t\t//\tdoc.setField(\"supportResourceTypeVI_ss\",trimmedSupportResourceType);\n\t\t//\tdoc.setField(\"supportTypeVI_ss\",trimmedSupportType);\n\t\t//\tdoc.setField(\"siteSubSectionVI_ss\",trimmedSiteSubSections);\n        \tdoc.setField(\"productVI_ss\",trimmedProducts);\n            break;\t\t\n\n                   }\n        \n      }\n    }\n  \n\n\n \n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Set lang-specific fields (Support)",
    "condition" : "!doc.hasField(\"title_t\");",
    "secretSourceStageId" : "73f46f6f-4f99-4f9f-9137-09ac997a5149"
  }, {
    "type" : "javascript-index",
    "id" : "ey9c",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** siteSection translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\"); \n    doc.removeFields(\"_translation_SiteSection_ENLUError_s\");\n    doc.removeFields(\"_translation_SiteSection_LUError_s\");\n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"siteSection_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n\t\t\t//logger.info(\"language is not null\");\n\t\t\t//logger.info(\"English Value to find: \" + englishValue);\n\t\t\t//logger.info(\"**** get English Parent ***\");\n  \n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"siteSection\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_SiteSection_ENLUError_s\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      doc.setField(\"_translation_SiteSection_LUError_s\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"siteSectionEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionPT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionPT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionPL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionPL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSectionVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSectionVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}\n",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "siteSectionXX Facet Translation (Non-support) (JS)",
    "condition" : "doc.hasField(\"title_t\");",
    "secretSourceStageId" : "ey9c"
  }, {
    "type" : "javascript-index",
    "id" : "3vn",
    "script" : "function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** siteSubSection translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\"); \n    doc.removeFields(\"_translation_SiteSubSection_ENLUError_s\");\n    doc.removeFields(\"_translation_SiteSubSection_LUError_s\");\n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"siteSubSection_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n          //logger.info(\"language is not null\");\n          //logger.info(\"English Value to find: \" + englishValue);\n          //logger.info(\"**** get English Parent ***\");\n  \n  \t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"siteSubSection\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_SiteSubSection_ENLUError_s\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      oc.setField(\"_translation_SiteSubSection_LUError_s\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"siteSubSectionEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionPT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionPT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionPL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionPL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"siteSubSectionVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"siteSubSectionVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "siteSubSectionXX Facet Translation (Non-Support) (JS)",
    "condition" : "doc.hasField(\"title_t\");",
    "secretSourceStageId" : "3vn"
  }, {
    "type" : "javascript-index",
    "id" : "l7m",
    "script" : "function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** otherType translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n    doc.removeFields(\"_translation_OtherType_ENLUError_s\");\n    doc.removeFields(\"_translation_OtherType_LUError_s\");\n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"otherType_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n          //logger.info(\"language is not null\");\n          //logger.info(\"English Value to find: \" + englishValue);\n          //logger.info(\"**** get English Parent ***\");\n  \n  \t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"Other Category\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_OtherType_ENLUError_s\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      doc.setField(\"_translation_OtherType_LUError_s\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"otherTypeEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypePT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypePT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypePL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypePL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"otherTypeVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"otherTypeVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "otherTypeXX Facet Translation (Non-Support) (JS)",
    "condition" : "doc.hasField(\"title_t\");",
    "secretSourceStageId" : "l7m"
  }, {
    "type" : "javascript-index",
    "id" : "z6d",
    "script" : "function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  //logger.info(\" *** newsEventsType translation function main ***\")\n  \n  if (doc.getId() != null) { \n\n    var doclangstring = doc.getFirstFieldValue(\"languageCode_ss\");  \n    doc.removeFields(\"_translation_NewsEventsType_ENLUError_s\");\n    doc.removeFields(\"_translation_NewsEventsType_LUError_s\");\n    \n\n    //logger.info(\"Doc lang string is: \" + doclangstring);\n    \n    var englishValue = doc.getFirstFieldValue(\"newsEventsType_ss\");  \n    \n    \tif (doclangstring!=null && doclangstring!=\"EN\"){ \n          //logger.info(\"language is not null\");\n          //logger.info(\"English Value to find: \" + englishValue);\n          //logger.info(\"**** get English Parent ***\");\n  \n  \t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n    \t\tvar url = \"\";\n            var section = encodeURI(\"NewsEvents Category\");\n      \t\ttry {\n     \t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishValue) + \"%22)&q=*:*&rows=1\"));\n      \n\n      \n      \t\t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n      \t\t\t//logger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n       \t\t\t\t var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\t\t\t\t\tfor (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"transvalue \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t}\n        \n      \t\t\t}\n    \t\t} catch (e) {\n      \t\t\tlogger.error(e);\n              doc.setField(\"_translation_NewsEventsType_ENLUError_s\",e);\n    \t\t\t}\n          \n          \n        \t\tvar parentID = parentvalues;  \n          \n          \n          \n          //logger.info(\"parentID: \" + parentID);\n          \n\n    var transvalues = [];\n    var HttpURLConnectionTranslate = java.net.HttpURLConnection;\n    var URLTranslate = java.net.URL;\n    var InputStreamreaderTranslate = java.io.InputStreamReader;\n    var BufferedreaderTranslate = java.io.BufferedReader;\n    var eTranslate = java.lang.Exception;\n    var URLTranslate = \"\";\n      try {\n     var URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + doclangstring + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=1\"));      \n      \n      //logger.info(\"Translation URL: \" + URLTranslate);\n      var cTranslate = java.net.HttpURLConnectionTranslate;\n      cTranslate = URLTranslate.openConnection();\n      cTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      cTranslate.connect();\n      var statusTranslate = cTranslate.getResponseCode();\n    //  logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n      if (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n        var readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n        var responseTranslate = JSON.parse(readerTranslate.readLine());\n        var numTranslate = responseTranslate.response.numFound;\n        //logger.info(\"Translation Num Found: \" + numTranslate);\n        \n        // put all document titles from the query into an array and set as a multivalued string\n\n\t\tvar respTranslate = responseTranslate.response.docs;\n\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          //logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t  transvalues.push(respTranslate[j].translation_t);\n          \n\t\t}\n\n        \n      }\n    } catch (eTranslate) {\n      logger.error(eTranslate);\n      doc.setField(\"_translation_NewsEventsType_LUError_s\",eTranslate);\n    }\n\n          var translationItem = transvalues;\n          \n          //logger.info(\"translation FOUND: \" + translationItem);\n          \n          switch (doclangstring) { \n\n            case \"EN\":\n\n      \t\t\t//doc.setField(\"newsEventsTypeEN_ss\", objToString(englishValue));\n\n              break;\n              \n            case \"FR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeFR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeFR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n            \n            case \"DE\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeDE_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeDE_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"IT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeIT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeIT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;\n\n            case \"ES\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeES_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeES_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n              \n            case \"PT\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypePT_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypePT_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"ZH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeZH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeZH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n              \n            case \"TW\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeTW_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeTW_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"KO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeKO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeKO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"JP\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeJP_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeJP_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;  \n              \n            case \"RU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeRU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeRU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;   \n            \n            case \"PL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypePL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypePL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;    \n\n            case \"FI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeFI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeFI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NO\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeNO_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeNO_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"SV\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeSV_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeSV_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"CS\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeCS_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeCS_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"DK\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeDK_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeDK_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"NL\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeNL_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeNL_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TR\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeTR_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeTR_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"HU\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeHU_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeHU_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"TH\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeTH_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeTH_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n\n            case \"VI\":\n\n   \t \t\tif (translationItem.length>0) { // we found a value, process it\n      \t\t\tdoc.setField(\"newsEventsTypeVI_ss\", objToString(translationItem));\n    \t\t}\n   \t\t\telse { // no value found, keep original English value\n      \t\t\tdoc.setField(\"newsEventsTypeVI_ss\", objToString(englishValue));\n      \n   \t \t\t}\n\n              break;                \n              \n            default:\n                \n                               }\n    \n \t \t}\n  }\n\n  return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "newsEventsTypeXX Facet Translation (Non-Support) (JS)",
    "condition" : "doc.hasField(\"title_t\");",
    "secretSourceStageId" : "z6d"
  }, {
    "type" : "javascript-index",
    "id" : "k",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  var siteSectionStringCS = \"\";\n  var siteSectionStringDK = \"\";\n  var siteSectionStringNL = \"\";\n  var siteSectionStringFI = \"\";\n  var siteSectionStringFR = \"\";\n  var siteSectionStringDE = \"\";\n  var siteSectionStringHU = \"\";\n  var siteSectionStringIT = \"\";\n  var siteSectionStringJP = \"\";\n  var siteSectionStringKO = \"\";\n  var siteSectionStringNO = \"\";\n  var siteSectionStringPL = \"\";\n  var siteSectionStringPT = \"\";\n  var siteSectionStringRU = \"\";\n  var siteSectionStringZH = \"\";\n  var siteSectionStringES = \"\";\n  var siteSectionStringSV = \"\";\n  var siteSectionStringTH = \"\";\n  var siteSectionStringTW = \"\";\n  var siteSectionStringTR = \"\";\n  var siteSectionStringVI = \"\";\n  \n  //logger.info(\" *** siteSection translation function main ***\");\n  \n  if (doc.getId() != null) { \n\n  \n\tvar languages = doc.getFieldValues(\"languageCode_ss\");\n    doc.removeFields(\"_translation_SiteSection_ENLUError_s\");\n    doc.removeFields(\"_translation_SiteSection_LUError_s\");\n\t// test harness for all languages, enable below line and disable above line\n    //var languages = [\"CS\",\"DK\",\"NL\",\"FI\",\"FR\",\"DE\",\"HU\",\"IT\",\"JP\",\"KO\",\"NO\",\"PL\",\"PT\",\"RU\",\"ZH\",\"ES\",\"SV\",\"TH\",\"TW\",\"TR\",\"VI\"];\n    var englishTypes = doc.getFieldValues(\"siteSection_ss\");\n    //logger.info(\"# of site Section is:  \" + englishTypes.length);\n    //logger.info(\"# of languages is: \" + languages.length);\n    \n\tif (languages!=null){ \n\t\n\t\tvar translationItem = [];\n  \n\t\t// for each site section, look up the English Parent\n\t\tfor (var s = 0; s < englishTypes.length; s++) {\n\t\t\n\n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n            var section = encodeURI(\"siteSection\");\n              \n            //logger.info(\"Attempting translation of: \" + englishTypes[s]);\n      \n      \t\ttry {\n\n\t\t\t\t//logger.info(\"Inside English parent value lookup try block ...\");\n\t\t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishTypes[s]) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n//      \t\tlogger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n  //    \t\t\tlogger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n    //   \t\t\t\t logger.info(\"Status is A-OK\");\n      \t\t         var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\n              for (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"English translation (\" + englishTypes[s] + \") item key is \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t} // i for loop\n  \n\n              \n\t\t\t\t\n      \t\t\t} // status check on URL\n            \n            \n            \n            \n            //logger.info(\"ready to translate here .........\");\n            var parentID = parentvalues;  \n            \n            \n            //var languages = doc.getFieldValues(\"languageCode_ss\");\n            \n            //logger.info(\"Number of available languages is: \" + languages.length);\n            \n\t\t\t// for each language ....\n            for (var l = 0; l < languages.length; l++) {\n            \n              var transvalues = [];\n              var eTranslate = java.lang.Exception;\n              var foundTranslation = \"\";\n              \n\t\t\t  if (languages[l]!=\"EN\"){\n\t\t\t\t  \n\t\t\t\t  //logger.info(\"language is not EN\");\n\t\t\t  \n                try {\n\t\t\t\t\t//logger.info(\"try to translate \" + languages[l]);\n\t\t\t\t\tvar URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + languages[l] + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n\t\t\t\t\t//logger.info(\"Translation URL: \" + URLTranslate);\n\t\t\t\t\tvar cTranslate = java.net.HttpURLConnectionTranslate;\n\t\t\t\t\tcTranslate = URLTranslate.openConnection();\n\t\t\t\t\tcTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n\t\t\t\t\tcTranslate.connect();\n\t\t\t\t\tvar statusTranslate = cTranslate.getResponseCode();\n\t\t\t\t\t//logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n\t\t\t\t\tif (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\t\t\t\t\tvar readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n\t\t\t\t\t\tvar responseTranslate = JSON.parse(readerTranslate.readLine());\n\t\t\t\t\t\tvar numTranslate = responseTranslate.response.numFound;\n\t\t\t\t\t\t//logger.info(\"Translation Num Found: \" + numTranslate);\n        \n\t\t\t\t\t\t// put all document titles from the query into an array and set as a multivalued string\n\n\t\t\t\t\t\tvar respTranslate = responseTranslate.response.docs;\n\t\t\t\t\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          \n\t\t\t\t\t\t\tfoundTranslation = respTranslate[j].translation_t;\n\t\t\t\t\t\t\t//logger.info(\"XXXXXXXXXXXXXFound translation: \" + foundTranslation);\n\t\t\t\t\t\t\tif (typeof foundTranslation !='undefined'){\n\t\t\t\t\t\t\t\t//logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//logger.info(\"could not translate: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransvalues.push(respTranslate[j].translation_t);\n      \n\t\t\t\t\t\ttranslationItem[s] = transvalues;\n\t\t\t\t\t\t//logger.info(\"XXXXXXXEcho back: \" + translationItem[s]);\n      \n             \n          \n\t\t\t\t\t\t}\n\n        \n\t\t\t\t\t}\n\t\t\t\t} catch (eTranslate) {\n\t\t\t\t\tlogger.error(eTranslate);\n                  doc.setField(\"_translation_SiteSection_LUError_s\",eTranslate);\n\t\t\t\t}\n\n\t\t\t\t// translationItem[s] = transvalues;\n\t\t\t\t//logger.info(\"translation from EN to: \" + languages[l]);\n          \t\t//logger.info(\"translation FROM: \" + englishTypes[s]);\n          \t\t//logger.info(\"translation FOUND: \" + translationItem[s]);\n              \n     \n              switch (languages[l]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"CS is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringCS = siteSectionStringCS + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling CS #\" + s + \": \" + siteSectionStringCS);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"CS Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringCS = siteSectionStringCS + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling CS #\" + s + \": \" + siteSectionStringCS);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DK is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringDK = siteSectionStringDK + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DK #\" + s + \": \" + siteSectionStringDK);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DK Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringDK = siteSectionStringDK + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DK #\" + s + \": \" + siteSectionStringDK);\n\t\t\t\t  }\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"NL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringNL = siteSectionStringNL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NL #\" + s + \": \" + siteSectionStringNL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringNL = siteSectionStringNL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NL #\" + s + \": \" + siteSectionStringNL);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringFI = siteSectionStringFI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FI #\" + s + \": \" + siteSectionStringFI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringFI = siteSectionStringFI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FI #\" + s + \": \" + siteSectionStringFI);\n\t\t\t\t  }\t\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringFR = siteSectionStringFR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FR #\" + s + \": \" + siteSectionStringFR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringFR = siteSectionStringFR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FR #\" + s + \": \" + siteSectionStringFR);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DE is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringDE = siteSectionStringDE + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DE #\" + s + \": \" + siteSectionStringDE);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DE Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringDE = siteSectionStringDE + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DE #\" + s + \": \" + siteSectionStringDE);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"HU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringHU = siteSectionStringHU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling HU #\" + s + \": \" + siteSectionStringHU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"HU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringHU = siteSectionStringHU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling HU #\" + s + \": \" + siteSectionStringHU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"IT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringIT = siteSectionStringIT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling IT #\" + s + \": \" + siteSectionStringIT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"IT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringIT = siteSectionStringIT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling IT #\" + s + \": \" + siteSectionStringIT);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"JP is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringJP = siteSectionStringJP + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling JP #\" + s + \": \" + siteSectionStringJP);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"JP Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringJP = siteSectionStringJP + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling JP #\" + s + \": \" + siteSectionStringJP);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"KO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringKO = siteSectionStringKO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling KO #\" + s + \": \" + siteSectionStringKO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"KO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringKO = siteSectionStringKO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling KO #\" + s + \": \" + siteSectionStringKO);\n\t\t\t\t  }\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringNO = siteSectionStringNO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NO #\" + s + \": \" + siteSectionStringNO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringNO = siteSectionStringNO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NO #\" + s + \": \" + siteSectionStringNO);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringPL = siteSectionStringPL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PL #\" + s + \": \" + siteSectionStringPL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringPL = siteSectionStringPL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PL #\" + s + \": \" + siteSectionStringPL);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringPT = siteSectionStringPT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PT #\" + s + \": \" + siteSectionStringPT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringPT = siteSectionStringPT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PT #\" + s + \": \" + siteSectionStringPT);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"RU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringRU = siteSectionStringRU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling RU #\" + s + \": \" + siteSectionStringRU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"RU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringRU = siteSectionStringRU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling RU #\" + s + \": \" + siteSectionStringRU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ZH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringZH = siteSectionStringZH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ZH #\" + s + \": \" + siteSectionStringZH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ZH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringZH = siteSectionStringZH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ZH #\" + s + \": \" + siteSectionStringZH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ES is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringES = siteSectionStringES + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ES #\" + s + \": \" + siteSectionStringES);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ES Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringES = siteSectionStringES + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ES #\" + s + \": \" + siteSectionStringES);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"SV is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringSV = siteSectionStringSV + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling SV #\" + s + \": \" + siteSectionStringSV);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"SV Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringSV = siteSectionStringSV + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling SV #\" + s + \": \" + siteSectionStringSV);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringTH = siteSectionStringTH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TH #\" + s + \": \" + siteSectionStringTH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringTH = siteSectionStringTH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TH #\" + s + \": \" + siteSectionStringTH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TW is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringTW = siteSectionStringTW + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TW #\" + s + \": \" + siteSectionStringTW);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TW Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringTW = siteSectionStringTW + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TW #\" + s + \": \" + siteSectionStringTW);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringTR = siteSectionStringTR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TR #\" + s + \": \" + siteSectionStringTR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringTR = siteSectionStringTR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TR #\" + s + \": \" + siteSectionStringTR);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"VI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSectionStringVI = siteSectionStringVI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling VI #\" + s + \": \" + siteSectionStringVI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"VI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSectionStringVI = siteSectionStringVI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling VI #\" + s + \": \" + siteSectionStringVI);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                  \n              }\n                \n              \n              \n              \n              //  END OF translation logic here\n              \n              //logger.info(\"End of translation for \" + languages[l]);\n              }\n\t\t\t  \n\t\t\t  else {\n\t\t\t  \n\t\t\t\t//logger.info(\"EN is skipped, no translation\");\n\t\t\t  \n\t\t\t  \n\t\t\t  } // if not EN language\n\t\t\t  \n            } // for l loop - each language\n            \n            \n            \n    \t\t} catch (e) {\n\t\t\t\tlogger.info(\"***** HIT AN ERROR ******\");\n      \t\t\tlogger.error(e);\n                logger.info(e);\n    \t\t\t} // end try catch\n\t\t\n        \t\n//logger.info(\"End of lookup for \" + englishTypes[s]);\n\t\t\n\t\t}\t// s for loop\n  \n\t// for each language ....\n            for (var ll = 0; ll < languages.length; ll++) {\n\t\t\t\tswitch (languages[ll]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for CS - total of \" + siteSectionStringCS.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionCS_ss\",siteSectionStringCS);\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t    //logger.info(\"writing output for DK - total of \" + siteSectionStringDK.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionDK_ss\",siteSectionStringDK);\n\n\t\t\t\t\tbreak;\n\n\n                case \"NL\":\n                  \n\t\t\t\t    //logger.info(\"writing output for NL - total of \" + siteSectionStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionNL_ss\",siteSectionStringNL);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  \t//logger.info(\"writing output for FI - total of \" + siteSectionStringFI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionFI_ss\",siteSectionStringFI);\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for FR - total of \" + siteSectionStringFR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionFR_ss\",siteSectionStringFR);\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for DE - total of \" + siteSectionStringDE.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionDE_ss\",siteSectionStringDE);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for HU - total of \" + siteSectionStringHU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionHU_ss\",siteSectionStringHU);\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for IT - total of \" + siteSectionStringIT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionIT_ss\",siteSectionStringIT);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for JP - total of \" + siteSectionStringJP.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionJP_ss\",siteSectionStringJP);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for KO - total of \" + siteSectionStringKO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionKO_ss\",siteSectionStringKO);\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NO - total of \" + siteSectionStringNO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionNO_ss\",siteSectionStringNO);\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NL - total of \" + siteSectionStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionPL_ss\",siteSectionStringPL);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for PT - total of \" + siteSectionStringPT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionPT_ss\",siteSectionStringPT);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for RU - total of \" + siteSectionStringRU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionRU_ss\",siteSectionStringRU);\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ZH - total of \" + siteSectionStringZH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionZH_ss\",siteSectionStringZH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ES - total of \" + siteSectionStringES.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionES_ss\",siteSectionStringES);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for SV - total of \" + siteSectionStringSV.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionSV_ss\",siteSectionStringSV);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TH - total of \" + siteSectionStringTH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionTH_ss\",siteSectionStringTH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TW - total of \" + siteSectionStringTW.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionTW_ss\",siteSectionStringTW);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TR - total of \" + siteSectionStringTR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionTR_ss\",siteSectionStringTR);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for VI - total of \" + siteSectionStringVI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSectionVI_ss\",siteSectionStringVI);\n\t\t\t\t   \n                  break;\n                 \n                  \n\t\t\t\t} // switch\n\t\t\t  \n\t\t\t  } // end of second language loop\n\t\t\t\n    \n\t} // languages is not null\n \n  } // doc getid is not null\n  \n  //logger.info(\"Exiting siteSection translation\");\n  \n  return doc;\n}\n  \n  \n  \n  \n  ",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "siteSectionXX Facet Translation (Support) (JS)",
    "condition" : "!doc.hasField(\"title_t\");",
    "secretSourceStageId" : "k"
  }, {
    "type" : "javascript-index",
    "id" : "3vc",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  var siteSubSectionStringCS = \"\";\n  var siteSubSectionStringDK = \"\";\n  var siteSubSectionStringNL = \"\";\n  var siteSubSectionStringFI = \"\";\n  var siteSubSectionStringFR = \"\";\n  var siteSubSectionStringDE = \"\";\n  var siteSubSectionStringHU = \"\";\n  var siteSubSectionStringIT = \"\";\n  var siteSubSectionStringJP = \"\";\n  var siteSubSectionStringKO = \"\";\n  var siteSubSectionStringNO = \"\";\n  var siteSubSectionStringPL = \"\";\n  var siteSubSectionStringPT = \"\";\n  var siteSubSectionStringRU = \"\";\n  var siteSubSectionStringZH = \"\";\n  var siteSubSectionStringES = \"\";\n  var siteSubSectionStringSV = \"\";\n  var siteSubSectionStringTH = \"\";\n  var siteSubSectionStringTW = \"\";\n  var siteSubSectionStringTR = \"\";\n  var siteSubSectionStringVI = \"\";\n  \n  logger.info(\" *** siteSubSection translation function main ***\");\n  \n  if (doc.getId() != null) { \n\n  \n\tvar languages = doc.getFieldValues(\"languageCode_ss\");\n\t// test harness for all languages, enable below line and disable above line\n    //var languages = [\"CS\",\"DK\",\"NL\",\"FI\",\"FR\",\"DE\",\"HU\",\"IT\",\"JP\",\"KO\",\"NO\",\"PL\",\"PT\",\"RU\",\"ZH\",\"ES\",\"SV\",\"TH\",\"TW\",\"TR\",\"VI\"];\n    var englishTypes = doc.getFieldValues(\"siteSubSection_ss\");\n    //logger.info(\"# of site SubSection is:  \" + englishTypes.length);\n    //logger.info(\"# of languages is: \" + languages.length);\n    \n\tif (languages!=null){ \n\t\n\t\tvar translationItem = [];\n  \n\t\t// for each site subsection, look up the English Parent\n\t\tfor (var s = 0; s < englishTypes.length; s++) {\n\t\t\n\n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n            var section = encodeURI(\"siteSubSection\");\n              \n            //logger.info(\"Attempting translation of: \" + englishTypes[s]);\n      \n      \t\ttry {\n\n\t\t\t\t//logger.info(\"Inside English parent value lookup try block ...\");\n\t\t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURI(englishTypes[s]) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n//      \t\tlogger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n  //    \t\t\tlogger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n    //   \t\t\t\t logger.info(\"Status is A-OK\");\n      \t\t         var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\n              for (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"English translation (\" + englishTypes[s] + \") item key is \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t} // i for loop\n  \n\n              \n\t\t\t\t\n      \t\t\t} // status check on URL\n            \n            \n            \n            \n            //logger.info(\"ready to translate here .........\");\n            var parentID = parentvalues;  \n            \n            \n            //var languages = doc.getFieldValues(\"languageCode_ss\");\n            \n            //logger.info(\"Number of available languages is: \" + languages.length);\n            \n\t\t\t// for each language ....\n            for (var l = 0; l < languages.length; l++) {\n            \n              var transvalues = [];\n              var eTranslate = java.lang.Exception;\n              var foundTranslation = \"\";\n              \n\t\t\t  if (languages[l]!=\"EN\"){\n\t\t\t\t  \n\t\t\t\t  //logger.info(\"language is not EN\");\n\t\t\t  \n                try {\n\t\t\t\t\t//logger.info(\"try to translate \" + languages[l]);\n\t\t\t\t\tvar URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + languages[l] + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n\t\t\t\t\t//logger.info(\"Translation URL: \" + URLTranslate);\n\t\t\t\t\tvar cTranslate = java.net.HttpURLConnectionTranslate;\n\t\t\t\t\tcTranslate = URLTranslate.openConnection();\n\t\t\t\t\tcTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n\t\t\t\t\tcTranslate.connect();\n\t\t\t\t\tvar statusTranslate = cTranslate.getResponseCode();\n\t\t\t\t\t//logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n\t\t\t\t\tif (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\t\t\t\t\tvar readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n\t\t\t\t\t\tvar responseTranslate = JSON.parse(readerTranslate.readLine());\n\t\t\t\t\t\tvar numTranslate = responseTranslate.response.numFound;\n\t\t\t\t\t\t//logger.info(\"Translation Num Found: \" + numTranslate);\n        \n\t\t\t\t\t\t// put all document titles from the query into an array and set as a multivalued string\n\n\t\t\t\t\t\tvar respTranslate = responseTranslate.response.docs;\n\t\t\t\t\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          \n\t\t\t\t\t\t\tfoundTranslation = respTranslate[j].translation_t;\n\t\t\t\t\t\t\t//logger.info(\"XXXXXXXXXXXXXFound translation: \" + foundTranslation);\n\t\t\t\t\t\t\tif (typeof foundTranslation !='undefined'){\n\t\t\t\t\t\t\t\t//logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//logger.info(\"could not translate: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransvalues.push(respTranslate[j].translation_t);\n      \n\t\t\t\t\t\ttranslationItem[s] = transvalues;\n\t\t\t\t\t\t//logger.info(\"XXXXXXXEcho back: \" + translationItem[s]);\n      \n             \n          \n\t\t\t\t\t\t}\n\n        \n\t\t\t\t\t}\n\t\t\t\t} catch (eTranslate) {\n\t\t\t\t\tlogger.error(eTranslate);\n\t\t\t\t}\n\n\t\t\t\t// translationItem[s] = transvalues;\n\t\t\t\t//logger.info(\"translation from EN to: \" + languages[l]);\n          \t\t//logger.info(\"translation FROM: \" + englishTypes[s]);\n          \t\t//logger.info(\"translation FOUND: \" + translationItem[s]);\n              \n     \n              switch (languages[l]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"CS is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringCS = siteSubSectionStringCS + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling CS #\" + s + \": \" + siteSubSectionStringCS);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"CS Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringCS = siteSubSectionStringCS + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling CS #\" + s + \": \" + siteSubSectionStringCS);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DK is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringDK = siteSubSectionStringDK + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DK #\" + s + \": \" + siteSubSectionStringDK);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DK Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringDK = siteSubSectionStringDK + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DK #\" + s + \": \" + siteSubSectionStringDK);\n\t\t\t\t  }\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"NL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringNL = siteSubSectionStringNL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NL #\" + s + \": \" + siteSubSectionStringNL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringNL = siteSubSectionStringNL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NL #\" + s + \": \" + siteSubSectionStringNL);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringFI = siteSubSectionStringFI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FI #\" + s + \": \" + siteSubSectionStringFI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringFI = siteSubSectionStringFI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FI #\" + s + \": \" + siteSubSectionStringFI);\n\t\t\t\t  }\t\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringFR = siteSubSectionStringFR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FR #\" + s + \": \" + siteSubSectionStringFR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringFR = siteSubSectionStringFR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FR #\" + s + \": \" + siteSubSectionStringFR);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DE is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringDE = siteSubSectionStringDE + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DE #\" + s + \": \" + siteSubSectionStringDE);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DE Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringDE = siteSubSectionStringDE + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DE #\" + s + \": \" + siteSubSectionStringDE);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"HU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringHU = siteSubSectionStringHU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling HU #\" + s + \": \" + siteSubSectionStringHU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"HU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringHU = siteSubSectionStringHU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling HU #\" + s + \": \" + siteSubSectionStringHU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"IT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringIT = siteSubSectionStringIT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling IT #\" + s + \": \" + siteSubSectionStringIT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"IT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringIT = siteSubSectionStringIT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling IT #\" + s + \": \" + siteSubSectionStringIT);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"JP is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringJP = siteSubSectionStringJP + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling JP #\" + s + \": \" + siteSubSectionStringJP);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"JP Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringJP = siteSubSectionStringJP + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling JP #\" + s + \": \" + siteSubSectionStringJP);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"KO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringKO = siteSubSectionStringKO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling KO #\" + s + \": \" + siteSubSectionStringKO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"KO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringKO = siteSubSectionStringKO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling KO #\" + s + \": \" + siteSubSectionStringKO);\n\t\t\t\t  }\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringNO = siteSubSectionStringNO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NO #\" + s + \": \" + siteSubSectionStringNO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringNO = siteSubSectionStringNO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NO #\" + s + \": \" + siteSubSectionStringNO);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringPL = siteSubSectionStringPL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PL #\" + s + \": \" + siteSubSectionStringPL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringPL = siteSubSectionStringPL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PL #\" + s + \": \" + siteSubSectionStringPL);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringPT = siteSubSectionStringPT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PT #\" + s + \": \" + siteSubSectionStringPT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringPT = siteSubSectionStringPT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PT #\" + s + \": \" + siteSubSectionStringPT);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"RU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringRU = siteSubSectionStringRU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling RU #\" + s + \": \" + siteSubSectionStringRU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"RU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringRU = siteSubSectionStringRU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling RU #\" + s + \": \" + siteSubSectionStringRU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ZH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringZH = siteSubSectionStringZH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ZH #\" + s + \": \" + siteSubSectionStringZH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ZH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringZH = siteSubSectionStringZH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ZH #\" + s + \": \" + siteSubSectionStringZH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ES is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringES = siteSubSectionStringES + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ES #\" + s + \": \" + siteSubSectionStringES);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ES Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringES = siteSubSectionStringES + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ES #\" + s + \": \" + siteSubSectionStringES);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"SV is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringSV = siteSubSectionStringSV + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling SV #\" + s + \": \" + siteSubSectionStringSV);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"SV Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringSV = siteSubSectionStringSV + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling SV #\" + s + \": \" + siteSubSectionStringSV);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringTH = siteSubSectionStringTH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TH #\" + s + \": \" + siteSubSectionStringTH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringTH = siteSubSectionStringTH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TH #\" + s + \": \" + siteSubSectionStringTH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TW is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringTW = siteSubSectionStringTW + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TW #\" + s + \": \" + siteSubSectionStringTW);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TW Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringTW = siteSubSectionStringTW + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TW #\" + s + \": \" + siteSubSectionStringTW);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringTR = siteSubSectionStringTR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TR #\" + s + \": \" + siteSubSectionStringTR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringTR = siteSubSectionStringTR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TR #\" + s + \": \" + siteSubSectionStringTR);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"VI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  siteSubSectionStringVI = siteSubSectionStringVI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling VI #\" + s + \": \" + siteSubSectionStringVI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"VI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsiteSubSectionStringVI = siteSubSectionStringVI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling VI #\" + s + \": \" + siteSubSectionStringVI);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                  \n              }\n                \n              \n              \n              \n              //  END OF translation logic here\n              \n              //logger.info(\"End of translation for \" + languages[l]);\n              }\n\t\t\t  \n\t\t\t  else {\n\t\t\t  \n\t\t\t\t//logger.info(\"EN is skipped, no translation\");\n\t\t\t  \n\t\t\t  \n\t\t\t  } // if not EN language\n\t\t\t  \n            } // for l loop - each language\n            \n            \n            \n    \t\t} catch (e) {\n\t\t\t\tlogger.info(\"***** HIT AN ERROR ******\");\n      \t\t\tlogger.error(e);\n                logger.info(e);\n    \t\t\t} // end try catch\n\t\t\n        \t\n//logger.info(\"End of lookup for \" + englishTypes[s]);\n\t\t\n\t\t}\t// s for loop\n  \n\t// for each language ....\n            for (var ll = 0; ll < languages.length; ll++) {\n\t\t\t\tswitch (languages[ll]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for CS - total of \" + siteSubSectionStringCS.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionCS_ss\",siteSubSectionStringCS);\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t    //logger.info(\"writing output for DK - total of \" + siteSubSectionStringDK.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionDK_ss\",siteSubSectionStringDK);\n\n\t\t\t\t\tbreak;\n\n\n                case \"NL\":\n                  \n\t\t\t\t    //logger.info(\"writing output for NL - total of \" + siteSubSectionStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionNL_ss\",siteSubSectionStringNL);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  \t//logger.info(\"writing output for FI - total of \" + siteSubSectionStringFI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionFI_ss\",siteSubSectionStringFI);\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for FR - total of \" + siteSubSectionStringFR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionFR_ss\",siteSubSectionStringFR);\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for DE - total of \" + siteSubSectionStringDE.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionDE_ss\",siteSubSectionStringDE);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for HU - total of \" + siteSubSectionStringHU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionHU_ss\",siteSubSectionStringHU);\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for IT - total of \" + siteSubSectionStringIT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionIT_ss\",siteSubSectionStringIT);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for JP - total of \" + siteSubSectionStringJP.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionJP_ss\",siteSubSectionStringJP);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for KO - total of \" + siteSubSectionStringKO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionKO_ss\",siteSubSectionStringKO);\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NO - total of \" + siteSubSectionStringNO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionNO_ss\",siteSubSectionStringNO);\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NL - total of \" + siteSubSectionStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionPL_ss\",siteSubSectionStringPL);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for PT - total of \" + siteSubSectionStringPT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionPT_ss\",siteSubSectionStringPT);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for RU - total of \" + siteSubSectionStringRU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionRU_ss\",siteSubSectionStringRU);\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ZH - total of \" + siteSubSectionStringZH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionZH_ss\",siteSubSectionStringZH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ES - total of \" + siteSubSectionStringES.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionES_ss\",siteSubSectionStringES);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for SV - total of \" + siteSubSectionStringSV.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionSV_ss\",siteSubSectionStringSV);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TH - total of \" + siteSubSectionStringTH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionTH_ss\",siteSubSectionStringTH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TW - total of \" + siteSubSectionStringTW.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionTW_ss\",siteSubSectionStringTW);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TR - total of \" + siteSubSectionStringTR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionTR_ss\",siteSubSectionStringTR);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for VI - total of \" + siteSubSectionStringVI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"siteSubSectionVI_ss\",siteSubSectionStringVI);\n\t\t\t\t   \n                  break;\n                 \n                  \n\t\t\t\t} // switch\n\t\t\t  \n\t\t\t  } // end of second language loop\n\t\t\t\n    \n\t} // languages is not null\n \n  } // doc getid is not null\n  \n  logger.info(\"Exiting siteSubSection translation\");\n  \n  return doc;\n}\n  \n  \n  \n  \n  ",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "siteSubSectionXX Facet Translation (Support) (JS)",
    "condition" : "!doc.hasField(\"title_t\");",
    "secretSourceStageId" : "3vc"
  }, {
    "type" : "javascript-index",
    "id" : "3s5",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  var supportTypeStringCS = \"\";\n  var supportTypeStringDK = \"\";\n  var supportTypeStringNL = \"\";\n  var supportTypeStringFI = \"\";\n  var supportTypeStringFR = \"\";\n  var supportTypeStringDE = \"\";\n  var supportTypeStringHU = \"\";\n  var supportTypeStringIT = \"\";\n  var supportTypeStringJP = \"\";\n  var supportTypeStringKO = \"\";\n  var supportTypeStringNO = \"\";\n  var supportTypeStringPL = \"\";\n  var supportTypeStringPT = \"\";\n  var supportTypeStringRU = \"\";\n  var supportTypeStringZH = \"\";\n  var supportTypeStringES = \"\";\n  var supportTypeStringSV = \"\";\n  var supportTypeStringTH = \"\";\n  var supportTypeStringTW = \"\";\n  var supportTypeStringTR = \"\";\n  var supportTypeStringVI = \"\";\n  \n  //logger.info(\" *** supportType translation function main ***\");\n  \n  if (doc.getId() != null) { \n\n  \n\tvar languages = doc.getFieldValues(\"languageCode_ss\");\n    doc.removeFields(\"_translation_SupportType_ENLUError_s\");\n    doc.removeFields(\"_translation_SupportType_LUError_s\");\n\t// test harness for all languages, enable below line and disable above line\n    //var languages = [\"CS\",\"DK\",\"NL\",\"FI\",\"FR\",\"DE\",\"HU\",\"IT\",\"JP\",\"KO\",\"NO\",\"PL\",\"PT\",\"RU\",\"ZH\",\"ES\",\"SV\",\"TH\",\"TW\",\"TR\",\"VI\"];\n    var englishTypes = doc.getFieldValues(\"supportType_ss\");\n    //logger.info(\"# of support types is:  \" + englishTypes.length);\n    //logger.info(\"# of languages is: \" + languages.length);\n    \n\tif (languages!=null){ \n\t\n\t\tvar translationItem = [];\n  \n\t\t// for each Support Type, look up the English Parent\n\t\tfor (var s = 0; s < englishTypes.length; s++) {\n\t\t\n\n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n            var section = encodeURI(\"Support Category\");\n              \n            //logger.info(\"Attempting translation of: \" + englishTypes[s]);\n      \n      \t\ttry {\n\n\t\t\t\t//logger.info(\"Inside English parent value lookup try block ...\");\n\t\t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishTypes[s]) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n//      \t\tlogger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n  //    \t\t\tlogger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n    //   \t\t\t\t logger.info(\"Status is A-OK\");\n      \t\t         var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t\t//logger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\n              for (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"English translation (\" + englishTypes[s] + \") item key is \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t} // i for loop\n  \n\n              \n\t\t\t\t\n      \t\t\t} // status check on URL\n            \n            \n            \n            \n            //logger.info(\"ready to translate here .........\");\n            var parentID = parentvalues;  \n            \n            \n            //var languages = doc.getFieldValues(\"languageCode_ss\");\n            \n            //logger.info(\"Number of available languages is: \" + languages.length);\n            \n\t\t\t// for each language ....\n            for (var l = 0; l < languages.length; l++) {\n            \n              var transvalues = [];\n              var eTranslate = java.lang.Exception;\n              var foundTranslation = \"\";\n              \n\t\t\t  if (languages[l]!=\"EN\"){\n\t\t\t\t  \n\t\t\t\t  //logger.info(\"language is not EN\");\n\t\t\t  \n                try {\n\t\t\t\t\t//logger.info(\"try to translate \" + languages[l]);\n\t\t\t\t\tvar URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + languages[l] + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n\t\t\t\t\t//logger.info(\"Translation URL: \" + URLTranslate);\n\t\t\t\t\tvar cTranslate = java.net.HttpURLConnectionTranslate;\n\t\t\t\t\tcTranslate = URLTranslate.openConnection();\n\t\t\t\t\tcTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n\t\t\t\t\tcTranslate.connect();\n\t\t\t\t\tvar statusTranslate = cTranslate.getResponseCode();\n\t\t\t\t\t//logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n\t\t\t\t\tif (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\t\t\t\t\tvar readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n\t\t\t\t\t\tvar responseTranslate = JSON.parse(readerTranslate.readLine());\n\t\t\t\t\t\tvar numTranslate = responseTranslate.response.numFound;\n\t\t\t\t\t\t//logger.info(\"Translation Num Found: \" + numTranslate);\n        \n                      if (numTranslate==0){\n                          logger.info(\"Failed translation of \" + parentID + \" / \" + englishTypes[s] + \" for \" + languages[l]);\n                        }\n                      \n                      \n\t\t\t\t\t\t// put all document titles from the query into an array and set as a multivalued string\n\n\t\t\t\t\t\tvar respTranslate = responseTranslate.response.docs;\n\t\t\t\t\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          \n\t\t\t\t\t\t\tfoundTranslation = respTranslate[j].translation_t;\n\t\t\t\t\t\t\t//logger.info(\"XXXXXXXXXXXXXFound translation: \" + foundTranslation);\n\t\t\t\t\t\t\tif (typeof foundTranslation !='undefined'){\n\t\t\t\t\t\t\t\t//logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//logger.info(\"could not translate: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransvalues.push(respTranslate[j].translation_t);\n      \n\t\t\t\t\t\ttranslationItem[s] = transvalues;\n\t\t\t\t\t\t//logger.info(\"XXXXXXXEcho back: \" + translationItem[s]);\n      \n             \n          \n\t\t\t\t\t\t}\n\n        \n\t\t\t\t\t}\n\t\t\t\t} catch (eTranslate) {\n\t\t\t\t\tlogger.error(eTranslate);\n                  doc.setField(\"_translation_SupportType_LUError_s\",eTranslate);\n\t\t\t\t}\n\n\t\t\t\t// translationItem[s] = transvalues;\n\t\t\t\t//logger.info(\"translation from EN to: \" + languages[l]);\n          \t\t//logger.info(\"translation FROM: \" + englishTypes[s]);\n          \t\t//logger.info(\"translation FOUND: \" + translationItem[s]);\n              \n     \n              switch (languages[l]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"CS is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringCS = supportTypeStringCS + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling CS #\" + s + \": \" + supportTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"CS Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringCS = supportTypeStringCS + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling CS #\" + s + \": \" + supportTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DK is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringDK = supportTypeStringDK + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DK #\" + s + \": \" + supportTypeStringDK);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DK Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringDK = supportTypeStringDK + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DK #\" + s + \": \" + supportTypeStringDK);\n\t\t\t\t  }\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"NL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringNL = supportTypeStringNL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NL #\" + s + \": \" + supportTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringNL = supportTypeStringNL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NL #\" + s + \": \" + supportTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringFI = supportTypeStringFI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FI #\" + s + \": \" + supportTypeStringFI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringFI = supportTypeStringFI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FI #\" + s + \": \" + supportTypeStringFI);\n\t\t\t\t  }\t\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringFR = supportTypeStringFR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FR #\" + s + \": \" + supportTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringFR = supportTypeStringFR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FR #\" + s + \": \" + supportTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DE is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringDE = supportTypeStringDE + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DE #\" + s + \": \" + supportTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DE Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringDE = supportTypeStringDE + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DE #\" + s + \": \" + supportTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"HU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringHU = supportTypeStringHU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling HU #\" + s + \": \" + supportTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"HU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringHU = supportTypeStringHU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling HU #\" + s + \": \" + supportTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"IT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringIT = supportTypeStringIT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling IT #\" + s + \": \" + supportTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"IT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringIT = supportTypeStringIT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling IT #\" + s + \": \" + supportTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"JP is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringJP = supportTypeStringJP + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling JP #\" + s + \": \" + supportTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"JP Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringJP = supportTypeStringJP + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling JP #\" + s + \": \" + supportTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"KO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringKO = supportTypeStringKO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling KO #\" + s + \": \" + supportTypeStringKO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"KO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringKO = supportTypeStringKO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling KO #\" + s + \": \" + supportTypeStringKO);\n\t\t\t\t  }\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringNO = supportTypeStringNO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NO #\" + s + \": \" + supportTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringNO = supportTypeStringNO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NO #\" + s + \": \" + supportTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringPL = supportTypeStringPL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PL #\" + s + \": \" + supportTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringPL = supportTypeStringPL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PL #\" + s + \": \" + supportTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringPT = supportTypeStringPT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PT #\" + s + \": \" + supportTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringPT = supportTypeStringPT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PT #\" + s + \": \" + supportTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"RU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringRU = supportTypeStringRU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling RU #\" + s + \": \" + supportTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"RU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringRU = supportTypeStringRU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling RU #\" + s + \": \" + supportTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ZH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringZH = supportTypeStringZH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ZH #\" + s + \": \" + supportTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ZH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringZH = supportTypeStringZH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ZH #\" + s + \": \" + supportTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ES is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringES = supportTypeStringES + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ES #\" + s + \": \" + supportTypeStringES);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ES Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringES = supportTypeStringES + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ES #\" + s + \": \" + supportTypeStringES);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"SV is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringSV = supportTypeStringSV + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling SV #\" + s + \": \" + supportTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"SV Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringSV = supportTypeStringSV + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling SV #\" + s + \": \" + supportTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringTH = supportTypeStringTH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TH #\" + s + \": \" + supportTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringTH = supportTypeStringTH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TH #\" + s + \": \" + supportTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TW is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringTW = supportTypeStringTW + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TW #\" + s + \": \" + supportTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TW Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringTW = supportTypeStringTW + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TW #\" + s + \": \" + supportTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringTR = supportTypeStringTR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TR #\" + s + \": \" + supportTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringTR = supportTypeStringTR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TR #\" + s + \": \" + supportTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"VI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportTypeStringVI = supportTypeStringVI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling VI #\" + s + \": \" + supportTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"VI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportTypeStringVI = supportTypeStringVI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling VI #\" + s + \": \" + supportTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                  \n              }\n                \n              \n              \n              \n              //  END OF translation logic here\n              \n              //logger.info(\"End of translation for \" + languages[l]);\n              }\n\t\t\t  \n\t\t\t  else {\n\t\t\t  \n\t\t\t\t//logger.info(\"EN is skipped, no translation\");\n\t\t\t  \n\t\t\t  \n\t\t\t  } // if not EN language\n\t\t\t  \n            } // for l loop - each language\n            \n            \n            \n    \t\t} catch (e) {\n\t\t\t\tlogger.info(\"***** HIT AN ERROR ******\");\n      \t\t\tlogger.error(e);\n                logger.info(e);\n    \t\t\t} // end try catch\n\t\t\n        \t\n//logger.info(\"End of lookup for \" + englishTypes[s]);\n\t\t\n\t\t}\t// s for loop\n  \n\t// for each language ....\n            for (var ll = 0; ll < languages.length; ll++) {\n\t\t\t\tswitch (languages[ll]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for CS - total of \" + supportTypeStringCS.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeCS_ss\",supportTypeStringCS);\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t    //logger.info(\"writing output for DK - total of \" + supportTypeStringDK.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeDK_ss\",supportTypeStringDK);\n\n\t\t\t\t\tbreak;\n\n\n                case \"NL\":\n                  \n\t\t\t\t    //logger.info(\"writing output for NL - total of \" + supportTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeNL_ss\",supportTypeStringNL);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  \t//logger.info(\"writing output for FI - total of \" + supportTypeStringFI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeFI_ss\",supportTypeStringFI);\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for FR - total of \" + supportTypeStringFR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeFR_ss\",supportTypeStringFR);\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for DE - total of \" + supportTypeStringDE.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeDE_ss\",supportTypeStringDE);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for HU - total of \" + supportTypeStringHU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeHU_ss\",supportTypeStringHU);\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for IT - total of \" + supportTypeStringIT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeIT_ss\",supportTypeStringIT);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for JP - total of \" + supportTypeStringJP.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeJP_ss\",supportTypeStringJP);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for KO - total of \" + supportTypeStringKO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeKO_ss\",supportTypeStringKO);\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NO - total of \" + supportTypeStringNO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeNO_ss\",supportTypeStringNO);\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NL - total of \" + supportTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypePL_ss\",supportTypeStringPL);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for PT - total of \" + supportTypeStringPT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypePT_ss\",supportTypeStringPT);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for RU - total of \" + supportTypeStringRU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeRU_ss\",supportTypeStringRU);\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ZH - total of \" + supportTypeStringZH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeZH_ss\",supportTypeStringZH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ES - total of \" + supportTypeStringES.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeES_ss\",supportTypeStringES);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for SV - total of \" + supportTypeStringSV.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeSV_ss\",supportTypeStringSV);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TH - total of \" + supportTypeStringTH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeTH_ss\",supportTypeStringTH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TW - total of \" + supportTypeStringTW.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeTW_ss\",supportTypeStringTW);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TR - total of \" + supportTypeStringTR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeTR_ss\",supportTypeStringTR);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for VI - total of \" + supportTypeStringVI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportTypeVI_ss\",supportTypeStringVI);\n\t\t\t\t   \n                  break;\n                 \n                  \n\t\t\t\t} // switch\n\t\t\t  \n\t\t\t  } // end of second language loop\n\t\t\t\n    \n\t} // languages is not null\n \n  } // doc getid is not null\n  \n  //logger.info(\"Exiting supportType translation\");\n  \n  return doc;\n}\n  \n  \n  \n  \n  ",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "supportTypeXX Facet Translation (Support) (JS)",
    "condition" : "!doc.hasField(\"title_t\");",
    "secretSourceStageId" : "3s5"
  }, {
    "type" : "javascript-index",
    "id" : "jer",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  var supportResourceTypeStringCS = \"\";\n  var supportResourceTypeStringDK = \"\";\n  var supportResourceTypeStringNL = \"\";\n  var supportResourceTypeStringFI = \"\";\n  var supportResourceTypeStringFR = \"\";\n  var supportResourceTypeStringDE = \"\";\n  var supportResourceTypeStringHU = \"\";\n  var supportResourceTypeStringIT = \"\";\n  var supportResourceTypeStringJP = \"\";\n  var supportResourceTypeStringKO = \"\";\n  var supportResourceTypeStringNO = \"\";\n  var supportResourceTypeStringPL = \"\";\n  var supportResourceTypeStringPT = \"\";\n  var supportResourceTypeStringRU = \"\";\n  var supportResourceTypeStringZH = \"\";\n  var supportResourceTypeStringES = \"\";\n  var supportResourceTypeStringSV = \"\";\n  var supportResourceTypeStringTH = \"\";\n  var supportResourceTypeStringTW = \"\";\n  var supportResourceTypeStringTR = \"\";\n  var supportResourceTypeStringVI = \"\";\n  \n // logger.info(\" *** supportResourceType translation function main ***\");\n  \n  if (doc.getId() != null) { \n\n  \n\tvar languages = doc.getFieldValues(\"languageCode_ss\");\n    doc.removeFields(\"_translation_SupportResourceType_ENLUError_s\");\n    doc.removeFields(\"_translation_SupportResourceType_LUError_s\");\n\t// test harness for all languages, enable below line and disable above line\n    //var languages = [\"CS\",\"DK\",\"NL\",\"FI\",\"FR\",\"DE\",\"HU\",\"IT\",\"JP\",\"KO\",\"NO\",\"PL\",\"PT\",\"RU\",\"ZH\",\"ES\",\"SV\",\"TH\",\"TW\",\"TR\",\"VI\"];\n    var englishTypes = doc.getFieldValues(\"supportResourceType_ss\");\n   // logger.info(\"# of support resource types is:  \" + englishTypes.length);\n   // logger.info(\"# of languages is: \" + languages.length);\n    \n\tif (languages!=null){ \n\t\n\t\tvar translationItem = [];\n  \n\t\t// for each Support Resource Type, look up the English Parent\n\t\tfor (var s = 0; s < englishTypes.length; s++) {\n\t\t\n\n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n            var section = encodeURI(\"Support Sub Category\");\n              \n            //logger.info(\"Attempting translation of: \" + englishTypes[s]);\n      \n      \t\ttry {\n\n\t\t\t\t//logger.info(\"Inside English parent value lookup try block ...\");\n\t\t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishTypes[s]) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n      \t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n  //    \t\t\tlogger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n    //   \t\t\t\t logger.info(\"Status is A-OK\");\n      \t\t         var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t//\tlogger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\n              for (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"English translation (\" + englishTypes[s] + \") item key is \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t} // i for loop\n  \n\n              \n\t\t\t\t\n      \t\t\t} // status check on URL\n            \n            \n            \n            \n            //logger.info(\"ready to translate here .........\");\n            var parentID = parentvalues;  \n            \n            \n            //var languages = doc.getFieldValues(\"languageCode_ss\");\n            \n            //logger.info(\"Number of available languages is: \" + languages.length);\n            \n\t\t\t// for each language ....\n            for (var l = 0; l < languages.length; l++) {\n            \n              var transvalues = [];\n              var eTranslate = java.lang.Exception;\n              var foundTranslation = \"\";\n              \n\t\t\t  if (languages[l]!=\"EN\"){\n\t\t\t\t  \n\t\t\t\t  //logger.info(\"language is not EN\");\n\t\t\t  \n                try {\n\t\t\t\t//\tlogger.info(\"try to translate \" + languages[l] + \" for \" + parentID);\n\t\t\t\t\tvar URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + languages[l] + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n\t\t\t\t\t//logger.info(\"Translation URL: \" + URLTranslate);\n\t\t\t\t\tvar cTranslate = java.net.HttpURLConnectionTranslate;\n\t\t\t\t\tcTranslate = URLTranslate.openConnection();\n\t\t\t\t\tcTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n\t\t\t\t\tcTranslate.connect();\n\t\t\t\t\tvar statusTranslate = cTranslate.getResponseCode();\n\t\t\t\t\t//logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n\t\t\t\t\tif (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\t\t\t\t\tvar readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n\t\t\t\t\t\tvar responseTranslate = JSON.parse(readerTranslate.readLine());\n\t\t\t\t\t\tvar numTranslate = responseTranslate.response.numFound;\n\t\t\t\t\t//\tlogger.info(\"Translation Num Found: \" + numTranslate);\n                      \n                      \tif (numTranslate==0){\n                          logger.info(\"Failed translation of \" + parentID + \" / \" + englishTypes[s] + \" for \" + languages[l]);\n                        }\n        \n\t\t\t\t\t\t// put all document titles from the query into an array and set as a multivalued string\n\n\t\t\t\t\t\tvar respTranslate = responseTranslate.response.docs;\n\t\t\t\t\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          \n\t\t\t\t\t\t\tfoundTranslation = respTranslate[j].translation_t;\n\t\t\t\t\t\t//\tlogger.info(\"Found translation: \" + foundTranslation);\n\t\t\t\t\t\t\tif (typeof foundTranslation !='undefined'){\n\t\t\t\t\t\t\t\t//logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlogger.info(\"could not translate: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransvalues.push(respTranslate[j].translation_t);\n      \n\t\t\t\t\t\ttranslationItem[s] = transvalues;\n\t\t\t\t\t\t//logger.info(\"XXXXXXXEcho back: \" + translationItem[s]);\n      \n             \n          \n\t\t\t\t\t\t}\n\n        \n\t\t\t\t\t}\n\t\t\t\t} catch (eTranslate) {\n\t\t\t\t\tlogger.error(eTranslate);\n                  doc.setField(\"_translation_SupportResourceType_LUError_s\",eTranslate);\n\t\t\t\t}\n\n\t\t\t\t// translationItem[s] = transvalues;\n\t\t\t\t//logger.info(\"translation from EN to: \" + languages[l]);\n          \t\t//logger.info(\"translation FROM: \" + englishTypes[s]);\n          \t\t//logger.info(\"translation FOUND: \" + translationItem[s]);\n              \n     \n              switch (languages[l]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"CS is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringCS = supportResourceTypeStringCS + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling CS #\" + s + \": \" + supportResourceTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"CS Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringCS = supportResourceTypeStringCS + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling CS #\" + s + \": \" + supportResourceTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DK is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringDK = supportResourceTypeStringDK + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DK #\" + s + \": \" + supportResourceTypeStringDK);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DK Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringDK = supportResourceTypeStringDK + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DK #\" + s + \": \" + supportResourceTypeStringDK);\n\t\t\t\t  }\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"NL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringNL = supportResourceTypeStringNL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NL #\" + s + \": \" + supportResourceTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringNL = supportResourceTypeStringNL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NL #\" + s + \": \" + supportResourceTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringFI = supportResourceTypeStringFI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FI #\" + s + \": \" + supportResourceTypeStringFI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringFI = supportResourceTypeStringFI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FI #\" + s + \": \" + supportResourceTypeStringFI);\n\t\t\t\t  }\t\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringFR = supportResourceTypeStringFR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FR #\" + s + \": \" + supportResourceTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringFR = supportResourceTypeStringFR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FR #\" + s + \": \" + supportResourceTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DE is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringDE = supportResourceTypeStringDE + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DE #\" + s + \": \" + supportResourceTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DE Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringDE = supportResourceTypeStringDE + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DE #\" + s + \": \" + supportResourceTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"HU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringHU = supportResourceTypeStringHU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling HU #\" + s + \": \" + supportResourceTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"HU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringHU = supportResourceTypeStringHU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling HU #\" + s + \": \" + supportResourceTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"IT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringIT = supportResourceTypeStringIT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling IT #\" + s + \": \" + supportResourceTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"IT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringIT = supportResourceTypeStringIT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling IT #\" + s + \": \" + supportResourceTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"JP is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringJP = supportResourceTypeStringJP + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling JP #\" + s + \": \" + supportResourceTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"JP Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringJP = supportResourceTypeStringJP + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling JP #\" + s + \": \" + supportResourceTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"KO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringKO = supportResourceTypeStringKO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling KO #\" + s + \": \" + supportResourceTypeStringKO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"KO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringKO = supportResourceTypeStringKO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling KO #\" + s + \": \" + supportResourceTypeStringKO);\n\t\t\t\t  }\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringNO = supportResourceTypeStringNO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NO #\" + s + \": \" + supportResourceTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringNO = supportResourceTypeStringNO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NO #\" + s + \": \" + supportResourceTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringPL = supportResourceTypeStringPL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PL #\" + s + \": \" + supportResourceTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringPL = supportResourceTypeStringPL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PL #\" + s + \": \" + supportResourceTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringPT = supportResourceTypeStringPT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PT #\" + s + \": \" + supportResourceTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringPT = supportResourceTypeStringPT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PT #\" + s + \": \" + supportResourceTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"RU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringRU = supportResourceTypeStringRU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling RU #\" + s + \": \" + supportResourceTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"RU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringRU = supportResourceTypeStringRU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling RU #\" + s + \": \" + supportResourceTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ZH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringZH = supportResourceTypeStringZH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ZH #\" + s + \": \" + supportResourceTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ZH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringZH = supportResourceTypeStringZH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ZH #\" + s + \": \" + supportResourceTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ES is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringES = supportResourceTypeStringES + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ES #\" + s + \": \" + supportResourceTypeStringES);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ES Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringES = supportResourceTypeStringES + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ES #\" + s + \": \" + supportResourceTypeStringES);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"SV is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringSV = supportResourceTypeStringSV + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling SV #\" + s + \": \" + supportResourceTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"SV Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringSV = supportResourceTypeStringSV + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling SV #\" + s + \": \" + supportResourceTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringTH = supportResourceTypeStringTH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TH #\" + s + \": \" + supportResourceTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringTH = supportResourceTypeStringTH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TH #\" + s + \": \" + supportResourceTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TW is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringTW = supportResourceTypeStringTW + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TW #\" + s + \": \" + supportResourceTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TW Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringTW = supportResourceTypeStringTW + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TW #\" + s + \": \" + supportResourceTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringTR = supportResourceTypeStringTR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TR #\" + s + \": \" + supportResourceTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringTR = supportResourceTypeStringTR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TR #\" + s + \": \" + supportResourceTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"VI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  supportResourceTypeStringVI = supportResourceTypeStringVI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling VI #\" + s + \": \" + supportResourceTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"VI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tsupportResourceTypeStringVI = supportResourceTypeStringVI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling VI #\" + s + \": \" + supportResourceTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                  \n              }\n                \n              \n              \n              \n              //  END OF translation logic here\n              \n              //logger.info(\"End of translation for \" + languages[l]);\n              }\n\t\t\t  \n\t\t\t  else {\n\t\t\t  \n\t\t\t\t//logger.info(\"EN is skipped, no translation\");\n\t\t\t  \n\t\t\t  \n\t\t\t  } // if not EN language\n\t\t\t  \n            } // for l loop - each language\n            \n            \n            \n    \t\t} catch (e) {\n\t\t\t\tlogger.info(\"***** HIT AN ERROR ******\");\n      \t\t\tlogger.error(e);\n                logger.info(e);\n    \t\t\t} // end try catch\n\t\t\n        \t\n//logger.info(\"End of lookup for \" + englishTypes[s]);\n\t\t\n\t\t}\t// s for loop\n  \n\t// for each language ....\n            for (var ll = 0; ll < languages.length; ll++) {\n\t\t\t\tswitch (languages[ll]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for CS - total of \" + supportResourceTypeStringCS.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeCS_ss\",supportResourceTypeStringCS);\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t    //logger.info(\"writing output for DK - total of \" + supportResourceTypeStringDK.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeDK_ss\",supportResourceTypeStringDK);\n\n\t\t\t\t\tbreak;\n\n\n                case \"NL\":\n                  \n\t\t\t\t    //logger.info(\"writing output for NL - total of \" + supportResourceTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeNL_ss\",supportResourceTypeStringNL);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  \t//logger.info(\"writing output for FI - total of \" + supportResourceTypeStringFI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeFI_ss\",supportResourceTypeStringFI);\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for FR - total of \" + supportResourceTypeStringFR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeFR_ss\",supportResourceTypeStringFR);\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for DE - total of \" + supportResourceTypeStringDE.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeDE_ss\",supportResourceTypeStringDE);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for HU - total of \" + supportResourceTypeStringHU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeHU_ss\",supportResourceTypeStringHU);\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for IT - total of \" + supportResourceTypeStringIT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeIT_ss\",supportResourceTypeStringIT);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for JP - total of \" + supportResourceTypeStringJP.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeJP_ss\",supportResourceTypeStringJP);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for KO - total of \" + supportResourceTypeStringKO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeKO_ss\",supportResourceTypeStringKO);\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NO - total of \" + supportResourceTypeStringNO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeNO_ss\",supportResourceTypeStringNO);\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NL - total of \" + supportResourceTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypePL_ss\",supportResourceTypeStringPL);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for PT - total of \" + supportResourceTypeStringPT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypePT_ss\",supportResourceTypeStringPT);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for RU - total of \" + supportResourceTypeStringRU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeRU_ss\",supportResourceTypeStringRU);\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ZH - total of \" + supportResourceTypeStringZH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeZH_ss\",supportResourceTypeStringZH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ES - total of \" + supportResourceTypeStringES.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeES_ss\",supportResourceTypeStringES);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for SV - total of \" + supportResourceTypeStringSV.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeSV_ss\",supportResourceTypeStringSV);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TH - total of \" + supportResourceTypeStringTH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeTH_ss\",supportResourceTypeStringTH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TW - total of \" + supportResourceTypeStringTW.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeTW_ss\",supportResourceTypeStringTW);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TR - total of \" + supportResourceTypeStringTR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeTR_ss\",supportResourceTypeStringTR);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for VI - total of \" + supportResourceTypeStringVI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"supportResourceTypeVI_ss\",supportResourceTypeStringVI);\n\t\t\t\t   \n                  break;\n                 \n                  \n\t\t\t\t} // switch\n\t\t\t  \n\t\t\t  } // end of second language loop\n\t\t\t\n    \n\t} // languages is not null\n \n  } // doc getid is not null\n  \n  //logger.info(\"Exiting supportResourceType translation\");\n  \n  return doc;\n}\n  \n  \n  \n  \n  ",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "supportResourceTypeXX Facet Translation (JS)",
    "condition" : "!doc.hasField(\"title_t\");",
    "secretSourceStageId" : "jer"
  }, {
    "type" : "javascript-index",
    "id" : "zye",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  var marketTypeStringCS = \"\";\n  var marketTypeStringDK = \"\";\n  var marketTypeStringNL = \"\";\n  var marketTypeStringFI = \"\";\n  var marketTypeStringFR = \"\";\n  var marketTypeStringDE = \"\";\n  var marketTypeStringHU = \"\";\n  var marketTypeStringIT = \"\";\n  var marketTypeStringJP = \"\";\n  var marketTypeStringKO = \"\";\n  var marketTypeStringNO = \"\";\n  var marketTypeStringPL = \"\";\n  var marketTypeStringPT = \"\";\n  var marketTypeStringRU = \"\";\n  var marketTypeStringZH = \"\";\n  var marketTypeStringES = \"\";\n  var marketTypeStringSV = \"\";\n  var marketTypeStringTH = \"\";\n  var marketTypeStringTW = \"\";\n  var marketTypeStringTR = \"\";\n  var marketTypeStringVI = \"\";\n  \n // logger.info(\" *** marketType translation function main ***\");\n  \n  if (doc.getId() != null) { \n\n  \n\tvar languages = doc.getFieldValues(\"languageCode_ss\");\n    doc.removeFields(\"_translation_MarketType_ENLUError_s\");\n    doc.removeFields(\"_translation_MarketType_LUError_s\");\n\t// test harness for all languages, enable below line and disable above line\n    //var languages = [\"CS\",\"DK\",\"NL\",\"FI\",\"FR\",\"DE\",\"HU\",\"IT\",\"JP\",\"KO\",\"NO\",\"PL\",\"PT\",\"RU\",\"ZH\",\"ES\",\"SV\",\"TH\",\"TW\",\"TR\",\"VI\"];\n    var englishTypes = doc.getFieldValues(\"market_ss\");\n   // logger.info(\"# of markets is:  \" + englishTypes.length);\n   // logger.info(\"# of languages is: \" + languages.length);\n    \n\tif (languages!=null){ \n\t\n\t\tvar translationItem = [];\n  \n\t\t// for each Market, look up the English Parent\n\t\tfor (var s = 0; s < englishTypes.length; s++) {\n\t\t\n\n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n            var section = encodeURI(\"Market\");\n              \n           // logger.info(\"Attempting translation of: \" + englishTypes[s]);\n      \n      \t\ttry {\n\n\t\t\t\t//logger.info(\"Inside English parent value lookup try block ...\");\n\t\t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishTypes[s]) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n      \t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n  //    \t\t\tlogger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n    //   \t\t\t\t logger.info(\"Status is A-OK\");\n      \t\t         var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t//\tlogger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\n              for (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"English translation (\" + englishTypes[s] + \") item key is \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t} // i for loop\n  \n\n              \n\t\t\t\t\n      \t\t\t} // status check on URL\n            \n            \n            \n            \n            //logger.info(\"ready to translate here .........\");\n            var parentID = parentvalues;  \n            \n            \n            //var languages = doc.getFieldValues(\"languageCode_ss\");\n            \n            //logger.info(\"Number of available languages is: \" + languages.length);\n            \n\t\t\t// for each language ....\n            for (var l = 0; l < languages.length; l++) {\n            \n              var transvalues = [];\n              var eTranslate = java.lang.Exception;\n              var foundTranslation = \"\";\n              \n\t\t\t  if (languages[l]!=\"EN\"){\n\t\t\t\t  \n\t\t\t\t  //logger.info(\"language is not EN\");\n\t\t\t  \n                try {\n\t\t\t\t\t//logger.info(\"try to translate \" + languages[l] + \" for \" + parentID);\n\t\t\t\t\tvar URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + languages[l] + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n\t\t\t\t\t//logger.info(\"Translation URL: \" + URLTranslate);\n\t\t\t\t\tvar cTranslate = java.net.HttpURLConnectionTranslate;\n\t\t\t\t\tcTranslate = URLTranslate.openConnection();\n\t\t\t\t\tcTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n\t\t\t\t\tcTranslate.connect();\n\t\t\t\t\tvar statusTranslate = cTranslate.getResponseCode();\n\t\t\t\t\t//logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n\t\t\t\t\tif (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\t\t\t\t\tvar readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n\t\t\t\t\t\tvar responseTranslate = JSON.parse(readerTranslate.readLine());\n\t\t\t\t\t\tvar numTranslate = responseTranslate.response.numFound;\n\t\t\t\t\t\t//logger.info(\"Translation Num Found: \" + numTranslate);\n        \n\t\t\t\t\t\tif (numTranslate==0){\n                          logger.info(\"Failed translation of \" + parentID + \" / \" + englishTypes[s] + \" for \" + languages[l]);\n                        }\n\t\t\n\t\t\n\t\t\t\t\t\t// put all document titles from the query into an array and set as a multivalued string\n\n\t\t\t\t\t\tvar respTranslate = responseTranslate.response.docs;\n\t\t\t\t\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          \n\t\t\t\t\t\t\tfoundTranslation = respTranslate[j].translation_t;\n\t\t\t\t\t\t\t//logger.info(\"Found translation: \" + foundTranslation);\n\t\t\t\t\t\t\tif (typeof foundTranslation !='undefined'){\n\t\t\t\t\t\t\t\t//logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//logger.info(\"could not translate: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransvalues.push(respTranslate[j].translation_t);\n      \n\t\t\t\t\t\ttranslationItem[s] = transvalues;\n\t\t\t\t\t\t//logger.info(\"XXXXXXXEcho back: \" + translationItem[s]);\n      \n             \n          \n\t\t\t\t\t\t}\n\n        \n\t\t\t\t\t}\n\t\t\t\t} catch (eTranslate) {\n\t\t\t\t\tlogger.error(eTranslate);\n                  doc.setField(\"_translation_MarketType_LUError_s\",eTranslate);\n\t\t\t\t}\n\n\t\t\t\t// translationItem[s] = transvalues;\n\t\t\t\t//logger.info(\"translation from EN to: \" + languages[l]);\n          \t\t//logger.info(\"translation FROM: \" + englishTypes[s]);\n          \t\t//logger.info(\"translation FOUND: \" + translationItem[s]);\n              \n     \n              switch (languages[l]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"CS is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringCS = marketTypeStringCS + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling CS #\" + s + \": \" + marketTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"CS Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringCS = marketTypeStringCS + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling CS #\" + s + \": \" + marketTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DK is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringDK = marketTypeStringDK + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DK #\" + s + \": \" + marketTypeStringDK);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DK Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringDK = marketTypeStringDK + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DK #\" + s + \": \" + marketTypeStringDK);\n\t\t\t\t  }\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"NL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringNL = marketTypeStringNL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NL #\" + s + \": \" + marketTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringNL = marketTypeStringNL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NL #\" + s + \": \" + marketTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringFI = marketTypeStringFI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FI #\" + s + \": \" + marketTypeStringFI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringFI = marketTypeStringFI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FI #\" + s + \": \" + marketTypeStringFI);\n\t\t\t\t  }\t\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringFR = marketTypeStringFR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FR #\" + s + \": \" + marketTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringFR = marketTypeStringFR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FR #\" + s + \": \" + marketTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DE is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringDE = marketTypeStringDE + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DE #\" + s + \": \" + marketTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DE Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringDE = marketTypeStringDE + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DE #\" + s + \": \" + marketTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"HU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringHU = marketTypeStringHU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling HU #\" + s + \": \" + marketTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"HU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringHU = marketTypeStringHU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling HU #\" + s + \": \" + marketTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"IT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringIT = marketTypeStringIT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling IT #\" + s + \": \" + marketTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"IT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringIT = marketTypeStringIT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling IT #\" + s + \": \" + marketTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"JP is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringJP = marketTypeStringJP + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling JP #\" + s + \": \" + marketTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"JP Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringJP = marketTypeStringJP + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling JP #\" + s + \": \" + marketTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"KO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringKO = marketTypeStringKO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling KO #\" + s + \": \" + marketTypeStringKO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"KO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringKO = marketTypeStringKO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling KO #\" + s + \": \" + marketTypeStringKO);\n\t\t\t\t  }\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringNO = marketTypeStringNO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NO #\" + s + \": \" + marketTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringNO = marketTypeStringNO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NO #\" + s + \": \" + marketTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringPL = marketTypeStringPL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PL #\" + s + \": \" + marketTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringPL = marketTypeStringPL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PL #\" + s + \": \" + marketTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringPT = marketTypeStringPT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PT #\" + s + \": \" + marketTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringPT = marketTypeStringPT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PT #\" + s + \": \" + marketTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"RU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringRU = marketTypeStringRU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling RU #\" + s + \": \" + marketTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"RU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringRU = marketTypeStringRU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling RU #\" + s + \": \" + marketTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ZH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringZH = marketTypeStringZH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ZH #\" + s + \": \" + marketTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ZH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringZH = marketTypeStringZH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ZH #\" + s + \": \" + marketTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ES is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringES = marketTypeStringES + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ES #\" + s + \": \" + marketTypeStringES);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ES Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringES = marketTypeStringES + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ES #\" + s + \": \" + marketTypeStringES);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"SV is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringSV = marketTypeStringSV + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling SV #\" + s + \": \" + marketTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"SV Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringSV = marketTypeStringSV + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling SV #\" + s + \": \" + marketTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringTH = marketTypeStringTH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TH #\" + s + \": \" + marketTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringTH = marketTypeStringTH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TH #\" + s + \": \" + marketTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TW is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringTW = marketTypeStringTW + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TW #\" + s + \": \" + marketTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TW Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringTW = marketTypeStringTW + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TW #\" + s + \": \" + marketTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringTR = marketTypeStringTR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TR #\" + s + \": \" + marketTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringTR = marketTypeStringTR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TR #\" + s + \": \" + marketTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"VI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  marketTypeStringVI = marketTypeStringVI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling VI #\" + s + \": \" + marketTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"VI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\tmarketTypeStringVI = marketTypeStringVI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling VI #\" + s + \": \" + marketTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                  \n              }\n                \n              \n              \n              \n              //  END OF translation logic here\n              \n              //logger.info(\"End of translation for \" + languages[l]);\n              }\n\t\t\t  \n\t\t\t  else {\n\t\t\t  \n\t\t\t\t//logger.info(\"EN is skipped, no translation\");\n\t\t\t  \n\t\t\t  \n\t\t\t  } // if not EN language\n\t\t\t  \n            } // for l loop - each language\n            \n            \n            \n    \t\t} catch (e) {\n\t\t\t\tlogger.info(\"***** HIT AN ERROR ******\");\n      \t\t\tlogger.error(e);\n                logger.info(e);\n    \t\t\t} // end try catch\n\t\t\n        \t\n//logger.info(\"End of lookup for \" + englishTypes[s]);\n\t\t\n\t\t}\t// s for loop\n  \n\t// for each language ....\n            for (var ll = 0; ll < languages.length; ll++) {\n\t\t\t\tswitch (languages[ll]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for CS - total of \" + marketTypeStringCS.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketCS_ss\",marketTypeStringCS);\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t    //logger.info(\"writing output for DK - total of \" + marketTypeStringDK.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketDK_ss\",marketTypeStringDK);\n\n\t\t\t\t\tbreak;\n\n\n                case \"NL\":\n                  \n\t\t\t\t    //logger.info(\"writing output for NL - total of \" + marketTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketNL_ss\",marketTypeStringNL);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  \t//logger.info(\"writing output for FI - total of \" + marketTypeStringFI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketFI_ss\",marketTypeStringFI);\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for FR - total of \" + marketTypeStringFR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketFR_ss\",marketTypeStringFR);\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for DE - total of \" + marketTypeStringDE.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketDE_ss\",marketTypeStringDE);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for HU - total of \" + marketTypeStringHU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketHU_ss\",marketTypeStringHU);\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for IT - total of \" + marketTypeStringIT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketIT_ss\",marketTypeStringIT);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for JP - total of \" + marketTypeStringJP.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketJP_ss\",marketTypeStringJP);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for KO - total of \" + marketTypeStringKO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketKO_ss\",marketTypeStringKO);\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NO - total of \" + marketTypeStringNO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketNO_ss\",marketTypeStringNO);\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NL - total of \" + marketTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketPL_ss\",marketTypeStringPL);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for PT - total of \" + marketTypeStringPT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketPT_ss\",marketTypeStringPT);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for RU - total of \" + marketTypeStringRU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketRU_ss\",marketTypeStringRU);\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ZH - total of \" + marketTypeStringZH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketZH_ss\",marketTypeStringZH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ES - total of \" + marketTypeStringES.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketES_ss\",marketTypeStringES);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for SV - total of \" + marketTypeStringSV.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketSV_ss\",marketTypeStringSV);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TH - total of \" + marketTypeStringTH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketTH_ss\",marketTypeStringTH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TW - total of \" + marketTypeStringTW.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketTW_ss\",marketTypeStringTW);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TR - total of \" + marketTypeStringTR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketTR_ss\",marketTypeStringTR);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for VI - total of \" + marketTypeStringVI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"marketVI_ss\",marketTypeStringVI);\n\t\t\t\t   \n                  break;\n                 \n                  \n\t\t\t\t} // switch\n\t\t\t  \n\t\t\t  } // end of second language loop\n\t\t\t\n    \n\t} // languages is not null\n \n  } // doc getid is not null\n  \n  //logger.info(\"Exiting marketType translation\");\n  \n  return doc;\n}\n  \n  \n  \n  \n  ",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "marketXX Facet Translation (JS)",
    "secretSourceStageId" : "zye"
  }, {
    "type" : "javascript-index",
    "id" : "yif",
    "script" : " function objToString (obj) {\n    var str = '';\n    for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n             str += obj[p];\n        }\n    }\n    return str;\n}\n\n\nfunction(doc) {\n\n  var technologyTypeStringCS = \"\";\n  var technologyTypeStringDK = \"\";\n  var technologyTypeStringNL = \"\";\n  var technologyTypeStringFI = \"\";\n  var technologyTypeStringFR = \"\";\n  var technologyTypeStringDE = \"\";\n  var technologyTypeStringHU = \"\";\n  var technologyTypeStringIT = \"\";\n  var technologyTypeStringJP = \"\";\n  var technologyTypeStringKO = \"\";\n  var technologyTypeStringNO = \"\";\n  var technologyTypeStringPL = \"\";\n  var technologyTypeStringPT = \"\";\n  var technologyTypeStringRU = \"\";\n  var technologyTypeStringZH = \"\";\n  var technologyTypeStringES = \"\";\n  var technologyTypeStringSV = \"\";\n  var technologyTypeStringTH = \"\";\n  var technologyTypeStringTW = \"\";\n  var technologyTypeStringTR = \"\";\n  var technologyTypeStringVI = \"\";\n  \n // logger.info(\" *** technologyType translation function main ***\");\n  \n  if (doc.getId() != null) { \n\n  \n\tvar languages = doc.getFieldValues(\"languageCode_ss\");\n    doc.removeFields(\"_translation_TechnologyType_ENLUError_s\");\n    doc.removeFields(\"_translation_TechnologyType_LUError_s\");\n\t// test harness for all languages, enable below line and disable above line\n    //var languages = [\"CS\",\"DK\",\"NL\",\"FI\",\"FR\",\"DE\",\"HU\",\"IT\",\"JP\",\"KO\",\"NO\",\"PL\",\"PT\",\"RU\",\"ZH\",\"ES\",\"SV\",\"TH\",\"TW\",\"TR\",\"VI\"];\n    var englishTypes = doc.getFieldValues(\"technology_ss\");\n   // logger.info(\"# of technologys is:  \" + englishTypes.length);\n   // logger.info(\"# of languages is: \" + languages.length);\n    \n\tif (languages!=null){ \n\t\n\t\tvar translationItem = [];\n  \n\t\t// for each technology, look up the English Parent\n\t\tfor (var s = 0; s < englishTypes.length; s++) {\n\t\t\n\n\t\t\tvar parentvalues = [];\n    \t\tvar HttpURLConnection = java.net.HttpURLConnection;\n    \t\tvar URL = java.net.URL;\n    \t\tvar InputStreamReader = java.io.InputStreamReader;\n    \t\tvar BufferedReader = java.io.BufferedReader;\n    \t\tvar e = java.lang.Exception;\n            var section = encodeURI(\"Technology\");\n              \n            //logger.info(\"Attempting translation of: \" + englishTypes[s]);\n      \n      \t\ttry {\n\n\t\t\t\t//logger.info(\"Inside English parent value lookup try block ...\");\n\t\t\t\tvar url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + \"EN\" + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=translation_s:(%22\" + encodeURIComponent(englishTypes[s]) + \"%22)&q=*:*&rows=10\"));\n      \n\n      \n      \t\t//logger.info(\"English Parent URL: \" + url);\n      \t\t\tvar c = java.net.HttpURLConnection;\n      \t\t\tc = url.openConnection();\n      \t\t\tc.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n      \t\t\tc.connect();\n      \t\t\tvar status = c.getResponseCode();\n  //    \t\t\tlogger.info(\"*** English Parent SubQuery Status: \" + status);\n      \n      \t\t\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n    //   \t\t\t\t logger.info(\"Status is A-OK\");\n      \t\t         var reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n        \t\t\t var response = JSON.parse(reader.readLine());\n        \t\t\t var num = response.response.numFound;\n\n         \t\t//\tlogger.info(\"English Matches Found: \" + num);\n        \n        \t\t\t// put all document titles from the query into an array and set as a multivalued string\n\t\t\t\t\tvar resp = response.response.docs;\n                    //logger.info(\"Num responses: \" + resp.length);\n\n              for (var i = 0; i < resp.length; i++) {\n                        //logger.info(\"English translation (\" + englishTypes[s] + \") item key is \" + i + \": \" + resp[i].docId_s);\n\t\t  \t\t\t\tparentvalues.push(resp[i].docId_s);\n\t\t\t\t\t} // i for loop\n  \n\n              \n\t\t\t\t\n      \t\t\t} // status check on URL\n            \n            \n            \n            \n            //logger.info(\"ready to translate here .........\");\n            var parentID = parentvalues;  \n            \n            \n            //var languages = doc.getFieldValues(\"languageCode_ss\");\n            \n            //logger.info(\"Number of available languages is: \" + languages.length);\n            \n\t\t\t// for each language ....\n            for (var l = 0; l < languages.length; l++) {\n            \n              var transvalues = [];\n              var eTranslate = java.lang.Exception;\n              var foundTranslation = \"\";\n              \n\t\t\t  if (languages[l]!=\"EN\"){\n\t\t\t\t  \n\t\t\t\t  //logger.info(\"language is not EN\");\n\t\t\t  \n                try {\n\t\t\t\t\t//logger.info(\"try to translate \" + languages[l] + \" for \" + parentID);\n\t\t\t\t\tvar URLTranslate = new URL((\"http://localhost:8764/api/apollo/query-pipelines/ParkerDotComTranslations-default/collections/ParkerDotComTranslations/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=locale_id_s:(%22\" + languages[l] + \"%22)&fq=type_s:(%22\" + section + \"%22)&fq=parentId_s:(%22\" + parentID + \"%22)&q=*:*&rows=10\"));      \n      \n\t\t\t\t\t//logger.info(\"Translation URL: \" + URLTranslate);\n\t\t\t\t\tvar cTranslate = java.net.HttpURLConnectionTranslate;\n\t\t\t\t\tcTranslate = URLTranslate.openConnection();\n\t\t\t\t\tcTranslate.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n\t\t\t\t\tcTranslate.connect();\n\t\t\t\t\tvar statusTranslate = cTranslate.getResponseCode();\n\t\t\t\t\t//logger.info(\"*** Translation SubQuery Status: \" + status);\n      \n\t\t\t\t\tif (statusTranslate == HttpURLConnection.HTTP_OK || statusTranslate == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\t\t\t\t\tvar readerTranslate = new BufferedReader(new InputStreamReader(cTranslate.getInputStream()));\n\t\t\t\t\t\tvar responseTranslate = JSON.parse(readerTranslate.readLine());\n\t\t\t\t\t\tvar numTranslate = responseTranslate.response.numFound;\n\t\t\t\t\t\t//logger.info(\"Translation Num Found: \" + numTranslate);\n        \n\t\t\t\t\t\tif (numTranslate==0){\n                          logger.info(\"Failed translation of \" + parentID + \" / \" + englishTypes[s] + \" for \" + languages[l]);\n                        }\n\t\t\n\t\t\n\t\t\t\t\t\t// put all document titles from the query into an array and set as a multivalued string\n\n\t\t\t\t\t\tvar respTranslate = responseTranslate.response.docs;\n\t\t\t\t\t\tfor (var j = 0; j < respTranslate.length; j++) {\n          \n\t\t\t\t\t\t\tfoundTranslation = respTranslate[j].translation_t;\n\t\t\t\t\t\t\t//logger.info(\"Found translation: \" + foundTranslation);\n\t\t\t\t\t\t\tif (typeof foundTranslation !='undefined'){\n\t\t\t\t\t\t\t\t//logger.info(\"Translated output Item: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//logger.info(\"could not translate: \" + respTranslate[j].translation_t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransvalues.push(respTranslate[j].translation_t);\n      \n\t\t\t\t\t\ttranslationItem[s] = transvalues;\n\t\t\t\t\t\t//logger.info(\"XXXXXXXEcho back: \" + translationItem[s]);\n      \n             \n          \n\t\t\t\t\t\t}\n\n        \n\t\t\t\t\t}\n\t\t\t\t} catch (eTranslate) {\n\t\t\t\t\tlogger.error(eTranslate);\n                  doc.setField(\"_translation_TechnologyType_LUError_s\",eTranslate);\n\t\t\t\t}\n\n\t\t\t\t// translationItem[s] = transvalues;\n\t\t\t\t//logger.info(\"translation from EN to: \" + languages[l]);\n          \t\t//logger.info(\"translation FROM: \" + englishTypes[s]);\n          \t\t//logger.info(\"translation FOUND: \" + translationItem[s]);\n              \n     \n              switch (languages[l]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"CS is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringCS = technologyTypeStringCS + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling CS #\" + s + \": \" + technologyTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"CS Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringCS = technologyTypeStringCS + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling CS #\" + s + \": \" + technologyTypeStringCS);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DK is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringDK = technologyTypeStringDK + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DK #\" + s + \": \" + technologyTypeStringDK);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DK Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringDK = technologyTypeStringDK + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DK #\" + s + \": \" + technologyTypeStringDK);\n\t\t\t\t  }\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"NL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringNL = technologyTypeStringNL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NL #\" + s + \": \" + technologyTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringNL = technologyTypeStringNL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NL #\" + s + \": \" + technologyTypeStringNL);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringFI = technologyTypeStringFI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FI #\" + s + \": \" + technologyTypeStringFI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringFI = technologyTypeStringFI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FI #\" + s + \": \" + technologyTypeStringFI);\n\t\t\t\t  }\t\t\t\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"FR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringFR = technologyTypeStringFR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling FR #\" + s + \": \" + technologyTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"FR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringFR = technologyTypeStringFR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling FR #\" + s + \": \" + technologyTypeStringFR);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"DE is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringDE = technologyTypeStringDE + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling DE #\" + s + \": \" + technologyTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"DE Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringDE = technologyTypeStringDE + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling DE #\" + s + \": \" + technologyTypeStringDE);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"HU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringHU = technologyTypeStringHU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling HU #\" + s + \": \" + technologyTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"HU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringHU = technologyTypeStringHU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling HU #\" + s + \": \" + technologyTypeStringHU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"IT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringIT = technologyTypeStringIT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling IT #\" + s + \": \" + technologyTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"IT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringIT = technologyTypeStringIT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling IT #\" + s + \": \" + technologyTypeStringIT);\n\t\t\t\t  }\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"JP is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringJP = technologyTypeStringJP + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling JP #\" + s + \": \" + technologyTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"JP Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringJP = technologyTypeStringJP + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling JP #\" + s + \": \" + technologyTypeStringJP);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"KO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringKO = technologyTypeStringKO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling KO #\" + s + \": \" + technologyTypeStringKO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"KO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringKO = technologyTypeStringKO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling KO #\" + s + \": \" + technologyTypeStringKO);\n\t\t\t\t  }\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"NO is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringNO = technologyTypeStringNO + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling NO #\" + s + \": \" + technologyTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"NO Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringNO = technologyTypeStringNO + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling NO #\" + s + \": \" + technologyTypeStringNO);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PL is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringPL = technologyTypeStringPL + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PL #\" + s + \": \" + technologyTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PL Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringPL = technologyTypeStringPL + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PL #\" + s + \": \" + technologyTypeStringPL);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"PT is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringPT = technologyTypeStringPT + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling PT #\" + s + \": \" + technologyTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"PT Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringPT = technologyTypeStringPT + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling PT #\" + s + \": \" + technologyTypeStringPT);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"RU is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringRU = technologyTypeStringRU + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling RU #\" + s + \": \" + technologyTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"RU Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringRU = technologyTypeStringRU + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling RU #\" + s + \": \" + technologyTypeStringRU);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ZH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringZH = technologyTypeStringZH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ZH #\" + s + \": \" + technologyTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ZH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringZH = technologyTypeStringZH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ZH #\" + s + \": \" + technologyTypeStringZH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"ES is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringES = technologyTypeStringES + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling ES #\" + s + \": \" + technologyTypeStringES);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"ES Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringES = technologyTypeStringES + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling ES #\" + s + \": \" + technologyTypeStringES);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"SV is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringSV = technologyTypeStringSV + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling SV #\" + s + \": \" + technologyTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"SV Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringSV = technologyTypeStringSV + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling SV #\" + s + \": \" + technologyTypeStringSV);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TH is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringTH = technologyTypeStringTH + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TH #\" + s + \": \" + technologyTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TH Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringTH = technologyTypeStringTH + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TH #\" + s + \": \" + technologyTypeStringTH);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TW is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringTW = technologyTypeStringTW + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TW #\" + s + \": \" + technologyTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TW Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringTW = technologyTypeStringTW + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TW #\" + s + \": \" + technologyTypeStringTW);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"TR is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringTR = technologyTypeStringTR + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling TR #\" + s + \": \" + technologyTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"TR Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringTR = technologyTypeStringTR + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling TR #\" + s + \": \" + technologyTypeStringTR);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t  if (typeof translationItem[s] == 'undefined')\n\t\t\t\t  {\n\t\t\t\t\t  \n\t\t\t\t\t  //logger.info(\"VI is missing, pushing English for \" + s + \": \" + englishTypes[s]);\n\t\t\t\t\t  technologyTypeStringVI = technologyTypeStringVI + \",\" + englishTypes[s];\n\t\t\t\t\t  //logger.info(\"Pulling VI #\" + s + \": \" + technologyTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t  else\n\t\t\t\t  {\n\t\t\t\t\t//logger.info(\"VI Pushing Translated item \" + s + \": \" + translationItem[s]);\n\t\t\t\t\ttechnologyTypeStringVI = technologyTypeStringVI + \",\" + translationItem[s];\n\t\t\t\t\t//logger.info(\"Pulling VI #\" + s + \": \" + technologyTypeStringVI);\n\t\t\t\t  }\n\t\t\t\t   \n                  break;\n                 \n                  \n              }\n                \n              \n              \n              \n              //  END OF translation logic here\n              \n              //logger.info(\"End of translation for \" + languages[l]);\n              }\n\t\t\t  \n\t\t\t  else {\n\t\t\t  \n\t\t\t\t//logger.info(\"EN is skipped, no translation\");\n\t\t\t  \n\t\t\t  \n\t\t\t  } // if not EN language\n\t\t\t  \n            } // for l loop - each language\n            \n            \n            \n    \t\t} catch (e) {\n\t\t\t\tlogger.info(\"***** HIT AN ERROR ******\");\n      \t\t\tlogger.error(e);\n                logger.info(e);\n    \t\t\t} // end try catch\n\t\t\n        \t\n//logger.info(\"End of lookup for \" + englishTypes[s]);\n\t\t\n\t\t}\t// s for loop\n  \n\t// for each language ....\n            for (var ll = 0; ll < languages.length; ll++) {\n\t\t\t\tswitch (languages[ll]) {\n\t\t\t\t  \n                case \"CS\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for CS - total of \" + technologyTypeStringCS.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyCS_ss\",technologyTypeStringCS);\n\t\t\t\t  \n\t\t\t\t  break;\n                  \n                case \"DK\":\n                  \n\t\t\t\t    //logger.info(\"writing output for DK - total of \" + technologyTypeStringDK.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyDK_ss\",technologyTypeStringDK);\n\n\t\t\t\t\tbreak;\n\n\n                case \"NL\":\n                  \n\t\t\t\t    //logger.info(\"writing output for NL - total of \" + technologyTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyNL_ss\",technologyTypeStringNL);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"FI\":\n                  \n\t\t\t\t  \t//logger.info(\"writing output for FI - total of \" + technologyTypeStringFI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyFI_ss\",technologyTypeStringFI);\n\n\t\t\t\t\tbreak;\n\n                case \"FR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for FR - total of \" + technologyTypeStringFR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyFR_ss\",technologyTypeStringFR);\n\t\t\t\t  \n\t\t\t\tbreak;\n\n                case \"DE\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for DE - total of \" + technologyTypeStringDE.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyDE_ss\",technologyTypeStringDE);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"HU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for HU - total of \" + technologyTypeStringHU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyHU_ss\",technologyTypeStringHU);\n\t\t\t\t   \n                  break;\n                 \n                case \"IT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for IT - total of \" + technologyTypeStringIT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyIT_ss\",technologyTypeStringIT);\n\t\t\t\t  \n\t\t\t\t  break;\n\t\t\t\t  \n                case \"JP\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for JP - total of \" + technologyTypeStringJP.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyJP_ss\",technologyTypeStringJP);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t \n                case \"KO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for KO - total of \" + technologyTypeStringKO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyKO_ss\",technologyTypeStringKO);\n                  \n                  break;\n\t\t\t\t  \n                case \"NO\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NO - total of \" + technologyTypeStringNO.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyNO_ss\",technologyTypeStringNO);\n\t\t\t\t   \n                  break;\n\n\t\t\t\t  \n                case \"PL\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for NL - total of \" + technologyTypeStringNL.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyPL_ss\",technologyTypeStringPL);\n\t\t\t\t   \n                  break;\n                 \t\t\t\t  \n                case \"PT\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for PT - total of \" + technologyTypeStringPT.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyPT_ss\",technologyTypeStringPT);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t\t\t\t\t  \n                case \"RU\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for RU - total of \" + technologyTypeStringRU.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyRU_ss\",technologyTypeStringRU);\n\t\t\t\t   \n                  break;\n                  \n\t\t\t\t \t\t\t\t  \n                case \"ZH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ZH - total of \" + technologyTypeStringZH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyZH_ss\",technologyTypeStringZH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"ES\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for ES - total of \" + technologyTypeStringES.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyES_ss\",technologyTypeStringES);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"SV\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for SV - total of \" + technologyTypeStringSV.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologySV_ss\",technologyTypeStringSV);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TH\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TH - total of \" + technologyTypeStringTH.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyTH_ss\",technologyTypeStringTH);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TW\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TW - total of \" + technologyTypeStringTW.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyTW_ss\",technologyTypeStringTW);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"TR\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for TR - total of \" + technologyTypeStringTR.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyTR_ss\",technologyTypeStringTR);\n\t\t\t\t   \n                  break;\n                 \n\t\t\t\t \t\t\t\t  \n                case \"VI\":\n                  \n\t\t\t\t\t//logger.info(\"writing output for VI - total of \" + technologyTypeStringVI.split(\",\").length + \" entries\");\n\t\t\t\t\tdoc.setField(\"technologyVI_ss\",technologyTypeStringVI);\n\t\t\t\t   \n                  break;\n                 \n                  \n\t\t\t\t} // switch\n\t\t\t  \n\t\t\t  } // end of second language loop\n\t\t\t\n    \n\t} // languages is not null\n \n  } // doc getid is not null\n  \n  //logger.info(\"Exiting technologyType translation\");\n  \n  return doc;\n}\n  \n  \n  \n  \n  ",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "technologyXX Facet Translation (JS)",
    "secretSourceStageId" : "yif"
  }, {
    "type" : "regex-extractor",
    "id" : "4692d9aa-c46c-4af9-a1da-57fc4b1fabc3",
    "rules" : [ {
      "source" : [ "siteSectionCS_ss" ],
      "target" : "siteSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDK_ss" ],
      "target" : "siteSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNL_ss" ],
      "target" : "siteSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionEN_ss" ],
      "target" : "siteSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFI_ss" ],
      "target" : "siteSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionFR_ss" ],
      "target" : "siteSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionDE_ss" ],
      "target" : "siteSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionHU_ss" ],
      "target" : "siteSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionIT_ss" ],
      "target" : "siteSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionJP_ss" ],
      "target" : "siteSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionKO_ss" ],
      "target" : "siteSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionNO_ss" ],
      "target" : "siteSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPL_ss" ],
      "target" : "siteSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionPT_ss" ],
      "target" : "siteSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionRU_ss" ],
      "target" : "siteSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionZH_ss" ],
      "target" : "siteSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionES_ss" ],
      "target" : "siteSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionSV_ss" ],
      "target" : "siteSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTH_ss" ],
      "target" : "siteSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTW_ss" ],
      "target" : "siteSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionTR_ss" ],
      "target" : "siteSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSectionVI_ss" ],
      "target" : "siteSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSection Lang Fields",
    "secretSourceStageId" : "4692d9aa-c46c-4af9-a1da-57fc4b1fabc3"
  }, {
    "type" : "regex-extractor",
    "id" : "e5318d70-d92b-4b1b-bf80-fa24ee033417",
    "rules" : [ {
      "source" : [ "supportResourceTypeCS_ss" ],
      "target" : "supportResourceTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeDK_ss" ],
      "target" : "supportResourceTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeNL_ss" ],
      "target" : "supportResourceTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeEN_ss" ],
      "target" : "supportResourceTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeFI_ss" ],
      "target" : "supportResourceTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeFR_ss" ],
      "target" : "supportResourceTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeDE_ss" ],
      "target" : "supportResourceTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeHU_ss" ],
      "target" : "supportResourceTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeIT_ss" ],
      "target" : "supportResourceTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeJP_ss" ],
      "target" : "supportResourceTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeKO_ss" ],
      "target" : "supportResourceTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeNO_ss" ],
      "target" : "supportResourceTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypePL_ss" ],
      "target" : "supportResourceTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypePT_ss" ],
      "target" : "supportResourceTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeRU_ss" ],
      "target" : "supportResourceTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeZH_ss" ],
      "target" : "supportResourceTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeES_ss" ],
      "target" : "supportResourceTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeSV_ss" ],
      "target" : "supportResourceTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTH_ss" ],
      "target" : "supportResourceTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTW_ss" ],
      "target" : "supportResourceTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeTR_ss" ],
      "target" : "supportResourceTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportResourceTypeVI_ss" ],
      "target" : "supportResourceTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split supportResourceType Lang Fields",
    "secretSourceStageId" : "e5318d70-d92b-4b1b-bf80-fa24ee033417"
  }, {
    "type" : "regex-extractor",
    "id" : "6ca8f368-c2ed-4ece-8a22-1395f7814852",
    "rules" : [ {
      "source" : [ "supportTypeEN_ss" ],
      "target" : "supportTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeFR_ss" ],
      "target" : "supportTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeDE_ss" ],
      "target" : "supportTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeES_ss" ],
      "target" : "supportTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypePT_ss" ],
      "target" : "supportTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeZH_ss" ],
      "target" : "supportTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTW_ss" ],
      "target" : "supportTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeKO_ss" ],
      "target" : "supportTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeJP_ss" ],
      "target" : "supportTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeRU_ss" ],
      "target" : "supportTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypePL_ss" ],
      "target" : "supportTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeFI_ss" ],
      "target" : "supportTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeNO_ss" ],
      "target" : "supportTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeSV_ss" ],
      "target" : "supportTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeCS_ss" ],
      "target" : "supportTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeDK_ss" ],
      "target" : "supportTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeNL_ss" ],
      "target" : "supportTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTR_ss" ],
      "target" : "supportTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeHU_ss" ],
      "target" : "supportTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeTH_ss" ],
      "target" : "supportTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeIT_ss" ],
      "target" : "supportTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "supportTypeVI_ss" ],
      "target" : "supportTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split supportType Lang Fields",
    "secretSourceStageId" : "6ca8f368-c2ed-4ece-8a22-1395f7814852"
  }, {
    "type" : "regex-extractor",
    "id" : "ca8bd8b3-1a6f-4abe-9a3b-557d3c2a1969",
    "rules" : [ {
      "source" : [ "siteSubSectionCS_ss" ],
      "target" : "siteSubSectionCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDK_ss" ],
      "target" : "siteSubSectionDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNL_ss" ],
      "target" : "siteSubSectionNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionEN_ss" ],
      "target" : "siteSubSectionEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFI_ss" ],
      "target" : "siteSubSectionFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionFR_ss" ],
      "target" : "siteSubSectionFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionDE_ss" ],
      "target" : "siteSubSectionDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionHU_ss" ],
      "target" : "siteSubSectionHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionIT_ss" ],
      "target" : "siteSubSectionIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionJP_ss" ],
      "target" : "siteSubSectionJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionKO_ss" ],
      "target" : "siteSubSectionKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionNO_ss" ],
      "target" : "siteSubSectionNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPL_ss" ],
      "target" : "siteSubSectionPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionPT_ss" ],
      "target" : "siteSubSectionPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionRU_ss" ],
      "target" : "siteSubSectionRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionZH_ss" ],
      "target" : "siteSubSectionZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionES_ss" ],
      "target" : "siteSubSectionES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionSV_ss" ],
      "target" : "siteSubSectionSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTH_ss" ],
      "target" : "siteSubSectionTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTW_ss" ],
      "target" : "siteSubSectionTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionTR_ss" ],
      "target" : "siteSubSectionTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "siteSubSectionVI_ss" ],
      "target" : "siteSubSectionVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split siteSubSection Lang Fields",
    "secretSourceStageId" : "ca8bd8b3-1a6f-4abe-9a3b-557d3c2a1969"
  }, {
    "type" : "regex-extractor",
    "id" : "mt8bac",
    "rules" : [ {
      "source" : [ "otherTypeCS_ss" ],
      "target" : "otherTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeDK_ss" ],
      "target" : "otherTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeNL_ss" ],
      "target" : "otherTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeEN_ss" ],
      "target" : "otherTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeFI_ss" ],
      "target" : "otherTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeFR_ss" ],
      "target" : "otherTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeDE_ss" ],
      "target" : "otherTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeHU_ss" ],
      "target" : "otherTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeIT_ss" ],
      "target" : "otherTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeJP_ss" ],
      "target" : "otherTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeKO_ss" ],
      "target" : "otherTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeNO_ss" ],
      "target" : "otherTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypePL_ss" ],
      "target" : "otherTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypePT_ss" ],
      "target" : "otherTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeRU_ss" ],
      "target" : "otherTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeZH_ss" ],
      "target" : "otherTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeES_ss" ],
      "target" : "otherTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeSV_ss" ],
      "target" : "otherTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeTH_ss" ],
      "target" : "otherTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeTW_ss" ],
      "target" : "otherTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeTR_ss" ],
      "target" : "otherTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "otherTypeVI_ss" ],
      "target" : "otherTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split otherType Lang Fields",
    "secretSourceStageId" : "mt8bac"
  }, {
    "type" : "regex-extractor",
    "id" : "nt8bac",
    "rules" : [ {
      "source" : [ "newsEventsTypeCS_ss" ],
      "target" : "newsEventsTypeCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeDK_ss" ],
      "target" : "newsEventsTypeDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeNL_ss" ],
      "target" : "newsEventsTypeNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeEN_ss" ],
      "target" : "newsEventsTypeEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeFI_ss" ],
      "target" : "newsEventsTypeFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeFR_ss" ],
      "target" : "newsEventsTypeFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeDE_ss" ],
      "target" : "newsEventsTypeDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeHU_ss" ],
      "target" : "newsEventsTypeHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeIT_ss" ],
      "target" : "newsEventsTypeIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeJP_ss" ],
      "target" : "newsEventsTypeJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeKO_ss" ],
      "target" : "newsEventsTypeKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeNO_ss" ],
      "target" : "newsEventsTypeNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypePL_ss" ],
      "target" : "newsEventsTypePL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypePT_ss" ],
      "target" : "newsEventsTypePT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeRU_ss" ],
      "target" : "newsEventsTypeRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeZH_ss" ],
      "target" : "newsEventsTypeZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeES_ss" ],
      "target" : "newsEventsTypeES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeSV_ss" ],
      "target" : "newsEventsTypeSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeTH_ss" ],
      "target" : "newsEventsTypeTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeTW_ss" ],
      "target" : "newsEventsTypeTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeTR_ss" ],
      "target" : "newsEventsTypeTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "newsEventsTypeVI_ss" ],
      "target" : "newsEventsTypeVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split newsEventsType Lang Fields",
    "secretSourceStageId" : "nt8bac"
  }, {
    "type" : "regex-extractor",
    "id" : "0jl",
    "rules" : [ {
      "source" : [ "marketEN_ss" ],
      "target" : "marketEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketCS_ss" ],
      "target" : "marketCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketDK_ss" ],
      "target" : "marketDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketNL_ss" ],
      "target" : "marketNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketFI_ss" ],
      "target" : "marketFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketFR_ss" ],
      "target" : "marketFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketDE_ss" ],
      "target" : "marketDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketHU_ss" ],
      "target" : "marketHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketIT_ss" ],
      "target" : "marketIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketJP_ss" ],
      "target" : "marketJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketKO_ss" ],
      "target" : "marketKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketNO_ss" ],
      "target" : "marketNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketPL_ss" ],
      "target" : "marketPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketPT_ss" ],
      "target" : "marketPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketRU_ss" ],
      "target" : "marketRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketZH_ss" ],
      "target" : "marketZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketES_ss" ],
      "target" : "marketES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketSV_ss" ],
      "target" : "marketSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketTH_ss" ],
      "target" : "marketTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketTW_ss" ],
      "target" : "marketTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketTR_ss" ],
      "target" : "marketTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "marketVI_ss" ],
      "target" : "marketVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split Market Lang Fields",
    "secretSourceStageId" : "0jl"
  }, {
    "type" : "regex-extractor",
    "id" : "u0o",
    "rules" : [ {
      "source" : [ "technologyEN_ss" ],
      "target" : "technologyEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyCS_ss" ],
      "target" : "technologyCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyDK_ss" ],
      "target" : "technologyDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyNL_ss" ],
      "target" : "technologyNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyFI_ss" ],
      "target" : "technologyFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyFR_ss" ],
      "target" : "technologyFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyDE_ss" ],
      "target" : "technologyDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyHU_ss" ],
      "target" : "technologyHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyIT_ss" ],
      "target" : "technologyIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyJP_ss" ],
      "target" : "technologyJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyKO_ss" ],
      "target" : "technologyKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyNO_ss" ],
      "target" : "technologyNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyPL_ss" ],
      "target" : "technologyPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyPT_ss" ],
      "target" : "technologyPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyRU_ss" ],
      "target" : "technologyRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyZH_ss" ],
      "target" : "technologyZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyES_ss" ],
      "target" : "technologyES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologySV_ss" ],
      "target" : "technologySV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyTH_ss" ],
      "target" : "technologyTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyTW_ss" ],
      "target" : "technologyTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyTR_ss" ],
      "target" : "technologyTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "technologyVI_ss" ],
      "target" : "technologyVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split Technology Lang Fields",
    "secretSourceStageId" : "u0o"
  }, {
    "type" : "field-mapping",
    "id" : "071a4a2a-3301-4639-bae5-a38fc8a563b7",
    "mappings" : [ {
      "source" : "productCS_ss",
      "target" : "productCS_t",
      "operation" : "copy"
    }, {
      "source" : "productDK_ss",
      "target" : "productDK_t",
      "operation" : "copy"
    }, {
      "source" : "productNL_ss",
      "target" : "productNL_t",
      "operation" : "copy"
    }, {
      "source" : "productEN_ss",
      "target" : "productEN_t",
      "operation" : "copy"
    }, {
      "source" : "productFI_ss",
      "target" : "productFI_t",
      "operation" : "copy"
    }, {
      "source" : "productFR_ss",
      "target" : "productFR_t",
      "operation" : "copy"
    }, {
      "source" : "productDE_ss",
      "target" : "productDE_t",
      "operation" : "copy"
    }, {
      "source" : "productHU_ss",
      "target" : "productHU_t",
      "operation" : "copy"
    }, {
      "source" : "productIT_ss",
      "target" : "productIT_t",
      "operation" : "copy"
    }, {
      "source" : "productJP_ss",
      "target" : "productJP_t",
      "operation" : "copy"
    }, {
      "source" : "productKO_ss",
      "target" : "productKO_t",
      "operation" : "copy"
    }, {
      "source" : "productNO_ss",
      "target" : "productNO_t",
      "operation" : "copy"
    }, {
      "source" : "productPL_ss",
      "target" : "productPL_t",
      "operation" : "copy"
    }, {
      "source" : "productPT_ss",
      "target" : "productPT_t",
      "operation" : "copy"
    }, {
      "source" : "productRU_ss",
      "target" : "productRU_t",
      "operation" : "copy"
    }, {
      "source" : "productZH_ss",
      "target" : "productZH_t",
      "operation" : "copy"
    }, {
      "source" : "productES_ss",
      "target" : "productES_t",
      "operation" : "copy"
    }, {
      "source" : "productSV_ss",
      "target" : "productSV_t",
      "operation" : "copy"
    }, {
      "source" : "productTH_ss",
      "target" : "productTH_t",
      "operation" : "copy"
    }, {
      "source" : "productTW_ss",
      "target" : "productTW_t",
      "operation" : "copy"
    }, {
      "source" : "productTR_ss",
      "target" : "productTR_t",
      "operation" : "copy"
    }, {
      "source" : "productVI_ss",
      "target" : "productVI_t",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "Field mapping for product_ss to text",
    "secretSourceStageId" : "071a4a2a-3301-4639-bae5-a38fc8a563b7"
  }, {
    "type" : "javascript-index",
    "id" : "6u",
    "script" : "\nfunction getLangCode(lang){\n \n  var langVal = lang[0];\n  var langCode;\n  \n  //logger.info(\"zzzzz: Lang getLangCode -- \" + langVal + \" --\");\n  \n  switch (langVal) {\n  \n    case -1:\n      langCode=\"EN\";\n      break;\n    case -2:\n      langCode=\"FR\";\n      break;\n    case -3:\n      langCode=\"DE\";\n      break;\n    case -4:\n      langCode=\"IT\";\n      break;\n    case -5:\n      langCode=\"ES\";\n      break;\n    case -6:\n      langCode=\"PT\";\n      break;\n    case -7:\n      langCode=\"ZH\";\n      break;\n    case -8:\n      langCode=\"TW\";\n      break;\n    case -9:\n      langCode=\"KO\";\n      break;\n    case -10:\n      langCode=\"JP\";\n      break;\n    case -20:\n      langCode=\"RU\";\n      break;\n    case -22:\n      langCode=\"PL\";\n      break;\n    case -24:\n      langCode=\"FI\";\n      break;\n    case -25:\n      langCode=\"NO\";\n      break;\n    case -26:\n      langCode=\"SV\";\n      break;\n    case -27:\n      langCode=\"CS\";\n      break;\n    case -28:\n      langCode=\"DK\";\n      break;\n    case -29:\n      langCode=\"NL\";\n      break;\n    case -30:\n      langCode=\"TR\";\n      break;\n    case -31:\n      langCode=\"HU\";\n      break;\n    case -32:\n      langCode=\"TH\";\n      break;\n    case -34:\n      langCode=\"VI\";\n      break;\n    default:\n      langCode=\"XX\";\n              }\n      \n // logger.info(\"zzzz LANGCODE: \" + langCode);\n  \n  \n  return langCode;\n}\n\nfunction getLangCode2(lang){\n \n  var langVal = lang;\n  var langCode;\n  \n  //logger.info(\"zzzzz: Lang getLangCode2 -- \" + langVal + \" --\");\n  \n  switch (langVal) {\n  \n    case \"-1\":\n      langCode=\"EN\";\n      break;\n    case \"-2\":\n      langCode=\"FR\";\n      break;\n    case \"-3\":\n      langCode=\"DE\";\n      break;\n    case \"-4\":\n      langCode=\"IT\";\n      break;\n    case \"-5\":\n      langCode=\"ES\";\n      break;\n    case \"-6\":\n      langCode=\"PT\";\n      break;\n    case \"-7\":\n      langCode=\"ZH\";\n      break;\n    case \"-8\":\n      langCode=\"TW\";\n      break;\n    case \"-9\":\n      langCode=\"KO\";\n      break;\n    case \"-10\":\n      langCode=\"JP\";\n      break;\n    case \"-20\":\n      langCode=\"RU\";\n      break;\n    case \"-22\":\n      langCode=\"PL\";\n      break;\n    case \"-24\":\n      langCode=\"FI\";\n      break;\n    case \"-25\":\n      langCode=\"NO\";\n      break;\n    case \"-26\":\n      langCode=\"SV\";\n      break;\n    case \"-27\":\n      langCode=\"CS\";\n      break;\n    case \"-28\":\n      langCode=\"DK\";\n      break;\n    case \"-29\":\n      langCode=\"NL\";\n      break;\n    case \"-30\":\n      langCode=\"TR\";\n      break;\n    case \"-31\":\n      langCode=\"HU\";\n      break;\n    case \"-32\":\n      langCode=\"TH\";\n      break;\n    case \"-34\":\n      langCode=\"VI\";\n      break;\n    default:\n      langCode=\"XX\";\n              }\n      \n // logger.info(\"zzzz LANGCODE2: \" + langCode);\n  \n  \n  return langCode;\n}\n\nfunction getLangQuery(langs){\n \n  var langs = langs;\n  var langQuery;\n  \n  //logger.info(\"zzzzz gLQ number of languages:\" + langs.length);\n  \n  \n  \n  for (var m = 0; m < langs.length; m++) {\n  \n    //logger.info(\"zzzzZZZ\" + m + \": \" + langs[m]);\n    //langQuery = langs[m];\n    \n    if (m == 0){\n      \n      //langQuery = \"filter(language_is:\\\"\" + langs[m] + \"\\\")\";\n      langQuery=\"\\\"\" + langs[m] + \"\\\"\";\n     // logger.info(\"zzzz test \" + m + \": \" + langQuery);\n    }\n    else\n    {\n      langQuery = langQuery + \"%20OR%20\" + \"\\\"\" + langs[m] + \"\\\"\";\n     // logger.info(\"zzzz test multi \" + m + \": \" + langQuery);\n    }\n\n  }\n  \n // logger.info(\"zzzzz LangQuery Before:\" + langQuery);\n  \n  return langQuery;\n    \n}\n\nfunction getPartNumber(ecomId) {\n\n  var ecomId = ecomId;\n  var partNumber;\n  var partNumbers;\n  var HttpURLConnection = java.net.HttpURLConnection;\n  var URL = java.net.URL;\n  var InputStreamReader = java.io.InputStreamReader;\n  var BufferedReader = java.io.BufferedReader;\n  var e = java.lang.Exception;\n  \n // logger.info(\"zzzzz in the gPN: \" + ecomId);\n\n  \n  try {\n  \n  var url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/lookup/collections/ParkerDotComMainMaster/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=productType_ss:(%22Part%22)&q=productSeriesId_l:\" + ecomId + \"&rows=250\"));\n  \n    \n    \n    \n   // logger.info(\"zzzzz url: \" + url);\n  \n  var c = java.net.HttpURLConnection;\n  c = url.openConnection();\n  c.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n  c.connect();\n  var status = c.getResponseCode();\n  \n // logger.info(\"zzzzz CStatus: \" + status);\n\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\tvar reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n\t\tvar response = JSON.parse(reader.readLine());\n\t\tvar numFound = response.response.numFound;\n    \n\t//\tlogger.info(\"zzzzz numFound: \" + numFound);\n    \n\t\tpartNumbers = response.response.docs;\n\t}\n    \n  }\n   catch (e) {\n     logger.error(e);\n     logger.info(\"zzzz Part Number Lookup Error: \" + e);\n   }\n  \n  \n  \n  return partNumbers;\n  \n}\n\nfunction getProductSeries(ecomId, langs, type) {\n\n  var ecomId = ecomId;\n  var langs = langs;\n  var productSeries;\n  var HttpURLConnection = java.net.HttpURLConnection;\n  var URL = java.net.URL;\n  var InputStreamReader = java.io.InputStreamReader;\n  var BufferedReader = java.io.BufferedReader;\n  var e = java.lang.Exception;\n  var queryField;\n  \n  if (type == \"C\"){\n    queryField=\"categoryId_l\";\n    //logger.info(\"zzzz: Performing Caegory ID search for \" + ecomId);\n  }\n  else {\n    queryField=\"productSeriesId_l\";\n    //logger.info(\"zzzz: Performing Product Series search for \" + ecomId);\n  }\n  \n  //logger.info(\"zzzzz in the gPS: \" + ecomId);\n\n  \n  try {\n  \n  var url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/lookup/collections/ParkerDotComMainMaster/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=countryId_ss:*&fq=productType_ss:(%22Product%20Series%22)&fq=language_is:(\" + langs + \")&q=\" + queryField + \":\" + ecomId + \"&rows=250\"));\n//    var url = new URL((\"http://localhost:8764/api/apollo/query-pipelines/lookup/collections/ParkerDotComMainMaster/select?echoParams=all&wt=json&json.nl=arrarr&sort&start=0&fq=productType_ss:(%22Product%20Series%22)&q=productSeriesId_l:\" + ecomId + \"&rows=100\"));\n  \n    \n    \n    \n   // logger.info(\"zzzzz url: \" + url);\n  \n  var c = java.net.HttpURLConnection;\n  c = url.openConnection();\n  c.setRequestProperty(\"Authorization\", \"Basic YWRtaW46UGFya2VyMTIz\");\n  c.connect();\n  var status = c.getResponseCode();\n  \n // logger.info(\"zzzzz CStatus: \" + status);\n\tif (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_MOVED_PERM) {\n\t\tvar reader = new BufferedReader(new InputStreamReader(c.getInputStream()));\n\t\tvar response = JSON.parse(reader.readLine());\n\t\tvar numFound = response.response.numFound;\n    \n\t//\tlogger.info(\"zzzzz numFound: \" + numFound);\n    \n\t\tproductSeries = response.response.docs;\n\t//\tlogger.info(\"zzzzz PSeries Array Length: \" + productSeries.length);\n    }\n\t\n  }\n   catch (e) {\n     logger.error(e);\n     logger.info(\"zzzz Product Series Search Lookup Error: \" + e);\n   }\n  \n  \n  \n  return productSeries;\n  \n}\n\n\nfunction (doc) {\n \n  var id = doc.getId();\n  var incomingProductNames = doc.getFieldValues(\"otProductName_ss\");\n  var tagType = doc.getFieldValues(\"otTagType_ss\");\n  var tagAllPT = doc.getFieldValues(\"otTagAllPT_ss\");\n  var tagAllPS = doc.getFieldValues(\"otTagAllPS_ss\");\n  var ecomId = doc.getFieldValues(\"otEcomId_ls\");\n  var langs = doc.getFieldValues(\"language_is\");\n  var langs2 = doc.getFieldValues(\"language_is\");\n  var partNums = [];\n  var partNumbers = [];\n  var productSeries = [];\n  var langQuery;\n  //var langArray = ['EN', 'CS', 'DE', 'DK', 'ES', 'FI', 'FR', 'HU', 'IT', 'JP', 'KO', 'NL', 'NO', 'PL', 'PT', 'RU', 'SV', 'TH', 'TR', 'TW', 'VI', 'ZH'];\n  var langArray = [];\n  \n  var partVar = 'XX';\n  var partMap = new java.util.HashMap();\n  var titleMap = new java.util.HashMap(); \n  var descriptionMap = new java.util.HashMap(); \n  var taxonomyL1Map = new java.util.HashMap(); \n  var taxonomyL2Map = new java.util.HashMap(); \n  var taxonomyL3Map = new java.util.HashMap(); \n  var hasTaxonomyFields = 0;\n  \n  \n  if (doc.getId() != null) { \n  \n    try {\n    \n  logger.info(\"zzzzzzzzzzzzzzzzzzzzzzzz: starting Parts and Products Retrieval for \" + id);\n  \n  //logger.info(\"zzzzz NAMES: \" + incomingProductNames);\n  //logger.info(\"zzzzz TAGTYPE: \" + tagType);\n  //logger.info(\"zzzzz TAGALLPT: \" + tagAllPT);\n  //logger.info(\"zzzzz TAGALLPS: \" + tagAllPS);\n  //logger.info(\"zzzzz ECOMID: \" + ecomId);\n  //logger.info(\"zzzzz LANGS: \" + langs);\n  //logger.info(\"zzzzz NUM LANGS:\" + langs.length);\n  \n  //logger.info(\"zzzz LANGS2: \" + langs2);\n // var langSplit = langs2.split(\",\");\n \n  for each (var langidvals in langs){\n    //logger.info(\"zzzz langval: \" + langidvals);\n  langArray.push(getLangCode2(langidvals));\n    \n    }\n  \n  \n  langQuery = getLangQuery(langs);\n  //logger.info(\"zzzzz LangQuery After:\" + langQuery);\n  \n  // if tagType = \"T\" then this is a \"Part\" so retrieve the Part items\n  \n  // first examine the tagAllPT field because if it is \"No\" then no lookup required\n  \n  \n  for (var i = 0; i < tagType.length; i++) {  // process all \"tagType\" values\n  \n    \n    if (tagType[i] ==\"T\"){ // Part Tag Type\n    \n      //logger.info(\"zzzzz: Main Type T\");\n      \n   \t\tif (tagAllPT[i]==\"Yes\"){ \n    \n\t\t//logger.info(\"zzzz: Tag all Parts\");\n    \t\t// search for each ecomId\n    \n    \t//\tlogger.info(\"zzzzz \" + i + \" : \" + ecomId[i]);\n    \t\tgetPartNumber(ecomId[i]);\n    \t}\n    \telse\n    \t{\n      \tpartNums[i] = incomingProductNames[i];\n     // \tlogger.info(\"zzzzz Part Num: \" + incomingProductNames[i]);\n    \t}\n    \n     \tfor each(var num in partNums) {\n\t\t\t\n\t\t\t\tif (!partMap.containsKey(partVar)){\n                    var myPartSet = new java.util.HashSet();\n\t\t\t//\t\tlogger.info(\"zzzz: creating part map\");\n                    myPartSet.add(num);\n\t\t\t\t\tpartMap.put(partVar, myPartSet);\n                  }\n                  else\n                  {\n\t\t\t//\t\t  logger.info(\"zzzz: adding to part map\");\n                      partMap.get(partVar).add(num);\n                  }\n\t\t\n   \t\t \t//doc.addField(\"parkerAssociatedPartNumber_ss\", num);\n  \t\t}\n    }\n    \n    else if (tagType[i] == \"P\") { // Product Series Tag Type\n      \n      //logger.info(\"zzzzz: Main Type P\");\n      \n      \n      if (tagAllPS[i]==\"Yes\"){\n      \n        //logger.info(\"zzzzz: Tag all Product Series\");\n        \n       \n        \n        productSeries = getProductSeries(ecomId[i], langQuery, \"P\");\n        //logger.info(\"zzzzz NumPS Docs: \" + productSeries.length); \n        \n \n           \tfor each(var pseries in productSeries) {\n   \t\t \t//logger.info(\"zzzzzz PSeries test KEYS: \" + Object.keys(pseries));\n           //   logger.info(\"zzzz Inside tagType Product Series\");\n              \n              var lang = pseries.language_is;\n              var langcode = getLangCode(lang);\n\n\t\t\t  \n\t\t\t\t// TITLE\n                if (!titleMap.containsKey(langcode)){\n                    var myTitleSet = new java.util.HashSet();\n                    myTitleSet.add(pseries['title'+langcode+'_t'][0]);\n\t\t\t\t\ttitleMap.put(langcode, myTitleSet);\n                  }\n                  else\n                  {\n                    titleMap.get(langcode).add(pseries['title'+langcode+'_t'][0]);\n                  }\n\t\t\t\t  \n\t\t\t\t// DESCRIPTION\n\t\t\t\tif (!descriptionMap.containsKey(langcode)){\n                    var myDescriptionSet = new java.util.HashSet();\n                    myDescriptionSet.add(pseries['description'+langcode+'_t'][0]);\n\t\t\t\t\tdescriptionMap.put(langcode, myDescriptionSet);\n                  }\n                  else\n                  {\n                    descriptionMap.get(langcode).add(pseries['description'+langcode+'_t'][0]);\n                  }  \n\t\t\t\t  \n\t\t\t\t// TAXONOMYL1\n\t\t\t\tif (!taxonomyL1Map.containsKey(langcode)){\n                    var mytaxonomyL1Set = new java.util.HashSet();\n                  if (pseries['productTaxonomyL1'+langcode+'_s']!=undefined){\n                        hasTaxonomyFields=1;\n                  \t\tmytaxonomyL1Set.add(pseries['productTaxonomyL1'+langcode+'_s']);\n\t\t\t\t\t\ttaxonomyL1Map.put(langcode, mytaxonomyL1Set);\n                   }\n                  else\n                  {\n                    //logger.info(\"zzzz undefined 1\");\n                  }\n                  }\n                  else\n                  {\n                    if (pseries['productTaxonomyL1'+langcode+'_s']!=undefined) {\n                      \n                      try{\n                        hasTaxonomyFields=1;\n\t\t\t\t\t\ttaxonomyL1Map.get(langcode).add(pseries['productTaxonomyL1'+langcode+'_s'].trim());\n                      }\n                      catch (exception)\n                      {\n                        //logger.info(\"zzzz: exception --> \" + exception);\n                      }\n                    }\n                    else\n                    {\n                      //logger.info(\"zzzz undefined 2\");\n                    }\n                  }\n\n\t\t\t\t// TAXONOMYL2\n\t\t\t\tif (!taxonomyL2Map.containsKey(langcode)){\n                    var mytaxonomyL2Set = new java.util.HashSet();\n                  if (pseries['productTaxonomyL2'+langcode+'_s']!=undefined){\n                        hasTaxonomyFields=1;\n                  \t\tmytaxonomyL2Set.add(pseries['productTaxonomyL2'+langcode+'_s']);\n\t\t\t\t\t\ttaxonomyL2Map.put(langcode, mytaxonomyL2Set);\n                   }\n                  else\n                  {\n                    //logger.info(\"zzzz undefined 3\");\n                  }\n                  }\n                  else\n                  {\n                    if (pseries['productTaxonomyL2'+langcode+'_s']!=undefined) {\n                      \n                      try{\n                        hasTaxonomyFields=1;\n\t\t\t\t\t\ttaxonomyL2Map.get(langcode).add(pseries['productTaxonomyL2'+langcode+'_s'].trim());\n                      }\n                      catch (exception)\n                      {\n                        //logger.info(\"zzzz: exception --> \" + exception);\n                      }\n                    }\n                    else\n                    {\n                      //logger.info(\"zzzz undefined 4\");\n                    }\n                  }\t\t\t  \n\n\t\t\t\t// TAXONOMYL3\n\t\t\t\tif (!taxonomyL3Map.containsKey(langcode)){\n                    var mytaxonomyL3Set = new java.util.HashSet();\n                  if (pseries['productTaxonomyL3'+langcode+'_s']!=undefined){\n                        hasTaxonomyFields=1;\n                  \t\tmytaxonomyL3Set.add(pseries['productTaxonomyL3'+langcode+'_s']);\n\t\t\t\t\t\ttaxonomyL3Map.put(langcode, mytaxonomyL3Set);\n                   }\n                  else\n                  {\n                    //logger.info(\"zzzz undefined 5\");\n                  }\n                  }\n                  else\n                  {\n                    if (pseries['productTaxonomyL3'+langcode+'_s']!=undefined) {\n                      \n                      try{\n                        hasTaxonomyFields=1;\n\t\t\t\t\t\ttaxonomyL3Map.get(langcode).add(pseries['productTaxonomyL3'+langcode+'_s'].trim());\n                      }\n                      catch (exception)\n                      {\n                        //logger.info(\"zzzz: exception --> \" + exception);\n                      }\n                    }\n                    else\n                    {\n                      //logger.info(\"zzzz undefined 6\");\n                    }\n                  }\n\n\n  \n  \t\t}\n        \n\t\tif (tagAllPT[i]==\"Yes\"){\n\t\t\tpartNumbers = getPartNumber(ecomId[i]);\n\t\t//\tlogger.info(\"zzzzz Number of Parts Found for \" + ecomId[i] + \": \" + partNumbers.length);\n       \n\t        for each(var num in partNumbers) {\n\t\t\t\t\n\t\t\t\tif (!partMap.containsKey(partVar)){\n                    var myPartSet = new java.util.HashSet();\n\t\t\t//\t\tlogger.info(\"zzzz: creating part map\");\n                    myPartSet.add(num.parkerPartNumber_s);\n\t\t\t\t\tpartMap.put(partVar, myPartSet);\n                  }\n                  else\n                  {\n\t\t\t\t//\t  logger.info(\"zzzz: adding to part map\");\n                      partMap.get(partVar).add(num.parkerPartNumber_s);\n                  }\n\t\t\t\t\n\t\t\t\t//doc.addField(\"parkerAssociatedPartNumber_ss\", num.parkerPartNumber_s);\n\t\t\t\t}\n  \t\t}\n\t   \n        //doc.addField(\"productEN_ss\", enPseries);\n        \n      }\n      else if (tagAllPS[i]==\"No\"){\n        \n        //logger.info(\"zzzzz: Do NOT Tag all Product Series\");\n\t\t\n\t\tif (tagAllPT[i]==\"Yes\"){\n\t\t\tpartNumbers = getPartNumber(ecomId[i]);\n\t\t//\tlogger.info(\"zzzzz Number of Parts Found for \" + ecomId[i] + \": \" + partNumbers.length);\n       \n\t        for each(var num in partNumbers) {\n\t\t\t\t\n\t\t\t\tif (!partMap.containsKey(partVar)){\n                    var myPartSet = new java.util.HashSet();\n\t\t//\t\t\tlogger.info(\"zzzz: creating part map\");\n                    myPartSet.add(num.parkerPartNumber_s);\n\t\t\t\t\tpartMap.put(partVar, myPartSet);\n                  }\n                  else\n                  {\n\t\t\t//\t\t  logger.info(\"zzzz: adding to part map\");\n                      partMap.get(partVar).add(num.parkerPartNumber_s);\n                  }\n\t\t\t\t\n\t\t\t\t//doc.addField(\"parkerAssociatedPartNumber_ss\", num.parkerPartNumber_s);\n\t\t\t\t}\n  \t\t}\n\t\t\n\t\t\n      }\n      \n    }\n    \n    else if (tagType[i] == \"C\") {  // Category Tag Type\n      \n      //logger.info(\"zzzzz: Main Type C\");\n      \n\t  \n      \n      \n      if (tagAllPS[i]==\"Yes\"){\n\n        \n        var ecomlist = [];\n    \n      //logger.info(\"zzzz: Tag all Product Series based on Category ID of \" + ecomId[i]);\n      productSeries = getProductSeries(ecomId[i], langQuery, \"C\");\n      //logger.info(\"zzzzz NumPS Docs Based on category: \" + productSeries.length); \n\n        for each(var pseries in productSeries) {\n\t\t\t//logger.info(\"zzzz inside Category processing Product Series\");\n\t\t\t\tecomlist.push(pseries.productSeriesId_l);\n          //logger.info(\"zzzz: processing id: \" + pseries.id);      \n          //logger.info(\"zzzz: adding to ecomlist ... \" + pseries.productSeriesId_l);\n              \n              var lang = pseries.language_is;\n\n              var langcode = getLangCode(lang);\n\t\t  \n\t\t\t  \n\t\t\t  // process the fields into HashMaps and Sets based on language\n\t\t\t  \n\t\t\t\t// TITLE\n                if (!titleMap.containsKey(langcode)){\n                    var myTitleSet = new java.util.HashSet();\n                    myTitleSet.add(pseries['title'+langcode+'_t'][0]);\n\t\t\t\t\ttitleMap.put(langcode, myTitleSet);\n                  }\n                  else\n                  {\n                    titleMap.get(langcode).add(pseries['title'+langcode+'_t'][0]);\n                  }\n\t\t\t\t  \n\t\t\t\t// DESCRIPTION\n\t\t\t\tif (!descriptionMap.containsKey(langcode)){\n                    var myDescriptionSet = new java.util.HashSet();\n                    myDescriptionSet.add(pseries['description'+langcode+'_t'][0]);\n\t\t\t\t\tdescriptionMap.put(langcode, myDescriptionSet);\n                  }\n                  else\n                  {\n                    descriptionMap.get(langcode).add(pseries['description'+langcode+'_t'][0]);\n                  }  \n\t\t\t\t  \n\t\t\t\t// TAXONOMYL1\n\t\t\t\tif (!taxonomyL1Map.containsKey(langcode)){\n                    var mytaxonomyL1Set = new java.util.HashSet();\n                  if (pseries['productTaxonomyL1'+langcode+'_s']!=undefined){\n                        hasTaxonomyFields=1;\n                  \t\tmytaxonomyL1Set.add(pseries['productTaxonomyL1'+langcode+'_s']);\n\t\t\t\t\t\ttaxonomyL1Map.put(langcode, mytaxonomyL1Set);\n                   }\n                  else\n                  {\n                    //logger.info(\"zzzz undefined 7\");\n                  }\n                  }\n                  else\n                  {\n                    if (pseries['productTaxonomyL1'+langcode+'_s']!=undefined) {\n                      \n\t\t\t\t\t // logger.info(\"zzzzzzzzzzzzzzzzzzzzz: this is what we have so far: \" + pseries['productTaxonomyL1'+langcode+'_s']);\n\t\t\t\t\t  \n                      try{\n                        hasTaxonomyFields=1;\n\t\t\t\t\t\ttaxonomyL1Map.get(langcode).add(pseries['productTaxonomyL1'+langcode+'_s'].trim());\n                      }\n                      catch (exception)\n                      {\n\t\t\t\t\t\tlogger.info(\"zzzz: langcode before exception --> \" + langcode);\n                        logger.info(\"zzzz: exception TaxL1 --> \" + exception);\n                      }\n                    }\n                    else\n                    {\n                      //logger.info(\"zzzz undefined 8\");\n                    }\n                  }\n\n\t\t\t\t// TAXONOMYL2\n\t\t\t\tif (!taxonomyL2Map.containsKey(langcode)){\n                    var mytaxonomyL2Set = new java.util.HashSet();\n                  if (pseries['productTaxonomyL2'+langcode+'_s']!=undefined){\n                        hasTaxonomyFields=1;\n                  \t\tmytaxonomyL2Set.add(pseries['productTaxonomyL2'+langcode+'_s']);\n\t\t\t\t\t\ttaxonomyL2Map.put(langcode, mytaxonomyL2Set);\n                   }\n                  else\n                  {\n                    //logger.info(\"zzzz undefined 9\");\n                  }\n                  }\n                  else\n                  {\n                    if (pseries['productTaxonomyL2'+langcode+'_s']!=undefined) {\n                      \n                      try{\n                        hasTaxonomyFields=1;\n\t\t\t\t\t\ttaxonomyL2Map.get(langcode).add(pseries['productTaxonomyL2'+langcode+'_s'].trim());\n                      }\n                      catch (exception)\n                      {\n                        logger.info(\"zzzz: exception TaxL2 --> \" + exception);\n                      }\n                    }\n                    else\n                    {\n                      //logger.info(\"zzzz undefined 10\");\n                    }\n                  }\t\t\t  \n\n\t\t\t\t// TAXONOMYL3\n\t\t\t\tif (!taxonomyL3Map.containsKey(langcode)){\n                    var mytaxonomyL3Set = new java.util.HashSet();\n                  if (pseries['productTaxonomyL3'+langcode+'_s']!=undefined){\n                        hasTaxonomyFields=1;\n                  \t\tmytaxonomyL3Set.add(pseries['productTaxonomyL3'+langcode+'_s']);\n\t\t\t\t\t\ttaxonomyL3Map.put(langcode, mytaxonomyL3Set);\n                   }\n                  else\n                  {\n                    //logger.info(\"zzzz undefined 11\");\n                  }\n                  }\n                  else\n                  {\n                    if (pseries['productTaxonomyL3'+langcode+'_s']!=undefined) {\n                      \n                      try{\n                        hasTaxonomyFields=1;\n\t\t\t\t\t\ttaxonomyL3Map.get(langcode).add(pseries['productTaxonomyL3'+langcode+'_s'].trim());\n                      }\n                      catch (exception)\n                      {\n                        logger.info(\"zzzz: exception TaxL3 --> \" + exception);\n                      }\n                    }\n                    else\n                    {\n                      //logger.info(\"zzzz undefined 12\");\n                    }\n                  }\n\t\t}\n\n        \n \n        \n        if (tagAllPT[i]==\"Yes\")\n        {\n          //logger.info(\"zzzz: Tagging all Parts\");\n       //   logger.info(\"zzzz: # of EcomIds: \" + ecomlist.length);\n        // retrieve list of Parts\n       // add each part number to the output doc\n          \n          for each (var pnum in ecomlist){\n            \n\t\t\t//logger.info(\"zzzz: processing the parts ...\");\n\t\t\t\n            var partNumDocs = getPartNumber(pnum);\n            \n            for each (var partNumDoc in partNumDocs){\n               //logger.info(\"zzzz: processing id \" + partNumDoc.id);\n              if (partNumDoc.id === undefined){\n\t\t\t\t//logger.info(\"zzzz: part doc is null\");\n\t\t\t\tpartNumDoc.parkerPartNumber_s=null;\n\t\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\tif (!partMap.containsKey(partVar)){\n                    var myPartSet = new java.util.HashSet();\n\t\t\t\t\t//logger.info(\"zzzz: creating part map\");\n                    myPartSet.add(partNumDoc.parkerPartNumber_s);\n\t\t\t\t\tpartMap.put(partVar, myPartSet);\n                  }\n                  else\n                  {\n\t\t\t\t\t  //logger.info(\"zzzz: adding to part map\");\n                      partMap.get(partVar).add(partNumDoc.parkerPartNumber_s);\n                  }\n\t\t\t\t  \n\t\t\t\t//doc.addField(\"parkerAssociatedPartNumber_ss\", partNumDoc.parkerPartNumber_s);\n            }\n           \n            \n          }\n          \n        }\n      }\n      \n        \n  }\n  \n  \n  }\n \n doc.addField('product_ss', titleMap.get('EN'));\n \n          for each (var l in langArray){\n          //logger.info(\"zzzz: Title HashSet \" + l + \" -- \" + titleMap.get(l));\n\t\t  doc.addField('product'+l+'_t', titleMap.get(l));\n\t\t  doc.addField('product'+l+'_ss', titleMap.get(l));\n\t\t  //logger.info(\"zzzz: Description HashSet \" + l + \" -- \" + descriptionMap.get(l));\n\t\t  doc.addField('description'+l+'_t', descriptionMap.get(l));\n          \n           if (hasTaxonomyFields){\n\t\t  //logger.info(\"zzzz: TaxonomyL1 HashSet \" + l + \" -- \" + taxonomyL1Map.get(l));\n             try{\n            taxonomyL1Map.get(l).stream().forEach(function(s){\n                                                  doc.addField('ZZZproductTaxonomyL1'+l+'_t', s)\n                                                  //logger.info(\"zzzz STREAM \" + s);\n\t\t\t\t\t\t\t\t\t\t\t\t  });\n             }\n             catch (exceptionT1) {\n             }\n\t\t  //doc.addField('ZZZproductTaxonomyL1'+l+'_t', taxonomyL1Map.get(l));\n\t\t  //logger.info(\"zzzz: TaxonomyL2 HashSet \" + l + \" -- \" + taxonomyL2Map.get(l));\n\t\t  //doc.addField('ZZZproductTaxonomyL2'+l+'_t', taxonomyL2Map.get(l));\n             try{\n              taxonomyL2Map.get(l).stream().forEach(function(s){\n                                                  doc.addField('ZZZproductTaxonomyL2'+l+'_t', s)\n                                                  //logger.info(\"zzzz STREAM \" + s);\n\t\t\t\t\t\t\t\t\t\t\t\t  });\n             }\n             catch (exceptionT2) {\n             }\n\t\t  //logger.info(\"zzzz: TaxonomyL3 HashSet \" + l + \" -- \" + taxonomyL3Map.get(l));\n\t\t  //doc.addField('ZZZproductTaxonomyL3'+l+'_t', taxonomyL3Map.get(l));\n             try{\n              taxonomyL3Map.get(l).stream().forEach(function(s){\n                                                  doc.addField('ZZZproductTaxonomyL3'+l+'_t', s)\n                                                  //logger.info(\"zzzz STREAM \" + s);\n\t\t\t\t\t\t\t\t\t\t\t\t  });\n             }\n             catch (exceptionT3) {\n             }\n           }\n\t\t   logger.info(\"zzz associated parts: \" + partMap.get(partVar));\n\t\t  doc.addField(\"parkerAssociatedPartNumber_ss\", partMap.get(partVar));\n            \n        }\n\t\t\n\t\tlogger.info(\"zzzz: completed Parts and Products Retrieval for \" + id);\n    }\n    catch (exception)\n    {\n     logger.info(\"zzzz main exception: \" + exception); \n    }\n      \n  }\n  \n  return doc;\n  \n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Retrieve Parts and Products Info",
    "secretSourceStageId" : "6u"
  }, {
    "type" : "regex-extractor",
    "id" : "842a4f11-c363-442c-8b16-b8d13c396d10",
    "rules" : [ {
      "source" : [ "productEN_ss" ],
      "target" : "productEN_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productFR_ss" ],
      "target" : "productFR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productDE_ss" ],
      "target" : "productDE_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productIT_ss" ],
      "target" : "productIT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productES_ss" ],
      "target" : "productES_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productPT_ss" ],
      "target" : "productPT_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productZH_ss" ],
      "target" : "productZH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTW_ss" ],
      "target" : "productTW_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productKO_ss" ],
      "target" : "productKO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productJP_ss" ],
      "target" : "productJP_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productRU_ss" ],
      "target" : "productRU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productPL_ss" ],
      "target" : "productPL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productFI_ss" ],
      "target" : "productFI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productNO_ss" ],
      "target" : "productNO_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productSV_ss" ],
      "target" : "productSV_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "product_ss" ],
      "target" : "product_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productCS_ss" ],
      "target" : "productCS_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productDK_ss" ],
      "target" : "productDK_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productNL_ss" ],
      "target" : "productNL_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTR_ss" ],
      "target" : "productTR_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productHU_ss" ],
      "target" : "productHU_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productTH_ss" ],
      "target" : "productTH_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    }, {
      "source" : [ "productVI_ss" ],
      "target" : "productVI_ss",
      "writeMode" : "overwrite",
      "pattern" : "[^,\\s][^\\,]*[^,\\s]*",
      "returnIfNoMatch" : "input_string",
      "group" : 0
    } ],
    "type" : "regex-extractor",
    "skip" : false,
    "label" : "Split product Lang Fields",
    "secretSourceStageId" : "842a4f11-c363-442c-8b16-b8d13c396d10"
  }, {
    "type" : "javascript-index",
    "id" : "62n",
    "script" : "/* Last modified: 2018-01-10\n   Last modified by:  Terry Chambers / Onix\n   Change summary:\n   2018-01-10 - corrects productTaxonomyL1, adds L2, L3\n   2018-01-08 - adds new fields for Sprint 2 (productType, newsEventType, otherType)\n*/\n// HASHING FUNCTION\nfunction hashTheFacet(doc, facetToProcess, id) {\n    var facetValues;\n    var newHashedFacetValue = [];\n    var newHashedFacetFQ = [];\n    // get the values of the facet to be processed\n    facetValues = doc.getFieldValues(facetToProcess);\n    //logger.info(\"hashTheFacet(\" + facetToProcess + \")\");\n    // loop through the facet values and create hashes for them\n    facetValues.forEach(function (f) {\n\t\tif (f  != null){\n\t\t\tif (f.length!==0){\n\t\t\t\tvar newHashedFacet = f.hashCode();\t\t\n\t\t\t\tnewHashedFacetValue.push(\"p\" + newHashedFacet + \"$$$\" + f);\n\t\t\t\tnewHashedFacetFQ.push(\"p\" + newHashedFacet);\n\t\t\t}\n\t\t}\n    });\n    // return the hashed items\n    return [newHashedFacetValue, newHashedFacetFQ];\n}\n\nfunction computeLanguages(doc, id) {\n    // get the list of languages from the document\n    var langsfromdoc = doc.getFieldValues(\"language_is\");\n    var languages = [];\n    //logger.info(\"langsfromdoc \" + langsfromdoc);\n    //logger.info(\"Num of languages: \" + langsfromdoc.length);\n    // iterate through the languages and put them into an array\n    for each(var lang in langsfromdoc) {\n            switch (lang) {\n            case \"-1\":\n                languages.push('EN');\n                break;\n            case \"-2\":\n                languages.push('FR');\n                break;\n            case \"-3\":\n                languages.push('DE');\n                break;\n            case \"-4\":\n                languages.push('IT');\n                break;\n            case \"-5\":\n                languages.push('ES');\n                break;\n            case \"-6\":\n                languages.push('PT');\n                break;\n            case \"-7\":\n                languages.push('ZH');\n                break;\n            case \"-8\":\n                languages.push('TW');\n                break;\n            case \"-9\":\n                languages.push('KO');\n                break;\n            case \"-10\":\n                languages.push('JP');\n                break;\n            case \"-20\":\n                languages.push('RU');\n                break;\n            case \"-22\":\n                languages.push('PL');\n                break;\n            case \"-24\":\n                languages.push('FI');\n                break;\n            case \"-25\":\n                languages.push('NO');\n                break;\n            case \"-26\":\n                languages.push('SV');\n                break;\n            case \"-27\":\n                languages.push('CS');\n                break;\n            case \"-28\":\n                languages.push('DK');\n                break;\n            case \"-29\":\n                languages.push('NL');\n                break;\n            case \"-30\":\n                languages.push('TR');\n                break;\n            case \"-31\":\n                languages.push('HU');\n                break;\n            case \"-32\":\n                languages.push('TH');\n                break;\n            case \"-34\":\n                languages.push('VI');\n                break;\n            }\n        }\n        // if no languages found, try them all, to be safe\n    if (languages.length === 0) {\n        //logger.info(\"************* no languages found *******************\");\n        languages = ['EN', 'FR', 'DE', 'IT', 'ES', 'PT', 'ZH', 'TW', 'KO', 'JP', 'RU', 'PL', 'FI', 'NO', 'SV', 'CS', 'DK', 'NL', 'TR', 'HU', 'TH', 'VI'];\n    }\n    return languages;\n}\n// MAIN FUNCTION\nfunction (doc) {\n    //var facetsToHash; // array that we'll populate with our hashes\n    var id = doc.getId();\n    // list of facet fields that need to be processed\n    var listOfFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"parkerDivisionName_ss\", \"productTaxonomyL1_s\", \"productTaxonomyL2_s\", \"productTaxonomyL3_s\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"brand_ss\", \"cadType_ss\", \"product_ss\", \"languageName_ss\", \"fileType_ss\", \"eventYear_i\", \"newsYear_i\"];\n    // list of facet fields that are localized to other languages and need to be processed\n    var listOfLangFacets = [\"siteSection_ss\", \"siteSubSection_ss\", \"productType_ss\", \"newsEventsType_ss\", \"otherType_ss\", \"market_ss\", \"technology_ss\", \"supportType_ss\", \"supportResourceType_ss\", \"product_ss\", \"productTaxonomyL1_s\",\"productTaxonomyL2_s\",\"productTaxonomyL3_s\"];\n    var languages = []; // used to track the applicable languages\n    // if there are any language-based facets, compute the languages for this document\n    //logger.info(\"This is the list of LangFacets \" + listOfLangFacets);\n    if (listOfLangFacets) {\n        languages = computeLanguages(doc, id);\n        //logger.info(\"Finished computeLanguages(doc, id): \" + doc + \" , \" + id);\n        //logger.info(\"Resulting languages are \" + languages);\n    }\n    // process each facet from \"listOfFacets\" and store the values on to the document\n    for each(var facet in listOfFacets) {\n            //logger.info(\"The facet is \" + facet);\n            var location = facet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n            var tmpFacet = facet; // store the full facet name temporarily\n            var thisFacetShort = tmpFacet.substring(0, location); // take the facet name without the _ and data type\n            var facetsToHash = hashTheFacet(doc, facet, id); // calculate the hashes\n            //logger.info(\"facetsToHash \" + facetsToHash);\n            // takes the function output and puts into a string and then array\n            //logger.info(Object.prototype.toString.call(facetsToHash));\n            var facetsWithHashes = facetsToHash[0];\n            //logger.info(facetsWithHashes);\n            if (facetsWithHashes.length!==0) {\n                var facetsWithHashesArray = facetsWithHashes;\n                for each(var fwh in facetsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_facet\", fwh); // set the _facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array  \n            var fqsWithHashes = facetsToHash[1];\n            if (fqsWithHashes.length!==0) {\n                var fqsWithHashesArray = fqsWithHashes;\n                for each(var fqs in fqsWithHashesArray) {\n                    doc.addField(thisFacetShort + \"_fq\", fqs); // set the _fq field on the document\n                }\n            }\n        }\n        // process each facet from \"listOfLangFacets\" and store the values on the document\n    for each(var langFacet in listOfLangFacets) {\n        var location = langFacet.lastIndexOf(\"_\"); // find where the \"_\" is in the facet name so we can take the name out\n        var thisFacetVarType = langFacet.substring(location + 1, langFacet.length); // take the data type from the facet name\n        for each(var lang in languages) {\n            var langFacetShort = langFacet.substring(0, location); // clear the field from previous runs\n            var thisFacetFull = langFacetShort + lang + \"_\" + thisFacetVarType; // compute the name of the full facet to process hashes for\n            langFacetShort = langFacetShort + lang; // compute the prefix of the facet name that will be written back to the document\n            var facetsToHash = hashTheFacet(doc, thisFacetFull, id); // calculate the hashes\n            // takes the function output and puts into a string and then array      \n            var facetsWithHashesLG = facetsToHash[0];\n            //logger.info(\"facetsWithHashesLG: \" + facetsWithHashesLG);\n            if (facetsWithHashesLG.length!==0) {\n                var facetsWithHashesLGArray = facetsWithHashesLG;\n                for each(var lg in facetsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_facet\", lg); // set the XX_facet field on the document\n                }\n            }\n            // takes the function output and puts into a string and then array      \n            var fqsWithHashesLG = facetsToHash[1];\n            if (fqsWithHashesLG.length!==0) {\n                var fqsWithHashesLGArray = fqsWithHashesLG;\n                for each(var fqlg in fqsWithHashesLGArray) {\n                    doc.addField(langFacetShort + \"_fq\", fqlg); // set the XX_fq field on the document\n                }\n            }\n        }\n    }\n    return doc;\n}",
    "type" : "javascript-index",
    "skip" : false,
    "label" : "Facet Hashing",
    "secretSourceStageId" : "62n"
  }, {
    "type" : "field-mapping",
    "id" : "o",
    "mappings" : [ {
      "source" : "title_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleCS_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleDA_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleNL_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleEN_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleFI_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleFR_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleDE_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleHU_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleIT_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleJP_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleKO_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleNO_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titlePL_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titlePT_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleRU_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleZH_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleES_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleSV_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleTH_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleTW_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleTR_t",
      "target" : "title_s",
      "operation" : "copy"
    }, {
      "source" : "titleVI_t",
      "target" : "title_s",
      "operation" : "copy"
    } ],
    "reservedFieldsMappingAllowed" : false,
    "type" : "field-mapping",
    "skip" : false,
    "label" : "field-mapping",
    "secretSourceStageId" : "o"
  }, {
    "type" : "javascript-index",
    "id" : "7wf",
    "script" : "function (doc){\n   \n    var filemountParent = \"/OpenText/StaticContent/ParkerCom\";\n  \n    var PDFParser = org.apache.tika.parser.pdf.PDFParser;\n    var Metadata = org.apache.tika.metadata.Metadata;\n    var FileInputStream = java.io.FileInputStream;\n    var BodyContentHandler = org.apache.tika.sax.BodyContentHandler;\n    var ParseContext = org.apache.tika.parser.ParseContext;\n  \n  \n\tfunction parsePdf() {\n\t\tvar parser,metadata, handler, context, map;\n\t\t\n\n            var filePath = doc.getFirstFieldValue(\"urlKeyword_s\");\n\n            doc.setField('temp_s',filePath);\n            doc.removeFields('_parseError_s');\n            doc.removeFields('_PDFPath_s');\n            doc.removeFields('_parsedPDF_s');\n           \n\t\t\tvar input = null;\n            try{\n            \t\tinput = new FileInputStream(filemountParent + filePath);\n\t\t\t\t\tparser = new PDFParser();\n\t\t\t\t\tmetadata = new Metadata();\n\t\t\t\t\thandler = new BodyContentHandler(-1);\n\t\t\t\t\tcontext = new ParseContext();\n\t\t\t\t\tparser.parse(input, handler, metadata, context);\n\t\t\t\t\tdoc.setField('pdf_file_t', handler.toString());              \n                   \t} catch(err) {\n                        logger.error(err);\n                        doc.setField('_parseError_s',err);\n\t\t\t\t\t\tdoc.setField('_PDFPath_s',filemountParent + filePath);\n                        doc.setField('_parsedPDF_s',\"failed\");\n                  \t} finally {\n                      \tif(null != input) {\n\t\t\t\t\t\t  \tdoc.setField('_parsedPDF_s',\"yes\");\n                          \tinput.close();\n                      \t}\n                 \t}\n\n          \n\t\t\t\t\n      \n      return doc;\n      \n\t}\n  \n  return parsePdf();\n  \n}",
    "type" : "javascript-index",
    "skip" : true,
    "label" : "Supporting PDF File Parser",
    "condition" : "doc.getFirstFieldValue('otAssetType_s') == \"Static File\"",
    "secretSourceStageId" : "7wf"
  }, {
    "type" : "solr-index",
    "id" : "379180d2-ef8e-4643-ae87-4689fab56946",
    "enforceSchema" : true,
    "dateFormats" : [ ],
    "params" : [ ],
    "bufferDocsForSolr" : false,
    "type" : "solr-index",
    "skip" : false,
    "label" : "solr-index",
    "secretSourceStageId" : "379180d2-ef8e-4643-ae87-4689fab56946"
  } ],
  "properties" : {
    "secretSourcePipelineId" : "ParkerDotComMain-default"
  }
} ]